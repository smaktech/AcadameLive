{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { sum, map, filter, uniqBy } from 'lodash'; // utils\n\nimport axios from '../../utils/axios'; //\n\nimport { dispatch } from '../store'; // ----------------------------------------------------------------------\n\nconst initialState = {\n  isLoading: false,\n  error: null,\n  products: [],\n  product: null,\n  sortBy: null,\n  filters: {\n    gender: [],\n    category: 'All',\n    colors: [],\n    priceRange: '',\n    rating: ''\n  },\n  checkout: {\n    activeStep: 0,\n    cart: [],\n    subtotal: 0,\n    total: 0,\n    discount: 0,\n    shipping: 0,\n    billing: null\n  }\n};\nconst slice = createSlice({\n  name: 'product',\n  initialState,\n  reducers: {\n    // START LOADING\n    startLoading(state) {\n      state.isLoading = true;\n    },\n\n    // HAS ERROR\n    hasError(state, action) {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n\n    // GET PRODUCTS\n    getProductsSuccess(state, action) {\n      state.isLoading = false;\n      state.products = action.payload;\n    },\n\n    // GET PRODUCT\n    getProductSuccess(state, action) {\n      state.isLoading = false;\n      state.product = action.payload;\n    },\n\n    //  SORT & FILTER PRODUCTS\n    sortByProducts(state, action) {\n      state.sortBy = action.payload;\n    },\n\n    filterProducts(state, action) {\n      state.filters.gender = action.payload.gender;\n      state.filters.category = action.payload.category;\n      state.filters.colors = action.payload.colors;\n      state.filters.priceRange = action.payload.priceRange;\n      state.filters.rating = action.payload.rating;\n    },\n\n    // CHECKOUT\n    getCart(state, action) {\n      const cart = action.payload;\n      const subtotal = sum(cart.map(cartItem => cartItem.price * cartItem.quantity));\n      const discount = cart.length === 0 ? 0 : state.checkout.discount;\n      const shipping = cart.length === 0 ? 0 : state.checkout.shipping;\n      const billing = cart.length === 0 ? null : state.checkout.billing;\n      state.checkout.cart = cart;\n      state.checkout.discount = discount;\n      state.checkout.shipping = shipping;\n      state.checkout.billing = billing;\n      state.checkout.subtotal = subtotal;\n      state.checkout.total = subtotal - discount;\n    },\n\n    addCart(state, action) {\n      const product = action.payload;\n      const isEmptyCart = state.checkout.cart.length === 0;\n\n      if (isEmptyCart) {\n        state.checkout.cart = [...state.checkout.cart, product];\n      } else {\n        state.checkout.cart = map(state.checkout.cart, _product => {\n          const isExisted = _product.id === product.id;\n\n          if (isExisted) {\n            return { ..._product,\n              quantity: _product.quantity + 1\n            };\n          }\n\n          return _product;\n        });\n      }\n\n      state.checkout.cart = uniqBy([...state.checkout.cart, product], 'id');\n    },\n\n    deleteCart(state, action) {\n      const updateCart = filter(state.checkout.cart, item => item.id !== action.payload);\n      state.checkout.cart = updateCart;\n    },\n\n    resetCart(state) {\n      state.checkout.activeStep = 0;\n      state.checkout.cart = [];\n      state.checkout.total = 0;\n      state.checkout.subtotal = 0;\n      state.checkout.discount = 0;\n      state.checkout.shipping = 0;\n      state.checkout.billing = null;\n    },\n\n    onBackStep(state) {\n      state.checkout.activeStep -= 1;\n    },\n\n    onNextStep(state) {\n      state.checkout.activeStep += 1;\n    },\n\n    onGotoStep(state, action) {\n      const goToStep = action.payload;\n      state.checkout.activeStep = goToStep;\n    },\n\n    increaseQuantity(state, action) {\n      const productId = action.payload;\n      const updateCart = map(state.checkout.cart, product => {\n        if (product.id === productId) {\n          return { ...product,\n            quantity: product.quantity + 1\n          };\n        }\n\n        return product;\n      });\n      state.checkout.cart = updateCart;\n    },\n\n    decreaseQuantity(state, action) {\n      const productId = action.payload;\n      const updateCart = map(state.checkout.cart, product => {\n        if (product.id === productId) {\n          return { ...product,\n            quantity: product.quantity - 1\n          };\n        }\n\n        return product;\n      });\n      state.checkout.cart = updateCart;\n    },\n\n    createBilling(state, action) {\n      state.checkout.billing = action.payload;\n    },\n\n    applyDiscount(state, action) {\n      const discount = action.payload;\n      state.checkout.discount = discount;\n      state.checkout.total = state.checkout.subtotal - discount;\n    },\n\n    applyShipping(state, action) {\n      const shipping = action.payload;\n      state.checkout.shipping = shipping;\n      state.checkout.total = state.checkout.subtotal - state.checkout.discount + shipping;\n    }\n\n  }\n}); // Reducer\n\nexport default slice.reducer; // Actions\n\nexport const {\n  getCart,\n  addCart,\n  resetCart,\n  onGotoStep,\n  onBackStep,\n  onNextStep,\n  deleteCart,\n  createBilling,\n  applyShipping,\n  applyDiscount,\n  increaseQuantity,\n  decreaseQuantity,\n  sortByProducts,\n  filterProducts\n} = slice.actions; // ----------------------------------------------------------------------\n\nexport function getProducts() {\n  return async () => {\n    dispatch(slice.actions.startLoading());\n\n    try {\n      const response = await axios.get('/api/products');\n      dispatch(slice.actions.getProductsSuccess(response.data.products));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n} // ----------------------------------------------------------------------\n\nexport function getProduct(name) {\n  return async () => {\n    dispatch(slice.actions.startLoading());\n\n    try {\n      const response = await axios.get('/api/products/product', {\n        params: {\n          name\n        }\n      });\n      dispatch(slice.actions.getProductSuccess(response.data.product));\n    } catch (error) {\n      console.error(error);\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n}","map":{"version":3,"sources":["D:/Projects/Cdss apps/Final version/admin/src/redux/slices/product.js"],"names":["createSlice","sum","map","filter","uniqBy","axios","dispatch","initialState","isLoading","error","products","product","sortBy","filters","gender","category","colors","priceRange","rating","checkout","activeStep","cart","subtotal","total","discount","shipping","billing","slice","name","reducers","startLoading","state","hasError","action","payload","getProductsSuccess","getProductSuccess","sortByProducts","filterProducts","getCart","cartItem","price","quantity","length","addCart","isEmptyCart","_product","isExisted","id","deleteCart","updateCart","item","resetCart","onBackStep","onNextStep","onGotoStep","goToStep","increaseQuantity","productId","decreaseQuantity","createBilling","applyDiscount","applyShipping","reducer","actions","getProducts","response","get","data","getProduct","params","console"],"mappings":"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","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\nimport { sum, map, filter, uniqBy } from 'lodash';\n// utils\nimport axios from '../../utils/axios';\n//\nimport { dispatch } from '../store';\n\n// ----------------------------------------------------------------------\n\nconst initialState = {\n  isLoading: false,\n  error: null,\n  products: [],\n  product: null,\n  sortBy: null,\n  filters: {\n    gender: [],\n    category: 'All',\n    colors: [],\n    priceRange: '',\n    rating: '',\n  },\n  checkout: {\n    activeStep: 0,\n    cart: [],\n    subtotal: 0,\n    total: 0,\n    discount: 0,\n    shipping: 0,\n    billing: null,\n  },\n};\n\nconst slice = createSlice({\n  name: 'product',\n  initialState,\n  reducers: {\n    // START LOADING\n    startLoading(state) {\n      state.isLoading = true;\n    },\n\n    // HAS ERROR\n    hasError(state, action) {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n\n    // GET PRODUCTS\n    getProductsSuccess(state, action) {\n      state.isLoading = false;\n      state.products = action.payload;\n    },\n\n    // GET PRODUCT\n    getProductSuccess(state, action) {\n      state.isLoading = false;\n      state.product = action.payload;\n    },\n\n    //  SORT & FILTER PRODUCTS\n    sortByProducts(state, action) {\n      state.sortBy = action.payload;\n    },\n\n    filterProducts(state, action) {\n      state.filters.gender = action.payload.gender;\n      state.filters.category = action.payload.category;\n      state.filters.colors = action.payload.colors;\n      state.filters.priceRange = action.payload.priceRange;\n      state.filters.rating = action.payload.rating;\n    },\n\n    // CHECKOUT\n    getCart(state, action) {\n      const cart = action.payload;\n\n      const subtotal = sum(cart.map((cartItem) => cartItem.price * cartItem.quantity));\n      const discount = cart.length === 0 ? 0 : state.checkout.discount;\n      const shipping = cart.length === 0 ? 0 : state.checkout.shipping;\n      const billing = cart.length === 0 ? null : state.checkout.billing;\n\n      state.checkout.cart = cart;\n      state.checkout.discount = discount;\n      state.checkout.shipping = shipping;\n      state.checkout.billing = billing;\n      state.checkout.subtotal = subtotal;\n      state.checkout.total = subtotal - discount;\n    },\n\n    addCart(state, action) {\n      const product = action.payload;\n      const isEmptyCart = state.checkout.cart.length === 0;\n\n      if (isEmptyCart) {\n        state.checkout.cart = [...state.checkout.cart, product];\n      } else {\n        state.checkout.cart = map(state.checkout.cart, (_product) => {\n          const isExisted = _product.id === product.id;\n          if (isExisted) {\n            return {\n              ..._product,\n              quantity: _product.quantity + 1,\n            };\n          }\n          return _product;\n        });\n      }\n      state.checkout.cart = uniqBy([...state.checkout.cart, product], 'id');\n    },\n\n    deleteCart(state, action) {\n      const updateCart = filter(state.checkout.cart, (item) => item.id !== action.payload);\n\n      state.checkout.cart = updateCart;\n    },\n\n    resetCart(state) {\n      state.checkout.activeStep = 0;\n      state.checkout.cart = [];\n      state.checkout.total = 0;\n      state.checkout.subtotal = 0;\n      state.checkout.discount = 0;\n      state.checkout.shipping = 0;\n      state.checkout.billing = null;\n    },\n\n    onBackStep(state) {\n      state.checkout.activeStep -= 1;\n    },\n\n    onNextStep(state) {\n      state.checkout.activeStep += 1;\n    },\n\n    onGotoStep(state, action) {\n      const goToStep = action.payload;\n      state.checkout.activeStep = goToStep;\n    },\n\n    increaseQuantity(state, action) {\n      const productId = action.payload;\n      const updateCart = map(state.checkout.cart, (product) => {\n        if (product.id === productId) {\n          return {\n            ...product,\n            quantity: product.quantity + 1,\n          };\n        }\n        return product;\n      });\n\n      state.checkout.cart = updateCart;\n    },\n\n    decreaseQuantity(state, action) {\n      const productId = action.payload;\n      const updateCart = map(state.checkout.cart, (product) => {\n        if (product.id === productId) {\n          return {\n            ...product,\n            quantity: product.quantity - 1,\n          };\n        }\n        return product;\n      });\n\n      state.checkout.cart = updateCart;\n    },\n\n    createBilling(state, action) {\n      state.checkout.billing = action.payload;\n    },\n\n    applyDiscount(state, action) {\n      const discount = action.payload;\n      state.checkout.discount = discount;\n      state.checkout.total = state.checkout.subtotal - discount;\n    },\n\n    applyShipping(state, action) {\n      const shipping = action.payload;\n      state.checkout.shipping = shipping;\n      state.checkout.total = state.checkout.subtotal - state.checkout.discount + shipping;\n    },\n  },\n});\n\n// Reducer\nexport default slice.reducer;\n\n// Actions\nexport const {\n  getCart,\n  addCart,\n  resetCart,\n  onGotoStep,\n  onBackStep,\n  onNextStep,\n  deleteCart,\n  createBilling,\n  applyShipping,\n  applyDiscount,\n  increaseQuantity,\n  decreaseQuantity,\n  sortByProducts,\n  filterProducts,\n} = slice.actions;\n\n// ----------------------------------------------------------------------\n\nexport function getProducts() {\n  return async () => {\n    dispatch(slice.actions.startLoading());\n    try {\n      const response = await axios.get('/api/products');\n      dispatch(slice.actions.getProductsSuccess(response.data.products));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n}\n\n// ----------------------------------------------------------------------\n\nexport function getProduct(name) {\n  return async () => {\n    dispatch(slice.actions.startLoading());\n    try {\n      const response = await axios.get('/api/products/product', {\n        params: { name },\n      });\n      dispatch(slice.actions.getProductSuccess(response.data.product));\n    } catch (error) {\n      console.error(error);\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n}\n"]},"metadata":{},"sourceType":"module"}