{"ast":null,"code":"import _objectSpread from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useSnackbar}from'notistack';import{useRef,useState}from'react';import{Link as RouterLink,useNavigate}from'react-router-dom';// @mui\nimport{alpha}from'@mui/material/styles';import{Box,Divider,MenuItem,Typography,Stack}from'@mui/material';// routes\nimport{PATH_DASHBOARD}from'../../../routes/paths';// hooks\nimport useAuth from'../../../hooks/useAuth';import useIsMountedRef from'../../../hooks/useIsMountedRef';// components\nimport MyAvatar from'../../../components/MyAvatar';import MenuPopover from'../../../components/MenuPopover';import{IconButtonAnimate}from'../../../components/animate';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MENU_OPTIONS=[{label:'Home',linkTo:'/'},{label:'Profile',linkTo:PATH_DASHBOARD.user.profile},{label:'Settings',linkTo:PATH_DASHBOARD.user.account}];// ----------------------------------------------------------------------\nexport default function AccountPopover(){var navigate=useNavigate();var anchorRef=useRef(null);var _useAuth=useAuth(),user=_useAuth.user,logout=_useAuth.logout;var isMountedRef=useIsMountedRef();var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var handleOpen=function handleOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);};var handleLogout=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return logout===null||logout===void 0?void 0:logout();case 3:if(isMountedRef.current){navigate('/');handleClose();}_context.next=10;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);console.error(_context.t0);enqueueSnackbar('Unable to logout',{variant:'error'});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return function handleLogout(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(IconButtonAnimate,{ref:anchorRef,onClick:handleOpen,sx:_objectSpread({padding:0,width:44,height:44},open&&{'&:before':{zIndex:1,content:\"''\",width:'100%',height:'100%',borderRadius:'50%',position:'absolute',bgcolor:function bgcolor(theme){return alpha(theme.palette.grey[900],0.8);}}}),children:/*#__PURE__*/_jsx(MyAvatar,{})}),/*#__PURE__*/_jsxs(MenuPopover,{open:open,onClose:handleClose,anchorEl:anchorRef.current,sx:{width:220},children:[/*#__PURE__*/_jsxs(Box,{sx:{my:1.5,px:2.5},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",noWrap:true,children:user===null||user===void 0?void 0:user.displayName}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{color:'text.secondary'},noWrap:true,children:user===null||user===void 0?void 0:user.email})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Stack,{spacing:0.5,sx:{p:1},children:MENU_OPTIONS.map(function(option){return/*#__PURE__*/_jsx(MenuItem,{to:option.linkTo,component:RouterLink,onClick:handleClose,sx:{typography:'body2',py:1,px:2,borderRadius:1},children:option.label},option.label);})}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(MenuItem,{onClick:handleLogout,sx:{typography:'body2',py:1,px:2,borderRadius:1,m:1},children:\"Logout\"})]})]});}","map":{"version":3,"sources":["D:/Projects/Cdss apps/Final version/admin/src/layouts/dashboard/header/AccountPopover.js"],"names":["useSnackbar","useRef","useState","Link","RouterLink","useNavigate","alpha","Box","Divider","MenuItem","Typography","Stack","PATH_DASHBOARD","useAuth","useIsMountedRef","MyAvatar","MenuPopover","IconButtonAnimate","MENU_OPTIONS","label","linkTo","user","profile","account","AccountPopover","navigate","anchorRef","logout","isMountedRef","enqueueSnackbar","open","setOpen","handleOpen","handleClose","handleLogout","current","console","error","variant","padding","width","height","zIndex","content","borderRadius","position","bgcolor","theme","palette","grey","my","px","displayName","color","email","p","map","option","typography","py","m"],"mappings":"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","sourcesContent":["import { useSnackbar } from 'notistack';\nimport { useRef, useState } from 'react';\nimport { Link as RouterLink, useNavigate } from 'react-router-dom';\n// @mui\nimport { alpha } from '@mui/material/styles';\nimport { Box, Divider, MenuItem, Typography, Stack } from '@mui/material';\n// routes\nimport { PATH_DASHBOARD } from '../../../routes/paths';\n// hooks\nimport useAuth from '../../../hooks/useAuth';\nimport useIsMountedRef from '../../../hooks/useIsMountedRef';\n// components\nimport MyAvatar from '../../../components/MyAvatar';\nimport MenuPopover from '../../../components/MenuPopover';\nimport { IconButtonAnimate } from '../../../components/animate';\n\n// ----------------------------------------------------------------------\n\nconst MENU_OPTIONS = [\n  {\n    label: 'Home',\n    linkTo: '/',\n  },\n  {\n    label: 'Profile',\n    linkTo: PATH_DASHBOARD.user.profile,\n  },\n  {\n    label: 'Settings',\n    linkTo: PATH_DASHBOARD.user.account,\n  },\n];\n\n// ----------------------------------------------------------------------\n\nexport default function AccountPopover() {\n  const navigate = useNavigate();\n  const anchorRef = useRef(null);\n  const { user, logout } = useAuth();\n  const isMountedRef = useIsMountedRef();\n  const { enqueueSnackbar } = useSnackbar();\n  const [open, setOpen] = useState(false);\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleLogout = async () => {\n    try {\n      await logout?.();\n      if (isMountedRef.current) {\n        navigate('/');\n        handleClose();\n      }\n    } catch (error) {\n      console.error(error);\n      enqueueSnackbar('Unable to logout', { variant: 'error' });\n    }\n  };\n\n  return (\n    <>\n      <IconButtonAnimate\n        ref={anchorRef}\n        onClick={handleOpen}\n        sx={{\n          padding: 0,\n          width: 44,\n          height: 44,\n          ...(open && {\n            '&:before': {\n              zIndex: 1,\n              content: \"''\",\n              width: '100%',\n              height: '100%',\n              borderRadius: '50%',\n              position: 'absolute',\n              bgcolor: (theme) => alpha(theme.palette.grey[900], 0.8),\n            },\n          }),\n        }}\n      >\n        <MyAvatar />\n      </IconButtonAnimate>\n\n      <MenuPopover open={open} onClose={handleClose} anchorEl={anchorRef.current} sx={{ width: 220 }}>\n        <Box sx={{ my: 1.5, px: 2.5 }}>\n          <Typography variant=\"subtitle1\" noWrap>\n            {user?.displayName}\n          </Typography>\n          <Typography variant=\"body2\" sx={{ color: 'text.secondary' }} noWrap>\n            {user?.email}\n          </Typography>\n        </Box>\n\n        <Divider />\n        <Stack spacing={0.5} sx={{ p: 1 }}>\n          {MENU_OPTIONS.map((option) => (\n            <MenuItem\n              key={option.label}\n              to={option.linkTo}\n              component={RouterLink}\n              onClick={handleClose}\n              sx={{ typography: 'body2', py: 1, px: 2, borderRadius: 1 }}\n            >\n              {option.label}\n            </MenuItem>\n          ))}\n        </Stack>\n        <Divider />\n\n        <MenuItem onClick={handleLogout} sx={{ typography: 'body2', py: 1, px: 2, borderRadius: 1, m: 1 }}>\n          Logout\n        </MenuItem>\n      </MenuPopover>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}