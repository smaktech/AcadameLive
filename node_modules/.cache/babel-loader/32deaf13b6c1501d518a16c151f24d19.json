{"ast":null,"code":"import _objectSpread from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import*as Yup from'yup';import{useState}from'react';import{useSnackbar}from'notistack';import{Link as RouterLink}from'react-router-dom';import{useFormik,Form,FormikProvider}from'formik';// @mui\nimport{Link,Stack,Alert,Checkbox,TextField,IconButton,InputAdornment,FormControlLabel}from'@mui/material';import{LoadingButton}from'@mui/lab';// routes\nimport{PATH_AUTH}from'../../../routes/paths';// hooks\nimport useAuth from'../../../hooks/useAuth';import useIsMountedRef from'../../../hooks/useIsMountedRef';// components\nimport Iconify from'../../../components/Iconify';import{IconButtonAnimate}from'../../../components/animate';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function LoginForm(){var _useAuth=useAuth(),login=_useAuth.login;var isMountedRef=useIsMountedRef();var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar,closeSnackbar=_useSnackbar.closeSnackbar;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showPassword=_useState2[0],setShowPassword=_useState2[1];var LoginSchema=Yup.object().shape({email:Yup.string().email('Email must be a valid email address').required('Email is required'),password:Yup.string().required('Password is required')});var formik=useFormik({initialValues:{email:'',password:'',remember:true},validationSchema:LoginSchema,onSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values,_ref){var setErrors,setSubmitting,resetForm;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setErrors=_ref.setErrors,setSubmitting=_ref.setSubmitting,resetForm=_ref.resetForm;_context.prev=1;_context.next=4;return login(values.email,values.password);case 4:enqueueSnackbar('Login success',{variant:'success',action:function action(key){return/*#__PURE__*/_jsx(IconButtonAnimate,{size:\"small\",onClick:function onClick(){return closeSnackbar(key);},children:/*#__PURE__*/_jsx(Iconify,{icon:'eva:close-fill'})});}});if(isMountedRef.current){setSubmitting(false);}_context.next=13;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.error(_context.t0);resetForm();if(isMountedRef.current){setSubmitting(false);setErrors({afterSubmit:_context.t0.message});}case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));function onSubmit(_x,_x2){return _onSubmit.apply(this,arguments);}return onSubmit;}()});var errors=formik.errors,touched=formik.touched,values=formik.values,isSubmitting=formik.isSubmitting,handleSubmit=formik.handleSubmit,getFieldProps=formik.getFieldProps;var handleShowPassword=function handleShowPassword(){setShowPassword(function(show){return!show;});};return/*#__PURE__*/_jsx(FormikProvider,{value:formik,children:/*#__PURE__*/_jsxs(Form,{autoComplete:\"off\",noValidate:true,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Stack,{spacing:3,children:[errors.afterSubmit&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:errors.afterSubmit}),/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({fullWidth:true,autoComplete:\"username\",type:\"email\",label:\"Email address\"},getFieldProps('email')),{},{error:Boolean(touched.email&&errors.email),helperText:touched.email&&errors.email})),/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({fullWidth:true,autoComplete:\"current-password\",type:showPassword?'text':'password',label:\"Password\"},getFieldProps('password')),{},{InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{onClick:handleShowPassword,edge:\"end\",children:/*#__PURE__*/_jsx(Iconify,{icon:showPassword?'eva:eye-fill':'eva:eye-off-fill'})})})},error:Boolean(touched.password&&errors.password),helperText:touched.password&&errors.password}))]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",alignItems:\"center\",justifyContent:\"space-between\",sx:{my:2},children:[/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,_objectSpread(_objectSpread({},getFieldProps('remember')),{},{checked:values.remember})),label:\"Remember me\"}),/*#__PURE__*/_jsx(Link,{component:RouterLink,variant:\"subtitle2\",to:PATH_AUTH.resetPassword,children:\"Forgot password?\"})]}),/*#__PURE__*/_jsx(LoadingButton,{fullWidth:true,size:\"large\",type:\"submit\",variant:\"contained\",loading:isSubmitting,children:\"Login\"})]})});}","map":{"version":3,"sources":["D:/Projects/Cdss apps/Final version/admin/src/sections/auth/login/LoginForm.js"],"names":["Yup","useState","useSnackbar","Link","RouterLink","useFormik","Form","FormikProvider","Stack","Alert","Checkbox","TextField","IconButton","InputAdornment","FormControlLabel","LoadingButton","PATH_AUTH","useAuth","useIsMountedRef","Iconify","IconButtonAnimate","LoginForm","login","isMountedRef","enqueueSnackbar","closeSnackbar","showPassword","setShowPassword","LoginSchema","object","shape","email","string","required","password","formik","initialValues","remember","validationSchema","onSubmit","values","setErrors","setSubmitting","resetForm","variant","action","key","current","console","error","afterSubmit","message","errors","touched","isSubmitting","handleSubmit","getFieldProps","handleShowPassword","show","Boolean","endAdornment","my","resetPassword"],"mappings":"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","sourcesContent":["import * as Yup from 'yup';\nimport { useState } from 'react';\nimport { useSnackbar } from 'notistack';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { useFormik, Form, FormikProvider } from 'formik';\n// @mui\nimport { Link, Stack, Alert, Checkbox, TextField, IconButton, InputAdornment, FormControlLabel } from '@mui/material';\nimport { LoadingButton } from '@mui/lab';\n// routes\nimport { PATH_AUTH } from '../../../routes/paths';\n// hooks\nimport useAuth from '../../../hooks/useAuth';\nimport useIsMountedRef from '../../../hooks/useIsMountedRef';\n// components\nimport Iconify from '../../../components/Iconify';\nimport { IconButtonAnimate } from '../../../components/animate';\n\n// ----------------------------------------------------------------------\n\nexport default function LoginForm() {\n  const { login } = useAuth();\n  const isMountedRef = useIsMountedRef();\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n  const [showPassword, setShowPassword] = useState(false);\n\n  const LoginSchema = Yup.object().shape({\n    email: Yup.string().email('Email must be a valid email address').required('Email is required'),\n    password: Yup.string().required('Password is required'),\n  });\n\n  const formik = useFormik({\n    initialValues: {\n      email: '',\n      password: '',\n      remember: true,\n    },\n    validationSchema: LoginSchema,\n    onSubmit: async (values, { setErrors, setSubmitting, resetForm }) => {\n      try {\n        await login(values.email, values.password);\n        enqueueSnackbar('Login success', {\n          variant: 'success',\n          action: (key) => (\n            <IconButtonAnimate size=\"small\" onClick={() => closeSnackbar(key)}>\n              <Iconify icon={'eva:close-fill'} />\n            </IconButtonAnimate>\n          ),\n        });\n        if (isMountedRef.current) {\n          setSubmitting(false);\n        }\n      } catch (error) {\n        console.error(error);\n        resetForm();\n        if (isMountedRef.current) {\n          setSubmitting(false);\n          setErrors({ afterSubmit: error.message });\n        }\n      }\n    },\n  });\n\n  const { errors, touched, values, isSubmitting, handleSubmit, getFieldProps } = formik;\n\n  const handleShowPassword = () => {\n    setShowPassword((show) => !show);\n  };\n\n  return (\n    <FormikProvider value={formik}>\n      <Form autoComplete=\"off\" noValidate onSubmit={handleSubmit}>\n        <Stack spacing={3}>\n          {errors.afterSubmit && <Alert severity=\"error\">{errors.afterSubmit}</Alert>}\n\n          <TextField\n            fullWidth\n            autoComplete=\"username\"\n            type=\"email\"\n            label=\"Email address\"\n            {...getFieldProps('email')}\n            error={Boolean(touched.email && errors.email)}\n            helperText={touched.email && errors.email}\n          />\n\n          <TextField\n            fullWidth\n            autoComplete=\"current-password\"\n            type={showPassword ? 'text' : 'password'}\n            label=\"Password\"\n            {...getFieldProps('password')}\n            InputProps={{\n              endAdornment: (\n                <InputAdornment position=\"end\">\n                  <IconButton onClick={handleShowPassword} edge=\"end\">\n                    <Iconify icon={showPassword ? 'eva:eye-fill' : 'eva:eye-off-fill'} />\n                  </IconButton>\n                </InputAdornment>\n              ),\n            }}\n            error={Boolean(touched.password && errors.password)}\n            helperText={touched.password && errors.password}\n          />\n        </Stack>\n\n        <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"space-between\" sx={{ my: 2 }}>\n          <FormControlLabel\n            control={<Checkbox {...getFieldProps('remember')} checked={values.remember} />}\n            label=\"Remember me\"\n          />\n\n          <Link component={RouterLink} variant=\"subtitle2\" to={PATH_AUTH.resetPassword}>\n            Forgot password?\n          </Link>\n        </Stack>\n\n        <LoadingButton fullWidth size=\"large\" type=\"submit\" variant=\"contained\" loading={isSubmitting}>\n          Login\n        </LoadingButton>\n      </Form>\n    </FormikProvider>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}