{"ast":null,"code":"import _regeneratorRuntime from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{createSlice}from'@reduxjs/toolkit';// utils\nimport axios from'../../utils/axios';//\nimport{dispatch}from'../store';// ----------------------------------------------------------------------\nfunction objFromArray(array){var key=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'id';return array.reduce(function(accumulator,current){accumulator[current[key]]=current;return accumulator;},{});}var initialState={isLoading:false,error:null,mails:{byId:{},allIds:[]},labels:[]};var slice=createSlice({name:'mail',initialState:initialState,reducers:{// START LOADING\nstartLoading:function startLoading(state){state.isLoading=true;},// HAS ERROR\nhasError:function hasError(state,action){state.isLoading=false;state.error=action.payload;},// GET LABELS\ngetLabelsSuccess:function getLabelsSuccess(state,action){state.isLoading=false;state.labels=action.payload;},// GET MAILS\ngetMailsSuccess:function getMailsSuccess(state,action){var mails=action.payload;state.isLoading=false;state.mails.byId=objFromArray(mails);state.mails.allIds=Object.keys(state.mails.byId);},// GET MAIL\ngetMailSuccess:function getMailSuccess(state,action){var mail=action.payload;state.mails.byId[mail.id]=mail;if(!state.mails.allIds.includes(mail.id)){state.mails.allIds.push(mail.id);}}}});// Reducer\nexport default slice.reducer;// ----------------------------------------------------------------------\nexport function getLabels(){return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(slice.actions.startLoading());_context.prev=1;_context.next=4;return axios.get('/api/mail/labels');case 4:response=_context.sent;dispatch(slice.actions.getLabelsSuccess(response.data.labels));_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);dispatch(slice.actions.hasError(_context.t0));case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));}// ----------------------------------------------------------------------\nexport function getMails(params){return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(slice.actions.startLoading());_context2.prev=1;_context2.next=4;return axios.get('/api/mail/mails',{params:params});case 4:response=_context2.sent;dispatch(slice.actions.getMailsSuccess(response.data.mails));_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);dispatch(slice.actions.hasError(_context2.t0));case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));}// ----------------------------------------------------------------------\nexport function getMail(mailId){return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch(slice.actions.startLoading());_context3.prev=1;_context3.next=4;return axios.get('/api/mail/mail',{params:{mailId:mailId}});case 4:response=_context3.sent;dispatch(slice.actions.getMailSuccess(response.data.mail));_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](1);dispatch(slice.actions.hasError(_context3.t0));case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[1,8]]);}));}","map":{"version":3,"sources":["D:/Projects/Cdss apps/Final version/admin/src/redux/slices/mail.js"],"names":["createSlice","axios","dispatch","objFromArray","array","key","reduce","accumulator","current","initialState","isLoading","error","mails","byId","allIds","labels","slice","name","reducers","startLoading","state","hasError","action","payload","getLabelsSuccess","getMailsSuccess","Object","keys","getMailSuccess","mail","id","includes","push","reducer","getLabels","actions","get","response","data","getMails","params","getMail","mailId"],"mappings":"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","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\n// utils\nimport axios from '../../utils/axios';\n//\nimport { dispatch } from '../store';\n\n// ----------------------------------------------------------------------\n\nfunction objFromArray(array, key = 'id') {\n  return array.reduce((accumulator, current) => {\n    accumulator[current[key]] = current;\n    return accumulator;\n  }, {});\n}\n\nconst initialState = {\n  isLoading: false,\n  error: null,\n  mails: { byId: {}, allIds: [] },\n  labels: [],\n};\n\nconst slice = createSlice({\n  name: 'mail',\n  initialState,\n  reducers: {\n    // START LOADING\n    startLoading(state) {\n      state.isLoading = true;\n    },\n\n    // HAS ERROR\n    hasError(state, action) {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n\n    // GET LABELS\n    getLabelsSuccess(state, action) {\n      state.isLoading = false;\n      state.labels = action.payload;\n    },\n\n    // GET MAILS\n    getMailsSuccess(state, action) {\n      const mails = action.payload;\n\n      state.isLoading = false;\n      state.mails.byId = objFromArray(mails);\n      state.mails.allIds = Object.keys(state.mails.byId);\n    },\n\n    // GET MAIL\n    getMailSuccess(state, action) {\n      const mail = action.payload;\n\n      state.mails.byId[mail.id] = mail;\n      if (!state.mails.allIds.includes(mail.id)) {\n        state.mails.allIds.push(mail.id);\n      }\n    },\n  },\n});\n\n// Reducer\nexport default slice.reducer;\n\n// ----------------------------------------------------------------------\n\nexport function getLabels() {\n  return async () => {\n    dispatch(slice.actions.startLoading());\n    try {\n      const response = await axios.get('/api/mail/labels');\n      dispatch(slice.actions.getLabelsSuccess(response.data.labels));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n}\n\n// ----------------------------------------------------------------------\n\nexport function getMails(params) {\n  return async () => {\n    dispatch(slice.actions.startLoading());\n    try {\n      const response = await axios.get('/api/mail/mails', { params });\n      dispatch(slice.actions.getMailsSuccess(response.data.mails));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n}\n\n// ----------------------------------------------------------------------\n\nexport function getMail(mailId) {\n  return async () => {\n    dispatch(slice.actions.startLoading());\n    try {\n      const response = await axios.get('/api/mail/mail', {\n        params: { mailId },\n      });\n      dispatch(slice.actions.getMailSuccess(response.data.mail));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n}\n"]},"metadata":{},"sourceType":"module"}