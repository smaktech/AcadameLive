{"ast":null,"code":"import _slicedToArray from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import{Navigate,useLocation}from'react-router-dom';// hooks\nimport useAuth from'../hooks/useAuth';// pages\nimport Login from'../pages/auth/Login';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function AuthGuard(_ref){var children=_ref.children;var _useAuth=useAuth(),isAuthenticated=_useAuth.isAuthenticated,isInitialized=_useAuth.isInitialized;var _useLocation=useLocation(),pathname=_useLocation.pathname;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),requestedLocation=_useState2[0],setRequestedLocation=_useState2[1];if(isInitialized&&!isAuthenticated){if(pathname!==requestedLocation){setRequestedLocation(pathname);}return/*#__PURE__*/_jsx(Login,{});}if(requestedLocation&&pathname!==requestedLocation){setRequestedLocation(null);return/*#__PURE__*/_jsx(Navigate,{to:requestedLocation});}return/*#__PURE__*/_jsx(_Fragment,{children:children});}","map":{"version":3,"sources":["D:/Projects/Cdss apps/Final version/admin/src/guards/AuthGuard.js"],"names":["useState","Navigate","useLocation","useAuth","Login","AuthGuard","children","isAuthenticated","isInitialized","pathname","requestedLocation","setRequestedLocation"],"mappings":"gKACA,OAASA,QAAT,KAAyB,OAAzB,CACA,OAASC,QAAT,CAAmBC,WAAnB,KAAsC,kBAAtC,CACA;AACA,MAAOC,CAAAA,OAAP,KAAoB,kBAApB,CACA;AACA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,CAEA;gGAKA,cAAe,SAASC,CAAAA,SAAT,MAAiC,IAAZC,CAAAA,QAAY,MAAZA,QAAY,CAC9C,aAA2CH,OAAO,EAAlD,CAAQI,eAAR,UAAQA,eAAR,CAAyBC,aAAzB,UAAyBA,aAAzB,CACA,iBAAqBN,WAAW,EAAhC,CAAQO,QAAR,cAAQA,QAAR,CACA,cAAkDT,QAAQ,CAAC,IAAD,CAA1D,wCAAOU,iBAAP,eAA0BC,oBAA1B,eAEA,GAAIH,aAAa,EAAI,CAACD,eAAtB,CAAuC,CACrC,GAAIE,QAAQ,GAAKC,iBAAjB,CAAoC,CAClCC,oBAAoB,CAACF,QAAD,CAApB,CACD,CACD,mBAAO,KAAC,KAAD,IAAP,CACD,CAED,GAAIC,iBAAiB,EAAID,QAAQ,GAAKC,iBAAtC,CAAyD,CACvDC,oBAAoB,CAAC,IAAD,CAApB,CACA,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAED,iBAAd,EAAP,CACD,CAED,mBAAO,yBAAGJ,QAAH,EAAP,CACD","sourcesContent":["import PropTypes from 'prop-types';\nimport { useState } from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\n// hooks\nimport useAuth from '../hooks/useAuth';\n// pages\nimport Login from '../pages/auth/Login';\n\n// ----------------------------------------------------------------------\n\nAuthGuard.propTypes = {\n  children: PropTypes.node,\n};\nexport default function AuthGuard({ children }) {\n  const { isAuthenticated, isInitialized } = useAuth();\n  const { pathname } = useLocation();\n  const [requestedLocation, setRequestedLocation] = useState(null);\n\n  if (isInitialized && !isAuthenticated) {\n    if (pathname !== requestedLocation) {\n      setRequestedLocation(pathname);\n    }\n    return <Login />;\n  }\n\n  if (requestedLocation && pathname !== requestedLocation) {\n    setRequestedLocation(null);\n    return <Navigate to={requestedLocation} />;\n  }\n\n  return <>{children}</>;\n}\n"]},"metadata":{},"sourceType":"module"}