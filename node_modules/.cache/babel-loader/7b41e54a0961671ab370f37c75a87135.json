{"ast":null,"code":"import _objectSpread from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useRef}from'react';import MapGL,{Source,Layer}from'react-map-gl';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var clusterLayer={id:'clusters',type:'circle',source:'earthquakes',filter:['has','point_count'],paint:{'circle-color':['step',['get','point_count'],'#51bbd6',100,'#f1f075',750,'#f28cb1'],'circle-radius':['step',['get','point_count'],20,100,30,750,40]}};var clusterCountLayer={id:'cluster-count',type:'symbol',source:'earthquakes',filter:['has','point_count'],layout:{'text-field':'{point_count_abbreviated}','text-font':['DIN Offc Pro Medium','Arial Unicode MS Bold'],'text-size':12}};var unclusteredPointLayer={id:'unclustered-point',type:'circle',source:'earthquakes',filter:['!',['has','point_count']],paint:{'circle-color':'#11b4da','circle-radius':4,'circle-stroke-width':1,'circle-stroke-color':'#fff'}};// ----------------------------------------------------------------------\nexport default function MapClusters(_ref){var other=Object.assign({},_ref);var mapRef=useRef(null);var _useState=useState({latitude:40.67,longitude:-103.59,zoom:3,bearing:0,pitch:0}),_useState2=_slicedToArray(_useState,2),viewport=_useState2[0],setViewport=_useState2[1];var onClick=function onClick(event){var feature=event.features[0];var clusterId=feature&&feature.properties.cluster_id;var mapboxSource=mapRef.current.getMap().getSource('earthquakes');mapboxSource.getClusterExpansionZoom(clusterId,function(err,zoom){if(err){return;}setViewport(_objectSpread(_objectSpread({},viewport),{},{longitude:feature&&feature.geometry.coordinates[0],latitude:feature&&feature.geometry.coordinates[1],// eslint-disable-next-line no-restricted-globals\nzoom:isNaN(zoom)?3:zoom,transitionDuration:500}));});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(MapGL,_objectSpread(_objectSpread(_objectSpread({},viewport),{},{onViewportChange:setViewport,interactiveLayerIds:[clusterLayer.id],onClick:onClick,ref:mapRef},other),{},{children:/*#__PURE__*/_jsxs(Source,{id:\"earthquakes\",type:\"geojson\",data:\"https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson\",cluster:true,clusterMaxZoom:14,clusterRadius:50,children:[/*#__PURE__*/_jsx(Layer,_objectSpread({},clusterLayer)),/*#__PURE__*/_jsx(Layer,_objectSpread({},clusterCountLayer)),/*#__PURE__*/_jsx(Layer,_objectSpread({},unclusteredPointLayer))]})}))});}","map":{"version":3,"sources":["D:/Projects/Cdss apps/Final version/admin/src/sections/map/MapClusters.js"],"names":["useState","useRef","MapGL","Source","Layer","clusterLayer","id","type","source","filter","paint","clusterCountLayer","layout","unclusteredPointLayer","MapClusters","other","mapRef","latitude","longitude","zoom","bearing","pitch","viewport","setViewport","onClick","event","feature","features","clusterId","properties","cluster_id","mapboxSource","current","getMap","getSource","getClusterExpansionZoom","err","geometry","coordinates","isNaN","transitionDuration"],"mappings":"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","sourcesContent":["import { useState, useRef } from 'react';\nimport MapGL, { Source, Layer } from 'react-map-gl';\n\n// ----------------------------------------------------------------------\n\nconst clusterLayer = {\n  id: 'clusters',\n  type: 'circle',\n  source: 'earthquakes',\n  filter: ['has', 'point_count'],\n  paint: {\n    'circle-color': ['step', ['get', 'point_count'], '#51bbd6', 100, '#f1f075', 750, '#f28cb1'],\n    'circle-radius': ['step', ['get', 'point_count'], 20, 100, 30, 750, 40]\n  }\n};\n\nconst clusterCountLayer = {\n  id: 'cluster-count',\n  type: 'symbol',\n  source: 'earthquakes',\n  filter: ['has', 'point_count'],\n  layout: {\n    'text-field': '{point_count_abbreviated}',\n    'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\n    'text-size': 12\n  }\n};\n\nconst unclusteredPointLayer = {\n  id: 'unclustered-point',\n  type: 'circle',\n  source: 'earthquakes',\n  filter: ['!', ['has', 'point_count']],\n  paint: {\n    'circle-color': '#11b4da',\n    'circle-radius': 4,\n    'circle-stroke-width': 1,\n    'circle-stroke-color': '#fff'\n  }\n};\n\n// ----------------------------------------------------------------------\n\nexport default function MapClusters({ ...other }) {\n  const mapRef = useRef(null);\n  const [viewport, setViewport] = useState({\n    latitude: 40.67,\n    longitude: -103.59,\n    zoom: 3,\n    bearing: 0,\n    pitch: 0\n  });\n\n  const onClick = (event) => {\n    const feature = event.features[0];\n    const clusterId = feature && feature.properties.cluster_id;\n    const mapboxSource = mapRef.current.getMap().getSource('earthquakes');\n\n    mapboxSource.getClusterExpansionZoom(clusterId, (err, zoom) => {\n      if (err) {\n        return;\n      }\n      setViewport({\n        ...viewport,\n        longitude: feature && feature.geometry.coordinates[0],\n        latitude: feature && feature.geometry.coordinates[1],\n        // eslint-disable-next-line no-restricted-globals\n        zoom: isNaN(zoom) ? 3 : zoom,\n        transitionDuration: 500\n      });\n    });\n  };\n\n  return (\n    <>\n      <MapGL\n        {...viewport}\n        onViewportChange={setViewport}\n        interactiveLayerIds={[clusterLayer.id]}\n        onClick={onClick}\n        ref={mapRef}\n        {...other}\n      >\n        <Source\n          id=\"earthquakes\"\n          type=\"geojson\"\n          data=\"https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson\"\n          cluster\n          clusterMaxZoom={14}\n          clusterRadius={50}\n        >\n          <Layer {...clusterLayer} />\n          <Layer {...clusterCountLayer} />\n          <Layer {...unclusteredPointLayer} />\n        </Source>\n      </MapGL>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}