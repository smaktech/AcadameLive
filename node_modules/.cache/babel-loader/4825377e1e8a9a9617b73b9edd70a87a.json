{"ast":null,"code":"import _slicedToArray from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";//page for all users listing!\nimport React,{useState,useEffect,forwardRef,useRef}from'react';import{InputGroup,FormControl,Table,Form}from'react-bootstrap';import ModalHeader from'react-bootstrap/ModalHeader';import{useSelector}from'react-redux';import{Link,useNavigate,Redirect}from'react-router-dom';import{updatePassword,changeName,uploadImage}from'../../api/Profile/Profile';import Loader from\"react-loader-spinner\";import{useParams}from'react-router-dom';import{BsSortDownAlt,BsFillTrashFill,BiBlock}from\"react-icons/bs\";import MaterialTable from'material-table';import{fetchSubjects,editSubject,deleteSubject,getSubjectById}from\"../../api/Subject/Subject\";import{createSubject}from'../../api/Subject/Subject';import CircularProgress from'@mui/material/CircularProgress';import Card from'@mui/material/Card';import CardContent from'@mui/material/CardContent';import{Button,Input,TextField}from'@mui/material';import{Modal as BootstrapModal}from'react-bootstrap';import Grid from'@mui/material/Grid';import Modal from'@mui/material/Modal';import Box from'@mui/material/Box';import{modalStyle}from'src/config';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function AddEditSubject(props){var _useParams=useParams(),subjectId=_useParams.subjectId,subjectStatus=_useParams.subjectStatus;var _useState=useState(subjectId?\"edit\":\"add\"),_useState2=_slicedToArray(_useState,2),mode=_useState2[0],setMode=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),modalVisible=_useState4[0],setModalVisible=_useState4[1];var navigate=useNavigate();//sets and display the line in the success modal!\nvar _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),modalLine1=_useState6[0],setModalLine1=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),modalLine2=_useState8[0],setModalLine2=_useState8[1];//setting subjects data into a variable\nvar _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),subjects=_useState10[0],setSubjects=_useState10[1];//sets the loader for add subject button\nvar _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),addLoader=_useState12[0],setAddLoader=_useState12[1];//sets the loader for edit subject button\nvar _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),editLoader=_useState14[0],setEditLoader=_useState14[1];//sets the loader for edit subject button\nvar _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),editFormLoader=_useState16[0],setEditFormLoader=_useState16[1];//sets the name of the subject user want to add\nvar _useState17=useState(),_useState18=_slicedToArray(_useState17,2),subjectName=_useState18[0],setSubjectName=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),subjectIcon=_useState20[0],setSubjectIcon=_useState20[1];//shows the error when users try to add subject without name\nvar _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),errorMessage=_useState22[0],setErrorMessage=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),error=_useState24[0],showError=_useState24[1];//updating mode state on change of subject id\nuseEffect(function(){setMode(subjectId?\"edit\":\"add\");},[subjectId]);useEffect(function(){setMode(subjectId?\"edit\":\"add\");setEditFormLoader(true);getSubjectById(subjectId).then(function(res){console.log('res',res);if(res.status){//setting the fetched subject by id into state variable\nsetSubjects(res.course);setSubjectName(res.course.name);}setEditFormLoader(false);}).catch(function(err){console.error(err);});},[subjectId]);//edit the details basically the name of the existing subject\nfunction editSubjectDetails(){setModalVisible(false);setEditLoader(true);showError(false);if(subjectName!=''){console.log(subjectName);editSubject(subjectId,subjectName,subjectStatus,subjectIcon).then(function(res){console.log(res);if(res.status){setEditLoader(false);setModalLine1('Subject details has been');setModalLine2('updated successfully');setModalVisible(true);}else{setEditLoader(false);showError(true);setErrorMessage('Error occured');}}).catch(function(err){console.error(err);setEditLoader(false);showError(true);setErrorMessage('Error occured');});}else{setAddLoader(false);showError(true);setErrorMessage('Please fill the subject name');}}//adds new subject \nfunction addNewSubject(){setModalVisible(false);setAddLoader(true);showError(false);if(subjectName!=''){createSubject(subjectName,'active',subjectIcon).then(function(res){// console.log(res);\nif(res.status){console.log(res);setAddLoader(false);setModalLine1('New Subject Added');setModalLine2('Successfully');setModalVisible(true);}else{setAddLoader(false);showError(true);setErrorMessage('Error occured');}}).catch(function(err){console.log(err);setAddLoader(false);showError(true);setErrorMessage('Error occured');});}else{setAddLoader(false);showError(true);setErrorMessage('Please fill the subject name');}}// function to reset \nvar reSetForm=function reSetForm(){setSubjectName('');};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mt-3 txt-5282F0 fw-bold\",children:\"Subject Management\"}),/*#__PURE__*/_jsx(\"hr\",{className:\"mt-4\"}),editFormLoader?/*#__PURE__*/_jsx(\"div\",{className:\"w-100 py-2 px-6 me-3\",style:{display:'flex',height:'100vh',justifyContent:'center',alignItems:'center'},children:/*#__PURE__*/_jsx(CircularProgress,{size:20})}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\" align-items-center\",children:[/*#__PURE__*/_jsx(Card,{className:\"w-100\",children:/*#__PURE__*/_jsxs(CardContent,{className:\"pageHeaderCard\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[error?/*#__PURE__*/_jsx(\"div\",{class:\"row pt-2 \",style:{margin:5},children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-5  col-sm-12 clr-danger-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"   text-center\",children:errorMessage})})}):/*#__PURE__*/_jsx(_Fragment,{children:\" \"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6 col-sm-6 col-12\",children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"exampleForm.ControlInput1\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Subject Name\"}),/*#__PURE__*/_jsx(Form.Control,{name:\"name\",value:subjectName,type:\"text\",placeholder:\"Enter Sub Topic Name\",onChange:function onChange(e){return setSubjectName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"exampleForm.ControlTextarea1\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Choose Icon\"}),/*#__PURE__*/_jsx(Form.Control,{name:\"image\",type:\"file\",placeholder:\"choose Sub Topic Exam Zip\",onChange:function onChange(e){return setSubjectIcon(e.target.files[0]);}})]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:mode==\"edit\"?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-2 col-md-2 col-6 mt-3 \",children:/*#__PURE__*/_jsx(Button,{variant:\"outlined\",className:\" py-2 px-6 me-3\",onClick:function onClick(){return navigate('/dashboard/subjects');},children:\"Cancel\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-2 col-md-2 col-6 mt-3 \",children:editLoader?/*#__PURE__*/_jsx(Button,{variant:\"outlined\",className:\" py-2 px-6 me-3\",children:/*#__PURE__*/_jsx(CircularProgress,{size:20})}):/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:function onClick(){editSubjectDetails();},children:\"Save Changes\"})})]}):/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-2 col-md-2 col-6 mt-3 \",children:addLoader?/*#__PURE__*/_jsx(Button,{variant:\"outlined\",children:/*#__PURE__*/_jsx(CircularProgress,{size:20})}):/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:function onClick(){return addNewSubject();},children:\"Add Subject\"})})})]})}),/*#__PURE__*/_jsx(Modal,{open:modalVisible,size:\"lg\",\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true,onClose:function onClose(){return setModalVisible(false);},children:/*#__PURE__*/_jsx(Box,{sx:modalStyle,children:/*#__PURE__*/_jsxs(BootstrapModal.Body,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center txt-5282F0 my-4\",style:{alignItems:'center',display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"img\",{src:'/Assets/modalPhoto.png'}),/*#__PURE__*/_jsx(\"h3\",{children:modalLine1}),/*#__PURE__*/_jsx(\"h3\",{className:\"modalLowerText\",children:modalLine2})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-4 pb-3\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",style:{marginRight:10,marginTop:10},onClick:function onClick(){mode=='add'?/*#__PURE__*/_jsx(_Fragment,{children:(setModalVisible(false),reSetForm())}):navigate('/dashboard/subjects/addSubject');},children:\"Add New Subject\"}),\"\\u2003\",/*#__PURE__*/_jsx(Button,{variant:\"contained\",style:{marginRight:10,marginTop:10},onClick:function onClick(){return navigate('/dashboard/subjects');},children:\"Back To Subjects\"})]})]})})})]});}","map":{"version":3,"sources":["D:/Projects/Cdss apps/Final version/admin/src/pages/subjects/AddEditSubject.js"],"names":["React","useState","useEffect","forwardRef","useRef","InputGroup","FormControl","Table","Form","ModalHeader","useSelector","Link","useNavigate","Redirect","updatePassword","changeName","uploadImage","Loader","useParams","BsSortDownAlt","BsFillTrashFill","BiBlock","MaterialTable","fetchSubjects","editSubject","deleteSubject","getSubjectById","createSubject","CircularProgress","Card","CardContent","Button","Input","TextField","Modal","BootstrapModal","Grid","Box","modalStyle","AddEditSubject","props","subjectId","subjectStatus","mode","setMode","modalVisible","setModalVisible","navigate","modalLine1","setModalLine1","modalLine2","setModalLine2","subjects","setSubjects","addLoader","setAddLoader","editLoader","setEditLoader","editFormLoader","setEditFormLoader","subjectName","setSubjectName","subjectIcon","setSubjectIcon","errorMessage","setErrorMessage","error","showError","then","res","console","log","status","course","name","catch","err","editSubjectDetails","addNewSubject","reSetForm","display","height","justifyContent","alignItems","margin","e","target","value","files","flexDirection","marginRight","marginTop"],"mappings":"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","sourcesContent":["//page for all users listing!\n\nimport React, { useState, useEffect, forwardRef, useRef } from 'react'\nimport { InputGroup, FormControl, Table, Form } from 'react-bootstrap'\nimport ModalHeader from 'react-bootstrap/ModalHeader'\nimport { useSelector } from 'react-redux'\nimport { Link, useNavigate, Redirect } from 'react-router-dom'\nimport { updatePassword, changeName, uploadImage } from '../../api/Profile/Profile'\nimport Loader from \"react-loader-spinner\";\n\n\nimport { useParams } from 'react-router-dom'\n\nimport { BsSortDownAlt, BsFillTrashFill, BiBlock } from \"react-icons/bs\";\n\nimport MaterialTable from 'material-table'\nimport { fetchSubjects, editSubject, deleteSubject, getSubjectById } from \"../../api/Subject/Subject\"\nimport { createSubject } from '../../api/Subject/Subject'\n\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport { Button, Input, TextField } from '@mui/material'\nimport { Modal as BootstrapModal } from 'react-bootstrap'\nimport Grid from '@mui/material/Grid';\nimport Modal from '@mui/material/Modal';\nimport Box from '@mui/material/Box';\nimport { modalStyle } from 'src/config'\n\nexport default function AddEditSubject(props) {\n    const { subjectId, subjectStatus } = useParams();\n\n    const [mode, setMode] = useState(subjectId ? \"edit\" : \"add\")\n\n    const [modalVisible, setModalVisible] = useState(false)\n    const navigate = useNavigate()\n\n    //sets and display the line in the success modal!\n    const [modalLine1, setModalLine1] = useState('');\n    const [modalLine2, setModalLine2] = useState('')\n\n    //setting subjects data into a variable\n    const [subjects, setSubjects] = useState({});\n\n    //sets the loader for add subject button\n    const [addLoader, setAddLoader] = useState(false)\n\n    //sets the loader for edit subject button\n    const [editLoader, setEditLoader] = useState(false)\n    //sets the loader for edit subject button\n    const [editFormLoader, setEditFormLoader] = useState(false)\n\n    //sets the name of the subject user want to add\n    const [subjectName, setSubjectName] = useState();\n\n    const [subjectIcon, setSubjectIcon] = useState(null);\n\n    //shows the error when users try to add subject without name\n    const [errorMessage, setErrorMessage] = useState(false);\n    const [error, showError] = useState(false);\n\n\n\n    //updating mode state on change of subject id\n    useEffect(() => {\n        setMode(subjectId ? \"edit\" : \"add\")\n    }, [subjectId])\n\n    useEffect(() => {\n        setMode(subjectId ? \"edit\" : \"add\")\n        setEditFormLoader(true)\n        getSubjectById(subjectId).then((res) => {\n            console.log('res', res);\n            if (res.status) {\n                //setting the fetched subject by id into state variable\n                setSubjects(res.course);\n                setSubjectName(res.course.name)\n            }\n            setEditFormLoader(false)\n        })\n            .catch((err) => {\n                console.error(err);\n            });\n\n    }, [subjectId])\n\n    //edit the details basically the name of the existing subject\n    function editSubjectDetails() {\n        setModalVisible(false);\n        setEditLoader(true);\n        showError(false);\n        if (subjectName != '') {\n            console.log(subjectName)\n            editSubject(subjectId, subjectName, subjectStatus,subjectIcon)\n                .then((res) => {\n                    console.log(res);\n                    if (res.status) {\n                        setEditLoader(false);\n                        setModalLine1('Subject details has been');\n                        setModalLine2('updated successfully')\n                        setModalVisible(true)\n                    }\n                    else {\n                        setEditLoader(false);\n                        showError(true);\n                        setErrorMessage('Error occured');\n                    }\n\n                })\n                .catch((err) => {\n                    console.error(err);\n                    setEditLoader(false)\n                    showError(true);\n                    setErrorMessage('Error occured');\n                })\n        }\n        else {\n            setAddLoader(false)\n            showError(true);\n            setErrorMessage('Please fill the subject name');\n        }\n\n    }\n\n    //adds new subject \n    function addNewSubject() {\n        setModalVisible(false);\n        setAddLoader(true);\n        showError(false);\n        if (subjectName != '') {\n            createSubject(subjectName, 'active', subjectIcon)\n                .then((res) => {\n                    // console.log(res);\n                    if (res.status) {\n                        console.log(res)\n                        setAddLoader(false);\n                        setModalLine1('New Subject Added');\n                        setModalLine2('Successfully')\n                        setModalVisible(true)\n                    }\n                    else {\n                        setAddLoader(false);\n                        showError(true);\n                        setErrorMessage('Error occured');\n                    }\n                })\n                .catch((err) => {\n                    console.log(err);\n                    setAddLoader(false)\n                    showError(true);\n                    setErrorMessage('Error occured');\n                })\n        }\n        else {\n            setAddLoader(false)\n            showError(true);\n            setErrorMessage('Please fill the subject name');\n        }\n    }\n\n    // function to reset \n    const reSetForm = () => {\n        setSubjectName('')\n    }\n\n\n    return (\n        <>\n\n\n            {/* <div className=\"container\" style={{overflowY: 'scroll'}}> */}\n            <h5 className=\"mt-3 txt-5282F0 fw-bold\">Subject Management</h5>\n            <hr className=\"mt-4\" />\n            {editFormLoader ? (\n                <div className='w-100 py-2 px-6 me-3' style={{ display: 'flex', height: '100vh', justifyContent: 'center', alignItems: 'center' }}>\n                    {/* <Loader\n                        type=\"Puff\"\n                        color=\"blue\"\n                        height={30}\n                        width={30}\n                    /> */}\n                    <CircularProgress size={20} />\n\n                </div>\n            ) : (\n                <>\n                    <div className=\" align-items-center\">\n                        <Card className=\"w-100\">\n                            <CardContent className=\"pageHeaderCard\">\n                                <div className=\"row\">\n                                    {\n                                        (error) ?\n                                            <div class=\"row pt-2 \" style={{ margin: 5 }}>\n                                                <div className=\"col-md-5  col-sm-12 clr-danger-100\">\n                                                    <div className=\"   text-center\">\n                                                        {errorMessage}\n                                                    </div>\n                                                </div>\n\n                                            </div>\n                                            :\n                                            <> </>\n                                    }\n                                    <div className=\"col-lg-6 col-sm-6 col-12\">\n                                        {/* <InputGroup className=\"mb-3\" >\n\n                                            <FormControl\n                                                placeholder=\"Enter Subject Name\"\n                                                aria-label=\"Search\"\n                                                aria-describedby=\"basic-addon1\"\n                                                onChange={(e) => setSubjectName(e.target.value)}\n                                                value={subjectName}\n                                            />\n\n                                        </InputGroup> */}\n                                        <Form>\n                                            <Form.Group className=\"mb-3\" controlId=\"exampleForm.ControlInput1\">\n                                                <Form.Label>Subject Name</Form.Label>\n                                                <Form.Control name='name' value={subjectName} type=\"text\" placeholder=\"Enter Sub Topic Name\" onChange={(e) => setSubjectName(e.target.value)} />\n                                            </Form.Group>\n                                            <Form.Group className=\"mb-3\" controlId=\"exampleForm.ControlTextarea1\">\n                                                <Form.Label>Choose Icon</Form.Label>\n                                                <Form.Control name='image' type=\"file\" placeholder=\"choose Sub Topic Exam Zip\" onChange={(e) => setSubjectIcon(e.target.files[0])} />\n                                            </Form.Group>\n                                        </Form>\n                                    </div>\n\n\n                                </div>\n                                <div className=\"row\">\n                                    {/* <form onSubmit={createSub}>\n                                        <TextField\n                                            sx={{ width: '50%' }}\n                                            label=\"Enter Subject Name\"\n                                            variant=\"outlined\"\n                                            placeholder='Enter Subject Name'\n                                            onChange={(e) => setSubjectName(e.target.value)} />\n                                        <br />\n                                        <Input\n                                            sx={{ width: '50%' }}\n                                            accept=\"image/*\"\n                                            type=\"file\"\n                                            onChange={(e) => setSubjectIcon(e.target.files[0])} />\n                                        <br />\n                                        <Button\n                                            variant=\"contained\"\n                                            type='submit'\n                                        >\n                                            Upload\n                                        </Button>\n                                    </form> */}\n\n                                </div>\n\n                            </CardContent>\n                        </Card>\n                        <div className=\"row\">\n\n                            {mode == \"edit\" ? (\n                                <>\n                                    <div className=\"col-lg-2 col-md-2 col-6 mt-3 \">\n                                        <Button variant=\"outlined\" className=\" py-2 px-6 me-3\" onClick={() => navigate('/dashboard/subjects')}>Cancel</Button>\n                                    </div>\n                                    <div className=\"col-lg-2 col-md-2 col-6 mt-3 \">\n                                        {editLoader ? (\n                                            <Button variant=\"outlined\" className=\" py-2 px-6 me-3\" >\n                                                {/* <Loader\n                                                    type=\"Puff\"\n                                                    color=\"white\"\n                                                    height={30}\n                                                    width={30}\n                                                /> */}\n                                                <CircularProgress size={20} />\n                                            </Button>\n                                        ) : (\n                                            <Button variant=\"contained\" onClick={() => { editSubjectDetails() }}>Save Changes</Button>\n                                        )}\n                                    </div>\n                                </>\n                            ) : (\n\n                                <div className=\"col-lg-2 col-md-2 col-6 mt-3 \">\n                                    {addLoader ? (\n                                        <Button variant=\"outlined\"  >\n                                            {/* <Loader\n                                                type=\"Puff\"\n                                                color=\"white\"\n                                                height={30}\n                                                width={30}\n                                            /> */}\n                                            <CircularProgress size={20} />\n                                        </Button>\n                                    ) : (\n                                        <Button variant=\"contained\"\n                                            onClick={() => addNewSubject()}\n                                        >Add Subject</Button>\n                                    )}\n\n                                </div>\n                            )}\n\n                        </div>\n                    </div>\n                </>\n            )}\n            <Modal\n                open={modalVisible}\n                size=\"lg\"\n                aria-labelledby=\"contained-modal-title-vcenter\"\n                centered\n                onClose={() => setModalVisible(false)}\n            >\n                <Box sx={modalStyle}>\n                    <BootstrapModal.Body>\n                        <div className=\"text-center txt-5282F0 my-4\" style={{ alignItems: 'center', display: 'flex', flexDirection: 'column' }}>\n                            <img src={'/Assets/modalPhoto.png'} />\n                            <h3>{modalLine1}</h3>\n                            <h3 className=\"modalLowerText\">{modalLine2}</h3>\n                        </div>\n                        <div className=\"text-center mt-4 pb-3\">\n                            <Button variant=\"outlined\" style={{ marginRight: 10, marginTop: 10 }}\n                                onClick={() => { mode == 'add' ? (<>{setModalVisible(false), reSetForm()}</>) : (navigate('/dashboard/subjects/addSubject')) }}\n                            >Add New Subject</Button>\n                            &emsp;\n                            <Button variant=\"contained\" style={{ marginRight: 10, marginTop: 10 }}\n                                onClick={() => navigate('/dashboard/subjects')}\n                            >Back To Subjects</Button>\n                        </div>\n                    </BootstrapModal.Body>\n                </Box>\n            </Modal>\n\n\n            {/* </div> */}\n\n        </>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}