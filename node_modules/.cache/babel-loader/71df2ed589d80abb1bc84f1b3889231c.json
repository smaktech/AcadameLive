{"ast":null,"code":"import _objectSpread from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import*as Yup from'yup';import merge from'lodash/merge';import{isBefore}from'date-fns';import isEmpty from'lodash/isEmpty';import{useSnackbar}from'notistack';import{useFormik,Form,FormikProvider}from'formik';import{Box,Button,Switch,Tooltip,TextField,IconButton,DialogContent,DialogActions,FormControlLabel}from'@mui/material';import{LoadingButton,MobileDateTimePicker}from'@mui/lab';// redux\nimport{useDispatch}from'../../../redux/store';import{createEvent,updateEvent,deleteEvent}from'../../../redux/slices/calendar';// hooks\nimport useIsMountedRef from'../../../hooks/useIsMountedRef';// components\nimport Iconify from'../../../components/Iconify';import ColorSinglePicker from'../../../components/ColorSinglePicker';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var COLOR_OPTIONS=['#00AB55',// theme.palette.primary.main,\n'#1890FF',// theme.palette.info.main,\n'#94D82D',// theme.palette.success.main,\n'#FFC107',// theme.palette.warning.main,\n'#FF4842',// theme.palette.error.main\n'#04297A',// theme.palette.info.darker\n'#7A0C2E'// theme.palette.error.darker\n];var getInitialValues=function getInitialValues(event,range){var _event={title:'',description:'',textColor:'#1890FF',allDay:false,start:range?new Date(range.start):new Date(),end:range?new Date(range.end):new Date()};if(event||range){return merge({},_event,event);}return _event;};// ----------------------------------------------------------------------\nexport default function CalendarForm(_ref){var event=_ref.event,range=_ref.range,onCancel=_ref.onCancel;var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var dispatch=useDispatch();var isMountedRef=useIsMountedRef();var isCreating=isEmpty(event);var EventSchema=Yup.object().shape({title:Yup.string().max(255).required('Title is required'),description:Yup.string().max(5000)});var formik=useFormik({initialValues:getInitialValues(event,range),validationSchema:EventSchema,onSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values,_ref2){var resetForm,setSubmitting,newEvent;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:resetForm=_ref2.resetForm,setSubmitting=_ref2.setSubmitting;try{newEvent={title:values.title,description:values.description,textColor:values.textColor,allDay:values.allDay,start:values.start,end:values.end};if(event.id){dispatch(updateEvent(event.id,newEvent));enqueueSnackbar('Update event success',{variant:'success'});}else{dispatch(createEvent(newEvent));enqueueSnackbar('Create event success',{variant:'success'});}onCancel();if(isMountedRef.current){resetForm();setSubmitting(false);}}catch(error){console.error(error);if(isMountedRef.current){setSubmitting(false);}}case 2:case\"end\":return _context.stop();}}},_callee);}));function onSubmit(_x,_x2){return _onSubmit.apply(this,arguments);}return onSubmit;}()});var values=formik.values,errors=formik.errors,touched=formik.touched,handleSubmit=formik.handleSubmit,isSubmitting=formik.isSubmitting,getFieldProps=formik.getFieldProps,setFieldValue=formik.setFieldValue;var handleDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(event.id){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:try{onCancel();dispatch(deleteEvent(event.id));enqueueSnackbar('Delete event success',{variant:'success'});}catch(error){console.error(error);}case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function handleDelete(){return _ref3.apply(this,arguments);};}();var isDateError=isBefore(new Date(values.end),new Date(values.start));return/*#__PURE__*/_jsx(FormikProvider,{value:formik,children:/*#__PURE__*/_jsxs(Form,{autoComplete:\"off\",noValidate:true,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(DialogContent,{sx:{pb:0,overflowY:'unset'},children:[/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({fullWidth:true,label:\"Title\"},getFieldProps('title')),{},{error:Boolean(touched.title&&errors.title),helperText:touched.title&&errors.title,sx:{mb:3}})),/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({fullWidth:true,multiline:true,maxRows:4,label:\"Description\"},getFieldProps('description')),{},{error:Boolean(touched.description&&errors.description),helperText:touched.description&&errors.description,sx:{mb:3}})),/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,_objectSpread({checked:values.allDay},getFieldProps('allDay'))),label:\"All day\",sx:{mb:3}}),/*#__PURE__*/_jsx(MobileDateTimePicker,{label:\"Start date\",value:values.start,inputFormat:\"dd/MM/yyyy hh:mm a\",onChange:function onChange(date){return setFieldValue('start',date);},renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{fullWidth:true,sx:{mb:3}}));}}),/*#__PURE__*/_jsx(MobileDateTimePicker,{label:\"End date\",value:values.end,inputFormat:\"dd/MM/yyyy hh:mm a\",onChange:function onChange(date){return setFieldValue('end',date);},renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{fullWidth:true,error:Boolean(isDateError),helperText:isDateError&&'End date must be later than start date',sx:{mb:3}}));}}),/*#__PURE__*/_jsx(ColorSinglePicker,_objectSpread(_objectSpread({},getFieldProps('textColor')),{},{colors:COLOR_OPTIONS}))]}),/*#__PURE__*/_jsxs(DialogActions,{children:[!isCreating&&/*#__PURE__*/_jsx(Tooltip,{title:\"Delete Event\",children:/*#__PURE__*/_jsx(IconButton,{onClick:handleDelete,children:/*#__PURE__*/_jsx(Iconify,{icon:\"eva:trash-2-outline\",width:20,height:20})})}),/*#__PURE__*/_jsx(Box,{sx:{flexGrow:1}}),/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"outlined\",color:\"inherit\",onClick:onCancel,children:\"Cancel\"}),/*#__PURE__*/_jsx(LoadingButton,{type:\"submit\",variant:\"contained\",loading:isSubmitting,loadingIndicator:\"Loading...\",children:\"Add\"})]})]})});}","map":{"version":3,"sources":["D:/Projects/Cdss apps/Final version/admin/src/sections/@dashboard/calendar/CalendarForm.js"],"names":["Yup","merge","isBefore","isEmpty","useSnackbar","useFormik","Form","FormikProvider","Box","Button","Switch","Tooltip","TextField","IconButton","DialogContent","DialogActions","FormControlLabel","LoadingButton","MobileDateTimePicker","useDispatch","createEvent","updateEvent","deleteEvent","useIsMountedRef","Iconify","ColorSinglePicker","COLOR_OPTIONS","getInitialValues","event","range","_event","title","description","textColor","allDay","start","Date","end","CalendarForm","onCancel","enqueueSnackbar","dispatch","isMountedRef","isCreating","EventSchema","object","shape","string","max","required","formik","initialValues","validationSchema","onSubmit","values","resetForm","setSubmitting","newEvent","id","variant","current","error","console","errors","touched","handleSubmit","isSubmitting","getFieldProps","setFieldValue","handleDelete","isDateError","pb","overflowY","Boolean","mb","date","params","flexGrow"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport * as Yup from 'yup';\nimport merge from 'lodash/merge';\nimport { isBefore } from 'date-fns';\nimport isEmpty from 'lodash/isEmpty';\nimport { useSnackbar } from 'notistack';\nimport { useFormik, Form, FormikProvider } from 'formik';\nimport {\n  Box,\n  Button,\n  Switch,\n  Tooltip,\n  TextField,\n  IconButton,\n  DialogContent,\n  DialogActions,\n  FormControlLabel,\n} from '@mui/material';\nimport { LoadingButton, MobileDateTimePicker } from '@mui/lab';\n// redux\nimport { useDispatch } from '../../../redux/store';\nimport { createEvent, updateEvent, deleteEvent } from '../../../redux/slices/calendar';\n// hooks\nimport useIsMountedRef from '../../../hooks/useIsMountedRef';\n// components\nimport Iconify from '../../../components/Iconify';\nimport ColorSinglePicker from '../../../components/ColorSinglePicker';\n\n// ----------------------------------------------------------------------\n\nconst COLOR_OPTIONS = [\n  '#00AB55', // theme.palette.primary.main,\n  '#1890FF', // theme.palette.info.main,\n  '#94D82D', // theme.palette.success.main,\n  '#FFC107', // theme.palette.warning.main,\n  '#FF4842', // theme.palette.error.main\n  '#04297A', // theme.palette.info.darker\n  '#7A0C2E', // theme.palette.error.darker\n];\n\nconst getInitialValues = (event, range) => {\n  const _event = {\n    title: '',\n    description: '',\n    textColor: '#1890FF',\n    allDay: false,\n    start: range ? new Date(range.start) : new Date(),\n    end: range ? new Date(range.end) : new Date(),\n  };\n\n  if (event || range) {\n    return merge({}, _event, event);\n  }\n\n  return _event;\n};\n\n// ----------------------------------------------------------------------\n\nCalendarForm.propTypes = {\n  event: PropTypes.object,\n  range: PropTypes.object,\n  onCancel: PropTypes.func,\n};\n\nexport default function CalendarForm({ event, range, onCancel }) {\n  const { enqueueSnackbar } = useSnackbar();\n  const dispatch = useDispatch();\n  const isMountedRef = useIsMountedRef();\n\n  const isCreating = isEmpty(event);\n\n  const EventSchema = Yup.object().shape({\n    title: Yup.string().max(255).required('Title is required'),\n    description: Yup.string().max(5000),\n  });\n\n  const formik = useFormik({\n    initialValues: getInitialValues(event, range),\n    validationSchema: EventSchema,\n    onSubmit: async (values, { resetForm, setSubmitting }) => {\n      try {\n        const newEvent = {\n          title: values.title,\n          description: values.description,\n          textColor: values.textColor,\n          allDay: values.allDay,\n          start: values.start,\n          end: values.end,\n        };\n        if (event.id) {\n          dispatch(updateEvent(event.id, newEvent));\n          enqueueSnackbar('Update event success', { variant: 'success' });\n        } else {\n          dispatch(createEvent(newEvent));\n          enqueueSnackbar('Create event success', { variant: 'success' });\n        }\n        onCancel();\n        if (isMountedRef.current) {\n          resetForm();\n          setSubmitting(false);\n        }\n      } catch (error) {\n        console.error(error);\n        if (isMountedRef.current) {\n          setSubmitting(false);\n        }\n      }\n    },\n  });\n\n  const { values, errors, touched, handleSubmit, isSubmitting, getFieldProps, setFieldValue } = formik;\n\n  const handleDelete = async () => {\n    if (!event.id) return;\n    try {\n      onCancel();\n      dispatch(deleteEvent(event.id));\n      enqueueSnackbar('Delete event success', { variant: 'success' });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const isDateError = isBefore(new Date(values.end), new Date(values.start));\n\n  return (\n    <FormikProvider value={formik}>\n      <Form autoComplete=\"off\" noValidate onSubmit={handleSubmit}>\n        <DialogContent sx={{ pb: 0, overflowY: 'unset' }}>\n          <TextField\n            fullWidth\n            label=\"Title\"\n            {...getFieldProps('title')}\n            error={Boolean(touched.title && errors.title)}\n            helperText={touched.title && errors.title}\n            sx={{ mb: 3 }}\n          />\n\n          <TextField\n            fullWidth\n            multiline\n            maxRows={4}\n            label=\"Description\"\n            {...getFieldProps('description')}\n            error={Boolean(touched.description && errors.description)}\n            helperText={touched.description && errors.description}\n            sx={{ mb: 3 }}\n          />\n\n          <FormControlLabel\n            control={<Switch checked={values.allDay} {...getFieldProps('allDay')} />}\n            label=\"All day\"\n            sx={{ mb: 3 }}\n          />\n\n          <MobileDateTimePicker\n            label=\"Start date\"\n            value={values.start}\n            inputFormat=\"dd/MM/yyyy hh:mm a\"\n            onChange={(date) => setFieldValue('start', date)}\n            renderInput={(params) => <TextField {...params} fullWidth sx={{ mb: 3 }} />}\n          />\n\n          <MobileDateTimePicker\n            label=\"End date\"\n            value={values.end}\n            inputFormat=\"dd/MM/yyyy hh:mm a\"\n            onChange={(date) => setFieldValue('end', date)}\n            renderInput={(params) => (\n              <TextField\n                {...params}\n                fullWidth\n                error={Boolean(isDateError)}\n                helperText={isDateError && 'End date must be later than start date'}\n                sx={{ mb: 3 }}\n              />\n            )}\n          />\n\n          <ColorSinglePicker {...getFieldProps('textColor')} colors={COLOR_OPTIONS} />\n        </DialogContent>\n\n        <DialogActions>\n          {!isCreating && (\n            <Tooltip title=\"Delete Event\">\n              <IconButton onClick={handleDelete}>\n                <Iconify icon=\"eva:trash-2-outline\" width={20} height={20} />\n              </IconButton>\n            </Tooltip>\n          )}\n          <Box sx={{ flexGrow: 1 }} />\n          <Button type=\"button\" variant=\"outlined\" color=\"inherit\" onClick={onCancel}>\n            Cancel\n          </Button>\n          <LoadingButton type=\"submit\" variant=\"contained\" loading={isSubmitting} loadingIndicator=\"Loading...\">\n            Add\n          </LoadingButton>\n        </DialogActions>\n      </Form>\n    </FormikProvider>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}