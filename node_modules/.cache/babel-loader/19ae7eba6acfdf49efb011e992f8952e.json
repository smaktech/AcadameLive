{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projects\\\\Cdss apps\\\\Final version\\\\admin\\\\src\\\\sections\\\\@dashboard\\\\chat\\\\ChatSidebar.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom'; // @mui\n\nimport { useTheme, styled } from '@mui/material/styles';\nimport { Box, Stack, Drawer, IconButton } from '@mui/material'; // redux\n\nimport { useSelector } from '../../../redux/store'; // hooks\n\nimport useResponsive from '../../../hooks/useResponsive'; // utils\n\nimport axios from '../../../utils/axios'; // routes\n\nimport { PATH_DASHBOARD } from '../../../routes/paths'; // components\n\nimport Iconify from '../../../components/Iconify';\nimport Scrollbar from '../../../components/Scrollbar'; //\n\nimport ChatAccount from './ChatAccount';\nimport ChatSearchResults from './ChatSearchResults';\nimport ChatContactSearch from './ChatContactSearch';\nimport ChatConversationList from './ChatConversationList'; // ----------------------------------------------------------------------\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst DRAWER_WIDTH = 320;\nconst COLLAPSE_WIDTH = 96;\nconst ToggleButtonStyle = styled(props => /*#__PURE__*/_jsxDEV(IconButton, {\n  disableRipple: true,\n  ...props\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 28,\n  columnNumber: 45\n}, this))(_ref => {\n  let {\n    theme\n  } = _ref;\n  return {\n    left: 0,\n    zIndex: 9,\n    width: 32,\n    height: 32,\n    position: 'absolute',\n    top: theme.spacing(13),\n    borderRadius: `0 12px 12px 0`,\n    color: theme.palette.primary.contrastText,\n    backgroundColor: theme.palette.primary.main,\n    boxShadow: theme.customShadows.primary,\n    '&:hover': {\n      backgroundColor: theme.palette.primary.darker\n    }\n  };\n}); // ----------------------------------------------------------------------\n\nexport default function ChatSidebar() {\n  _s();\n\n  const theme = useTheme();\n  const navigate = useNavigate();\n  const {\n    pathname\n  } = useLocation();\n  const [openSidebar, setOpenSidebar] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [isSearchFocused, setSearchFocused] = useState(false);\n  const {\n    conversations,\n    activeConversationId\n  } = useSelector(state => state.chat);\n  const isDesktop = useResponsive('up', 'md');\n  const displayResults = searchQuery && isSearchFocused;\n  const isCollapse = isDesktop && !openSidebar;\n  useEffect(() => {\n    if (!isDesktop) {\n      return handleCloseSidebar();\n    }\n\n    return handleOpenSidebar();\n  }, [isDesktop, pathname]); // eslint-disable-next-line consistent-return\n\n  useEffect(() => {\n    if (!openSidebar) {\n      return setSearchFocused(false);\n    }\n  }, [openSidebar]);\n\n  const handleOpenSidebar = () => {\n    setOpenSidebar(true);\n  };\n\n  const handleCloseSidebar = () => {\n    setOpenSidebar(false);\n  };\n\n  const handleToggleSidebar = () => {\n    setOpenSidebar(prev => !prev);\n  };\n\n  const handleClickAwaySearch = () => {\n    setSearchFocused(false);\n    setSearchQuery('');\n  };\n\n  const handleChangeSearch = async event => {\n    try {\n      const {\n        value\n      } = event.target;\n      setSearchQuery(value);\n\n      if (value) {\n        const response = await axios.get('/api/chat/search', {\n          params: {\n            query: value\n          }\n        });\n        setSearchResults(response.data.results);\n      } else {\n        setSearchResults([]);\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const handleSearchFocus = () => {\n    setSearchFocused(true);\n  };\n\n  const handleSearchSelect = username => {\n    setSearchFocused(false);\n    setSearchQuery('');\n    navigate(`${PATH_DASHBOARD.chat.root}/${username}`);\n  };\n\n  const handleSelectContact = result => {\n    if (handleSearchSelect) {\n      handleSearchSelect(result.username);\n    }\n  };\n\n  const renderContent = /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        py: 2,\n        px: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(Stack, {\n        direction: \"row\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        children: [!isCollapse && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(ChatAccount, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              flexGrow: 1\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: handleToggleSidebar,\n          children: /*#__PURE__*/_jsxDEV(Iconify, {\n            width: 20,\n            height: 20,\n            icon: openSidebar ? 'eva:arrow-ios-back-fill' : 'eva:arrow-ios-forward-fill'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, this), !isCollapse && /*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: () => navigate(PATH_DASHBOARD.chat.new),\n          children: /*#__PURE__*/_jsxDEV(Iconify, {\n            icon: 'eva:edit-fill',\n            width: 20,\n            height: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), !isCollapse && /*#__PURE__*/_jsxDEV(ChatContactSearch, {\n        query: searchQuery,\n        onFocus: handleSearchFocus,\n        onChange: handleChangeSearch,\n        onClickAway: handleClickAwaySearch\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Scrollbar, {\n      children: !displayResults ? /*#__PURE__*/_jsxDEV(ChatConversationList, {\n        conversations: conversations,\n        isOpenSidebar: openSidebar,\n        activeConversationId: activeConversationId,\n        sx: { ...(isSearchFocused && {\n            display: 'none'\n          })\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(ChatSearchResults, {\n        query: searchQuery,\n        results: searchResults,\n        onSelectContact: handleSelectContact\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [!isDesktop && /*#__PURE__*/_jsxDEV(ToggleButtonStyle, {\n      onClick: handleToggleSidebar,\n      children: /*#__PURE__*/_jsxDEV(Iconify, {\n        width: 16,\n        height: 16,\n        icon: 'eva:people-fill'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 9\n    }, this), isDesktop ? /*#__PURE__*/_jsxDEV(Drawer, {\n      open: openSidebar,\n      variant: \"persistent\",\n      sx: {\n        width: DRAWER_WIDTH,\n        transition: theme.transitions.create('width'),\n        '& .MuiDrawer-paper': {\n          position: 'static',\n          width: DRAWER_WIDTH\n        },\n        ...(isCollapse && {\n          width: COLLAPSE_WIDTH,\n          '& .MuiDrawer-paper': {\n            width: COLLAPSE_WIDTH,\n            position: 'static',\n            transform: 'none !important',\n            visibility: 'visible !important'\n          }\n        })\n      },\n      children: renderContent\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Drawer, {\n      ModalProps: {\n        keepMounted: true\n      },\n      open: openSidebar,\n      onClose: handleCloseSidebar,\n      sx: {\n        '& .MuiDrawer-paper': {\n          width: DRAWER_WIDTH\n        }\n      },\n      children: renderContent\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ChatSidebar, \"t/q4BZFusp6eThKHdyvapPLuLEw=\", false, function () {\n  return [useTheme, useNavigate, useLocation, useSelector, useResponsive];\n});\n\n_c = ChatSidebar;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatSidebar\");","map":{"version":3,"sources":["D:/Projects/Cdss apps/Final version/admin/src/sections/@dashboard/chat/ChatSidebar.js"],"names":["useState","useEffect","useNavigate","useLocation","useTheme","styled","Box","Stack","Drawer","IconButton","useSelector","useResponsive","axios","PATH_DASHBOARD","Iconify","Scrollbar","ChatAccount","ChatSearchResults","ChatContactSearch","ChatConversationList","DRAWER_WIDTH","COLLAPSE_WIDTH","ToggleButtonStyle","props","theme","left","zIndex","width","height","position","top","spacing","borderRadius","color","palette","primary","contrastText","backgroundColor","main","boxShadow","customShadows","darker","ChatSidebar","navigate","pathname","openSidebar","setOpenSidebar","searchQuery","setSearchQuery","searchResults","setSearchResults","isSearchFocused","setSearchFocused","conversations","activeConversationId","state","chat","isDesktop","displayResults","isCollapse","handleCloseSidebar","handleOpenSidebar","handleToggleSidebar","prev","handleClickAwaySearch","handleChangeSearch","event","value","target","response","get","params","query","data","results","error","console","handleSearchFocus","handleSearchSelect","username","root","handleSelectContact","result","renderContent","py","px","flexGrow","new","display","transition","transitions","create","transform","visibility","keepMounted"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\n// @mui\nimport { useTheme, styled } from '@mui/material/styles';\nimport { Box, Stack, Drawer, IconButton } from '@mui/material';\n// redux\nimport { useSelector } from '../../../redux/store';\n// hooks\nimport useResponsive from '../../../hooks/useResponsive';\n// utils\nimport axios from '../../../utils/axios';\n// routes\nimport { PATH_DASHBOARD } from '../../../routes/paths';\n// components\nimport Iconify from '../../../components/Iconify';\nimport Scrollbar from '../../../components/Scrollbar';\n//\nimport ChatAccount from './ChatAccount';\nimport ChatSearchResults from './ChatSearchResults';\nimport ChatContactSearch from './ChatContactSearch';\nimport ChatConversationList from './ChatConversationList';\n\n// ----------------------------------------------------------------------\n\nconst DRAWER_WIDTH = 320;\nconst COLLAPSE_WIDTH = 96;\n\nconst ToggleButtonStyle = styled((props) => <IconButton disableRipple {...props} />)(({ theme }) => ({\n  left: 0,\n  zIndex: 9,\n  width: 32,\n  height: 32,\n  position: 'absolute',\n  top: theme.spacing(13),\n  borderRadius: `0 12px 12px 0`,\n  color: theme.palette.primary.contrastText,\n  backgroundColor: theme.palette.primary.main,\n  boxShadow: theme.customShadows.primary,\n  '&:hover': {\n    backgroundColor: theme.palette.primary.darker,\n  },\n}));\n\n// ----------------------------------------------------------------------\n\nexport default function ChatSidebar() {\n  const theme = useTheme();\n  const navigate = useNavigate();\n  const { pathname } = useLocation();\n\n  const [openSidebar, setOpenSidebar] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [isSearchFocused, setSearchFocused] = useState(false);\n  const { conversations, activeConversationId } = useSelector((state) => state.chat);\n\n  const isDesktop = useResponsive('up', 'md');\n\n  const displayResults = searchQuery && isSearchFocused;\n\n  const isCollapse = isDesktop && !openSidebar;\n\n  useEffect(() => {\n    if (!isDesktop) {\n      return handleCloseSidebar();\n    }\n    return handleOpenSidebar();\n  }, [isDesktop, pathname]);\n\n  // eslint-disable-next-line consistent-return\n  useEffect(() => {\n    if (!openSidebar) {\n      return setSearchFocused(false);\n    }\n  }, [openSidebar]);\n\n  const handleOpenSidebar = () => {\n    setOpenSidebar(true);\n  };\n\n  const handleCloseSidebar = () => {\n    setOpenSidebar(false);\n  };\n\n  const handleToggleSidebar = () => {\n    setOpenSidebar((prev) => !prev);\n  };\n\n  const handleClickAwaySearch = () => {\n    setSearchFocused(false);\n    setSearchQuery('');\n  };\n\n  const handleChangeSearch = async (event) => {\n    try {\n      const { value } = event.target;\n      setSearchQuery(value);\n      if (value) {\n        const response = await axios.get('/api/chat/search', {\n          params: { query: value },\n        });\n        setSearchResults(response.data.results);\n      } else {\n        setSearchResults([]);\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const handleSearchFocus = () => {\n    setSearchFocused(true);\n  };\n\n  const handleSearchSelect = (username) => {\n    setSearchFocused(false);\n    setSearchQuery('');\n    navigate(`${PATH_DASHBOARD.chat.root}/${username}`);\n  };\n\n  const handleSelectContact = (result) => {\n    if (handleSearchSelect) {\n      handleSearchSelect(result.username);\n    }\n  };\n\n  const renderContent = (\n    <>\n      <Box sx={{ py: 2, px: 3 }}>\n        <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"center\">\n          {!isCollapse && (\n            <>\n              <ChatAccount />\n              <Box sx={{ flexGrow: 1 }} />\n            </>\n          )}\n\n          <IconButton onClick={handleToggleSidebar}>\n            <Iconify\n              width={20}\n              height={20}\n              icon={openSidebar ? 'eva:arrow-ios-back-fill' : 'eva:arrow-ios-forward-fill'}\n            />\n          </IconButton>\n\n          {!isCollapse && (\n            <IconButton onClick={() => navigate(PATH_DASHBOARD.chat.new)}>\n              <Iconify icon={'eva:edit-fill'} width={20} height={20} />\n            </IconButton>\n          )}\n        </Stack>\n\n        {!isCollapse && (\n          <ChatContactSearch\n            query={searchQuery}\n            onFocus={handleSearchFocus}\n            onChange={handleChangeSearch}\n            onClickAway={handleClickAwaySearch}\n          />\n        )}\n      </Box>\n\n      <Scrollbar>\n        {!displayResults ? (\n          <ChatConversationList\n            conversations={conversations}\n            isOpenSidebar={openSidebar}\n            activeConversationId={activeConversationId}\n            sx={{ ...(isSearchFocused && { display: 'none' }) }}\n          />\n        ) : (\n          <ChatSearchResults query={searchQuery} results={searchResults} onSelectContact={handleSelectContact} />\n        )}\n      </Scrollbar>\n    </>\n  );\n\n  return (\n    <>\n      {!isDesktop && (\n        <ToggleButtonStyle onClick={handleToggleSidebar}>\n          <Iconify width={16} height={16} icon={'eva:people-fill'} />\n        </ToggleButtonStyle>\n      )}\n\n      {isDesktop ? (\n        <Drawer\n          open={openSidebar}\n          variant=\"persistent\"\n          sx={{\n            width: DRAWER_WIDTH,\n            transition: theme.transitions.create('width'),\n            '& .MuiDrawer-paper': {\n              position: 'static',\n              width: DRAWER_WIDTH,\n            },\n            ...(isCollapse && {\n              width: COLLAPSE_WIDTH,\n              '& .MuiDrawer-paper': {\n                width: COLLAPSE_WIDTH,\n                position: 'static',\n                transform: 'none !important',\n                visibility: 'visible !important',\n              },\n            }),\n          }}\n        >\n          {renderContent}\n        </Drawer>\n      ) : (\n        <Drawer\n          ModalProps={{ keepMounted: true }}\n          open={openSidebar}\n          onClose={handleCloseSidebar}\n          sx={{\n            '& .MuiDrawer-paper': { width: DRAWER_WIDTH },\n          }}\n        >\n          {renderContent}\n        </Drawer>\n      )}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}