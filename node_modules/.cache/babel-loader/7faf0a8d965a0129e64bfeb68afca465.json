{"ast":null,"code":"import _regeneratorRuntime from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{createSlice}from'@reduxjs/toolkit';// utils\nimport axios from'../../utils/axios';//\nimport{dispatch}from'../store';// ----------------------------------------------------------------------\nvar initialState={isLoading:false,error:null,posts:[],post:null,recentPosts:[],hasMore:true,index:0,step:11};var slice=createSlice({name:'blog',initialState:initialState,reducers:{// START LOADING\nstartLoading:function startLoading(state){state.isLoading=true;},// HAS ERROR\nhasError:function hasError(state,action){state.isLoading=false;state.error=action.payload;},// GET POSTS\ngetPostsSuccess:function getPostsSuccess(state,action){state.isLoading=false;state.posts=action.payload;},// GET POST INFINITE\ngetPostsInitial:function getPostsInitial(state,action){state.isLoading=false;state.posts=action.payload;},getMorePosts:function getMorePosts(state){var setIndex=state.index+state.step;state.index=setIndex;},noHasMore:function noHasMore(state){state.hasMore=false;},// GET POST\ngetPostSuccess:function getPostSuccess(state,action){state.isLoading=false;state.post=action.payload;},// GET RECENT POST\ngetRecentPostsSuccess:function getRecentPostsSuccess(state,action){state.isLoading=false;state.recentPosts=action.payload;}}});// Reducer\nexport default slice.reducer;// Actions\nvar getMorePosts=slice.actions.getMorePosts;// ----------------------------------------------------------------------\nexport{getMorePosts};export function getAllPosts(){return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(slice.actions.startLoading());_context.prev=1;_context.next=4;return axios.get('/api/blog/posts/all');case 4:response=_context.sent;dispatch(slice.actions.getPostsSuccess(response.data.posts));_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);dispatch(slice.actions.hasError(_context.t0));case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));}// ----------------------------------------------------------------------\nexport function getPostsInitial(index,step){return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,results,maxLength;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(slice.actions.startLoading());_context2.prev=1;_context2.next=4;return axios.get('/api/blog/posts',{params:{index:index,step:step}});case 4:response=_context2.sent;results=response.data.results.length;maxLength=response.data.maxLength;dispatch(slice.actions.getPostsInitial(response.data.results));if(results>=maxLength){dispatch(slice.actions.noHasMore());}_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](1);dispatch(slice.actions.hasError(_context2.t0));case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[1,11]]);}));}// ----------------------------------------------------------------------\nexport function getPost(title){return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch(slice.actions.startLoading());_context3.prev=1;_context3.next=4;return axios.get('/api/blog/post',{params:{title:title}});case 4:response=_context3.sent;dispatch(slice.actions.getPostSuccess(response.data.post));_context3.next=12;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](1);console.error(_context3.t0);dispatch(slice.actions.hasError(_context3.t0));case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[1,8]]);}));}// ----------------------------------------------------------------------\nexport function getRecentPosts(title){return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch(slice.actions.startLoading());_context4.prev=1;_context4.next=4;return axios.get('/api/blog/posts/recent',{params:{title:title}});case 4:response=_context4.sent;dispatch(slice.actions.getRecentPostsSuccess(response.data.recentPosts));_context4.next=12;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](1);console.error(_context4.t0);dispatch(slice.actions.hasError(_context4.t0));case 12:case\"end\":return _context4.stop();}}},_callee4,null,[[1,8]]);}));}","map":{"version":3,"sources":["D:/Projects/Cdss apps/Final version/admin/src/redux/slices/blog.js"],"names":["createSlice","axios","dispatch","initialState","isLoading","error","posts","post","recentPosts","hasMore","index","step","slice","name","reducers","startLoading","state","hasError","action","payload","getPostsSuccess","getPostsInitial","getMorePosts","setIndex","noHasMore","getPostSuccess","getRecentPostsSuccess","reducer","actions","getAllPosts","get","response","data","params","results","length","maxLength","getPost","title","console","getRecentPosts"],"mappings":"6TAAA,OAASA,WAAT,KAA4B,kBAA5B,CACA;AACA,MAAOC,CAAAA,KAAP,KAAkB,mBAAlB,CACA;AACA,OAASC,QAAT,KAAyB,UAAzB,CAEA;AAEA,GAAMC,CAAAA,YAAY,CAAG,CACnBC,SAAS,CAAE,KADQ,CAEnBC,KAAK,CAAE,IAFY,CAGnBC,KAAK,CAAE,EAHY,CAInBC,IAAI,CAAE,IAJa,CAKnBC,WAAW,CAAE,EALM,CAMnBC,OAAO,CAAE,IANU,CAOnBC,KAAK,CAAE,CAPY,CAQnBC,IAAI,CAAE,EARa,CAArB,CAWA,GAAMC,CAAAA,KAAK,CAAGZ,WAAW,CAAC,CACxBa,IAAI,CAAE,MADkB,CAExBV,YAAY,CAAZA,YAFwB,CAGxBW,QAAQ,CAAE,CACR;AACAC,YAFQ,uBAEKC,KAFL,CAEY,CAClBA,KAAK,CAACZ,SAAN,CAAkB,IAAlB,CACD,CAJO,CAMR;AACAa,QAPQ,mBAOCD,KAPD,CAOQE,MAPR,CAOgB,CACtBF,KAAK,CAACZ,SAAN,CAAkB,KAAlB,CACAY,KAAK,CAACX,KAAN,CAAca,MAAM,CAACC,OAArB,CACD,CAVO,CAYR;AACAC,eAbQ,0BAaQJ,KAbR,CAaeE,MAbf,CAauB,CAC7BF,KAAK,CAACZ,SAAN,CAAkB,KAAlB,CACAY,KAAK,CAACV,KAAN,CAAcY,MAAM,CAACC,OAArB,CACD,CAhBO,CAkBR;AACAE,eAnBQ,0BAmBQL,KAnBR,CAmBeE,MAnBf,CAmBuB,CAC7BF,KAAK,CAACZ,SAAN,CAAkB,KAAlB,CACAY,KAAK,CAACV,KAAN,CAAcY,MAAM,CAACC,OAArB,CACD,CAtBO,CAwBRG,YAxBQ,uBAwBKN,KAxBL,CAwBY,CAClB,GAAMO,CAAAA,QAAQ,CAAGP,KAAK,CAACN,KAAN,CAAcM,KAAK,CAACL,IAArC,CACAK,KAAK,CAACN,KAAN,CAAca,QAAd,CACD,CA3BO,CA6BRC,SA7BQ,oBA6BER,KA7BF,CA6BS,CACfA,KAAK,CAACP,OAAN,CAAgB,KAAhB,CACD,CA/BO,CAiCR;AACAgB,cAlCQ,yBAkCOT,KAlCP,CAkCcE,MAlCd,CAkCsB,CAC5BF,KAAK,CAACZ,SAAN,CAAkB,KAAlB,CACAY,KAAK,CAACT,IAAN,CAAaW,MAAM,CAACC,OAApB,CACD,CArCO,CAuCR;AACAO,qBAxCQ,gCAwCcV,KAxCd,CAwCqBE,MAxCrB,CAwC6B,CACnCF,KAAK,CAACZ,SAAN,CAAkB,KAAlB,CACAY,KAAK,CAACR,WAAN,CAAoBU,MAAM,CAACC,OAA3B,CACD,CA3CO,CAHc,CAAD,CAAzB,CAkDA;AACA,cAAeP,CAAAA,KAAK,CAACe,OAArB,CAEA;AACO,GAAQL,CAAAA,YAAR,CAAyBV,KAAK,CAACgB,OAA/B,CAAQN,YAAR,CAEP;qBAEA,MAAO,SAASO,CAAAA,WAAT,EAAuB,CAC5B,2EAAO,gJACL3B,QAAQ,CAACU,KAAK,CAACgB,OAAN,CAAcb,YAAd,EAAD,CAAR,CADK,sCAGoBd,CAAAA,KAAK,CAAC6B,GAAN,CAAU,qBAAV,CAHpB,QAGGC,QAHH,eAIH7B,QAAQ,CAACU,KAAK,CAACgB,OAAN,CAAcR,eAAd,CAA8BW,QAAQ,CAACC,IAAT,CAAc1B,KAA5C,CAAD,CAAR,CAJG,+EAMHJ,QAAQ,CAACU,KAAK,CAACgB,OAAN,CAAcX,QAAd,aAAD,CAAR,CANG,oEAAP,GASD,CAED;AAEA,MAAO,SAASI,CAAAA,eAAT,CAAyBX,KAAzB,CAAgCC,IAAhC,CAAsC,CAC3C,2EAAO,uKACLT,QAAQ,CAACU,KAAK,CAACgB,OAAN,CAAcb,YAAd,EAAD,CAAR,CADK,wCAGoBd,CAAAA,KAAK,CAAC6B,GAAN,CAAU,iBAAV,CAA6B,CAClDG,MAAM,CAAE,CAAEvB,KAAK,CAALA,KAAF,CAASC,IAAI,CAAJA,IAAT,CAD0C,CAA7B,CAHpB,QAGGoB,QAHH,gBAMGG,OANH,CAMaH,QAAQ,CAACC,IAAT,CAAcE,OAAd,CAAsBC,MANnC,CAOKC,SAPL,CAOmBL,QAAQ,CAACC,IAP5B,CAOKI,SAPL,CASHlC,QAAQ,CAACU,KAAK,CAACgB,OAAN,CAAcP,eAAd,CAA8BU,QAAQ,CAACC,IAAT,CAAcE,OAA5C,CAAD,CAAR,CAEA,GAAIA,OAAO,EAAIE,SAAf,CAA0B,CACxBlC,QAAQ,CAACU,KAAK,CAACgB,OAAN,CAAcJ,SAAd,EAAD,CAAR,CACD,CAbE,qFAeHtB,QAAQ,CAACU,KAAK,CAACgB,OAAN,CAAcX,QAAd,cAAD,CAAR,CAfG,uEAAP,GAkBD,CAED;AAEA,MAAO,SAASoB,CAAAA,OAAT,CAAiBC,KAAjB,CAAwB,CAC7B,2EAAO,qJACLpC,QAAQ,CAACU,KAAK,CAACgB,OAAN,CAAcb,YAAd,EAAD,CAAR,CADK,wCAGoBd,CAAAA,KAAK,CAAC6B,GAAN,CAAU,gBAAV,CAA4B,CACjDG,MAAM,CAAE,CAAEK,KAAK,CAALA,KAAF,CADyC,CAA5B,CAHpB,QAGGP,QAHH,gBAMH7B,QAAQ,CAACU,KAAK,CAACgB,OAAN,CAAcH,cAAd,CAA6BM,QAAQ,CAACC,IAAT,CAAczB,IAA3C,CAAD,CAAR,CANG,mFAQHgC,OAAO,CAAClC,KAAR,eACAH,QAAQ,CAACU,KAAK,CAACgB,OAAN,CAAcX,QAAd,cAAD,CAAR,CATG,sEAAP,GAYD,CAED;AAEA,MAAO,SAASuB,CAAAA,cAAT,CAAwBF,KAAxB,CAA+B,CACpC,2EAAO,qJACLpC,QAAQ,CAACU,KAAK,CAACgB,OAAN,CAAcb,YAAd,EAAD,CAAR,CADK,wCAGoBd,CAAAA,KAAK,CAAC6B,GAAN,CAAU,wBAAV,CAAoC,CACzDG,MAAM,CAAE,CAAEK,KAAK,CAALA,KAAF,CADiD,CAApC,CAHpB,QAGGP,QAHH,gBAOH7B,QAAQ,CAACU,KAAK,CAACgB,OAAN,CAAcF,qBAAd,CAAoCK,QAAQ,CAACC,IAAT,CAAcxB,WAAlD,CAAD,CAAR,CAPG,mFASH+B,OAAO,CAAClC,KAAR,eACAH,QAAQ,CAACU,KAAK,CAACgB,OAAN,CAAcX,QAAd,cAAD,CAAR,CAVG,sEAAP,GAaD","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\n// utils\nimport axios from '../../utils/axios';\n//\nimport { dispatch } from '../store';\n\n// ----------------------------------------------------------------------\n\nconst initialState = {\n  isLoading: false,\n  error: null,\n  posts: [],\n  post: null,\n  recentPosts: [],\n  hasMore: true,\n  index: 0,\n  step: 11,\n};\n\nconst slice = createSlice({\n  name: 'blog',\n  initialState,\n  reducers: {\n    // START LOADING\n    startLoading(state) {\n      state.isLoading = true;\n    },\n\n    // HAS ERROR\n    hasError(state, action) {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n\n    // GET POSTS\n    getPostsSuccess(state, action) {\n      state.isLoading = false;\n      state.posts = action.payload;\n    },\n\n    // GET POST INFINITE\n    getPostsInitial(state, action) {\n      state.isLoading = false;\n      state.posts = action.payload;\n    },\n\n    getMorePosts(state) {\n      const setIndex = state.index + state.step;\n      state.index = setIndex;\n    },\n\n    noHasMore(state) {\n      state.hasMore = false;\n    },\n\n    // GET POST\n    getPostSuccess(state, action) {\n      state.isLoading = false;\n      state.post = action.payload;\n    },\n\n    // GET RECENT POST\n    getRecentPostsSuccess(state, action) {\n      state.isLoading = false;\n      state.recentPosts = action.payload;\n    },\n  },\n});\n\n// Reducer\nexport default slice.reducer;\n\n// Actions\nexport const { getMorePosts } = slice.actions;\n\n// ----------------------------------------------------------------------\n\nexport function getAllPosts() {\n  return async () => {\n    dispatch(slice.actions.startLoading());\n    try {\n      const response = await axios.get('/api/blog/posts/all');\n      dispatch(slice.actions.getPostsSuccess(response.data.posts));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n}\n\n// ----------------------------------------------------------------------\n\nexport function getPostsInitial(index, step) {\n  return async () => {\n    dispatch(slice.actions.startLoading());\n    try {\n      const response = await axios.get('/api/blog/posts', {\n        params: { index, step },\n      });\n      const results = response.data.results.length;\n      const { maxLength } = response.data;\n\n      dispatch(slice.actions.getPostsInitial(response.data.results));\n\n      if (results >= maxLength) {\n        dispatch(slice.actions.noHasMore());\n      }\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n}\n\n// ----------------------------------------------------------------------\n\nexport function getPost(title) {\n  return async () => {\n    dispatch(slice.actions.startLoading());\n    try {\n      const response = await axios.get('/api/blog/post', {\n        params: { title },\n      });\n      dispatch(slice.actions.getPostSuccess(response.data.post));\n    } catch (error) {\n      console.error(error);\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n}\n\n// ----------------------------------------------------------------------\n\nexport function getRecentPosts(title) {\n  return async () => {\n    dispatch(slice.actions.startLoading());\n    try {\n      const response = await axios.get('/api/blog/posts/recent', {\n        params: { title },\n      });\n\n      dispatch(slice.actions.getRecentPostsSuccess(response.data.recentPosts));\n    } catch (error) {\n      console.error(error);\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n}\n"]},"metadata":{},"sourceType":"module"}