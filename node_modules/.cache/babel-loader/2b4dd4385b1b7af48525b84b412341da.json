{"ast":null,"code":"import _slicedToArray from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";var _excluded=[\"children\",\"value\",\"index\"];import React,{useState,useEffect,forwardRef,useRef}from'react';import{InputGroup,FormControl,Nav,Row,Col,Sonnet}from'react-bootstrap';import ModalHeader from'react-bootstrap/ModalHeader';import{useSelector}from'react-redux';import{Link,useNavigate,Redirect}from'react-router-dom';import{updatePassword,changeName,uploadImage}from'../../api/Profile/Profile';import Loader from\"react-loader-spinner\";import{BsSortDownAlt,BsFillTrashFill,BiBlock}from\"react-icons/bs\";import{getUserById,changeStatus,deleteUser}from\"../../api/Users/Users\";import{imageBaseUrl}from'../..';import{editAboutUs,editPrivacyPolicy,editTermAndConditions,fetchCMS}from'../../api/CMS/CMS';import Tabs from'@mui/material/Tabs';import Tab from'@mui/material/Tab';import Typography from'@mui/material/Typography';import Box from'@mui/material/Box';import Card from'@mui/material/Card';import CardContent from'@mui/material/CardContent';import SingleFaqRow from'./SingleFaqRow';import Table from'@mui/material/Table';import TableBody from'@mui/material/TableBody';import TableCell from'@mui/material/TableCell';import TableContainer from'@mui/material/TableContainer';import TableHead from'@mui/material/TableHead';import{Button}from'@mui/material';import CircularProgress from'@mui/material/CircularProgress';import{Modal as BootstrapModal}from'react-bootstrap';import Grid from'@mui/material/Grid';import Modal from'@mui/material/Modal';import{modalStyle}from'src/config';import{useParams}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function TabPanel(props){var children=props.children,value=props.value,index=props.index,other=_objectWithoutProperties(props,_excluded);return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({role:\"tabpanel\",hidden:value!==index,id:\"simple-tabpanel-\".concat(index),\"aria-labelledby\":\"simple-tab-\".concat(index)},other),{},{children:value===index&&/*#__PURE__*/_jsx(Box,{sx:{p:3},children:/*#__PURE__*/_jsx(Typography,{children:children})})}));}function a11yProps(index){return{id:\"simple-tab-\".concat(index),'aria-controls':\"simple-tabpanel-\".concat(index)};}export default function AddEditCMS(props){//setting the user id of the user coming from the url into a local variable\nvar _useParams=useParams(),cmsId=_useParams.cmsId;// const [cmsId, setCmsId] = useState();\nvar _useState=useState(cmsId?\"edit\":\"add\"),_useState2=_slicedToArray(_useState,2),mode=_useState2[0],setMode=_useState2[1];//setting cms data into a variable\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),cms=_useState4[0],setCms=_useState4[1];//setting Terms data into a variable\nvar _useState5=useState(),_useState6=_slicedToArray(_useState5,2),terms=_useState6[0],setTerms=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isTerms=_useState8[0],setIsTerms=_useState8[1];//setting Terms data into a variable\nvar _useState9=useState(),_useState10=_slicedToArray(_useState9,2),policy=_useState10[0],setPolicy=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isPolicy=_useState12[0],setIsPolicy=_useState12[1];//setting Terms data into a variable\nvar _useState13=useState(),_useState14=_slicedToArray(_useState13,2),about=_useState14[0],setAbout=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isAbout=_useState16[0],setIsAbout=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),modalVisible=_useState18[0],setModalVisible=_useState18[1];var navigate=useNavigate();//sets and display the line in the success modal!\nvar _useState19=useState(''),_useState20=_slicedToArray(_useState19,2),modalLine1=_useState20[0],setModalLine1=_useState20[1];var _useState21=useState(''),_useState22=_slicedToArray(_useState21,2),modalLine2=_useState22[0],setModalLine2=_useState22[1];//sets the loader for add subject button\nvar _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),addLoader=_useState24[0],setAddLoader=_useState24[1];//sets the loader for edit subject button\nvar _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),editLoader=_useState26[0],setEditLoader=_useState26[1];//shows the error when users try to add subject without name\nvar _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),errorMessage=_useState28[0],setErrorMessage=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),error=_useState30[0],showError=_useState30[1];var _React$useState=React.useState(0),_React$useState2=_slicedToArray(_React$useState,2),tab=_React$useState2[0],setTab=_React$useState2[1];var handleChange=function handleChange(event,newValue){setTab(newValue);};//useEffect will assign the data of user according to the userId from the state on every change into the userId\nuseEffect(function(){setMode(cmsId?\"edit\":\"add\");fetchCMS().then(function(res){console.log('res',res);if(res.status){//setting the fetched user into state variable\nsetCms(res.cms);}}).catch(function(err){console.error(err);});},[cmsId]);//edit  existing terms and condition\nfunction editTerms(){setModalVisible(false);setEditLoader(true);showError(false);if(cmsId!=''){console.log(terms);editTermAndConditions(cmsId,terms).then(function(res){console.log(res);if(res.status){setEditLoader(false);setModalLine1('Terms & condition has been');setModalLine2('updated successfully');setModalVisible(true);}else{setEditLoader(false);showError(true);setErrorMessage('Error occured');}}).catch(function(err){console.error(err);setEditLoader(false);showError(true);setErrorMessage('Error occured');});}else{setAddLoader(false);showError(true);setErrorMessage('Please fill all the topic details');}}//edit  existing about us\nfunction editAbout(){setModalVisible(false);setEditLoader(true);showError(false);if(cmsId!=''){editAboutUs(cmsId,about).then(function(res){console.log(res);if(res.status){setEditLoader(false);setModalLine1('About Us has been');setModalLine2('updated successfully');setModalVisible(true);}else{setEditLoader(false);showError(true);setErrorMessage('Error occured');}}).catch(function(err){console.error(err);setEditLoader(false);showError(true);setErrorMessage('Error occured');});}else{setAddLoader(false);showError(true);setErrorMessage('Please fill all the about details');}}//edit the  existing policy\nfunction editPolicy(){setModalVisible(false);setEditLoader(true);showError(false);if(cmsId!=''){editPrivacyPolicy(cmsId,policy).then(function(res){console.log(res);if(res.status){setEditLoader(false);setModalLine1('Privacy Policy has been');setModalLine2('updated successfully');setModalVisible(true);}else{setEditLoader(false);showError(true);setErrorMessage('Error occured');}}).catch(function(err){console.error(err);setEditLoader(false);showError(true);setErrorMessage('Error occured');});}else{setAddLoader(false);showError(true);setErrorMessage('Please fill all the policy details');}}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"m-3 txt-5282F0 fw-bold\",children:\"CMS | Edit Details\"}),/*#__PURE__*/_jsx(Card,{className:\"shadow px-4 mt-4\",style:{width:'100%'},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Box,{sx:{borderBottom:1,borderColor:'divider'},children:/*#__PURE__*/_jsxs(Tabs,{value:tab,onChange:handleChange,\"aria-label\":\"basic tabs example\",children:[/*#__PURE__*/_jsx(Tab,_objectSpread({label:\"Terms & Conditions\"},a11yProps(0))),/*#__PURE__*/_jsx(Tab,_objectSpread({label:\"About Us\"},a11yProps(1))),/*#__PURE__*/_jsx(Tab,_objectSpread({label:\"PrivacyPolicy\"},a11yProps(2)))]})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{sm:12,children:[/*#__PURE__*/_jsx(TabPanel,{value:tab,index:0,children:/*#__PURE__*/_jsx(InputGroup,{children:/*#__PURE__*/_jsx(FormControl,{\"aria-label\":\"Search\",\"aria-describedby\":\"basic-addon1\",as:\"textarea\",rows:3,defaultValue:cms.termsAndConditions,onChange:function onChange(e){setTerms(e.target.value);setIsTerms(true);}})})}),/*#__PURE__*/_jsx(TabPanel,{value:tab,index:1,children:/*#__PURE__*/_jsx(InputGroup,{children:/*#__PURE__*/_jsx(FormControl,{\"aria-label\":\"Search\",as:\"textarea\",rows:3,\"aria-describedby\":\"basic-addon1\",defaultValue:cms.aboutUs,onChange:function onChange(e){setAbout(e.target.value);setIsAbout(true);}})})}),/*#__PURE__*/_jsx(TabPanel,{value:tab,index:2,children:/*#__PURE__*/_jsx(InputGroup,{children:/*#__PURE__*/_jsx(FormControl,{\"aria-label\":\"Search\",as:\"textarea\",rows:3,\"aria-describedby\":\"basic-addon1\",defaultValue:cms.privacyPolicy,onChange:function onChange(e){setPolicy(e.target.value);setIsPolicy(true);}})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row d-felx justify-content-end\",children:mode==\"edit\"?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-2 col-md-2 col-6 mt-3 \",children:editLoader?/*#__PURE__*/_jsx(Button,{variant:\"outlined\",children:/*#__PURE__*/_jsx(CircularProgress,{size:20})}):/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:function onClick(){isTerms?editTerms():isPolicy?editPolicy():editAbout();},children:\"Save Changes\"})})}):/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-2 col-md-2 col-6 mt-3 \",children:addLoader?/*#__PURE__*/_jsx(Button,{variant:\"outlined\",className:\" py-2 px-6\",children:/*#__PURE__*/_jsx(CircularProgress,{size:20})}):/*#__PURE__*/_jsx(Button,{variant:\"contained\",className:\" py-2 px-6\"// onClick={() => addNewTopic()}\n,children:\"Add\"})})})]})}),/*#__PURE__*/_jsx(Modal,{open:modalVisible,size:\"lg\",\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true,onClose:function onClose(){return setModalVisible(false);},children:/*#__PURE__*/_jsx(Box,{sx:modalStyle,children:/*#__PURE__*/_jsxs(BootstrapModal.Body,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center txt-5282F0 my-4\",children:[/*#__PURE__*/_jsx(\"img\",{src:'/Assets/modalPhoto.png'}),/*#__PURE__*/_jsx(\"h3\",{children:modalLine1}),/*#__PURE__*/_jsx(\"h3\",{className:\"modalLowerText\",children:modalLine2})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-4 pb-3\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",className:\" px-5\",style:{marginRight:10},onClick:function onClick(){return navigate('/dashboard/cms');},children:\"Back To CMS\"})})]})})})]});}","map":{"version":3,"sources":["D:/Projects/Cdss apps/Final version/admin/src/pages/cms/AddEditCMS.js"],"names":["React","useState","useEffect","forwardRef","useRef","InputGroup","FormControl","Nav","Row","Col","Sonnet","ModalHeader","useSelector","Link","useNavigate","Redirect","updatePassword","changeName","uploadImage","Loader","BsSortDownAlt","BsFillTrashFill","BiBlock","getUserById","changeStatus","deleteUser","imageBaseUrl","editAboutUs","editPrivacyPolicy","editTermAndConditions","fetchCMS","Tabs","Tab","Typography","Box","Card","CardContent","SingleFaqRow","Table","TableBody","TableCell","TableContainer","TableHead","Button","CircularProgress","Modal","BootstrapModal","Grid","modalStyle","useParams","TabPanel","props","children","value","index","other","p","a11yProps","id","AddEditCMS","cmsId","mode","setMode","cms","setCms","terms","setTerms","isTerms","setIsTerms","policy","setPolicy","isPolicy","setIsPolicy","about","setAbout","isAbout","setIsAbout","modalVisible","setModalVisible","navigate","modalLine1","setModalLine1","modalLine2","setModalLine2","addLoader","setAddLoader","editLoader","setEditLoader","errorMessage","setErrorMessage","error","showError","tab","setTab","handleChange","event","newValue","then","res","console","log","status","catch","err","editTerms","editAbout","editPolicy","width","borderBottom","borderColor","termsAndConditions","e","target","aboutUs","privacyPolicy","marginRight"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, forwardRef, useRef } from 'react'\nimport { InputGroup, FormControl,   Nav, Row, Col, Sonnet } from 'react-bootstrap'\nimport ModalHeader from 'react-bootstrap/ModalHeader'\nimport { useSelector } from 'react-redux'\nimport { Link, useNavigate, Redirect } from 'react-router-dom'\nimport { updatePassword, changeName, uploadImage } from '../../api/Profile/Profile'\nimport Loader from \"react-loader-spinner\";\n  \n \n \nimport { BsSortDownAlt, BsFillTrashFill, BiBlock } from \"react-icons/bs\";\nimport { getUserById, changeStatus, deleteUser } from \"../../api/Users/Users\"\nimport { imageBaseUrl } from '../..'; \nimport { editAboutUs, editPrivacyPolicy, editTermAndConditions, fetchCMS } from '../../api/CMS/CMS'\n\n \nimport Tabs from '@mui/material/Tabs';\nimport Tab from '@mui/material/Tab';\nimport Typography from '@mui/material/Typography';\nimport Box from '@mui/material/Box';\n\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport SingleFaqRow from './SingleFaqRow';\n\nimport Table from '@mui/material/Table';\nimport TableBody from '@mui/material/TableBody';\nimport TableCell from '@mui/material/TableCell';\nimport TableContainer from '@mui/material/TableContainer';\nimport TableHead from '@mui/material/TableHead'; \nimport { Button } from '@mui/material';\nimport CircularProgress from '@mui/material/CircularProgress';  \nimport { Modal as BootstrapModal} from 'react-bootstrap'\nimport Grid from '@mui/material/Grid'; \nimport Modal from '@mui/material/Modal'; \nimport { modalStyle } from 'src/config'\nimport {useParams} from 'react-router-dom'\n\nfunction TabPanel(props) {\n    const { children, value, index, ...other } = props;\n  \n    return (\n      <div\n        role=\"tabpanel\"\n        hidden={value !== index}\n        id={`simple-tabpanel-${index}`}\n        aria-labelledby={`simple-tab-${index}`}\n        {...other}\n      >\n        {value === index && (\n          <Box sx={{ p: 3 }}>\n            <Typography>{children}</Typography>\n          </Box>\n        )}\n      </div>\n    );\n  }\n\nfunction a11yProps(index) {\n    return {\n      id: `simple-tab-${index}`,\n      'aria-controls': `simple-tabpanel-${index}`,\n    };\n  } \nexport default function AddEditCMS(props) {\n\n    //setting the user id of the user coming from the url into a local variable\n    const {cmsId} = useParams()\n    // const [cmsId, setCmsId] = useState();\n\n    const [mode, setMode] = useState(cmsId ? \"edit\" : \"add\")\n\n    //setting cms data into a variable\n    const [cms, setCms] = useState([]);\n\n    //setting Terms data into a variable\n    const [terms, setTerms] = useState();\n    const [isTerms, setIsTerms] = useState(false)\n\n    //setting Terms data into a variable\n    const [policy, setPolicy] = useState();\n    const [isPolicy, setIsPolicy] = useState(false)\n\n    //setting Terms data into a variable\n    const [about, setAbout] = useState();\n    const [isAbout, setIsAbout] = useState(false)\n\n    const [modalVisible, setModalVisible] = useState(false)\n    const navigate =  useNavigate()\n\n    //sets and display the line in the success modal!\n    const [modalLine1, setModalLine1] = useState('');\n    const [modalLine2, setModalLine2] = useState('')\n\n    //sets the loader for add subject button\n    const [addLoader, setAddLoader] = useState(false)\n\n    //sets the loader for edit subject button\n    const [editLoader, setEditLoader] = useState(false)\n\n    //shows the error when users try to add subject without name\n    const [errorMessage, setErrorMessage] = useState(false);\n    const [error, showError] = useState(false);\n    const [tab, setTab] = React.useState(0);\n\n    const handleChange = (event, newValue) => {\n      setTab(newValue);\n    };\n    //useEffect will assign the data of user according to the userId from the state on every change into the userId\n    useEffect(() => {\n        setMode(cmsId ? \"edit\" : \"add\")\n        fetchCMS().then((res) => {\n            console.log('res', res);\n            if (res.status) {\n                //setting the fetched user into state variable\n                setCms(res.cms);\n            }\n        })\n            .catch((err) => {\n                console.error(err);\n            });\n\n    }, [cmsId])\n\n\n    //edit  existing terms and condition\n    function editTerms() {\n        setModalVisible(false);\n        setEditLoader(true);\n        showError(false);\n        if (cmsId != '') {\n            console.log(terms)\n            editTermAndConditions(cmsId, terms)\n                .then((res) => {\n                    console.log(res);\n                    if (res.status) {\n                        setEditLoader(false);\n                        setModalLine1('Terms & condition has been');\n                        setModalLine2('updated successfully')\n                        setModalVisible(true)\n                    }\n                    else {\n                        setEditLoader(false);\n                        showError(true);\n                        setErrorMessage('Error occured');\n                    }\n\n                })\n                .catch((err) => {\n                    console.error(err);\n                    setEditLoader(false)\n                    showError(true);\n                    setErrorMessage('Error occured');\n                })\n        }\n        else {\n            setAddLoader(false)\n            showError(true);\n            setErrorMessage('Please fill all the topic details');\n        }\n\n    }\n    //edit  existing about us\n    function editAbout() {\n        setModalVisible(false);\n        setEditLoader(true);\n        showError(false);\n        if (cmsId != '') {\n            editAboutUs(cmsId, about)\n                .then((res) => {\n                    console.log(res);\n                    if (res.status) {\n                        setEditLoader(false);\n                        setModalLine1('About Us has been');\n                        setModalLine2('updated successfully')\n                        setModalVisible(true)\n                    }\n                    else {\n                        setEditLoader(false);\n                        showError(true);\n                        setErrorMessage('Error occured');\n                    }\n\n                })\n                .catch((err) => {\n                    console.error(err);\n                    setEditLoader(false)\n                    showError(true);\n                    setErrorMessage('Error occured');\n                })\n        }\n        else {\n            setAddLoader(false)\n            showError(true);\n            setErrorMessage('Please fill all the about details');\n        }\n\n    }\n\n    //edit the  existing policy\n    function editPolicy() {\n        setModalVisible(false);\n        setEditLoader(true);\n        showError(false);\n        if (cmsId != '') {\n            editPrivacyPolicy(cmsId, policy)\n                .then((res) => {\n                    console.log(res);\n                    if (res.status) {\n                        setEditLoader(false);\n                        setModalLine1('Privacy Policy has been');\n                        setModalLine2('updated successfully')\n                        setModalVisible(true)\n                    }\n                    else {\n                        setEditLoader(false);\n                        showError(true);\n                        setErrorMessage('Error occured');\n                    }\n\n                })\n                .catch((err) => {\n                    console.error(err);\n                    setEditLoader(false)\n                    showError(true);\n                    setErrorMessage('Error occured');\n                })\n        }\n        else {\n            setAddLoader(false)\n            showError(true);\n            setErrorMessage('Please fill all the policy details');\n        }\n\n    }\n\n\n    return (\n        <>\n            <h5 className=\"m-3 txt-5282F0 fw-bold\">CMS | Edit Details</h5>\n            <Card className=\"shadow px-4 mt-4\" style={{ width: '100%' }}>\n                <CardContent>\n                <Box sx={{ borderBottom: 1, borderColor: 'divider' }}> \n                    <Tabs value={tab} onChange={handleChange} aria-label=\"basic tabs example\">\n                        <Tab label=\"Terms & Conditions\" {...a11yProps(0)} />\n                        <Tab label=\"About Us\" {...a11yProps(1)} /> \n                        <Tab label=\"PrivacyPolicy\" {...a11yProps(2)} />\n                    </Tabs>\n\n                </Box>\n                    \n                        <Row>\n                            <Col sm={12}>\n                            \n                                    <TabPanel value={tab} index={0}>\n                                        <InputGroup>\n                                            <FormControl\n                                                aria-label=\"Search\"\n                                                aria-describedby=\"basic-addon1\"\n                                                as=\"textarea\" rows={3}\n                                                defaultValue={cms.termsAndConditions}\n                                                onChange={(e) => {setTerms(e.target.value); setIsTerms(true)}}\n                                            />\n                                        </InputGroup>\n                                    </TabPanel>\n                                    <TabPanel  value={tab} index={1}>\n                                        <InputGroup>\n                                            <FormControl\n                                                aria-label=\"Search\"\n                                                as=\"textarea\" rows={3}\n                                                aria-describedby=\"basic-addon1\"\n                                                defaultValue={cms.aboutUs}\n                                                onChange={(e) => {setAbout(e.target.value); setIsAbout(true)}}\n                                            />\n                                        </InputGroup>\n                                    </TabPanel>\n                                    {/* <TabPanel eventKey=\"FAQs\">\n                                        <InputGroup>\n                                            <FormControl\n                                                aria-label=\"Search\"\n                                                aria-describedby=\"basic-addon1\"\n                                            // value={cms.fqa}\n                                            // onChange={(e)=>se(e.target.value)}\n                                            />\n                                        </InputGroup>\n                                    </TabPanel> */}\n                                    <TabPanel value={tab} index={2}>\n                                        <InputGroup>\n                                            <FormControl\n                                                aria-label=\"Search\"\n                                                as=\"textarea\" rows={3}\n                                                aria-describedby=\"basic-addon1\"\n                                                defaultValue={cms.privacyPolicy}\n                                                onChange={(e) => {setPolicy(e.target.value); setIsPolicy(true)}}\n                                            />\n                                        </InputGroup>\n                                    </TabPanel>\n                                \n                            </Col>\n                        </Row>\n                    \n                    <div className=\"row d-felx justify-content-end\">\n\n                        {mode == \"edit\" ? (\n                            <>\n                                <div className=\"col-lg-2 col-md-2 col-6 mt-3 \">\n                                    {editLoader ? (\n                                        <Button variant=\"outlined\">\n                                            <CircularProgress size={20}/>\n                                        </Button>\n                                    ) : (\n                                        <Button variant=\"contained\"  onClick={() => {isTerms? editTerms() : isPolicy? editPolicy() : editAbout() }}>Save Changes</Button>\n                                    )}\n                                </div>\n                            </>\n                        ) : (\n\n                            <div className=\"col-lg-2 col-md-2 col-6 mt-3 \">\n                                {addLoader ? (\n                                    <Button variant=\"outlined\" className=\" py-2 px-6\" >\n                                        <CircularProgress size={20}/>\n                                    </Button>\n                                ) : (\n                                    <Button variant=\"contained\" className=\" py-2 px-6\"\n                                    // onClick={() => addNewTopic()}\n                                    >Add</Button>\n                                )}\n\n                            </div>\n                        )}\n\n                    </div>\n                </CardContent>\n            </Card>\n            {/* </div> */}\n            {/* </LeftNavbar> */}\n\n            <Modal\n                open={modalVisible}\n                size=\"lg\"\n                aria-labelledby=\"contained-modal-title-vcenter\"\n                centered\n                onClose={()=>setModalVisible(false)}\n            >\n                <Box sx={modalStyle}>\n                    <BootstrapModal.Body>\n                        <div className=\"text-center txt-5282F0 my-4\">\n                            <img src={'/Assets/modalPhoto.png'} />\n                            <h3>{modalLine1}</h3>\n                            <h3 className=\"modalLowerText\">{modalLine2}</h3>\n                        </div>\n                        <div className=\"text-center mt-4 pb-3\">\n                            <Button  variant=\"contained\" className=\" px-5\" style={{ marginRight: 10 }}\n                                onClick={() => navigate('/dashboard/cms')}\n                            >Back To CMS</Button>\n                        </div>\n                    </BootstrapModal.Body>\n                </Box>\n            </Modal>\n        </>\n    )\n}\n\n"]},"metadata":{},"sourceType":"module"}