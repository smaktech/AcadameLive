{"ast":null,"code":"import _regeneratorRuntime from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import*as Yup from'yup';import{useSnackbar}from'notistack';import{useCallback,useState}from'react';import{Form,FormikProvider,useFormik}from'formik';// @mui\nimport{LoadingButton}from'@mui/lab';import{styled}from'@mui/material/styles';import{Card,Grid,Chip,Stack,Button,Switch,TextField,Typography,Autocomplete,FormHelperText,FormControlLabel}from'@mui/material';// components\nimport Editor from'../../../components/editor';import{UploadSingleFile}from'../../../components/upload';//\nimport BlogNewPostPreview from'./BlogNewPostPreview';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{createElement as _createElement}from\"react\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var TAGS_OPTION=['Toy Story 3','Logan','Full Metal Jacket','Dangal','The Sting','2001: A Space Odyssey',\"Singin' in the Rain\",'Toy Story','Bicycle Thieves','The Kid','Inglourious Basterds','Snatch','3 Idiots'];var LabelStyle=styled(Typography)(function(_ref){var theme=_ref.theme;return _objectSpread(_objectSpread({},theme.typography.subtitle2),{},{color:theme.palette.text.secondary,marginBottom:theme.spacing(1)});});// ----------------------------------------------------------------------\nexport default function BlogNewPostForm(){var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var handleOpenPreview=function handleOpenPreview(){setOpen(true);};var handleClosePreview=function handleClosePreview(){setOpen(false);};var NewBlogSchema=Yup.object().shape({title:Yup.string().required('Title is required'),description:Yup.string().required('Description is required'),content:Yup.string().min(1000).required('Content is required'),cover:Yup.mixed().required('Cover is required')});var formik=useFormik({initialValues:{title:'',description:'',content:'',cover:null,tags:['Logan'],publish:true,comments:true,metaTitle:'',metaDescription:'',metaKeywords:['Logan']},validationSchema:NewBlogSchema,onSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values,_ref2){var setSubmitting,resetForm;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setSubmitting=_ref2.setSubmitting,resetForm=_ref2.resetForm;_context.prev=1;_context.next=4;return new Promise(function(resolve){return setTimeout(resolve,500);});case 4:resetForm();handleClosePreview();setSubmitting(false);enqueueSnackbar('Post success',{variant:'success'});_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);console.error(_context.t0);setSubmitting(false);case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,10]]);}));function onSubmit(_x,_x2){return _onSubmit.apply(this,arguments);}return onSubmit;}()});var errors=formik.errors,values=formik.values,touched=formik.touched,handleSubmit=formik.handleSubmit,isSubmitting=formik.isSubmitting,setFieldValue=formik.setFieldValue,getFieldProps=formik.getFieldProps;var handleDrop=useCallback(function(acceptedFiles){var file=acceptedFiles[0];if(file){setFieldValue('cover',_objectSpread(_objectSpread({},file),{},{preview:URL.createObjectURL(file)}));}},[setFieldValue]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FormikProvider,{value:formik,children:/*#__PURE__*/_jsx(Form,{noValidate:true,autoComplete:\"off\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:8,children:/*#__PURE__*/_jsx(Card,{sx:{p:3},children:/*#__PURE__*/_jsxs(Stack,{spacing:3,children:[/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({fullWidth:true,label:\"Post Title\"},getFieldProps('title')),{},{error:Boolean(touched.title&&errors.title),helperText:touched.title&&errors.title})),/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({fullWidth:true,multiline:true,minRows:3,maxRows:5,label:\"Description\"},getFieldProps('description')),{},{error:Boolean(touched.description&&errors.description),helperText:touched.description&&errors.description})),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(LabelStyle,{children:\"Content\"}),/*#__PURE__*/_jsx(Editor,{id:\"post-content\",value:values.content,onChange:function onChange(val){return setFieldValue('content',val);},error:Boolean(touched.content&&errors.content)}),touched.content&&errors.content&&/*#__PURE__*/_jsx(FormHelperText,{error:true,sx:{px:2,textTransform:'capitalize'},children:touched.content&&errors.content})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(LabelStyle,{children:\"Cover\"}),/*#__PURE__*/_jsx(UploadSingleFile,{maxSize:3145728,accept:\"image/*\",file:values.cover,onDrop:handleDrop,error:Boolean(touched.cover&&errors.cover)}),touched.cover&&errors.cover&&/*#__PURE__*/_jsx(FormHelperText,{error:true,sx:{px:2},children:touched.cover&&errors.cover})]})]})})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:4,children:[/*#__PURE__*/_jsx(Card,{sx:{p:3},children:/*#__PURE__*/_jsxs(Stack,{spacing:3,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,_objectSpread(_objectSpread({},getFieldProps('publish')),{},{checked:values.publish})),label:\"Publish\",labelPlacement:\"start\",sx:{mb:1,mx:0,width:'100%',justifyContent:'space-between'}}),/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,_objectSpread(_objectSpread({},getFieldProps('comments')),{},{checked:values.comments})),label:\"Enable comments\",labelPlacement:\"start\",sx:{mx:0,width:'100%',justifyContent:'space-between'}})]}),/*#__PURE__*/_jsx(Autocomplete,{multiple:true,freeSolo:true,value:values.tags,onChange:function onChange(event,newValue){setFieldValue('tags',newValue);},options:TAGS_OPTION.map(function(option){return option;}),renderTags:function renderTags(value,getTagProps){return value.map(function(option,index){return/*#__PURE__*/_createElement(Chip,_objectSpread(_objectSpread({},getTagProps({index:index})),{},{key:option,size:\"small\",label:option}));});},renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Tags\"}));}}),/*#__PURE__*/_jsx(TextField,_objectSpread({fullWidth:true,label:\"Meta title\"},getFieldProps('metaTitle'))),/*#__PURE__*/_jsx(TextField,_objectSpread({fullWidth:true,multiline:true,minRows:3,maxRows:5,label:\"Meta description\"},getFieldProps('metaDescription'))),/*#__PURE__*/_jsx(Autocomplete,{multiple:true,freeSolo:true,value:values.tags,onChange:function onChange(event,newValue){setFieldValue('metaKeywords',newValue);},options:TAGS_OPTION.map(function(option){return option;}),renderTags:function renderTags(value,getTagProps){return value.map(function(option,index){return/*#__PURE__*/_createElement(Chip,_objectSpread(_objectSpread({},getTagProps({index:index})),{},{key:option,size:\"small\",label:option}));});},renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Meta keywords\"}));}})]})}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",justifyContent:\"flex-end\",sx:{mt:3},children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,type:\"button\",color:\"inherit\",variant:\"outlined\",size:\"large\",onClick:handleOpenPreview,sx:{mr:1.5},children:\"Preview\"}),/*#__PURE__*/_jsx(LoadingButton,{fullWidth:true,type:\"submit\",variant:\"contained\",size:\"large\",loading:isSubmitting,children:\"Post\"})]})]})]})})}),/*#__PURE__*/_jsx(BlogNewPostPreview,{formik:formik,openPreview:open,onClosePreview:handleClosePreview})]});}","map":{"version":3,"sources":["D:/Projects/Cdss apps/Final version/admin/src/sections/@dashboard/blog/BlogNewPostForm.js"],"names":["Yup","useSnackbar","useCallback","useState","Form","FormikProvider","useFormik","LoadingButton","styled","Card","Grid","Chip","Stack","Button","Switch","TextField","Typography","Autocomplete","FormHelperText","FormControlLabel","Editor","UploadSingleFile","BlogNewPostPreview","TAGS_OPTION","LabelStyle","theme","typography","subtitle2","color","palette","text","secondary","marginBottom","spacing","BlogNewPostForm","enqueueSnackbar","open","setOpen","handleOpenPreview","handleClosePreview","NewBlogSchema","object","shape","title","string","required","description","content","min","cover","mixed","formik","initialValues","tags","publish","comments","metaTitle","metaDescription","metaKeywords","validationSchema","onSubmit","values","setSubmitting","resetForm","Promise","resolve","setTimeout","variant","console","error","errors","touched","handleSubmit","isSubmitting","setFieldValue","getFieldProps","handleDrop","acceptedFiles","file","preview","URL","createObjectURL","p","Boolean","val","px","textTransform","mb","mx","width","justifyContent","event","newValue","map","option","value","getTagProps","index","params","mt","mr"],"mappings":"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","sourcesContent":["import * as Yup from 'yup';\nimport { useSnackbar } from 'notistack';\nimport { useCallback, useState } from 'react';\nimport { Form, FormikProvider, useFormik } from 'formik';\n// @mui\nimport { LoadingButton } from '@mui/lab';\nimport { styled } from '@mui/material/styles';\nimport {\n  Card,\n  Grid,\n  Chip,\n  Stack,\n  Button,\n  Switch,\n  TextField,\n  Typography,\n  Autocomplete,\n  FormHelperText,\n  FormControlLabel,\n} from '@mui/material';\n// components\nimport Editor from '../../../components/editor';\nimport { UploadSingleFile } from '../../../components/upload';\n//\nimport BlogNewPostPreview from './BlogNewPostPreview';\n\n// ----------------------------------------------------------------------\n\nconst TAGS_OPTION = [\n  'Toy Story 3',\n  'Logan',\n  'Full Metal Jacket',\n  'Dangal',\n  'The Sting',\n  '2001: A Space Odyssey',\n  \"Singin' in the Rain\",\n  'Toy Story',\n  'Bicycle Thieves',\n  'The Kid',\n  'Inglourious Basterds',\n  'Snatch',\n  '3 Idiots',\n];\n\nconst LabelStyle = styled(Typography)(({ theme }) => ({\n  ...theme.typography.subtitle2,\n  color: theme.palette.text.secondary,\n  marginBottom: theme.spacing(1),\n}));\n\n// ----------------------------------------------------------------------\n\nexport default function BlogNewPostForm() {\n  const { enqueueSnackbar } = useSnackbar();\n  const [open, setOpen] = useState(false);\n\n  const handleOpenPreview = () => {\n    setOpen(true);\n  };\n\n  const handleClosePreview = () => {\n    setOpen(false);\n  };\n\n  const NewBlogSchema = Yup.object().shape({\n    title: Yup.string().required('Title is required'),\n    description: Yup.string().required('Description is required'),\n    content: Yup.string().min(1000).required('Content is required'),\n    cover: Yup.mixed().required('Cover is required'),\n  });\n\n  const formik = useFormik({\n    initialValues: {\n      title: '',\n      description: '',\n      content: '',\n      cover: null,\n      tags: ['Logan'],\n      publish: true,\n      comments: true,\n      metaTitle: '',\n      metaDescription: '',\n      metaKeywords: ['Logan'],\n    },\n    validationSchema: NewBlogSchema,\n    onSubmit: async (values, { setSubmitting, resetForm }) => {\n      try {\n        await new Promise((resolve) => setTimeout(resolve, 500));\n        resetForm();\n        handleClosePreview();\n        setSubmitting(false);\n        enqueueSnackbar('Post success', { variant: 'success' });\n      } catch (error) {\n        console.error(error);\n        setSubmitting(false);\n      }\n    },\n  });\n\n  const { errors, values, touched, handleSubmit, isSubmitting, setFieldValue, getFieldProps } = formik;\n\n  const handleDrop = useCallback(\n    (acceptedFiles) => {\n      const file = acceptedFiles[0];\n      if (file) {\n        setFieldValue('cover', {\n          ...file,\n          preview: URL.createObjectURL(file),\n        });\n      }\n    },\n    [setFieldValue]\n  );\n\n  return (\n    <>\n      <FormikProvider value={formik}>\n        <Form noValidate autoComplete=\"off\" onSubmit={handleSubmit}>\n          <Grid container spacing={3}>\n            <Grid item xs={12} md={8}>\n              <Card sx={{ p: 3 }}>\n                <Stack spacing={3}>\n                  <TextField\n                    fullWidth\n                    label=\"Post Title\"\n                    {...getFieldProps('title')}\n                    error={Boolean(touched.title && errors.title)}\n                    helperText={touched.title && errors.title}\n                  />\n\n                  <TextField\n                    fullWidth\n                    multiline\n                    minRows={3}\n                    maxRows={5}\n                    label=\"Description\"\n                    {...getFieldProps('description')}\n                    error={Boolean(touched.description && errors.description)}\n                    helperText={touched.description && errors.description}\n                  />\n\n                  <div>\n                    <LabelStyle>Content</LabelStyle>\n                    <Editor\n                      id=\"post-content\"\n                      value={values.content}\n                      onChange={(val) => setFieldValue('content', val)}\n                      error={Boolean(touched.content && errors.content)}\n                    />\n                    {touched.content && errors.content && (\n                      <FormHelperText error sx={{ px: 2, textTransform: 'capitalize' }}>\n                        {touched.content && errors.content}\n                      </FormHelperText>\n                    )}\n                  </div>\n\n                  <div>\n                    <LabelStyle>Cover</LabelStyle>\n                    <UploadSingleFile\n                      maxSize={3145728}\n                      accept=\"image/*\"\n                      file={values.cover}\n                      onDrop={handleDrop}\n                      error={Boolean(touched.cover && errors.cover)}\n                    />\n                    {touched.cover && errors.cover && (\n                      <FormHelperText error sx={{ px: 2 }}>\n                        {touched.cover && errors.cover}\n                      </FormHelperText>\n                    )}\n                  </div>\n                </Stack>\n              </Card>\n            </Grid>\n\n            <Grid item xs={12} md={4}>\n              <Card sx={{ p: 3 }}>\n                <Stack spacing={3}>\n                  <div>\n                    <FormControlLabel\n                      control={<Switch {...getFieldProps('publish')} checked={values.publish} />}\n                      label=\"Publish\"\n                      labelPlacement=\"start\"\n                      sx={{ mb: 1, mx: 0, width: '100%', justifyContent: 'space-between' }}\n                    />\n\n                    <FormControlLabel\n                      control={<Switch {...getFieldProps('comments')} checked={values.comments} />}\n                      label=\"Enable comments\"\n                      labelPlacement=\"start\"\n                      sx={{ mx: 0, width: '100%', justifyContent: 'space-between' }}\n                    />\n                  </div>\n\n                  <Autocomplete\n                    multiple\n                    freeSolo\n                    value={values.tags}\n                    onChange={(event, newValue) => {\n                      setFieldValue('tags', newValue);\n                    }}\n                    options={TAGS_OPTION.map((option) => option)}\n                    renderTags={(value, getTagProps) =>\n                      value.map((option, index) => (\n                        <Chip {...getTagProps({ index })} key={option} size=\"small\" label={option} />\n                      ))\n                    }\n                    renderInput={(params) => <TextField {...params} label=\"Tags\" />}\n                  />\n\n                  <TextField fullWidth label=\"Meta title\" {...getFieldProps('metaTitle')} />\n\n                  <TextField\n                    fullWidth\n                    multiline\n                    minRows={3}\n                    maxRows={5}\n                    label=\"Meta description\"\n                    {...getFieldProps('metaDescription')}\n                  />\n\n                  <Autocomplete\n                    multiple\n                    freeSolo\n                    value={values.tags}\n                    onChange={(event, newValue) => {\n                      setFieldValue('metaKeywords', newValue);\n                    }}\n                    options={TAGS_OPTION.map((option) => option)}\n                    renderTags={(value, getTagProps) =>\n                      value.map((option, index) => (\n                        <Chip {...getTagProps({ index })} key={option} size=\"small\" label={option} />\n                      ))\n                    }\n                    renderInput={(params) => <TextField {...params} label=\"Meta keywords\" />}\n                  />\n                </Stack>\n              </Card>\n\n              <Stack direction=\"row\" justifyContent=\"flex-end\" sx={{ mt: 3 }}>\n                <Button\n                  fullWidth\n                  type=\"button\"\n                  color=\"inherit\"\n                  variant=\"outlined\"\n                  size=\"large\"\n                  onClick={handleOpenPreview}\n                  sx={{ mr: 1.5 }}\n                >\n                  Preview\n                </Button>\n                <LoadingButton fullWidth type=\"submit\" variant=\"contained\" size=\"large\" loading={isSubmitting}>\n                  Post\n                </LoadingButton>\n              </Stack>\n            </Grid>\n          </Grid>\n        </Form>\n      </FormikProvider>\n\n      <BlogNewPostPreview formik={formik} openPreview={open} onClosePreview={handleClosePreview} />\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}