{"ast":null,"code":"import _defineProperty from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{fromJS}from'immutable';import{memo,useEffect,useState}from'react';// @mui\nimport{useTheme,styled}from'@mui/material/styles';import{Box,Switch,Typography}from'@mui/material';// _mock_\nimport MAP_STYLE from'../../../_mock/map/map-style-basic-v8.json';// utils\nimport cssStyles from'../../../utils/cssStyles';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var defaultMapStyle=fromJS(MAP_STYLE);var CATEGORIES=['labels','roads','buildings','parks','water','background'];var LAYER_SELECTOR={background:/background/,water:/water/,parks:/park/,buildings:/building/,roads:/bridge|road|tunnel/,labels:/label|place|poi/};var COLOR_CLASS={line:'line-color',fill:'fill-color',background:'background-color',symbol:'text-color'};var RootStyle=styled('div')(function(_ref){var theme=_ref.theme;return _objectSpread(_objectSpread({},cssStyles().bgBlur({color:theme.palette.grey[900]})),{},{zIndex:9,minWidth:200,position:'absolute',top:theme.spacing(1),right:theme.spacing(1),padding:theme.spacing(2),borderRadius:theme.shape.borderRadius});});var ColorBoxStyle=styled('div')(function(_ref2){var theme=_ref2.theme;return{width:20,height:20,display:'flex',borderRadius:'50%',alignItems:'center',justifyContent:'center',marginRight:theme.spacing(1),border:\"solid 1px \".concat(theme.palette.grey[500]),'& input':{width:12,height:12,border:'none',outline:'none',cursor:'pointer',WebkitAppearance:'none',backgroundColor:'transparent','&::-webkit-color-swatch-wrapper':{padding:0},'&::-moz-color-swatch':{border:'none',borderRadius:'50%'},'&::-webkit-color-swatch':{border:'none',borderRadius:'50%'}}};});// ----------------------------------------------------------------------\nfunction ControlPanel(_ref3){var onChange=_ref3.onChange;var theme=useTheme();var _useState=useState({water:true,parks:true,roads:true,labels:true,buildings:true,background:true}),_useState2=_slicedToArray(_useState,2),visibility=_useState2[0],setVisibility=_useState2[1];var _useState3=useState({water:theme.palette.grey[900],labels:theme.palette.grey[800],parks:theme.palette.primary.dark,buildings:theme.palette.grey[900],background:theme.palette.grey[700],roads:theme.palette.warning.darker}),_useState4=_slicedToArray(_useState3,2),color=_useState4[0],setColor=_useState4[1];useEffect(function(){updateMapStyle({color:color,visibility:visibility});// eslint-disable-next-line react-hooks/exhaustive-deps\n},[color,visibility]);var onColorChange=function onColorChange(event,name){var state=_objectSpread(_objectSpread({},color),{},_defineProperty({},name,event.target.value));setColor(state);updateMapStyle({color:state,visibility:visibility});};var onVisibilityChange=function onVisibilityChange(event,name){var state=_objectSpread(_objectSpread({},visibility),{},_defineProperty({},name,event.target.checked));setVisibility(state);updateMapStyle({color:color,visibility:state});};var updateMapStyle=function updateMapStyle(_ref4){var color=_ref4.color,visibility=_ref4.visibility;var layers=defaultMapStyle.get('layers').filter(function(layer){var id=layer.get('id');return CATEGORIES.every(function(name){return visibility[name]||!LAYER_SELECTOR[name].test(id);});}).map(function(layer){var id=layer.get('id');var type=layer.get('type');var category=CATEGORIES.find(function(name){return LAYER_SELECTOR[name].test(id);});if(category&&COLOR_CLASS[type]){return layer.setIn(['paint',COLOR_CLASS[type]],color[category]);}return layer;});onChange(defaultMapStyle.set('layers',layers));};return/*#__PURE__*/_jsx(RootStyle,{children:CATEGORIES.map(function(name){return/*#__PURE__*/_jsxs(Box,{sx:{py:1,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(ColorBoxStyle,{sx:_objectSpread({},!visibility[name]&&{opacity:0.48}),children:/*#__PURE__*/_jsx(\"input\",{type:\"color\",value:color[name],disabled:!visibility[name],onChange:function onChange(e){return onColorChange(e,name);}})}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{flexGrow:1,textTransform:'capitalize',color:!visibility[name]?'text.disabled':'common.white'},children:name}),/*#__PURE__*/_jsx(Switch,{size:\"small\",checked:visibility[name],onChange:function onChange(e){return onVisibilityChange(e,name);}})]},name);})});}export default/*#__PURE__*/memo(ControlPanel);","map":{"version":3,"sources":["D:/Projects/Cdss apps/Final version/admin/src/sections/map/dynamic-styling/ControlPanel.js"],"names":["fromJS","memo","useEffect","useState","useTheme","styled","Box","Switch","Typography","MAP_STYLE","cssStyles","defaultMapStyle","CATEGORIES","LAYER_SELECTOR","background","water","parks","buildings","roads","labels","COLOR_CLASS","line","fill","symbol","RootStyle","theme","bgBlur","color","palette","grey","zIndex","minWidth","position","top","spacing","right","padding","borderRadius","shape","ColorBoxStyle","width","height","display","alignItems","justifyContent","marginRight","border","outline","cursor","WebkitAppearance","backgroundColor","ControlPanel","onChange","visibility","setVisibility","primary","dark","warning","darker","setColor","updateMapStyle","onColorChange","event","name","state","target","value","onVisibilityChange","checked","layers","get","filter","layer","id","every","test","map","type","category","find","setIn","set","py","opacity","e","flexGrow","textTransform"],"mappings":"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","sourcesContent":["import { fromJS } from 'immutable';\nimport PropTypes from 'prop-types';\nimport { memo, useEffect, useState } from 'react';\n// @mui\nimport { useTheme, styled } from '@mui/material/styles';\nimport { Box, Switch, Typography } from '@mui/material';\n// _mock_\nimport MAP_STYLE from '../../../_mock/map/map-style-basic-v8.json';\n// utils\nimport cssStyles from '../../../utils/cssStyles';\n\n// ----------------------------------------------------------------------\n\nconst defaultMapStyle = fromJS(MAP_STYLE);\n\nconst CATEGORIES = ['labels', 'roads', 'buildings', 'parks', 'water', 'background'];\n\nconst LAYER_SELECTOR = {\n  background: /background/,\n  water: /water/,\n  parks: /park/,\n  buildings: /building/,\n  roads: /bridge|road|tunnel/,\n  labels: /label|place|poi/,\n};\n\nconst COLOR_CLASS = {\n  line: 'line-color',\n  fill: 'fill-color',\n  background: 'background-color',\n  symbol: 'text-color',\n};\n\nconst RootStyle = styled('div')(({ theme }) => ({\n  ...cssStyles().bgBlur({ color: theme.palette.grey[900] }),\n  zIndex: 9,\n  minWidth: 200,\n  position: 'absolute',\n  top: theme.spacing(1),\n  right: theme.spacing(1),\n  padding: theme.spacing(2),\n  borderRadius: theme.shape.borderRadius,\n}));\n\nconst ColorBoxStyle = styled('div')(({ theme }) => ({\n  width: 20,\n  height: 20,\n  display: 'flex',\n  borderRadius: '50%',\n  alignItems: 'center',\n  justifyContent: 'center',\n  marginRight: theme.spacing(1),\n  border: `solid 1px ${theme.palette.grey[500]}`,\n  '& input': {\n    width: 12,\n    height: 12,\n    border: 'none',\n    outline: 'none',\n    cursor: 'pointer',\n    WebkitAppearance: 'none',\n    backgroundColor: 'transparent',\n    '&::-webkit-color-swatch-wrapper': { padding: 0 },\n    '&::-moz-color-swatch': { border: 'none', borderRadius: '50%' },\n    '&::-webkit-color-swatch': { border: 'none', borderRadius: '50%' },\n  },\n}));\n\n// ----------------------------------------------------------------------\n\nControlPanel.propTypes = {\n  onChange: PropTypes.func,\n};\n\nfunction ControlPanel({ onChange }) {\n  const theme = useTheme();\n  const [visibility, setVisibility] = useState({\n    water: true,\n    parks: true,\n    roads: true,\n    labels: true,\n    buildings: true,\n    background: true,\n  });\n  const [color, setColor] = useState({\n    water: theme.palette.grey[900],\n    labels: theme.palette.grey[800],\n    parks: theme.palette.primary.dark,\n    buildings: theme.palette.grey[900],\n    background: theme.palette.grey[700],\n    roads: theme.palette.warning.darker,\n  });\n\n  useEffect(() => {\n    updateMapStyle({ color, visibility });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [color, visibility]);\n\n  const onColorChange = (event, name) => {\n    const state = {\n      ...color,\n      [name]: event.target.value,\n    };\n    setColor(state);\n    updateMapStyle({\n      color: state,\n      visibility,\n    });\n  };\n\n  const onVisibilityChange = (event, name) => {\n    const state = {\n      ...visibility,\n      [name]: event.target.checked,\n    };\n    setVisibility(state);\n    updateMapStyle({\n      color,\n      visibility: state,\n    });\n  };\n\n  const updateMapStyle = ({ color, visibility }) => {\n    const layers = defaultMapStyle\n      .get('layers')\n      .filter((layer) => {\n        const id = layer.get('id');\n        return CATEGORIES.every((name) => visibility[name] || !LAYER_SELECTOR[name].test(id));\n      })\n      .map((layer) => {\n        const id = layer.get('id');\n        const type = layer.get('type');\n        const category = CATEGORIES.find((name) => LAYER_SELECTOR[name].test(id));\n        if (category && COLOR_CLASS[type]) {\n          return layer.setIn(['paint', COLOR_CLASS[type]], color[category]);\n        }\n        return layer;\n      });\n    onChange(defaultMapStyle.set('layers', layers));\n  };\n\n  return (\n    <RootStyle>\n      {CATEGORIES.map((name) => (\n        <Box key={name} sx={{ py: 1, display: 'flex', alignItems: 'center' }}>\n          <ColorBoxStyle sx={{ ...(!visibility[name] && { opacity: 0.48 }) }}>\n            <input\n              type=\"color\"\n              value={color[name]}\n              disabled={!visibility[name]}\n              onChange={(e) => onColorChange(e, name)}\n            />\n          </ColorBoxStyle>\n          <Typography\n            variant=\"body2\"\n            sx={{\n              flexGrow: 1,\n              textTransform: 'capitalize',\n              color: !visibility[name] ? 'text.disabled' : 'common.white',\n            }}\n          >\n            {name}\n          </Typography>\n          <Switch size=\"small\" checked={visibility[name]} onChange={(e) => onVisibilityChange(e, name)} />\n        </Box>\n      ))}\n    </RootStyle>\n  );\n}\n\nexport default memo(ControlPanel);\n"]},"metadata":{},"sourceType":"module"}