{"ast":null,"code":"import _slicedToArray from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectWithoutProperties from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _defineProperty from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";var _excluded=[\"product\",\"cart\",\"onAddCart\",\"onGotoStep\"];import{sentenceCase}from'change-case';import{useNavigate}from'react-router-dom';import{useFormik,Form,FormikProvider,useField}from'formik';// @mui\nimport{useTheme,styled}from'@mui/material/styles';import{Box,Grid,Link,Stack,Button,Rating,Divider,TextField,IconButton,Typography,FormHelperText}from'@mui/material';// routes\nimport{PATH_DASHBOARD}from'../../../../routes/paths';// utils\nimport{fShortenNumber,fCurrency}from'../../../../utils/formatNumber';// components\nimport Label from'../../../../components/Label';import Iconify from'../../../../components/Iconify';import SocialsButton from'../../../../components/SocialsButton';import ColorSinglePicker from'../../../../components/ColorSinglePicker';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RootStyle=styled('div')(function(_ref){var theme=_ref.theme;return _defineProperty({padding:theme.spacing(3)},theme.breakpoints.up(1368),{padding:theme.spacing(5,8)});});// ----------------------------------------------------------------------\nexport default function ProductDetailsSummary(_ref3){var product=_ref3.product,cart=_ref3.cart,onAddCart=_ref3.onAddCart,onGotoStep=_ref3.onGotoStep,other=_objectWithoutProperties(_ref3,_excluded);var theme=useTheme();var navigate=useNavigate();var id=product.id,name=product.name,sizes=product.sizes,price=product.price,cover=product.cover,status=product.status,colors=product.colors,available=product.available,priceSale=product.priceSale,totalRating=product.totalRating,totalReview=product.totalReview,inventoryType=product.inventoryType;var alreadyProduct=cart.map(function(item){return item.id;}).includes(id);var isMaxQuantity=cart.filter(function(item){return item.id===id;}).map(function(item){return item.quantity;})[0]>=available;var formik=useFormik({enableReinitialize:true,initialValues:{id:id,name:name,cover:cover,available:available,price:price,color:colors[0],size:sizes[4],quantity:available<1?0:1},onSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values,_ref4){var setSubmitting;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setSubmitting=_ref4.setSubmitting;try{if(!alreadyProduct){onAddCart(_objectSpread(_objectSpread({},values),{},{subtotal:values.price*values.quantity}));}setSubmitting(false);onGotoStep(0);navigate(PATH_DASHBOARD.classes.checkout);}catch(error){setSubmitting(false);}case 2:case\"end\":return _context.stop();}}},_callee);}));function onSubmit(_x,_x2){return _onSubmit.apply(this,arguments);}return onSubmit;}()});var values=formik.values,touched=formik.touched,errors=formik.errors,getFieldProps=formik.getFieldProps,handleSubmit=formik.handleSubmit;var handleAddCart=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:try{onAddCart(_objectSpread(_objectSpread({},values),{},{subtotal:values.price*values.quantity}));}catch(error){console.error(error);}case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function handleAddCart(){return _ref5.apply(this,arguments);};}();return/*#__PURE__*/_jsx(RootStyle,_objectSpread(_objectSpread({},other),{},{children:/*#__PURE__*/_jsx(FormikProvider,{value:formik,children:/*#__PURE__*/_jsxs(Form,{autoComplete:\"off\",noValidate:true,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Label,{variant:theme.palette.mode==='light'?'ghost':'filled',color:inventoryType==='in_stock'?'success':'error',sx:{textTransform:'uppercase'},children:sentenceCase(inventoryType||'')}),/*#__PURE__*/_jsx(Typography,{variant:\"overline\",sx:{mt:2,mb:1,display:'block',color:status==='sale'?'error.main':'info.main'},children:status}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",paragraph:true,children:name}),/*#__PURE__*/_jsxs(Box,{sx:{mb:2,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Rating,{value:totalRating,precision:0.1,readOnly:true}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",sx:{color:'text.secondary'},children:[\"(\",fShortenNumber(totalReview),\"reviews)\"]})]}),/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",sx:{mb:3},children:[/*#__PURE__*/_jsx(Box,{component:\"span\",sx:{color:'text.disabled',textDecoration:'line-through'},children:priceSale&&fCurrency(priceSale)}),\"\\xA0\",fCurrency(price)]}),/*#__PURE__*/_jsx(Divider,{sx:{borderStyle:'dashed'}}),/*#__PURE__*/_jsxs(Box,{sx:{my:3,display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",sx:{mt:0.5},children:\"Color\"}),/*#__PURE__*/_jsx(ColorSinglePicker,_objectSpread(_objectSpread({},getFieldProps('color')),{},{colors:colors,sx:_objectSpread({},colors.length>4&&{maxWidth:144,justifyContent:'flex-end'})}))]}),/*#__PURE__*/_jsxs(Box,{sx:{mb:3,display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",sx:{mt:0.5},children:\"Size\"}),/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({select:true,size:\"small\"},getFieldProps('size')),{},{SelectProps:{native:true},FormHelperTextProps:{sx:{textAlign:'right',margin:0,mt:1}},helperText:/*#__PURE__*/_jsx(Link,{href:\"#\",underline:\"always\",color:\"text.primary\",children:\"Size Chart\"}),children:sizes.map(function(size){return/*#__PURE__*/_jsx(\"option\",{value:size,children:size},size);})}))]}),/*#__PURE__*/_jsxs(Box,{sx:{mb:3,display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",sx:{mt:0.5},children:\"Quantity\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Incrementer,{name:\"quantity\",available:available}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",sx:{mt:1,display:'block',textAlign:'right',color:'text.secondary'},children:[\"Available: \",available]}),/*#__PURE__*/_jsx(FormHelperText,{error:true,children:touched.quantity&&errors.quantity})]})]}),/*#__PURE__*/_jsx(Divider,{sx:{borderStyle:'dashed'}}),/*#__PURE__*/_jsx(Box,{sx:{mt:5},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(Button,{fullWidth:true,disabled:isMaxQuantity,size:\"large\",type:\"button\",color:\"warning\",variant:\"contained\",startIcon:/*#__PURE__*/_jsx(Iconify,{icon:'ic:round-add-shopping-cart'}),onClick:handleAddCart,sx:{whiteSpace:'nowrap'},children:\"Add to Cart\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(Button,{fullWidth:true,size:\"large\",type:\"submit\",variant:\"contained\",children:\"Buy Now\"})})]})}),/*#__PURE__*/_jsx(Stack,{alignItems:\"center\",sx:{mt:3},children:/*#__PURE__*/_jsx(SocialsButton,{initialColor:true})})]})})}));}// ----------------------------------------------------------------------\nfunction Incrementer(_ref6){var name=_ref6.name,available=_ref6.available;var _useField=useField(name),_useField2=_slicedToArray(_useField,3),field=_useField2[0],helpers=_useField2[2];var value=field.value;var setValue=helpers.setValue;var incrementQuantity=function incrementQuantity(){setValue(value+1);};var decrementQuantity=function decrementQuantity(){setValue(value-1);};return/*#__PURE__*/_jsxs(Box,{sx:{py:0.5,px:0.75,border:1,lineHeight:0,borderRadius:1,display:'flex',alignItems:'center',borderColor:'grey.50032'},children:[/*#__PURE__*/_jsx(IconButton,{size:\"small\",color:\"inherit\",disabled:value<=1,onClick:decrementQuantity,children:/*#__PURE__*/_jsx(Iconify,{icon:'eva:minus-fill',width:16,height:16})}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",component:\"span\",sx:{width:40,textAlign:'center',display:'inline-block'},children:value}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",color:\"inherit\",disabled:value>=available,onClick:incrementQuantity,children:/*#__PURE__*/_jsx(Iconify,{icon:'eva:plus-fill',width:16,height:16})})]});}","map":{"version":3,"sources":["D:/Projects/Cdss apps/Final version/admin/src/sections/@dashboard/e-commerce/product-details/ProductDetailsSummary.js"],"names":["sentenceCase","useNavigate","useFormik","Form","FormikProvider","useField","useTheme","styled","Box","Grid","Link","Stack","Button","Rating","Divider","TextField","IconButton","Typography","FormHelperText","PATH_DASHBOARD","fShortenNumber","fCurrency","Label","Iconify","SocialsButton","ColorSinglePicker","RootStyle","theme","padding","spacing","breakpoints","up","ProductDetailsSummary","product","cart","onAddCart","onGotoStep","other","navigate","id","name","sizes","price","cover","status","colors","available","priceSale","totalRating","totalReview","inventoryType","alreadyProduct","map","item","includes","isMaxQuantity","filter","quantity","formik","enableReinitialize","initialValues","color","size","onSubmit","values","setSubmitting","subtotal","classes","checkout","error","touched","errors","getFieldProps","handleSubmit","handleAddCart","console","palette","mode","textTransform","mt","mb","display","alignItems","textDecoration","borderStyle","my","justifyContent","length","maxWidth","native","sx","textAlign","margin","whiteSpace","Incrementer","field","helpers","value","setValue","incrementQuantity","decrementQuantity","py","px","border","lineHeight","borderRadius","borderColor","width"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport { sentenceCase } from 'change-case';\nimport { useNavigate } from 'react-router-dom';\nimport { useFormik, Form, FormikProvider, useField } from 'formik';\n// @mui\nimport { useTheme, styled } from '@mui/material/styles';\nimport {\n  Box,\n  Grid,\n  Link,\n  Stack,\n  Button,\n  Rating,\n  Divider,\n  TextField,\n  IconButton,\n  Typography,\n  FormHelperText,\n} from '@mui/material';\n// routes\nimport { PATH_DASHBOARD } from '../../../../routes/paths';\n// utils\nimport { fShortenNumber, fCurrency } from '../../../../utils/formatNumber';\n// components\nimport Label from '../../../../components/Label';\nimport Iconify from '../../../../components/Iconify';\nimport SocialsButton from '../../../../components/SocialsButton';\nimport ColorSinglePicker from '../../../../components/ColorSinglePicker';\n\n// ----------------------------------------------------------------------\n\nconst RootStyle = styled('div')(({ theme }) => ({\n  padding: theme.spacing(3),\n  [theme.breakpoints.up(1368)]: {\n    padding: theme.spacing(5, 8),\n  },\n}));\n\n// ----------------------------------------------------------------------\n\nProductDetailsSummary.propTypes = {\n  cart: PropTypes.array,\n  onAddCart: PropTypes.func,\n  onGotoStep: PropTypes.func,\n  product: PropTypes.shape({\n    available: PropTypes.number,\n    colors: PropTypes.arrayOf(PropTypes.string),\n    cover: PropTypes.string,\n    id: PropTypes.string,\n    inventoryType: PropTypes.string,\n    name: PropTypes.string,\n    price: PropTypes.number,\n    priceSale: PropTypes.number,\n    sizes: PropTypes.arrayOf(PropTypes.string),\n    status: PropTypes.string,\n    totalRating: PropTypes.number,\n    totalReview: PropTypes.number,\n  }),\n};\n\nexport default function ProductDetailsSummary({ product, cart, onAddCart, onGotoStep, ...other }) {\n  const theme = useTheme();\n  const navigate = useNavigate();\n  const {\n    id,\n    name,\n    sizes,\n    price,\n    cover,\n    status,\n    colors,\n    available,\n    priceSale,\n    totalRating,\n    totalReview,\n    inventoryType,\n  } = product;\n\n  const alreadyProduct = cart.map((item) => item.id).includes(id);\n  const isMaxQuantity = cart.filter((item) => item.id === id).map((item) => item.quantity)[0] >= available;\n\n  const formik = useFormik({\n    enableReinitialize: true,\n    initialValues: {\n      id,\n      name,\n      cover,\n      available,\n      price,\n      color: colors[0],\n      size: sizes[4],\n      quantity: available < 1 ? 0 : 1,\n    },\n    onSubmit: async (values, { setSubmitting }) => {\n      try {\n        if (!alreadyProduct) {\n          onAddCart({\n            ...values,\n            subtotal: values.price * values.quantity,\n          });\n        }\n        setSubmitting(false);\n        onGotoStep(0);\n        navigate(PATH_DASHBOARD.classes.checkout);\n      } catch (error) {\n        setSubmitting(false);\n      }\n    },\n  });\n\n  const { values, touched, errors, getFieldProps, handleSubmit } = formik;\n\n  const handleAddCart = async () => {\n    try {\n      onAddCart({\n        ...values,\n        subtotal: values.price * values.quantity,\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <RootStyle {...other}>\n      <FormikProvider value={formik}>\n        <Form autoComplete=\"off\" noValidate onSubmit={handleSubmit}>\n          <Label\n            variant={theme.palette.mode === 'light' ? 'ghost' : 'filled'}\n            color={inventoryType === 'in_stock' ? 'success' : 'error'}\n            sx={{ textTransform: 'uppercase' }}\n          >\n            {sentenceCase(inventoryType || '')}\n          </Label>\n\n          <Typography\n            variant=\"overline\"\n            sx={{\n              mt: 2,\n              mb: 1,\n              display: 'block',\n              color: status === 'sale' ? 'error.main' : 'info.main',\n            }}\n          >\n            {status}\n          </Typography>\n\n          <Typography variant=\"h5\" paragraph>\n            {name}\n          </Typography>\n\n          <Box sx={{ mb: 2, display: 'flex', alignItems: 'center' }}>\n            <Rating value={totalRating} precision={0.1} readOnly />\n            <Typography variant=\"body2\" sx={{ color: 'text.secondary' }}>\n              ({fShortenNumber(totalReview)}\n              reviews)\n            </Typography>\n          </Box>\n\n          <Typography variant=\"h4\" sx={{ mb: 3 }}>\n            <Box component=\"span\" sx={{ color: 'text.disabled', textDecoration: 'line-through' }}>\n              {priceSale && fCurrency(priceSale)}\n            </Box>\n            &nbsp;{fCurrency(price)}\n          </Typography>\n\n          <Divider sx={{ borderStyle: 'dashed' }} />\n\n          <Box\n            sx={{\n              my: 3,\n              display: 'flex',\n              justifyContent: 'space-between',\n            }}\n          >\n            <Typography variant=\"subtitle1\" sx={{ mt: 0.5 }}>\n              Color\n            </Typography>\n            <ColorSinglePicker\n              {...getFieldProps('color')}\n              colors={colors}\n              sx={{\n                ...(colors.length > 4 && {\n                  maxWidth: 144,\n                  justifyContent: 'flex-end',\n                }),\n              }}\n            />\n          </Box>\n\n          <Box\n            sx={{\n              mb: 3,\n              display: 'flex',\n              justifyContent: 'space-between',\n            }}\n          >\n            <Typography variant=\"subtitle1\" sx={{ mt: 0.5 }}>\n              Size\n            </Typography>\n            <TextField\n              select\n              size=\"small\"\n              {...getFieldProps('size')}\n              SelectProps={{ native: true }}\n              FormHelperTextProps={{\n                sx: {\n                  textAlign: 'right',\n                  margin: 0,\n                  mt: 1,\n                },\n              }}\n              helperText={\n                <Link href=\"#\" underline=\"always\" color=\"text.primary\">\n                  Size Chart\n                </Link>\n              }\n            >\n              {sizes.map((size) => (\n                <option key={size} value={size}>\n                  {size}\n                </option>\n              ))}\n            </TextField>\n          </Box>\n\n          <Box\n            sx={{\n              mb: 3,\n              display: 'flex',\n              justifyContent: 'space-between',\n            }}\n          >\n            <Typography variant=\"subtitle1\" sx={{ mt: 0.5 }}>\n              Quantity\n            </Typography>\n\n            <div>\n              <Incrementer name=\"quantity\" available={available} />\n              <Typography\n                variant=\"caption\"\n                sx={{\n                  mt: 1,\n                  display: 'block',\n                  textAlign: 'right',\n                  color: 'text.secondary',\n                }}\n              >\n                Available: {available}\n              </Typography>\n\n              <FormHelperText error>{touched.quantity && errors.quantity}</FormHelperText>\n            </div>\n          </Box>\n\n          <Divider sx={{ borderStyle: 'dashed' }} />\n\n          <Box sx={{ mt: 5 }}>\n            <Grid container spacing={2}>\n              <Grid item xs={12} sm={6}>\n                <Button\n                  fullWidth\n                  disabled={isMaxQuantity}\n                  size=\"large\"\n                  type=\"button\"\n                  color=\"warning\"\n                  variant=\"contained\"\n                  startIcon={<Iconify icon={'ic:round-add-shopping-cart'} />}\n                  onClick={handleAddCart}\n                  sx={{ whiteSpace: 'nowrap' }}\n                >\n                  Add to Cart\n                </Button>\n              </Grid>\n\n              <Grid item xs={12} sm={6}>\n                <Button fullWidth size=\"large\" type=\"submit\" variant=\"contained\">\n                  Buy Now\n                </Button>\n              </Grid>\n            </Grid>\n          </Box>\n\n          <Stack alignItems=\"center\" sx={{ mt: 3 }}>\n            <SocialsButton initialColor />\n          </Stack>\n        </Form>\n      </FormikProvider>\n    </RootStyle>\n  );\n}\n\n// ----------------------------------------------------------------------\n\nIncrementer.propTypes = {\n  available: PropTypes.number,\n  name: PropTypes.string,\n};\n\nfunction Incrementer({ name, available }) {\n  const [field, , helpers] = useField(name);\n  const { value } = field;\n  const { setValue } = helpers;\n\n  const incrementQuantity = () => {\n    setValue(value + 1);\n  };\n  const decrementQuantity = () => {\n    setValue(value - 1);\n  };\n\n  return (\n    <Box\n      sx={{\n        py: 0.5,\n        px: 0.75,\n        border: 1,\n        lineHeight: 0,\n        borderRadius: 1,\n        display: 'flex',\n        alignItems: 'center',\n        borderColor: 'grey.50032',\n      }}\n    >\n      <IconButton size=\"small\" color=\"inherit\" disabled={value <= 1} onClick={decrementQuantity}>\n        <Iconify icon={'eva:minus-fill'} width={16} height={16} />\n      </IconButton>\n      <Typography\n        variant=\"body2\"\n        component=\"span\"\n        sx={{\n          width: 40,\n          textAlign: 'center',\n          display: 'inline-block',\n        }}\n      >\n        {value}\n      </Typography>\n      <IconButton size=\"small\" color=\"inherit\" disabled={value >= available} onClick={incrementQuantity}>\n        <Iconify icon={'eva:plus-fill'} width={16} height={16} />\n      </IconButton>\n    </Box>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}