{"ast":null,"code":"import _slicedToArray from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{filter}from'lodash';import{sentenceCase}from'change-case';import{useState,useEffect}from'react';// @mui\nimport{useTheme}from'@mui/material/styles';import{Box,Card,Table,TableRow,Checkbox,TableBody,TableCell,Container,Typography,TableContainer,TablePagination}from'@mui/material';// redux\nimport{useDispatch,useSelector}from'../../redux/store';import{getProducts}from'../../redux/slices/product';// utils\nimport{fDate}from'../../utils/formatTime';import{fCurrency}from'../../utils/formatNumber';// routes\nimport{PATH_DASHBOARD}from'../../routes/paths';// hooks\nimport useSettings from'../../hooks/useSettings';// components\nimport Page from'../../components/Page';import Label from'../../components/Label';import Image from'../../components/Image';import Scrollbar from'../../components/Scrollbar';import SearchNotFound from'../../components/SearchNotFound';import HeaderBreadcrumbs from'../../components/HeaderBreadcrumbs';// sections\nimport{ProductMoreMenu,ProductListHead,ProductListToolbar}from'../../sections/@dashboard/e-commerce/product-list';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TABLE_HEAD=[{id:'name',label:'Product',alignRight:false},{id:'createdAt',label:'Create at',alignRight:false},{id:'inventoryType',label:'Status',alignRight:false},{id:'price',label:'Price',alignRight:true},{id:''}];// ----------------------------------------------------------------------\nexport default function EcommerceProductList(){var _useSettings=useSettings(),themeStretch=_useSettings.themeStretch;var theme=useTheme();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.product;}),products=_useSelector.products;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),productList=_useState2[0],setProductList=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),page=_useState4[0],setPage=_useState4[1];var _useState5=useState('asc'),_useState6=_slicedToArray(_useState5,2),order=_useState6[0],setOrder=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),selected=_useState8[0],setSelected=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),filterName=_useState10[0],setFilterName=_useState10[1];var _useState11=useState(5),_useState12=_slicedToArray(_useState11,2),rowsPerPage=_useState12[0],setRowsPerPage=_useState12[1];var _useState13=useState('createdAt'),_useState14=_slicedToArray(_useState13,2),orderBy=_useState14[0],setOrderBy=_useState14[1];useEffect(function(){dispatch(getProducts());},[dispatch]);useEffect(function(){if(products.length){setProductList(products);}},[products]);var handleRequestSort=function handleRequestSort(property){var isAsc=orderBy===property&&order==='asc';setOrder(isAsc?'desc':'asc');setOrderBy(property);};var handleSelectAllClick=function handleSelectAllClick(checked){if(checked){var _selected=productList.map(function(n){return n.name;});setSelected(_selected);return;}setSelected([]);};var handleClick=function handleClick(name){var selectedIndex=selected.indexOf(name);var newSelected=[];if(selectedIndex===-1){newSelected=newSelected.concat(selected,name);}else if(selectedIndex===0){newSelected=newSelected.concat(selected.slice(1));}else if(selectedIndex===selected.length-1){newSelected=newSelected.concat(selected.slice(0,-1));}else if(selectedIndex>0){newSelected=newSelected.concat(selected.slice(0,selectedIndex),selected.slice(selectedIndex+1));}setSelected(newSelected);};var handleChangeRowsPerPage=function handleChangeRowsPerPage(event){setRowsPerPage(parseInt(event.target.value,10));setPage(0);};var handleFilterByName=function handleFilterByName(filterName){setFilterName(filterName);};var handleDeleteProduct=function handleDeleteProduct(productId){var deleteProduct=productList.filter(function(product){return product.id!==productId;});setSelected([]);setProductList(deleteProduct);};var handleDeleteProducts=function handleDeleteProducts(selected){var deleteProducts=productList.filter(function(product){return!selected.includes(product.name);});setSelected([]);setProductList(deleteProducts);};var emptyRows=page>0?Math.max(0,(1+page)*rowsPerPage-productList.length):0;var filteredProducts=applySortFilter(productList,getComparator(order,orderBy),filterName);var isNotFound=!filteredProducts.length&&Boolean(filterName);return/*#__PURE__*/_jsx(Page,{title:\"Ecommerce: Product List\",children:/*#__PURE__*/_jsxs(Container,{maxWidth:themeStretch?false:'lg',children:[/*#__PURE__*/_jsx(HeaderBreadcrumbs,{heading:\"Product List\",links:[{name:'Dashboard',href:PATH_DASHBOARD.root},{name:'E-Commerce',href:PATH_DASHBOARD.classes.root},{name:'Product List'}]}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(ProductListToolbar,{numSelected:selected.length,filterName:filterName,onFilterName:handleFilterByName,onDeleteProducts:function onDeleteProducts(){return handleDeleteProducts(selected);}}),/*#__PURE__*/_jsx(Scrollbar,{children:/*#__PURE__*/_jsx(TableContainer,{sx:{minWidth:800},children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(ProductListHead,{order:order,orderBy:orderBy,headLabel:TABLE_HEAD,rowCount:productList.length,numSelected:selected.length,onRequestSort:handleRequestSort,onSelectAllClick:handleSelectAllClick}),/*#__PURE__*/_jsxs(TableBody,{children:[filteredProducts.slice(page*rowsPerPage,page*rowsPerPage+rowsPerPage).map(function(row){var id=row.id,name=row.name,cover=row.cover,price=row.price,createdAt=row.createdAt,inventoryType=row.inventoryType;var isItemSelected=selected.indexOf(name)!==-1;return/*#__PURE__*/_jsxs(TableRow,{hover:true,tabIndex:-1,role:\"checkbox\",selected:isItemSelected,\"aria-checked\":isItemSelected,children:[/*#__PURE__*/_jsx(TableCell,{padding:\"checkbox\",children:/*#__PURE__*/_jsx(Checkbox,{checked:isItemSelected,onClick:function onClick(){return handleClick(name);}})}),/*#__PURE__*/_jsxs(TableCell,{sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Image,{disabledEffect:true,alt:name,src:cover,sx:{borderRadius:1.5,width:64,height:64,mr:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",noWrap:true,children:name})]}),/*#__PURE__*/_jsx(TableCell,{style:{minWidth:160},children:fDate(createdAt)}),/*#__PURE__*/_jsx(TableCell,{style:{minWidth:160},children:/*#__PURE__*/_jsx(Label,{variant:theme.palette.mode==='light'?'ghost':'filled',color:inventoryType==='out_of_stock'&&'error'||inventoryType==='low_stock'&&'warning'||'success',children:inventoryType?sentenceCase(inventoryType):''})}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:fCurrency(price)}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:/*#__PURE__*/_jsx(ProductMoreMenu,{productName:name,onDelete:function onDelete(){return handleDeleteProduct(id);}})})]},id);}),emptyRows>0&&/*#__PURE__*/_jsx(TableRow,{style:{height:53*emptyRows},children:/*#__PURE__*/_jsx(TableCell,{colSpan:6})})]}),isNotFound&&/*#__PURE__*/_jsx(TableBody,{children:/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{align:\"center\",colSpan:6,children:/*#__PURE__*/_jsx(Box,{sx:{py:3},children:/*#__PURE__*/_jsx(SearchNotFound,{searchQuery:filterName})})})})})]})})}),/*#__PURE__*/_jsx(TablePagination,{rowsPerPageOptions:[5,10,25],component:\"div\",count:productList.length,rowsPerPage:rowsPerPage,page:page,onPageChange:function onPageChange(event,value){return setPage(value);},onRowsPerPageChange:handleChangeRowsPerPage})]})]})});}// ----------------------------------------------------------------------\nfunction descendingComparator(a,b,orderBy){if(b[orderBy]<a[orderBy]){return-1;}if(b[orderBy]>a[orderBy]){return 1;}return 0;}function getComparator(order,orderBy){return order==='desc'?function(a,b){return descendingComparator(a,b,orderBy);}:function(a,b){return-descendingComparator(a,b,orderBy);};}function applySortFilter(array,comparator,query){var stabilizedThis=array.map(function(el,index){return[el,index];});stabilizedThis.sort(function(a,b){var order=comparator(a[0],b[0]);if(order!==0)return order;return a[1]-b[1];});if(query){return filter(array,function(_product){return _product.name.toLowerCase().indexOf(query.toLowerCase())!==-1;});}return stabilizedThis.map(function(el){return el[0];});}","map":{"version":3,"sources":["D:/Projects/Cdss apps/Final version/admin/src/pages/dashboard/EcommerceProductList.js"],"names":["filter","sentenceCase","useState","useEffect","useTheme","Box","Card","Table","TableRow","Checkbox","TableBody","TableCell","Container","Typography","TableContainer","TablePagination","useDispatch","useSelector","getProducts","fDate","fCurrency","PATH_DASHBOARD","useSettings","Page","Label","Image","Scrollbar","SearchNotFound","HeaderBreadcrumbs","ProductMoreMenu","ProductListHead","ProductListToolbar","TABLE_HEAD","id","label","alignRight","EcommerceProductList","themeStretch","theme","dispatch","state","product","products","productList","setProductList","page","setPage","order","setOrder","selected","setSelected","filterName","setFilterName","rowsPerPage","setRowsPerPage","orderBy","setOrderBy","length","handleRequestSort","property","isAsc","handleSelectAllClick","checked","map","n","name","handleClick","selectedIndex","indexOf","newSelected","concat","slice","handleChangeRowsPerPage","event","parseInt","target","value","handleFilterByName","handleDeleteProduct","productId","deleteProduct","handleDeleteProducts","deleteProducts","includes","emptyRows","Math","max","filteredProducts","applySortFilter","getComparator","isNotFound","Boolean","href","root","classes","minWidth","row","cover","price","createdAt","inventoryType","isItemSelected","display","alignItems","borderRadius","width","height","mr","palette","mode","py","descendingComparator","a","b","array","comparator","query","stabilizedThis","el","index","sort","_product","toLowerCase"],"mappings":"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","sourcesContent":["import { filter } from 'lodash';\nimport { sentenceCase } from 'change-case';\nimport { useState, useEffect } from 'react';\n// @mui\nimport { useTheme } from '@mui/material/styles';\nimport {\n  Box,\n  Card,\n  Table,\n  TableRow,\n  Checkbox,\n  TableBody,\n  TableCell,\n  Container,\n  Typography,\n  TableContainer,\n  TablePagination,\n} from '@mui/material';\n// redux\nimport { useDispatch, useSelector } from '../../redux/store';\nimport { getProducts } from '../../redux/slices/product';\n// utils\nimport { fDate } from '../../utils/formatTime';\nimport { fCurrency } from '../../utils/formatNumber';\n// routes\nimport { PATH_DASHBOARD } from '../../routes/paths';\n// hooks\nimport useSettings from '../../hooks/useSettings';\n// components\nimport Page from '../../components/Page';\nimport Label from '../../components/Label';\nimport Image from '../../components/Image';\nimport Scrollbar from '../../components/Scrollbar';\nimport SearchNotFound from '../../components/SearchNotFound';\nimport HeaderBreadcrumbs from '../../components/HeaderBreadcrumbs';\n// sections\nimport {\n  ProductMoreMenu,\n  ProductListHead,\n  ProductListToolbar,\n} from '../../sections/@dashboard/e-commerce/product-list';\n\n// ----------------------------------------------------------------------\n\nconst TABLE_HEAD = [\n  { id: 'name', label: 'Product', alignRight: false },\n  { id: 'createdAt', label: 'Create at', alignRight: false },\n  { id: 'inventoryType', label: 'Status', alignRight: false },\n  { id: 'price', label: 'Price', alignRight: true },\n  { id: '' },\n];\n\n// ----------------------------------------------------------------------\n\nexport default function EcommerceProductList() {\n  const { themeStretch } = useSettings();\n  const theme = useTheme();\n  const dispatch = useDispatch();\n\n  const { products } = useSelector((state) => state.product);\n\n  const [productList, setProductList] = useState([]);\n  const [page, setPage] = useState(0);\n  const [order, setOrder] = useState('asc');\n  const [selected, setSelected] = useState([]);\n  const [filterName, setFilterName] = useState('');\n  const [rowsPerPage, setRowsPerPage] = useState(5);\n  const [orderBy, setOrderBy] = useState('createdAt');\n\n  useEffect(() => {\n    dispatch(getProducts());\n  }, [dispatch]);\n\n  useEffect(() => {\n    if (products.length) {\n      setProductList(products);\n    }\n  }, [products]);\n\n  const handleRequestSort = (property) => {\n    const isAsc = orderBy === property && order === 'asc';\n    setOrder(isAsc ? 'desc' : 'asc');\n    setOrderBy(property);\n  };\n\n  const handleSelectAllClick = (checked) => {\n    if (checked) {\n      const selected = productList.map((n) => n.name);\n      setSelected(selected);\n      return;\n    }\n    setSelected([]);\n  };\n\n  const handleClick = (name) => {\n    const selectedIndex = selected.indexOf(name);\n    let newSelected = [];\n    if (selectedIndex === -1) {\n      newSelected = newSelected.concat(selected, name);\n    } else if (selectedIndex === 0) {\n      newSelected = newSelected.concat(selected.slice(1));\n    } else if (selectedIndex === selected.length - 1) {\n      newSelected = newSelected.concat(selected.slice(0, -1));\n    } else if (selectedIndex > 0) {\n      newSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\n    }\n    setSelected(newSelected);\n  };\n\n  const handleChangeRowsPerPage = (event) => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  const handleFilterByName = (filterName) => {\n    setFilterName(filterName);\n  };\n\n  const handleDeleteProduct = (productId) => {\n    const deleteProduct = productList.filter((product) => product.id !== productId);\n    setSelected([]);\n    setProductList(deleteProduct);\n  };\n\n  const handleDeleteProducts = (selected) => {\n    const deleteProducts = productList.filter((product) => !selected.includes(product.name));\n    setSelected([]);\n    setProductList(deleteProducts);\n  };\n\n  const emptyRows = page > 0 ? Math.max(0, (1 + page) * rowsPerPage - productList.length) : 0;\n\n  const filteredProducts = applySortFilter(productList, getComparator(order, orderBy), filterName);\n\n  const isNotFound = !filteredProducts.length && Boolean(filterName);\n\n  return (\n    <Page title=\"Ecommerce: Product List\">\n      <Container maxWidth={themeStretch ? false : 'lg'}>\n        <HeaderBreadcrumbs\n          heading=\"Product List\"\n          links={[\n            { name: 'Dashboard', href: PATH_DASHBOARD.root },\n            {\n              name: 'E-Commerce',\n              href: PATH_DASHBOARD.classes.root,\n            },\n            { name: 'Product List' },\n          ]}\n        />\n\n        <Card>\n          <ProductListToolbar\n            numSelected={selected.length}\n            filterName={filterName}\n            onFilterName={handleFilterByName}\n            onDeleteProducts={() => handleDeleteProducts(selected)}\n          />\n\n          <Scrollbar>\n            <TableContainer sx={{ minWidth: 800 }}>\n              <Table>\n                <ProductListHead\n                  order={order}\n                  orderBy={orderBy}\n                  headLabel={TABLE_HEAD}\n                  rowCount={productList.length}\n                  numSelected={selected.length}\n                  onRequestSort={handleRequestSort}\n                  onSelectAllClick={handleSelectAllClick}\n                />\n\n                <TableBody>\n                  {filteredProducts.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row) => {\n                    const { id, name, cover, price, createdAt, inventoryType } = row;\n\n                    const isItemSelected = selected.indexOf(name) !== -1;\n\n                    return (\n                      <TableRow\n                        hover\n                        key={id}\n                        tabIndex={-1}\n                        role=\"checkbox\"\n                        selected={isItemSelected}\n                        aria-checked={isItemSelected}\n                      >\n                        <TableCell padding=\"checkbox\">\n                          <Checkbox checked={isItemSelected} onClick={() => handleClick(name)} />\n                        </TableCell>\n                        <TableCell sx={{ display: 'flex', alignItems: 'center' }}>\n                          <Image\n                            disabledEffect\n                            alt={name}\n                            src={cover}\n                            sx={{ borderRadius: 1.5, width: 64, height: 64, mr: 2 }}\n                          />\n                          <Typography variant=\"subtitle2\" noWrap>\n                            {name}\n                          </Typography>\n                        </TableCell>\n                        <TableCell style={{ minWidth: 160 }}>{fDate(createdAt)}</TableCell>\n                        <TableCell style={{ minWidth: 160 }}>\n                          <Label\n                            variant={theme.palette.mode === 'light' ? 'ghost' : 'filled'}\n                            color={\n                              (inventoryType === 'out_of_stock' && 'error') ||\n                              (inventoryType === 'low_stock' && 'warning') ||\n                              'success'\n                            }\n                          >\n                            {inventoryType ? sentenceCase(inventoryType) : ''}\n                          </Label>\n                        </TableCell>\n                        <TableCell align=\"right\">{fCurrency(price)}</TableCell>\n                        <TableCell align=\"right\">\n                          <ProductMoreMenu productName={name} onDelete={() => handleDeleteProduct(id)} />\n                        </TableCell>\n                      </TableRow>\n                    );\n                  })}\n                  {emptyRows > 0 && (\n                    <TableRow style={{ height: 53 * emptyRows }}>\n                      <TableCell colSpan={6} />\n                    </TableRow>\n                  )}\n                </TableBody>\n\n                {isNotFound && (\n                  <TableBody>\n                    <TableRow>\n                      <TableCell align=\"center\" colSpan={6}>\n                        <Box sx={{ py: 3 }}>\n                          <SearchNotFound searchQuery={filterName} />\n                        </Box>\n                      </TableCell>\n                    </TableRow>\n                  </TableBody>\n                )}\n              </Table>\n            </TableContainer>\n          </Scrollbar>\n\n          <TablePagination\n            rowsPerPageOptions={[5, 10, 25]}\n            component=\"div\"\n            count={productList.length}\n            rowsPerPage={rowsPerPage}\n            page={page}\n            onPageChange={(event, value) => setPage(value)}\n            onRowsPerPageChange={handleChangeRowsPerPage}\n          />\n        </Card>\n      </Container>\n    </Page>\n  );\n}\n\n// ----------------------------------------------------------------------\n\nfunction descendingComparator(a, b, orderBy) {\n  if (b[orderBy] < a[orderBy]) {\n    return -1;\n  }\n  if (b[orderBy] > a[orderBy]) {\n    return 1;\n  }\n  return 0;\n}\n\nfunction getComparator(order, orderBy) {\n  return order === 'desc'\n    ? (a, b) => descendingComparator(a, b, orderBy)\n    : (a, b) => -descendingComparator(a, b, orderBy);\n}\n\nfunction applySortFilter(array, comparator, query) {\n  const stabilizedThis = array.map((el, index) => [el, index]);\n  stabilizedThis.sort((a, b) => {\n    const order = comparator(a[0], b[0]);\n    if (order !== 0) return order;\n    return a[1] - b[1];\n  });\n\n  if (query) {\n    return filter(array, (_product) => _product.name.toLowerCase().indexOf(query.toLowerCase()) !== -1);\n  }\n\n  return stabilizedThis.map((el) => el[0]);\n}\n"]},"metadata":{},"sourceType":"module"}