{"ast":null,"code":"import _objectSpread from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import{last}from'lodash';import{formatDistanceToNowStrict}from'date-fns';// @mui\nimport{styled}from'@mui/material/styles';import{Box,Avatar,ListItemText,ListItemAvatar,ListItemButton}from'@mui/material';//\nimport BadgeStatus from'../../../components/BadgeStatus';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AVATAR_SIZE=48;var AVATAR_SIZE_GROUP=32;var RootStyle=styled(ListItemButton)(function(_ref){var theme=_ref.theme;return{padding:theme.spacing(1.5,3),transition:theme.transitions.create('all')};});var AvatarWrapperStyle=styled('div')({position:'relative',width:AVATAR_SIZE,height:AVATAR_SIZE,'& .MuiAvatar-img':{borderRadius:'50%'},'& .MuiAvatar-root':{width:'100%',height:'100%'}});// ----------------------------------------------------------------------\nvar getDetails=function getDetails(conversation,currentUserId){var otherParticipants=conversation.participants.filter(function(participant){return participant.id!==currentUserId;});var displayNames=otherParticipants.reduce(function(names,participant){return[].concat(_toConsumableArray(names),[participant.name]);},[]).join(', ');var displayText='';var lastMessage=conversation.messages[conversation.messages.length-1];if(lastMessage){var sender=lastMessage.senderId===currentUserId?'You: ':'';var message=lastMessage.contentType==='image'?'Sent a photo':lastMessage.body;displayText=\"\".concat(sender).concat(message);}return{otherParticipants:otherParticipants,displayNames:displayNames,displayText:displayText};};export default function ChatConversationItem(_ref2){var isSelected=_ref2.isSelected,conversation=_ref2.conversation,isOpenSidebar=_ref2.isOpenSidebar,onSelectConversation=_ref2.onSelectConversation;var details=getDetails(conversation,'8864c717-587d-472a-929a-8e5f298024da-0');var displayLastActivity=last(conversation.messages).createdAt;var isGroup=details.otherParticipants.length>1;var isUnread=conversation.unreadCount>0;var isOnlineGroup=isGroup&&details.otherParticipants.map(function(item){return item.status;}).includes('online');return/*#__PURE__*/_jsxs(RootStyle,{onClick:onSelectConversation,sx:_objectSpread({},isSelected&&{bgcolor:'action.selected'}),children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsxs(Box,{sx:_objectSpread({},isGroup&&{position:'relative',width:AVATAR_SIZE,height:AVATAR_SIZE,'& .avatarWrapper':{position:'absolute',width:AVATAR_SIZE_GROUP,height:AVATAR_SIZE_GROUP,'&:nth-of-type(1)':{left:0,zIndex:9,bottom:2,'& .MuiAvatar-root':{border:function border(theme){return\"solid 2px \".concat(theme.palette.background.paper);}}},'&:nth-of-type(2)':{top:2,right:0}}}),children:[details.otherParticipants.slice(0,2).map(function(participant){return/*#__PURE__*/_jsxs(AvatarWrapperStyle,{className:\"avatarWrapper\",children:[/*#__PURE__*/_jsx(Avatar,{alt:participant.name,src:participant.avatar}),!isGroup&&/*#__PURE__*/_jsx(BadgeStatus,{status:participant.status,sx:{right:2,bottom:2,position:'absolute'}})]},participant.id);}),isOnlineGroup&&/*#__PURE__*/_jsx(BadgeStatus,{status:\"online\",sx:{right:2,bottom:2,position:'absolute'}})]})}),isOpenSidebar&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ListItemText,{primary:details.displayNames,primaryTypographyProps:{noWrap:true,variant:'subtitle2'},secondary:details.displayText,secondaryTypographyProps:{noWrap:true,variant:isUnread?'subtitle2':'body2',color:isUnread?'textPrimary':'textSecondary'}}),/*#__PURE__*/_jsxs(Box,{sx:{ml:2,height:44,display:'flex',alignItems:'flex-end',flexDirection:'column'},children:[/*#__PURE__*/_jsx(Box,{sx:{mb:1.25,fontSize:12,lineHeight:'22px',whiteSpace:'nowrap',color:'text.disabled'},children:formatDistanceToNowStrict(new Date(displayLastActivity),{addSuffix:false})}),isUnread&&/*#__PURE__*/_jsx(BadgeStatus,{status:\"unread\",size:\"small\"})]})]})]});}","map":{"version":3,"sources":["D:/Projects/Cdss apps/Final version/admin/src/sections/@dashboard/chat/ChatConversationItem.js"],"names":["last","formatDistanceToNowStrict","styled","Box","Avatar","ListItemText","ListItemAvatar","ListItemButton","BadgeStatus","AVATAR_SIZE","AVATAR_SIZE_GROUP","RootStyle","theme","padding","spacing","transition","transitions","create","AvatarWrapperStyle","position","width","height","borderRadius","getDetails","conversation","currentUserId","otherParticipants","participants","filter","participant","id","displayNames","reduce","names","name","join","displayText","lastMessage","messages","length","sender","senderId","message","contentType","body","ChatConversationItem","isSelected","isOpenSidebar","onSelectConversation","details","displayLastActivity","createdAt","isGroup","isUnread","unreadCount","isOnlineGroup","map","item","status","includes","bgcolor","left","zIndex","bottom","border","palette","background","paper","top","right","slice","avatar","noWrap","variant","color","ml","display","alignItems","flexDirection","mb","fontSize","lineHeight","whiteSpace","Date","addSuffix"],"mappings":"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","sourcesContent":["import { last } from 'lodash';\nimport PropTypes from 'prop-types';\nimport { formatDistanceToNowStrict } from 'date-fns';\n// @mui\nimport { styled } from '@mui/material/styles';\nimport { Box, Avatar, ListItemText, ListItemAvatar, ListItemButton } from '@mui/material';\n//\nimport BadgeStatus from '../../../components/BadgeStatus';\n\n// ----------------------------------------------------------------------\n\nconst AVATAR_SIZE = 48;\nconst AVATAR_SIZE_GROUP = 32;\n\nconst RootStyle = styled(ListItemButton)(({ theme }) => ({\n  padding: theme.spacing(1.5, 3),\n  transition: theme.transitions.create('all'),\n}));\n\nconst AvatarWrapperStyle = styled('div')({\n  position: 'relative',\n  width: AVATAR_SIZE,\n  height: AVATAR_SIZE,\n  '& .MuiAvatar-img': { borderRadius: '50%' },\n  '& .MuiAvatar-root': { width: '100%', height: '100%' },\n});\n\n// ----------------------------------------------------------------------\n\nconst getDetails = (conversation, currentUserId) => {\n  const otherParticipants = conversation.participants.filter((participant) => participant.id !== currentUserId);\n  const displayNames = otherParticipants.reduce((names, participant) => [...names, participant.name], []).join(', ');\n  let displayText = '';\n  const lastMessage = conversation.messages[conversation.messages.length - 1];\n  if (lastMessage) {\n    const sender = lastMessage.senderId === currentUserId ? 'You: ' : '';\n    const message = lastMessage.contentType === 'image' ? 'Sent a photo' : lastMessage.body;\n    displayText = `${sender}${message}`;\n  }\n  return { otherParticipants, displayNames, displayText };\n};\n\nChatConversationItem.propTypes = {\n  isSelected: PropTypes.bool,\n  conversation: PropTypes.object.isRequired,\n  isOpenSidebar: PropTypes.bool,\n  onSelectConversation: PropTypes.func,\n};\n\nexport default function ChatConversationItem({ isSelected, conversation, isOpenSidebar, onSelectConversation }) {\n  const details = getDetails(conversation, '8864c717-587d-472a-929a-8e5f298024da-0');\n\n  const displayLastActivity = last(conversation.messages).createdAt;\n  const isGroup = details.otherParticipants.length > 1;\n  const isUnread = conversation.unreadCount > 0;\n  const isOnlineGroup = isGroup && details.otherParticipants.map((item) => item.status).includes('online');\n\n  return (\n    <RootStyle\n      onClick={onSelectConversation}\n      sx={{\n        ...(isSelected && { bgcolor: 'action.selected' }),\n      }}\n    >\n      <ListItemAvatar>\n        <Box\n          sx={{\n            ...(isGroup && {\n              position: 'relative',\n              width: AVATAR_SIZE,\n              height: AVATAR_SIZE,\n              '& .avatarWrapper': {\n                position: 'absolute',\n                width: AVATAR_SIZE_GROUP,\n                height: AVATAR_SIZE_GROUP,\n                '&:nth-of-type(1)': {\n                  left: 0,\n                  zIndex: 9,\n                  bottom: 2,\n                  '& .MuiAvatar-root': {\n                    border: (theme) => `solid 2px ${theme.palette.background.paper}`,\n                  },\n                },\n                '&:nth-of-type(2)': { top: 2, right: 0 },\n              },\n            }),\n          }}\n        >\n          {details.otherParticipants.slice(0, 2).map((participant) => (\n            <AvatarWrapperStyle className=\"avatarWrapper\" key={participant.id}>\n              <Avatar alt={participant.name} src={participant.avatar} />\n              {!isGroup && (\n                <BadgeStatus status={participant.status} sx={{ right: 2, bottom: 2, position: 'absolute' }} />\n              )}\n            </AvatarWrapperStyle>\n          ))}\n\n          {isOnlineGroup && <BadgeStatus status=\"online\" sx={{ right: 2, bottom: 2, position: 'absolute' }} />}\n        </Box>\n      </ListItemAvatar>\n\n      {isOpenSidebar && (\n        <>\n          <ListItemText\n            primary={details.displayNames}\n            primaryTypographyProps={{\n              noWrap: true,\n              variant: 'subtitle2',\n            }}\n            secondary={details.displayText}\n            secondaryTypographyProps={{\n              noWrap: true,\n              variant: isUnread ? 'subtitle2' : 'body2',\n              color: isUnread ? 'textPrimary' : 'textSecondary',\n            }}\n          />\n\n          <Box\n            sx={{\n              ml: 2,\n              height: 44,\n              display: 'flex',\n              alignItems: 'flex-end',\n              flexDirection: 'column',\n            }}\n          >\n            <Box\n              sx={{\n                mb: 1.25,\n                fontSize: 12,\n                lineHeight: '22px',\n                whiteSpace: 'nowrap',\n                color: 'text.disabled',\n              }}\n            >\n              {formatDistanceToNowStrict(new Date(displayLastActivity), {\n                addSuffix: false,\n              })}\n            </Box>\n            {isUnread && <BadgeStatus status=\"unread\" size=\"small\" />}\n          </Box>\n        </>\n      )}\n    </RootStyle>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}