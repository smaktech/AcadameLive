{"ast":null,"code":"import _regeneratorRuntime from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import*as Yup from'yup';import{useSnackbar}from'notistack';import{useNavigate}from'react-router-dom';import{useCallback}from'react';import{Form,FormikProvider,useFormik}from'formik';// @mui\nimport{styled}from'@mui/material/styles';import{LoadingButton}from'@mui/lab';import{Card,Chip,Grid,Stack,Radio,Switch,Select,TextField,InputLabel,Typography,RadioGroup,FormControl,Autocomplete,InputAdornment,FormHelperText,FormControlLabel}from'@mui/material';// routes\nimport{PATH_DASHBOARD}from'../../../routes/paths';//\nimport Editor from'../../../components/editor';import{UploadMultiFile}from'../../../components/upload';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{createElement as _createElement}from\"react\";var GENDER_OPTION=['Men','Women','Kids'];var CATEGORY_OPTION=[{group:'Clothing',classify:['Shirts','T-shirts','Jeans','Leather']},{group:'Tailored',classify:['Suits','Blazers','Trousers','Waistcoats']},{group:'Accessories',classify:['Shoes','Backpacks and bags','Bracelets','Face masks']}];var TAGS_OPTION=['Toy Story 3','Logan','Full Metal Jacket','Dangal','The Sting','2001: A Space Odyssey',\"Singin' in the Rain\",'Toy Story','Bicycle Thieves','The Kid','Inglourious Basterds','Snatch','3 Idiots'];var LabelStyle=styled(Typography)(function(_ref){var theme=_ref.theme;return _objectSpread(_objectSpread({},theme.typography.subtitle2),{},{color:theme.palette.text.secondary,marginBottom:theme.spacing(1)});});// ----------------------------------------------------------------------\nexport default function ProductNewForm(_ref2){var isEdit=_ref2.isEdit,currentProduct=_ref2.currentProduct;var navigate=useNavigate();var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var NewProductSchema=Yup.object().shape({name:Yup.string().required('Name is required'),description:Yup.string().required('Description is required'),images:Yup.array().min(1,'Images is required'),price:Yup.number().required('Price is required')});var formik=useFormik({enableReinitialize:true,initialValues:{name:(currentProduct===null||currentProduct===void 0?void 0:currentProduct.name)||'',description:(currentProduct===null||currentProduct===void 0?void 0:currentProduct.description)||'',images:(currentProduct===null||currentProduct===void 0?void 0:currentProduct.images)||[],code:(currentProduct===null||currentProduct===void 0?void 0:currentProduct.code)||'',sku:(currentProduct===null||currentProduct===void 0?void 0:currentProduct.sku)||'',price:(currentProduct===null||currentProduct===void 0?void 0:currentProduct.price)||'',priceSale:(currentProduct===null||currentProduct===void 0?void 0:currentProduct.priceSale)||'',tags:(currentProduct===null||currentProduct===void 0?void 0:currentProduct.tags)||[TAGS_OPTION[0]],inStock:Boolean((currentProduct===null||currentProduct===void 0?void 0:currentProduct.inventoryType)!=='out_of_stock'),taxes:true,gender:(currentProduct===null||currentProduct===void 0?void 0:currentProduct.gender)||GENDER_OPTION[2],category:(currentProduct===null||currentProduct===void 0?void 0:currentProduct.category)||CATEGORY_OPTION[0].classify[1]},validationSchema:NewProductSchema,onSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values,_ref3){var setSubmitting,resetForm,setErrors;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setSubmitting=_ref3.setSubmitting,resetForm=_ref3.resetForm,setErrors=_ref3.setErrors;_context.prev=1;_context.next=4;return new Promise(function(resolve){return setTimeout(resolve,500);});case 4:resetForm();setSubmitting(false);enqueueSnackbar(!isEdit?'Create success':'Update success',{variant:'success'});navigate(PATH_DASHBOARD.classes.list);_context.next=15;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);console.error(_context.t0);setSubmitting(false);setErrors(_context.t0);case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,10]]);}));function onSubmit(_x,_x2){return _onSubmit.apply(this,arguments);}return onSubmit;}()});var errors=formik.errors,values=formik.values,touched=formik.touched,handleSubmit=formik.handleSubmit,isSubmitting=formik.isSubmitting,setFieldValue=formik.setFieldValue,getFieldProps=formik.getFieldProps;var handleDrop=useCallback(function(acceptedFiles){setFieldValue('images',acceptedFiles.map(function(file){return Object.assign(file,{preview:URL.createObjectURL(file)});}));},[setFieldValue]);var handleRemoveAll=function handleRemoveAll(){setFieldValue('images',[]);};var handleRemove=function handleRemove(file){var filteredItems=values.images.filter(function(_file){return _file!==file;});setFieldValue('images',filteredItems);};return/*#__PURE__*/_jsx(FormikProvider,{value:formik,children:/*#__PURE__*/_jsx(Form,{noValidate:true,autoComplete:\"off\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:8,children:/*#__PURE__*/_jsx(Card,{sx:{p:3},children:/*#__PURE__*/_jsxs(Stack,{spacing:3,children:[/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({fullWidth:true,label:\"Product Name\"},getFieldProps('name')),{},{error:Boolean(touched.name&&errors.name),helperText:touched.name&&errors.name})),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(LabelStyle,{children:\"Description\"}),/*#__PURE__*/_jsx(Editor,{simple:true,id:\"product-description\",value:values.description,onChange:function onChange(val){return setFieldValue('description',val);},error:Boolean(touched.description&&errors.description)}),touched.description&&errors.description&&/*#__PURE__*/_jsx(FormHelperText,{error:true,sx:{px:2},children:touched.description&&errors.description})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(LabelStyle,{children:\"Add Images\"}),/*#__PURE__*/_jsx(UploadMultiFile,{showPreview:true,maxSize:3145728,accept:\"image/*\",files:values.images,onDrop:handleDrop,onRemove:handleRemove,onRemoveAll:handleRemoveAll,error:Boolean(touched.images&&errors.images)}),touched.images&&errors.images&&/*#__PURE__*/_jsx(FormHelperText,{error:true,sx:{px:2},children:touched.images&&errors.images})]})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsxs(Stack,{spacing:3,children:[/*#__PURE__*/_jsxs(Card,{sx:{p:3},children:[/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,_objectSpread(_objectSpread({},getFieldProps('inStock')),{},{checked:values.inStock})),label:\"In stock\",sx:{mb:2}}),/*#__PURE__*/_jsxs(Stack,{spacing:3,children:[/*#__PURE__*/_jsx(TextField,_objectSpread({fullWidth:true,label:\"Product Code\"},getFieldProps('code'))),/*#__PURE__*/_jsx(TextField,_objectSpread({fullWidth:true,label:\"Product SKU\"},getFieldProps('sku'))),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(LabelStyle,{children:\"Gender\"}),/*#__PURE__*/_jsx(RadioGroup,_objectSpread(_objectSpread({},getFieldProps('gender')),{},{row:true,children:/*#__PURE__*/_jsx(Stack,{spacing:1,direction:\"row\",children:GENDER_OPTION.map(function(gender){return/*#__PURE__*/_jsx(FormControlLabel,{value:gender,control:/*#__PURE__*/_jsx(Radio,{}),label:gender},gender);})})}))]}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Category\"}),/*#__PURE__*/_jsx(Select,_objectSpread(_objectSpread({label:\"Category\",native:true},getFieldProps('category')),{},{value:values.category,children:CATEGORY_OPTION.map(function(category){return/*#__PURE__*/_jsx(\"optgroup\",{label:category.group,children:category.classify.map(function(classify){return/*#__PURE__*/_jsx(\"option\",{value:classify,children:classify},classify);})},category.group);})}))]}),/*#__PURE__*/_jsx(Autocomplete,{multiple:true,freeSolo:true,value:values.tags,onChange:function onChange(event,newValue){setFieldValue('tags',newValue);},options:TAGS_OPTION.map(function(option){return option;}),renderTags:function renderTags(value,getTagProps){return value.map(function(option,index){return/*#__PURE__*/_createElement(Chip,_objectSpread(_objectSpread({},getTagProps({index:index})),{},{key:option,size:\"small\",label:option}));});},renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread({label:\"Tags\"},params));}})]})]}),/*#__PURE__*/_jsxs(Card,{sx:{p:3},children:[/*#__PURE__*/_jsxs(Stack,{spacing:3,children:[/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({fullWidth:true,placeholder:\"0.00\",label:\"Regular Price\"},getFieldProps('price')),{},{InputProps:{startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:\"$\"}),type:'number'},error:Boolean(touched.price&&errors.price),helperText:touched.price&&errors.price})),/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({fullWidth:true,placeholder:\"0.00\",label:\"Sale Price\"},getFieldProps('priceSale')),{},{InputProps:{startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:\"$\"}),type:'number'}}))]}),/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,_objectSpread(_objectSpread({},getFieldProps('taxes')),{},{checked:values.taxes})),label:\"Price includes taxes\",sx:{mt:2}})]}),/*#__PURE__*/_jsx(LoadingButton,{type:\"submit\",fullWidth:true,variant:\"contained\",size:\"large\",loading:isSubmitting,children:!isEdit?'Create Product':'Save Changes'})]})})]})})});}","map":{"version":3,"sources":["D:/Projects/Cdss apps/Final version/admin/src/sections/@dashboard/e-commerce/ProductNewForm.js"],"names":["Yup","useSnackbar","useNavigate","useCallback","Form","FormikProvider","useFormik","styled","LoadingButton","Card","Chip","Grid","Stack","Radio","Switch","Select","TextField","InputLabel","Typography","RadioGroup","FormControl","Autocomplete","InputAdornment","FormHelperText","FormControlLabel","PATH_DASHBOARD","Editor","UploadMultiFile","GENDER_OPTION","CATEGORY_OPTION","group","classify","TAGS_OPTION","LabelStyle","theme","typography","subtitle2","color","palette","text","secondary","marginBottom","spacing","ProductNewForm","isEdit","currentProduct","navigate","enqueueSnackbar","NewProductSchema","object","shape","name","string","required","description","images","array","min","price","number","formik","enableReinitialize","initialValues","code","sku","priceSale","tags","inStock","Boolean","inventoryType","taxes","gender","category","validationSchema","onSubmit","values","setSubmitting","resetForm","setErrors","Promise","resolve","setTimeout","variant","classes","list","console","error","errors","touched","handleSubmit","isSubmitting","setFieldValue","getFieldProps","handleDrop","acceptedFiles","map","file","Object","assign","preview","URL","createObjectURL","handleRemoveAll","handleRemove","filteredItems","filter","_file","p","val","px","mb","event","newValue","option","value","getTagProps","index","params","startAdornment","type","mt"],"mappings":"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","sourcesContent":["import * as Yup from 'yup';\nimport PropTypes from 'prop-types';\nimport { useSnackbar } from 'notistack';\nimport { useNavigate } from 'react-router-dom';\nimport { useCallback } from 'react';\nimport { Form, FormikProvider, useFormik } from 'formik';\n// @mui\nimport { styled } from '@mui/material/styles';\nimport { LoadingButton } from '@mui/lab';\nimport {\n  Card,\n  Chip,\n  Grid,\n  Stack,\n  Radio,\n  Switch,\n  Select,\n  TextField,\n  InputLabel,\n  Typography,\n  RadioGroup,\n  FormControl,\n  Autocomplete,\n  InputAdornment,\n  FormHelperText,\n  FormControlLabel,\n} from '@mui/material';\n// routes\nimport { PATH_DASHBOARD } from '../../../routes/paths';\n//\nimport Editor from '../../../components/editor';\nimport { UploadMultiFile } from '../../../components/upload';\n\n// ----------------------------------------------------------------------\n\nconst GENDER_OPTION = ['Men', 'Women', 'Kids'];\n\nconst CATEGORY_OPTION = [\n  { group: 'Clothing', classify: ['Shirts', 'T-shirts', 'Jeans', 'Leather'] },\n  { group: 'Tailored', classify: ['Suits', 'Blazers', 'Trousers', 'Waistcoats'] },\n  { group: 'Accessories', classify: ['Shoes', 'Backpacks and bags', 'Bracelets', 'Face masks'] },\n];\n\nconst TAGS_OPTION = [\n  'Toy Story 3',\n  'Logan',\n  'Full Metal Jacket',\n  'Dangal',\n  'The Sting',\n  '2001: A Space Odyssey',\n  \"Singin' in the Rain\",\n  'Toy Story',\n  'Bicycle Thieves',\n  'The Kid',\n  'Inglourious Basterds',\n  'Snatch',\n  '3 Idiots',\n];\n\nconst LabelStyle = styled(Typography)(({ theme }) => ({\n  ...theme.typography.subtitle2,\n  color: theme.palette.text.secondary,\n  marginBottom: theme.spacing(1),\n}));\n\n// ----------------------------------------------------------------------\n\nProductNewForm.propTypes = {\n  isEdit: PropTypes.bool,\n  currentProduct: PropTypes.object,\n};\n\nexport default function ProductNewForm({ isEdit, currentProduct }) {\n  const navigate = useNavigate();\n  const { enqueueSnackbar } = useSnackbar();\n\n  const NewProductSchema = Yup.object().shape({\n    name: Yup.string().required('Name is required'),\n    description: Yup.string().required('Description is required'),\n    images: Yup.array().min(1, 'Images is required'),\n    price: Yup.number().required('Price is required'),\n  });\n\n  const formik = useFormik({\n    enableReinitialize: true,\n    initialValues: {\n      name: currentProduct?.name || '',\n      description: currentProduct?.description || '',\n      images: currentProduct?.images || [],\n      code: currentProduct?.code || '',\n      sku: currentProduct?.sku || '',\n      price: currentProduct?.price || '',\n      priceSale: currentProduct?.priceSale || '',\n      tags: currentProduct?.tags || [TAGS_OPTION[0]],\n      inStock: Boolean(currentProduct?.inventoryType !== 'out_of_stock'),\n      taxes: true,\n      gender: currentProduct?.gender || GENDER_OPTION[2],\n      category: currentProduct?.category || CATEGORY_OPTION[0].classify[1],\n    },\n    validationSchema: NewProductSchema,\n    onSubmit: async (values, { setSubmitting, resetForm, setErrors }) => {\n      try {\n        await new Promise((resolve) => setTimeout(resolve, 500));\n        resetForm();\n        setSubmitting(false);\n        enqueueSnackbar(!isEdit ? 'Create success' : 'Update success', { variant: 'success' });\n        navigate(PATH_DASHBOARD.classes.list);\n      } catch (error) {\n        console.error(error);\n        setSubmitting(false);\n        setErrors(error);\n      }\n    },\n  });\n\n  const { errors, values, touched, handleSubmit, isSubmitting, setFieldValue, getFieldProps } = formik;\n\n  const handleDrop = useCallback(\n    (acceptedFiles) => {\n      setFieldValue(\n        'images',\n        acceptedFiles.map((file) =>\n          Object.assign(file, {\n            preview: URL.createObjectURL(file),\n          })\n        )\n      );\n    },\n    [setFieldValue]\n  );\n\n  const handleRemoveAll = () => {\n    setFieldValue('images', []);\n  };\n\n  const handleRemove = (file) => {\n    const filteredItems = values.images.filter((_file) => _file !== file);\n    setFieldValue('images', filteredItems);\n  };\n\n  return (\n    <FormikProvider value={formik}>\n      <Form noValidate autoComplete=\"off\" onSubmit={handleSubmit}>\n        <Grid container spacing={3}>\n          <Grid item xs={12} md={8}>\n            <Card sx={{ p: 3 }}>\n              <Stack spacing={3}>\n                <TextField\n                  fullWidth\n                  label=\"Product Name\"\n                  {...getFieldProps('name')}\n                  error={Boolean(touched.name && errors.name)}\n                  helperText={touched.name && errors.name}\n                />\n\n                <div>\n                  <LabelStyle>Description</LabelStyle>\n                  <Editor\n                    simple\n                    id=\"product-description\"\n                    value={values.description}\n                    onChange={(val) => setFieldValue('description', val)}\n                    error={Boolean(touched.description && errors.description)}\n                  />\n                  {touched.description && errors.description && (\n                    <FormHelperText error sx={{ px: 2 }}>\n                      {touched.description && errors.description}\n                    </FormHelperText>\n                  )}\n                </div>\n\n                <div>\n                  <LabelStyle>Add Images</LabelStyle>\n                  <UploadMultiFile\n                    showPreview\n                    maxSize={3145728}\n                    accept=\"image/*\"\n                    files={values.images}\n                    onDrop={handleDrop}\n                    onRemove={handleRemove}\n                    onRemoveAll={handleRemoveAll}\n                    error={Boolean(touched.images && errors.images)}\n                  />\n                  {touched.images && errors.images && (\n                    <FormHelperText error sx={{ px: 2 }}>\n                      {touched.images && errors.images}\n                    </FormHelperText>\n                  )}\n                </div>\n              </Stack>\n            </Card>\n          </Grid>\n\n          <Grid item xs={12} md={4}>\n            <Stack spacing={3}>\n              <Card sx={{ p: 3 }}>\n                <FormControlLabel\n                  control={<Switch {...getFieldProps('inStock')} checked={values.inStock} />}\n                  label=\"In stock\"\n                  sx={{ mb: 2 }}\n                />\n\n                <Stack spacing={3}>\n                  <TextField fullWidth label=\"Product Code\" {...getFieldProps('code')} />\n                  <TextField fullWidth label=\"Product SKU\" {...getFieldProps('sku')} />\n\n                  <div>\n                    <LabelStyle>Gender</LabelStyle>\n                    <RadioGroup {...getFieldProps('gender')} row>\n                      <Stack spacing={1} direction=\"row\">\n                        {GENDER_OPTION.map((gender) => (\n                          <FormControlLabel key={gender} value={gender} control={<Radio />} label={gender} />\n                        ))}\n                      </Stack>\n                    </RadioGroup>\n                  </div>\n\n                  <FormControl fullWidth>\n                    <InputLabel>Category</InputLabel>\n                    <Select label=\"Category\" native {...getFieldProps('category')} value={values.category}>\n                      {CATEGORY_OPTION.map((category) => (\n                        <optgroup key={category.group} label={category.group}>\n                          {category.classify.map((classify) => (\n                            <option key={classify} value={classify}>\n                              {classify}\n                            </option>\n                          ))}\n                        </optgroup>\n                      ))}\n                    </Select>\n                  </FormControl>\n                  <Autocomplete\n                    multiple\n                    freeSolo\n                    value={values.tags}\n                    onChange={(event, newValue) => {\n                      setFieldValue('tags', newValue);\n                    }}\n                    options={TAGS_OPTION.map((option) => option)}\n                    renderTags={(value, getTagProps) =>\n                      value.map((option, index) => (\n                        <Chip {...getTagProps({ index })} key={option} size=\"small\" label={option} />\n                      ))\n                    }\n                    renderInput={(params) => <TextField label=\"Tags\" {...params} />}\n                  />\n                </Stack>\n              </Card>\n\n              <Card sx={{ p: 3 }}>\n                <Stack spacing={3}>\n                  <TextField\n                    fullWidth\n                    placeholder=\"0.00\"\n                    label=\"Regular Price\"\n                    {...getFieldProps('price')}\n                    InputProps={{\n                      startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\n                      type: 'number',\n                    }}\n                    error={Boolean(touched.price && errors.price)}\n                    helperText={touched.price && errors.price}\n                  />\n\n                  <TextField\n                    fullWidth\n                    placeholder=\"0.00\"\n                    label=\"Sale Price\"\n                    {...getFieldProps('priceSale')}\n                    InputProps={{\n                      startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\n                      type: 'number',\n                    }}\n                  />\n                </Stack>\n\n                <FormControlLabel\n                  control={<Switch {...getFieldProps('taxes')} checked={values.taxes} />}\n                  label=\"Price includes taxes\"\n                  sx={{ mt: 2 }}\n                />\n              </Card>\n\n              <LoadingButton type=\"submit\" fullWidth variant=\"contained\" size=\"large\" loading={isSubmitting}>\n                {!isEdit ? 'Create Product' : 'Save Changes'}\n              </LoadingButton>\n            </Stack>\n          </Grid>\n        </Grid>\n      </Form>\n    </FormikProvider>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}