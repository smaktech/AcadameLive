{"ast":null,"code":"import _objectSpread from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from'react';import{Modal as BootstrapModal}from'react-bootstrap';import ModalHeader from'react-bootstrap/ModalHeader';import{useSelector,useDispatch}from'react-redux';import{Link,useNavigate,Redirect}from'react-router-dom';import{updatePassword,changeName,uploadImage,removeImage}from'../../api/Profile/Profile';import Loader from\"react-loader-spinner\";import Modal from'@mui/material/Modal';import CircularProgress from'@mui/material/CircularProgress';import{imageBaseUrl,modalStyle}from'../../config';import CloseIcon from'@mui/icons-material/Close';import Grid from'@mui/material/Grid';import Box from'@mui/material/Box';import{Button,Typography}from'@mui/material';import useAuth from'src/hooks/useAuth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Profile(){var _useAuth=useAuth(),user=_useAuth.user,updateProfile=_useAuth.updateProfile;var userDetails=user;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isVisiblePassword=_useState2[0],setIsVisiblePassword=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),modalShow=_useState4[0],setModalShow=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),modalShow4Status=_useState6[0],setModalShow4Status=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),imageFile=_useState8[0],setImageFile=_useState8[1];var dispatch=useDispatch();//input fields variable\nvar _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),password=_useState10[0],setRecentPassword=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),newPassword=_useState12[0],setNewPassword=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),confirmPassword=_useState14[0],setConfirmPassword=_useState14[1];var navigate=useNavigate();//storing the user details into variable from global state using redux\n// const authStatus = useSelector((state) => state.user.authStatus)\n// const userDetails = useSelector((state) => state.user.userDetails);\n// const userAccessToken = useSelector((state) => state.user.accessToken);\nvar _useState15=useState(userDetails===null||userDetails===void 0?void 0:userDetails.name),_useState16=_slicedToArray(_useState15,2),name=_useState16[0],setUserName=_useState16[1];var email=userDetails===null||userDetails===void 0?void 0:userDetails.email;var userId=userDetails===null||userDetails===void 0?void 0:userDetails._id;var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),userProfileImg=_useState18[0],setUserProfileImg=_useState18[1];//loader for setting profileImage\nvar _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),imageLoader=_useState20[0],setImageLoader=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),removeLoader=_useState22[0],setRemoveLoader=_useState22[1];//  Positions of the snacbar after successful saving of name\nvar _useState23=useState('bottom'),_useState24=_slicedToArray(_useState23,2),vertical=_useState24[0],setVertical=_useState24[1];var _useState25=useState('center'),_useState26=_slicedToArray(_useState25,2),horizontal=_useState26[0],setHorizontal=_useState26[1];//snackbar\nvar _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),open=_useState28[0],setOpen=_useState28[1];var _useState29=useState(''),_useState30=_slicedToArray(_useState29,2),snackbarMessage=_useState30[0],setSnackbarMessage=_useState30[1];//loader for save change password!\nvar _useState31=useState(false),_useState32=_slicedToArray(_useState31,2),loader=_useState32[0],setloader=_useState32[1];//shows error when admin try to change password\nvar _useState33=useState(''),_useState34=_slicedToArray(_useState33,2),errorMessage=_useState34[0],setErrorMessage=_useState34[1];var _useState35=useState(),_useState36=_slicedToArray(_useState35,2),showError=_useState36[0],setShowError=_useState36[1];// console.log(userDetails,userAccessToken);\nvar userImageRef=useRef();useEffect(function(){if(userDetails){if(userDetails.profileImage.includes('https://')||userDetails.profileImage.includes('http://')){setUserProfileImg(userDetails.profileImage);}else{setUserProfileImg(\"\".concat(imageBaseUrl,\"/\").concat(userDetails.profileImage));}}},[userDetails]);// function to upload selected photo in the photo frame\nvar onFileChange=function onFileChange(e){var url=URL.createObjectURL(e.target.files[0]);// console.log(e.target.files)\nsetImageFile(e.target.files[0]);setUserProfileImg(url);};// function to change admin password!\nfunction changeAdminPassword(){setloader(true);setShowError(false);//check whether the input fileds are empty or not!\nif(password==''||newPassword==''||confirmPassword==''){setErrorMessage('Please Fill all the fields!');setShowError(true);setloader(false);}else{//check whether the both new passwords matches or not\nif(newPassword!=confirmPassword){setErrorMessage('Password does not match!');setShowError(true);setloader(false);}else{//check whether the new password is of min 8 characters or not\nif(newPassword.length<8){setErrorMessage('Password should be of min 8 characters!');setShowError(true);setloader(false);}//processing the change password request using API\nelse{updatePassword({email:email,password:password,newPassword:newPassword}).then(function(res){setloader(false);// console.log('res',res);\nif(res.status){//displaying the modal for successful changes\nsetModalShow4Status(true);}else{//displaying error on invalid password \nsetErrorMessage(res.message);setShowError(true);}}).catch(function(err){setloader(false);console.error(err);});}}setloader(false);}}//  function to change the name of the admin on blur of the input field\nfunction handleBlur(){if(name!=''){changeName(userId,{name:name}).then(function(res){// console.log('res',res);\n// console.log('data',data);\nif(res.status){//displaying the snackbar for successful changes\nsetSnackbarMessage(\"Name changed successfully!\");updateProfile(_objectSpread(_objectSpread({},userDetails),{},{name:name}));setOpen(true);}else{//displaying error on invalid password \nsetErrorMessage(res.message);setShowError(true);}}).catch(function(err){setloader(false);console.error(err);});}}// function to upload user ew profile pic on the server with api\nfunction uploadProfilePic(){console.log(imageFile);setImageLoader(true);if(imageFile!=null){uploadImage(userId,imageFile).then(function(res){// console.log(\"res\",res);\nif(res.status){//setting the new image url in the state variable \n//showing the profile updated modal after successful uploading of image!\nsetImageLoader(false);setUserProfileImg(imageBaseUrl+res.imagePath);// dispatch({ type: SET_USER_PROFILE_PIC, payload: { profileImage: res.imagePath } });\nupdateProfile(_objectSpread(_objectSpread({},userDetails),{},{profileImage:imageBaseUrl+res.imagePath}));setModalShow(false);setModalShow4Status(true);}}).catch(function(err){console.error(err);});}else{alert(\"File not selected!\");setImageLoader(false);}}//function that removes the userImage from the server\nfunction removeUserImage(){setRemoveLoader(true);removeImage(userId).then(function(res){console.log('res',res);if(res.status){//after successfully removing the file changing the state variable as well\nsetRemoveLoader(false);setUserProfileImg(\"\");updateProfile(_objectSpread(_objectSpread({},userDetails),{},{profileImage:null}));}else{setRemoveLoader(false);}}).catch(function(err){console.error(err);setRemoveLoader(false);});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-3 \",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mt-3 txt-5282F0 fw-bold\",children:\"Profile\"}),/*#__PURE__*/_jsx(\"hr\",{className:\"mt-4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return setModalShow(true);},children:/*#__PURE__*/_jsx(\"img\",{src:userProfileImg?userProfileImg:\"/Assets/userProfile.png\",className:\"rounded-circle\",width:\"180\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ms-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row g-3 align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-auto\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"userName\",class:\"col-form-label txt-5282F0\",children:\"Name :\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-auto mt-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control txt-5282F0\",value:name,onChange:function onChange(e){return setUserName(e.target.value);},onBlur:handleBlur})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex mt-3 txt-5282F0\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Email address: \\xA0 \"}),/*#__PURE__*/_jsx(\"p\",{children:email})]})]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h5\",{className:\"mt-4 txt-5282F0 fw-bold\",children:\"Change Password\"}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:showError?/*#__PURE__*/_jsx(\"div\",{class:\"row pt-2 \",children:/*#__PURE__*/_jsx(\"div\",{class:\"col-md-5    col-sm-12 clr-danger-100\",children:/*#__PURE__*/_jsx(\"div\",{class:\"   text-center\",children:errorMessage})})}):/*#__PURE__*/_jsx(_Fragment,{children:\" \"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-4 pe-5\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"input-group\",id:\"show_hide_password\",children:[/*#__PURE__*/_jsx(\"input\",{type:isVisiblePassword?\"text\":\"password\",className:\"form-control txt-5282F0\",placeholder:\"Current Password\",onChange:function onChange(e){return setRecentPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"div\",{class:\"input-group-addon mt-2\",style:{marginLeft:-30,zIndex:3},children:/*#__PURE__*/_jsx(\"i\",{class:isVisiblePassword?\"fa fa-eye-slash txt-5282F0\":\"fa fa-eye txt-5282F0\",\"aria-hidden\":\"true\",onClick:function onClick(){return setIsVisiblePassword(!isVisiblePassword);}})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-8\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-4 pe-5 mt-5\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"input-group\",id:\"show_hide_password\",children:[/*#__PURE__*/_jsx(\"input\",{type:isVisiblePassword?\"text\":\"password\",className:\"form-control txt-5282F0\",placeholder:\"New Password\",onChange:function onChange(e){return setNewPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"div\",{class:\"input-group-addon mt-2\",style:{marginLeft:-30,zIndex:3},children:/*#__PURE__*/_jsx(\"i\",{class:isVisiblePassword?\"fa fa-eye-slash txt-5282F0\":\"fa fa-eye txt-5282F0\",\"aria-hidden\":\"true\",onClick:function onClick(){return setIsVisiblePassword(!isVisiblePassword);}})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-4 pe-5 mt-5\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"input-group\",id:\"show_hide_password\",children:[/*#__PURE__*/_jsx(\"input\",{type:isVisiblePassword?\"text\":\"password\",className:\"form-control txt-5282F0\",placeholder:\"Confirm Password\",onChange:function onChange(e){return setConfirmPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"div\",{class:\"input-group-addon mt-2\",style:{marginLeft:-30,zIndex:3},children:/*#__PURE__*/_jsx(\"i\",{class:isVisiblePassword?\"fa fa-eye-slash txt-5282F0\":\"fa fa-eye txt-5282F0\",\"aria-hidden\":\"true\",onClick:function onClick(){return setIsVisiblePassword(!isVisiblePassword);}})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex mt-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"pr-5\",children:loader?/*#__PURE__*/_jsx(Button,{variant:\"outlined\",className:\"btn btn-primary py-2 px-5 me-3\",children:/*#__PURE__*/_jsx(CircularProgress,{size:20})}):/*#__PURE__*/_jsx(Button,{variant:\"contained\",className:\"btn btn-primary py-2 px-5 me-3\",onClick:changeAdminPassword,children:\"Save\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Button,{variant:\"outlined\",className:\"btn btn-outline-dark py-2 px-5\",children:\"Cancel\"})})]})]}),/*#__PURE__*/_jsx(Modal,{open:modalShow,size:\"md\",\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true,onClose:function onClose(){return setModalShow(false);},children:/*#__PURE__*/_jsx(Box,{sx:modalStyle,children:/*#__PURE__*/_jsxs(BootstrapModal.Body,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center d-flex justify-content-center\",onClick:function onClick(){userImageRef.click();},children:/*#__PURE__*/_jsx(\"img\",{src:userProfileImg?userProfileImg:\"/Assets/userProfile.png\",className:\"rounded-circle\",width:\"180\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-4 pb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"d-none\",ref:function ref(_ref){return userImageRef=_ref;},onChange:function onChange(e){return onFileChange(e);}}),userProfileImg?/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-around\",children:[removeLoader?/*#__PURE__*/_jsx(Button,{variant:\"outlined\",className:\"btn btn-outline-primary py-2 px-4\",children:/*#__PURE__*/_jsx(CircularProgress,{size:20})}):/*#__PURE__*/_jsx(Button,{variant:\"outlined\",className:\"btn btn-outline-primary py-2 px-4\",onClick:function onClick(){return removeUserImage();},children:\"Remove\"}),imageLoader?/*#__PURE__*/_jsx(Button,{variant:\"outlined\",className:\"btn btn-primary px-4\",children:/*#__PURE__*/_jsx(CircularProgress,{size:20})}):/*#__PURE__*/_jsx(Button,{variant:\"contained\",className:\"btn btn-primary px-4\"// onClick={()=>{setModalShow(false); setModalShow4Status(true)}}\n,onClick:function onClick(){return uploadProfilePic();},children:\"Changes\"})]}):/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:function onClick(){userImageRef.click();},children:\"Add photo\"})]})]})})}),/*#__PURE__*/_jsx(Modal,{open:modalShow4Status,size:\"md\",\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true,onClose:function onClose(){return setModalShow4Status(false);},children:/*#__PURE__*/_jsxs(Box,{style:modalStyle,children:[/*#__PURE__*/_jsx(BootstrapModal.Header,{className:\"clr-primary-400 py-2\",children:/*#__PURE__*/_jsxs(Grid,{container:true,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:11,lg:11,md:11,sm:11,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Profile update\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:1,lg:1,md:1,children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return setModalAlertTitle(false);},children:/*#__PURE__*/_jsx(CloseIcon,{})})})]})}),/*#__PURE__*/_jsxs(BootstrapModal.Body,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center txt-5282F0 my-4\",children:/*#__PURE__*/_jsx(\"p\",{children:\"You have successfully updated your profile information\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-4 pb-3\",children:/*#__PURE__*/_jsx(Button,{variant:\"outlined\",className:\"btn btn-primary px-5\",onClick:function onClick(){return setModalShow4Status(false);},children:\"OK\"})})]})]})})]});}","map":{"version":3,"sources":["D:/Projects/Cdss apps/Final version/admin/src/pages/profile/Profile.js"],"names":["React","useState","useEffect","useRef","Modal","BootstrapModal","ModalHeader","useSelector","useDispatch","Link","useNavigate","Redirect","updatePassword","changeName","uploadImage","removeImage","Loader","CircularProgress","imageBaseUrl","modalStyle","CloseIcon","Grid","Box","Button","Typography","useAuth","Profile","user","updateProfile","userDetails","isVisiblePassword","setIsVisiblePassword","modalShow","setModalShow","modalShow4Status","setModalShow4Status","imageFile","setImageFile","dispatch","password","setRecentPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","navigate","name","setUserName","email","userId","_id","userProfileImg","setUserProfileImg","imageLoader","setImageLoader","removeLoader","setRemoveLoader","vertical","setVertical","horizontal","setHorizontal","open","setOpen","snackbarMessage","setSnackbarMessage","loader","setloader","errorMessage","setErrorMessage","showError","setShowError","userImageRef","profileImage","includes","onFileChange","e","url","URL","createObjectURL","target","files","changeAdminPassword","length","then","res","status","message","catch","err","console","error","handleBlur","uploadProfilePic","log","imagePath","alert","removeUserImage","value","marginLeft","zIndex","click","ref","setModalAlertTitle"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useRef } from 'react'\nimport {Modal as BootstrapModal} from 'react-bootstrap'\nimport ModalHeader from 'react-bootstrap/ModalHeader'\nimport {useSelector,useDispatch} from 'react-redux'\nimport { Link, useNavigate, Redirect } from 'react-router-dom'\nimport {updatePassword,changeName,uploadImage,removeImage} from '../../api/Profile/Profile'\nimport Loader from \"react-loader-spinner\";\nimport Modal from '@mui/material/Modal';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport {imageBaseUrl, modalStyle} from '../../config'; \n\n\nimport CloseIcon from '@mui/icons-material/Close';\n\nimport Grid from '@mui/material/Grid';\nimport Box from '@mui/material/Box'; \nimport { Button, Typography } from '@mui/material'\nimport useAuth from 'src/hooks/useAuth'\n\nexport default function Profile() {\n    const { user, updateProfile } = useAuth();\n    const userDetails = user;\n    const [isVisiblePassword, setIsVisiblePassword] = useState(false)\n    const [modalShow, setModalShow] = useState(false)\n    const [modalShow4Status ,setModalShow4Status] = useState(false)\n    const [imageFile, setImageFile] = useState(null)\n\n    const dispatch = useDispatch();\n   \n\n    //input fields variable\n    const [password, setRecentPassword] = useState('');\n    const [newPassword , setNewPassword] = useState('');\n    const [confirmPassword,setConfirmPassword] = useState('');\n    const navigate =  useNavigate()\n\n    //storing the user details into variable from global state using redux\n    // const authStatus = useSelector((state) => state.user.authStatus)\n    // const userDetails = useSelector((state) => state.user.userDetails);\n    // const userAccessToken = useSelector((state) => state.user.accessToken);\n    const [name, setUserName] = useState(userDetails?.name);\n    const email = userDetails?.email\n    const userId = userDetails?._id;\n\n    const [userProfileImg, setUserProfileImg] = useState(null)\n\n    //loader for setting profileImage\n    const [imageLoader , setImageLoader] =  useState(false)\n    const [removeLoader , setRemoveLoader] = useState(false);\n\n    //  Positions of the snacbar after successful saving of name\n    const [vertical , setVertical] = useState('bottom');\n    const [horizontal , setHorizontal] = useState('center');\n\n    //snackbar\n    const [open , setOpen] = useState(false);\n    const [snackbarMessage,setSnackbarMessage] = useState('')\n\n    //loader for save change password!\n    const [loader, setloader] = useState(false);\n\n    //shows error when admin try to change password\n    const [errorMessage , setErrorMessage] = useState('');\n    const [showError , setShowError] = useState();\n\n    // console.log(userDetails,userAccessToken);\n    let userImageRef = useRef()\n\n\n    useEffect(() =>{\n         if(userDetails)\n         {\n            if(userDetails.profileImage.includes('https://')||userDetails.profileImage.includes('http://'))\n            {\n                setUserProfileImg(userDetails.profileImage)\n            }else\n            {\n                setUserProfileImg(`${imageBaseUrl}/${userDetails.profileImage}`)\n            }\n         }\n       \n         \n    },[userDetails])\n    // function to upload selected photo in the photo frame\n    const onFileChange=(e)=>{\n        let url = URL.createObjectURL(e.target.files[0]);\n        // console.log(e.target.files)\n        setImageFile(e.target.files[0]);\n        setUserProfileImg(url);\n     }\n\n\n    // function to change admin password!\n     function changeAdminPassword(){\n        setloader(true);\n        setShowError(false);\n        //check whether the input fileds are empty or not!\n        if(password == '' || newPassword == '' || confirmPassword == ''){\n            setErrorMessage('Please Fill all the fields!');\n            setShowError(true);\n            setloader(false);\n        }\n        else\n        {\n            //check whether the both new passwords matches or not\n            if(newPassword != confirmPassword)\n            {\n                setErrorMessage('Password does not match!');\n                setShowError(true);\n                setloader(false);\n            }\n            else\n            {\n                //check whether the new password is of min 8 characters or not\n                if(newPassword.length < 8){\n                    setErrorMessage('Password should be of min 8 characters!');\n                    setShowError(true);\n                    setloader(false);\n                }\n                //processing the change password request using API\n                else\n                {   \n                    updatePassword({ email, password,newPassword })\n                        .then((res) => {\n                            setloader(false);\n                            // console.log('res',res);\n                                if(res.status){\n                                    //displaying the modal for successful changes\n                                    setModalShow4Status(true);\n                                }\n                                else\n                                {  \n                                    //displaying error on invalid password \n                                    setErrorMessage(res.message);\n                                    setShowError(true);\n                                }\n                        \n                        })\n                        .catch((err) => {\n                            setloader(false);\n                            console.error(err);\n                        });\n                }\n            }\n            setloader(false);\n        }\n     }\n\n     //  function to change the name of the admin on blur of the input field\n     function handleBlur(){\n        if(name != '') {\n            changeName(userId,{ name })\n                        .then((res) => {\n                            // console.log('res',res);\n                                // console.log('data',data);\n                                if(res.status){\n                                    //displaying the snackbar for successful changes\n                                    setSnackbarMessage(\"Name changed successfully!\")\n                                    updateProfile({...userDetails,name})\n                                    setOpen(true);\n                                }\n                                else\n                                {  \n                                    //displaying error on invalid password \n                                    setErrorMessage(res.message);\n                                    setShowError(true);\n                                }\n                        \n                        })\n                        .catch((err) => {\n                            setloader(false);\n                            console.error(err);\n                        });\n        }\n     }\n\n     // function to upload user ew profile pic on the server with api\n     function uploadProfilePic() {\n         console.log(imageFile)\n        setImageLoader(true);\n        if(imageFile !=null )\n        {\n            uploadImage(userId,imageFile)\n                .then((res) => {\n                    // console.log(\"res\",res);\n                    if(res.status)\n                    { \n                        //setting the new image url in the state variable \n                        //showing the profile updated modal after successful uploading of image!\n                        setImageLoader(false);\n                        setUserProfileImg(imageBaseUrl+res.imagePath);\n                        // dispatch({ type: SET_USER_PROFILE_PIC, payload: { profileImage: res.imagePath } });\n                        updateProfile({...userDetails,profileImage:imageBaseUrl+res.imagePath})\n                        setModalShow(false);\n                        setModalShow4Status(true);\n                    }\n                })\n                .catch((err) => {\n                    console.error(err);\n                })\n        }\n        else\n        {\n            alert(\"File not selected!\");\n            setImageLoader(false);\n        }\n     }\n\n     //function that removes the userImage from the server\n     function removeUserImage() {\n         setRemoveLoader(true);\n         removeImage(userId)\n            .then((res)=>{\n                console.log('res',res)\n                if(res.status)\n                {\n                    //after successfully removing the file changing the state variable as well\n                    setRemoveLoader(false);\n                    setUserProfileImg(\"\")\n                    updateProfile({...userDetails,profileImage:null})\n                }\n                else\n                {\n                    setRemoveLoader(false);\n                }\n                \n            })\n            .catch((err) => {\n                console.error(err);\n                setRemoveLoader(false);\n            })\n     }\n\n    return (\n        <>\n\n        <div className=\"px-3 \">\n           <h5 className=\"mt-3 txt-5282F0 fw-bold\">Profile</h5>\n           <hr className=\"mt-4\" />\n           <div className=\"d-flex align-items-center\">\n                <div onClick={()=>setModalShow(true)}>\n                    <img src={userProfileImg?(userProfileImg):(\"/Assets/userProfile.png\")}  className=\"rounded-circle\" width=\"180\" />\n                </div>\n                <div className=\"ms-3\">\n                    <div className=\"row g-3 align-items-center\">\n                        <div className=\"col-auto\">\n                            <label htmlFor=\"userName\" class=\"col-form-label txt-5282F0\">Name :</label>\n                        </div>\n                        <div className=\"col-auto mt-3\">\n                            <input type=\"text\" className=\"form-control txt-5282F0\" value={name} \n                            onChange={(e) => setUserName(e.target.value)} onBlur={handleBlur}/>\n                        </div>\n                    </div>\n                    <div className=\"d-flex mt-3 txt-5282F0\">\n                        <p>Email address: &nbsp; </p>\n                        <p>{email}</p>\n                    </div>\n                </div>\n           </div>\n           <hr />\n\n           <h5 className=\"mt-4 txt-5282F0 fw-bold\">Change Password</h5>\n            <div className=\"container\">\n            {\n                    (showError)?\n                    <div class=\"row pt-2 \">\n                    <div class=\"col-md-5    col-sm-12 clr-danger-100\">\n                       <div class=\"   text-center\">\n                           {errorMessage}\n                       </div>\n                    </div>\n                    \n                    </div>\n\n                    :\n                   <> </>\n                }\n            </div>\n            <div className=\"row mt-4\">\n                <div className=\"col-lg-4 pe-5\">\n                <div class=\"input-group\" id=\"show_hide_password\">\n                    <input type={isVisiblePassword?(\"text\"):(\"password\")} className=\"form-control txt-5282F0\" placeholder=\"Current Password\" onChange={(e) => setRecentPassword(e.target.value)}/>\n                    <div class=\"input-group-addon mt-2\" style={{marginLeft: -30, zIndex:3}}>\n                        <i class={isVisiblePassword?(\"fa fa-eye-slash txt-5282F0\"):(\"fa fa-eye txt-5282F0\")} aria-hidden=\"true\" onClick={()=>setIsVisiblePassword(!isVisiblePassword)}></i>\n                    </div>\n                </div>\n                </div>\n\n                <div className=\"col-lg-8\"></div>\n            \n                \n\n                <div className=\"col-lg-4 pe-5 mt-5\">\n                <div class=\"input-group\" id=\"show_hide_password\">\n                    <input type={isVisiblePassword?(\"text\"):(\"password\")} className=\"form-control txt-5282F0\" placeholder=\"New Password\" onChange={(e) => setNewPassword(e.target.value)}/>\n                    <div class=\"input-group-addon mt-2\" style={{marginLeft: -30, zIndex:3}}>\n                        <i class={isVisiblePassword?(\"fa fa-eye-slash txt-5282F0\"):(\"fa fa-eye txt-5282F0\")} aria-hidden=\"true\" onClick={()=>setIsVisiblePassword(!isVisiblePassword)}></i>\n                    </div>\n                </div>\n                </div>\n\n                <div className=\"col-lg-4 pe-5 mt-5\">\n                <div class=\"input-group\" id=\"show_hide_password\">\n                    <input type={isVisiblePassword?(\"text\"):(\"password\")} className=\"form-control txt-5282F0\" placeholder=\"Confirm Password\" onChange={(e) => setConfirmPassword(e.target.value)}/>\n                    <div class=\"input-group-addon mt-2\" style={{marginLeft: -30, zIndex:3}}>\n                        <i class={isVisiblePassword?(\"fa fa-eye-slash txt-5282F0\"):(\"fa fa-eye txt-5282F0\")} aria-hidden=\"true\" onClick={()=>setIsVisiblePassword(!isVisiblePassword)}></i>\n                    </div>\n                </div>\n                </div>\n\n            </div>\n\n\n            <div className=\"d-flex mt-5\">\n                <div className=\"pr-5\">\n                {loader?(\n                    <Button variant=\"outlined\" className=\"btn btn-primary py-2 px-5 me-3\" >\n                        <CircularProgress size={20}/>\n                    </Button>\n                ):(\n                    <Button variant=\"contained\" className=\"btn btn-primary py-2 px-5 me-3\" onClick={changeAdminPassword}>Save</Button>\n                )}\n                </div>\n                <div>\n                    <Button  variant=\"outlined\" className=\"btn btn-outline-dark py-2 px-5\">Cancel</Button>\n                </div>\n            </div>\n\n            {/* <Snackbar\n                open={open}\n                autoHideDuration={6000}\n                message={snackbarMessage}\n                anchorOrigin={{ vertical, horizontal }}\n                onClose={()=>setOpen(false)}\n            /> */}\n\n        </div>\n\n\n\n        <Modal\n            open={modalShow}\n            size=\"md\"\n            aria-labelledby=\"contained-modal-title-vcenter\"\n            centered\n            onClose={()=>setModalShow(false)}\n            >\n                <Box sx={modalStyle}>\n                   \n                    <BootstrapModal.Body>\n                        <div className=\"text-center d-flex justify-content-center\" onClick={()=>{userImageRef.click()}}>\n                                <img src={userProfileImg?(userProfileImg):(\"/Assets/userProfile.png\")} \n                                className=\"rounded-circle\" width=\"180\"/>\n                            \n                        </div>\n                        <div className=\"text-center mt-4 pb-3\">\n                            <input type=\"file\" className=\"d-none\" ref={(ref)=>userImageRef=ref} onChange={(e)=>onFileChange(e)} />\n                            {userProfileImg?(\n                                <div className=\"d-flex justify-content-around\">\n                                    {removeLoader?(\n                                        <Button variant=\"outlined\" className=\"btn btn-outline-primary py-2 px-4\" >\n                                            <CircularProgress size={20}/>\n                                        </Button>\n                                    ):(\n                                        <Button variant=\"outlined\" className=\"btn btn-outline-primary py-2 px-4\" \n                                        onClick={()=>removeUserImage()}\n                                        >Remove</Button>\n                                    )}\n                                    \n                                    {imageLoader?(\n                                            <Button variant=\"outlined\" className=\"btn btn-primary px-4\" >\n                                                <CircularProgress size={20}/>\n                                            </Button>\n                                    ):(\n                                        <Button variant=\"contained\" className=\"btn btn-primary px-4\"  \n                                            // onClick={()=>{setModalShow(false); setModalShow4Status(true)}}\n                                            onClick={()=>uploadProfilePic()}\n                                            >Changes</Button>\n                                    )}\n                                    \n                                </div>\n                            ):(\n                                <Button variant=\"contained\"    onClick={()=>{userImageRef.click()}}>Add photo</Button> \n                            )}\n                        \n                        </div>\n                    </BootstrapModal.Body>\n                </Box>  \n            {/* <Modal.Footer>\n                <Button onClick={() => setModalShow(false)}>Close</Button>\n            </Modal.Footer> */}\n        </Modal>\n\n\n        {/* modal for Status updated */}\n\n        <Modal\n            open={modalShow4Status}\n            size=\"md\"\n            aria-labelledby=\"contained-modal-title-vcenter\"\n            centered\n            onClose={()=>setModalShow4Status(false)}\n            >\n                <Box style={modalStyle}>\n                    <BootstrapModal.Header className=\"clr-primary-400 py-2\">\n                        {/* <Modal.Title id=\"contained-modal-title-vcenter\" className=\"text-center\"> */}\n                        \n                        {/* <h4 className=\"text-center   mb-0\">\n                            Profile update\n                        </h4> */}\n                        <Grid container>\n                            <Grid item xs={11} lg={11} md={11} sm={11}>\n                                    <Typography variant=\"h6\"> \n                                        Profile update\n                                    </Typography>\n                            </Grid>\n                            <Grid item xs={1} lg={1} md={1}>\n                                    <Button onClick={() => setModalAlertTitle(false)} >\n                                            <CloseIcon/>\n                                    </Button>\n                            </Grid> \n                        </Grid>\n                        \n                        {/* </Modal.Title> */}\n                    </BootstrapModal.Header>\n                    <BootstrapModal.Body>\n                        <div className=\"text-center txt-5282F0 my-4\">\n                            <p>You have successfully updated your profile information</p>                    \n                        </div>\n                        <div className=\"text-center mt-4 pb-3\">\n                            <Button  variant=\"outlined\"className=\"btn btn-primary px-5\"  onClick={()=>setModalShow4Status(false)}>OK</Button> \n                        </div>\n                    </BootstrapModal.Body>\n                </Box>\n        </Modal>\n\n\n    </>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}