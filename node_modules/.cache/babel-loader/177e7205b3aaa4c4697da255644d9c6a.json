{"ast":null,"code":"import _objectSpread from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import{paramCase}from'change-case';import parse from'autosuggest-highlight/parse';import match from'autosuggest-highlight/match';import{Link as RouterLink}from'react-router-dom';// @mui\nimport{styled}from'@mui/material/styles';import{Link,TextField,Typography,Autocomplete,InputAdornment}from'@mui/material';// utils\nimport axios from'../../../../utils/axios';// routes\nimport{PATH_DASHBOARD}from'../../../../routes/paths';// components\nimport Iconify from'../../../../components/Iconify';import SearchNotFound from'../../../../components/SearchNotFound';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RootStyle=styled('div')(function(_ref){var theme=_ref.theme;return{'& .MuiAutocomplete-root':{width:200,transition:theme.transitions.create('width',{easing:theme.transitions.easing.easeInOut,duration:theme.transitions.duration.shorter}),'&.Mui-focused':{width:240,'& .MuiAutocomplete-inputRoot':{boxShadow:theme.customShadows.z12}}},'& .MuiAutocomplete-inputRoot':{'& fieldset':{borderWidth:\"1px !important\",borderColor:\"\".concat(theme.palette.grey[50032],\" !important\")}},'& .MuiAutocomplete-option':{'&:not(:last-of-type)':{borderBottom:\"solid 1px \".concat(theme.palette.divider)}}};});// ----------------------------------------------------------------------\nexport default function ShopProductSearch(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),searchQuery=_useState2[0],setSearchQuery=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),searchResults=_useState4[0],setSearchResults=_useState4[1];var linkTo=function linkTo(name){return\"\".concat(PATH_DASHBOARD.classes.root,\"/product/\").concat(paramCase(name));};var handleChangeSearch=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(value){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setSearchQuery(value);if(!value){_context.next=9;break;}_context.next=5;return axios.get('/api/products/search',{params:{query:value}});case 5:response=_context.sent;setSearchResults(response.data.results);_context.next=10;break;case 9:setSearchResults([]);case 10:_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function handleChangeSearch(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(RootStyle,{sx:_objectSpread({},!searchQuery&&{'& .MuiAutocomplete-noOptions':{display:'none'}}),children:/*#__PURE__*/_jsx(Autocomplete,{size:\"small\",disablePortal:true,popupIcon:null,options:searchResults,onInputChange:function onInputChange(event,value){return handleChangeSearch(value);},getOptionLabel:function getOptionLabel(product){return product.name;},noOptionsText:/*#__PURE__*/_jsx(SearchNotFound,{searchQuery:searchQuery}),renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{placeholder:\"Search product...\",InputProps:_objectSpread(_objectSpread({},params.InputProps),{},{startAdornment:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(Iconify,{icon:'eva:search-fill',sx:{ml:1,width:20,height:20,color:'text.disabled'}})}),params.InputProps.startAdornment]})})}));},renderOption:function renderOption(props,post,_ref3){var inputValue=_ref3.inputValue;var name=post.name;var matches=match(name,inputValue);var parts=parse(name,matches);return/*#__PURE__*/_jsx(\"li\",_objectSpread(_objectSpread({},props),{},{children:/*#__PURE__*/_jsx(Link,{to:linkTo(name),component:RouterLink,underline:\"none\",children:parts.map(function(part,index){return/*#__PURE__*/_jsx(Typography,{component:\"span\",variant:\"subtitle2\",color:part.highlight?'primary':'textPrimary',children:part.text},index);})})}));}})});}","map":{"version":3,"sources":["D:/Projects/Cdss apps/Final version/admin/src/sections/@dashboard/e-commerce/shop/ShopProductSearch.js"],"names":["useState","paramCase","parse","match","Link","RouterLink","styled","TextField","Typography","Autocomplete","InputAdornment","axios","PATH_DASHBOARD","Iconify","SearchNotFound","RootStyle","theme","width","transition","transitions","create","easing","easeInOut","duration","shorter","boxShadow","customShadows","z12","borderWidth","borderColor","palette","grey","borderBottom","divider","ShopProductSearch","searchQuery","setSearchQuery","searchResults","setSearchResults","linkTo","name","classes","root","handleChangeSearch","value","get","params","query","response","data","results","console","error","display","event","product","InputProps","startAdornment","ml","height","color","props","post","inputValue","matches","parts","map","part","index","highlight","text"],"mappings":"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","sourcesContent":["import { useState } from 'react';\nimport { paramCase } from 'change-case';\nimport parse from 'autosuggest-highlight/parse';\nimport match from 'autosuggest-highlight/match';\nimport { Link as RouterLink } from 'react-router-dom';\n// @mui\nimport { styled } from '@mui/material/styles';\nimport { Link, TextField, Typography, Autocomplete, InputAdornment } from '@mui/material';\n// utils\nimport axios from '../../../../utils/axios';\n// routes\nimport { PATH_DASHBOARD } from '../../../../routes/paths';\n// components\nimport Iconify from '../../../../components/Iconify';\nimport SearchNotFound from '../../../../components/SearchNotFound';\n\n// ----------------------------------------------------------------------\n\nconst RootStyle = styled('div')(({ theme }) => ({\n  '& .MuiAutocomplete-root': {\n    width: 200,\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.easeInOut,\n      duration: theme.transitions.duration.shorter,\n    }),\n    '&.Mui-focused': {\n      width: 240,\n      '& .MuiAutocomplete-inputRoot': {\n        boxShadow: theme.customShadows.z12,\n      },\n    },\n  },\n  '& .MuiAutocomplete-inputRoot': {\n    '& fieldset': {\n      borderWidth: `1px !important`,\n      borderColor: `${theme.palette.grey[500_32]} !important`,\n    },\n  },\n  '& .MuiAutocomplete-option': {\n    '&:not(:last-of-type)': {\n      borderBottom: `solid 1px ${theme.palette.divider}`,\n    },\n  },\n}));\n\n// ----------------------------------------------------------------------\n\nexport default function ShopProductSearch() {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n\n  const linkTo = (name) => `${PATH_DASHBOARD.classes.root}/product/${paramCase(name)}`;\n\n  const handleChangeSearch = async (value) => {\n    try {\n      setSearchQuery(value);\n      if (value) {\n        const response = await axios.get('/api/products/search', {\n          params: { query: value },\n        });\n        setSearchResults(response.data.results);\n      } else {\n        setSearchResults([]);\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <RootStyle\n      sx={{\n        ...(!searchQuery && {\n          '& .MuiAutocomplete-noOptions': {\n            display: 'none',\n          },\n        }),\n      }}\n    >\n      <Autocomplete\n        size=\"small\"\n        disablePortal\n        popupIcon={null}\n        options={searchResults}\n        onInputChange={(event, value) => handleChangeSearch(value)}\n        getOptionLabel={(product) => product.name}\n        noOptionsText={<SearchNotFound searchQuery={searchQuery} />}\n        renderInput={(params) => (\n          <TextField\n            {...params}\n            placeholder=\"Search product...\"\n            InputProps={{\n              ...params.InputProps,\n              startAdornment: (\n                <>\n                  <InputAdornment position=\"start\">\n                    <Iconify icon={'eva:search-fill'} sx={{ ml: 1, width: 20, height: 20, color: 'text.disabled' }} />\n                  </InputAdornment>\n                  {params.InputProps.startAdornment}\n                </>\n              ),\n            }}\n          />\n        )}\n        renderOption={(props, post, { inputValue }) => {\n          const { name } = post;\n          const matches = match(name, inputValue);\n          const parts = parse(name, matches);\n          return (\n            <li {...props}>\n              <Link to={linkTo(name)} component={RouterLink} underline=\"none\">\n                {parts.map((part, index) => (\n                  <Typography\n                    key={index}\n                    component=\"span\"\n                    variant=\"subtitle2\"\n                    color={part.highlight ? 'primary' : 'textPrimary'}\n                  >\n                    {part.text}\n                  </Typography>\n                ))}\n              </Link>\n            </li>\n          );\n        }}\n      />\n    </RootStyle>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}