{"ast":null,"code":"import _regeneratorRuntime from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import{map,filter}from'lodash';import{createSlice}from'@reduxjs/toolkit';// utils\nimport axios from'../../utils/axios';//\nimport{dispatch}from'../store';// ----------------------------------------------------------------------\nvar initialState={isLoading:false,error:null,events:[],isOpenModal:false,selectedEventId:null,selectedRange:null};var slice=createSlice({name:'calendar',initialState:initialState,reducers:{// START LOADING\nstartLoading:function startLoading(state){state.isLoading=true;},// HAS ERROR\nhasError:function hasError(state,action){state.isLoading=false;state.error=action.payload;},// GET EVENTS\ngetEventsSuccess:function getEventsSuccess(state,action){state.isLoading=false;state.events=action.payload;},// CREATE EVENT\ncreateEventSuccess:function createEventSuccess(state,action){var newEvent=action.payload;state.isLoading=false;state.events=[].concat(_toConsumableArray(state.events),[newEvent]);},// UPDATE EVENT\nupdateEventSuccess:function updateEventSuccess(state,action){var event=action.payload;var updateEvent=map(state.events,function(_event){if(_event.id===event.id){return event;}return _event;});state.isLoading=false;state.events=updateEvent;},// DELETE EVENT\ndeleteEventSuccess:function deleteEventSuccess(state,action){var eventId=action.payload.eventId;var deleteEvent=filter(state.events,function(user){return user.id!==eventId;});state.events=deleteEvent;},// SELECT EVENT\nselectEvent:function selectEvent(state,action){var eventId=action.payload;state.isOpenModal=true;state.selectedEventId=eventId;},// SELECT RANGE\nselectRange:function selectRange(state,action){var _action$payload=action.payload,start=_action$payload.start,end=_action$payload.end;state.isOpenModal=true;state.selectedRange={start:start,end:end};},// OPEN MODAL\nopenModal:function openModal(state){state.isOpenModal=true;},// CLOSE MODAL\ncloseModal:function closeModal(state){state.isOpenModal=false;state.selectedEventId=null;state.selectedRange=null;}}});// Reducer\nexport default slice.reducer;// Actions\nvar _slice$actions=slice.actions,openModal=_slice$actions.openModal,closeModal=_slice$actions.closeModal,selectEvent=_slice$actions.selectEvent;// ----------------------------------------------------------------------\nexport{openModal,closeModal,selectEvent};export function getEvents(){return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(slice.actions.startLoading());_context.prev=1;_context.next=4;return axios.get('/api/calendar/events');case 4:response=_context.sent;dispatch(slice.actions.getEventsSuccess(response.data.events));_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);dispatch(slice.actions.hasError(_context.t0));case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));}// ----------------------------------------------------------------------\nexport function createEvent(newEvent){return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(slice.actions.startLoading());_context2.prev=1;_context2.next=4;return axios.post('/api/calendar/events/new',newEvent);case 4:response=_context2.sent;dispatch(slice.actions.createEventSuccess(response.data.event));_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);dispatch(slice.actions.hasError(_context2.t0));case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));}// ----------------------------------------------------------------------\nexport function updateEvent(eventId,updateEvent){return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch(slice.actions.startLoading());_context3.prev=1;_context3.next=4;return axios.post('/api/calendar/events/update',{eventId:eventId,updateEvent:updateEvent});case 4:response=_context3.sent;dispatch(slice.actions.updateEventSuccess(response.data.event));_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](1);dispatch(slice.actions.hasError(_context3.t0));case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[1,8]]);}));}// ----------------------------------------------------------------------\nexport function deleteEvent(eventId){return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch(slice.actions.startLoading());_context4.prev=1;_context4.next=4;return axios.post('/api/calendar/events/delete',{eventId:eventId});case 4:dispatch(slice.actions.deleteEventSuccess({eventId:eventId}));_context4.next=10;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](1);dispatch(slice.actions.hasError(_context4.t0));case 10:case\"end\":return _context4.stop();}}},_callee4,null,[[1,7]]);}));}// ----------------------------------------------------------------------\nexport function selectRange(start,end){return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:dispatch(slice.actions.selectRange({start:start.getTime(),end:end.getTime()}));case 1:case\"end\":return _context5.stop();}}},_callee5);}));}","map":{"version":3,"sources":["D:/Projects/Cdss apps/Final version/admin/src/redux/slices/calendar.js"],"names":["map","filter","createSlice","axios","dispatch","initialState","isLoading","error","events","isOpenModal","selectedEventId","selectedRange","slice","name","reducers","startLoading","state","hasError","action","payload","getEventsSuccess","createEventSuccess","newEvent","updateEventSuccess","event","updateEvent","_event","id","deleteEventSuccess","eventId","deleteEvent","user","selectEvent","selectRange","start","end","openModal","closeModal","reducer","actions","getEvents","get","response","data","createEvent","post","getTime"],"mappings":"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","sourcesContent":["import { map, filter } from 'lodash';\nimport { createSlice } from '@reduxjs/toolkit';\n// utils\nimport axios from '../../utils/axios';\n//\nimport { dispatch } from '../store';\n\n// ----------------------------------------------------------------------\n\nconst initialState = {\n  isLoading: false,\n  error: null,\n  events: [],\n  isOpenModal: false,\n  selectedEventId: null,\n  selectedRange: null,\n};\n\nconst slice = createSlice({\n  name: 'calendar',\n  initialState,\n  reducers: {\n    // START LOADING\n    startLoading(state) {\n      state.isLoading = true;\n    },\n\n    // HAS ERROR\n    hasError(state, action) {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n\n    // GET EVENTS\n    getEventsSuccess(state, action) {\n      state.isLoading = false;\n      state.events = action.payload;\n    },\n\n    // CREATE EVENT\n    createEventSuccess(state, action) {\n      const newEvent = action.payload;\n      state.isLoading = false;\n      state.events = [...state.events, newEvent];\n    },\n\n    // UPDATE EVENT\n    updateEventSuccess(state, action) {\n      const event = action.payload;\n      const updateEvent = map(state.events, (_event) => {\n        if (_event.id === event.id) {\n          return event;\n        }\n        return _event;\n      });\n\n      state.isLoading = false;\n      state.events = updateEvent;\n    },\n\n    // DELETE EVENT\n    deleteEventSuccess(state, action) {\n      const { eventId } = action.payload;\n      const deleteEvent = filter(state.events, (user) => user.id !== eventId);\n      state.events = deleteEvent;\n    },\n\n    // SELECT EVENT\n    selectEvent(state, action) {\n      const eventId = action.payload;\n      state.isOpenModal = true;\n      state.selectedEventId = eventId;\n    },\n\n    // SELECT RANGE\n    selectRange(state, action) {\n      const { start, end } = action.payload;\n      state.isOpenModal = true;\n      state.selectedRange = { start, end };\n    },\n\n    // OPEN MODAL\n    openModal(state) {\n      state.isOpenModal = true;\n    },\n\n    // CLOSE MODAL\n    closeModal(state) {\n      state.isOpenModal = false;\n      state.selectedEventId = null;\n      state.selectedRange = null;\n    },\n  },\n});\n\n// Reducer\nexport default slice.reducer;\n\n// Actions\nexport const { openModal, closeModal, selectEvent } = slice.actions;\n\n// ----------------------------------------------------------------------\n\nexport function getEvents() {\n  return async () => {\n    dispatch(slice.actions.startLoading());\n    try {\n      const response = await axios.get('/api/calendar/events');\n      dispatch(slice.actions.getEventsSuccess(response.data.events));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n}\n\n// ----------------------------------------------------------------------\n\nexport function createEvent(newEvent) {\n  return async () => {\n    dispatch(slice.actions.startLoading());\n    try {\n      const response = await axios.post('/api/calendar/events/new', newEvent);\n      dispatch(slice.actions.createEventSuccess(response.data.event));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n}\n\n// ----------------------------------------------------------------------\n\nexport function updateEvent(eventId, updateEvent) {\n  return async () => {\n    dispatch(slice.actions.startLoading());\n    try {\n      const response = await axios.post('/api/calendar/events/update', {\n        eventId,\n        updateEvent,\n      });\n      dispatch(slice.actions.updateEventSuccess(response.data.event));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n}\n\n// ----------------------------------------------------------------------\n\nexport function deleteEvent(eventId) {\n  return async () => {\n    dispatch(slice.actions.startLoading());\n    try {\n      await axios.post('/api/calendar/events/delete', { eventId });\n      dispatch(slice.actions.deleteEventSuccess({ eventId }));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n}\n\n// ----------------------------------------------------------------------\n\nexport function selectRange(start, end) {\n  return async () => {\n    dispatch(\n      slice.actions.selectRange({\n        start: start.getTime(),\n        end: end.getTime(),\n      })\n    );\n  };\n}\n"]},"metadata":{},"sourceType":"module"}