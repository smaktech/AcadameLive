{"ast":null,"code":"import _regeneratorRuntime from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{useState,useEffect}from'react';import{useNavigate,useLocation}from'react-router-dom';// @mui\nimport{useTheme,styled}from'@mui/material/styles';import{Box,Stack,Drawer,IconButton}from'@mui/material';// redux\nimport{useSelector}from'../../../redux/store';// hooks\nimport useResponsive from'../../../hooks/useResponsive';// utils\nimport axios from'../../../utils/axios';// routes\nimport{PATH_DASHBOARD}from'../../../routes/paths';// components\nimport Iconify from'../../../components/Iconify';import Scrollbar from'../../../components/Scrollbar';//\nimport ChatAccount from'./ChatAccount';import ChatSearchResults from'./ChatSearchResults';import ChatContactSearch from'./ChatContactSearch';import ChatConversationList from'./ChatConversationList';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DRAWER_WIDTH=320;var COLLAPSE_WIDTH=96;var ToggleButtonStyle=styled(function(props){return/*#__PURE__*/_jsx(IconButton,_objectSpread({disableRipple:true},props));})(function(_ref){var theme=_ref.theme;return{left:0,zIndex:9,width:32,height:32,position:'absolute',top:theme.spacing(13),borderRadius:\"0 12px 12px 0\",color:theme.palette.primary.contrastText,backgroundColor:theme.palette.primary.main,boxShadow:theme.customShadows.primary,'&:hover':{backgroundColor:theme.palette.primary.darker}};});// ----------------------------------------------------------------------\nexport default function ChatSidebar(){var theme=useTheme();var navigate=useNavigate();var _useLocation=useLocation(),pathname=_useLocation.pathname;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),openSidebar=_useState2[0],setOpenSidebar=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),searchQuery=_useState4[0],setSearchQuery=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),searchResults=_useState6[0],setSearchResults=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isSearchFocused=_useState8[0],setSearchFocused=_useState8[1];var _useSelector=useSelector(function(state){return state.chat;}),conversations=_useSelector.conversations,activeConversationId=_useSelector.activeConversationId;var isDesktop=useResponsive('up','md');var displayResults=searchQuery&&isSearchFocused;var isCollapse=isDesktop&&!openSidebar;useEffect(function(){if(!isDesktop){return handleCloseSidebar();}return handleOpenSidebar();},[isDesktop,pathname]);// eslint-disable-next-line consistent-return\nuseEffect(function(){if(!openSidebar){return setSearchFocused(false);}},[openSidebar]);var handleOpenSidebar=function handleOpenSidebar(){setOpenSidebar(true);};var handleCloseSidebar=function handleCloseSidebar(){setOpenSidebar(false);};var handleToggleSidebar=function handleToggleSidebar(){setOpenSidebar(function(prev){return!prev;});};var handleClickAwaySearch=function handleClickAwaySearch(){setSearchFocused(false);setSearchQuery('');};var handleChangeSearch=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var value,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;value=event.target.value;setSearchQuery(value);if(!value){_context.next=10;break;}_context.next=6;return axios.get('/api/chat/search',{params:{query:value}});case 6:response=_context.sent;setSearchResults(response.data.results);_context.next=11;break;case 10:setSearchResults([]);case 11:_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return function handleChangeSearch(_x){return _ref2.apply(this,arguments);};}();var handleSearchFocus=function handleSearchFocus(){setSearchFocused(true);};var handleSearchSelect=function handleSearchSelect(username){setSearchFocused(false);setSearchQuery('');navigate(\"\".concat(PATH_DASHBOARD.chat.root,\"/\").concat(username));};var handleSelectContact=function handleSelectContact(result){if(handleSearchSelect){handleSearchSelect(result.username);}};var renderContent=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Box,{sx:{py:2,px:3},children:[/*#__PURE__*/_jsxs(Stack,{direction:\"row\",alignItems:\"center\",justifyContent:\"center\",children:[!isCollapse&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ChatAccount,{}),/*#__PURE__*/_jsx(Box,{sx:{flexGrow:1}})]}),/*#__PURE__*/_jsx(IconButton,{onClick:handleToggleSidebar,children:/*#__PURE__*/_jsx(Iconify,{width:20,height:20,icon:openSidebar?'eva:arrow-ios-back-fill':'eva:arrow-ios-forward-fill'})}),!isCollapse&&/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return navigate(PATH_DASHBOARD.chat.new);},children:/*#__PURE__*/_jsx(Iconify,{icon:'eva:edit-fill',width:20,height:20})})]}),!isCollapse&&/*#__PURE__*/_jsx(ChatContactSearch,{query:searchQuery,onFocus:handleSearchFocus,onChange:handleChangeSearch,onClickAway:handleClickAwaySearch})]}),/*#__PURE__*/_jsx(Scrollbar,{children:!displayResults?/*#__PURE__*/_jsx(ChatConversationList,{conversations:conversations,isOpenSidebar:openSidebar,activeConversationId:activeConversationId,sx:_objectSpread({},isSearchFocused&&{display:'none'})}):/*#__PURE__*/_jsx(ChatSearchResults,{query:searchQuery,results:searchResults,onSelectContact:handleSelectContact})})]});return/*#__PURE__*/_jsxs(_Fragment,{children:[!isDesktop&&/*#__PURE__*/_jsx(ToggleButtonStyle,{onClick:handleToggleSidebar,children:/*#__PURE__*/_jsx(Iconify,{width:16,height:16,icon:'eva:people-fill'})}),isDesktop?/*#__PURE__*/_jsx(Drawer,{open:openSidebar,variant:\"persistent\",sx:_objectSpread({width:DRAWER_WIDTH,transition:theme.transitions.create('width'),'& .MuiDrawer-paper':{position:'static',width:DRAWER_WIDTH}},isCollapse&&{width:COLLAPSE_WIDTH,'& .MuiDrawer-paper':{width:COLLAPSE_WIDTH,position:'static',transform:'none !important',visibility:'visible !important'}}),children:renderContent}):/*#__PURE__*/_jsx(Drawer,{ModalProps:{keepMounted:true},open:openSidebar,onClose:handleCloseSidebar,sx:{'& .MuiDrawer-paper':{width:DRAWER_WIDTH}},children:renderContent})]});}","map":{"version":3,"sources":["D:/Projects/Cdss apps/Final version/admin/src/sections/@dashboard/chat/ChatSidebar.js"],"names":["useState","useEffect","useNavigate","useLocation","useTheme","styled","Box","Stack","Drawer","IconButton","useSelector","useResponsive","axios","PATH_DASHBOARD","Iconify","Scrollbar","ChatAccount","ChatSearchResults","ChatContactSearch","ChatConversationList","DRAWER_WIDTH","COLLAPSE_WIDTH","ToggleButtonStyle","props","theme","left","zIndex","width","height","position","top","spacing","borderRadius","color","palette","primary","contrastText","backgroundColor","main","boxShadow","customShadows","darker","ChatSidebar","navigate","pathname","openSidebar","setOpenSidebar","searchQuery","setSearchQuery","searchResults","setSearchResults","isSearchFocused","setSearchFocused","state","chat","conversations","activeConversationId","isDesktop","displayResults","isCollapse","handleCloseSidebar","handleOpenSidebar","handleToggleSidebar","prev","handleClickAwaySearch","handleChangeSearch","event","value","target","get","params","query","response","data","results","console","error","handleSearchFocus","handleSearchSelect","username","root","handleSelectContact","result","renderContent","py","px","flexGrow","new","display","transition","transitions","create","transform","visibility","keepMounted"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\n// @mui\nimport { useTheme, styled } from '@mui/material/styles';\nimport { Box, Stack, Drawer, IconButton } from '@mui/material';\n// redux\nimport { useSelector } from '../../../redux/store';\n// hooks\nimport useResponsive from '../../../hooks/useResponsive';\n// utils\nimport axios from '../../../utils/axios';\n// routes\nimport { PATH_DASHBOARD } from '../../../routes/paths';\n// components\nimport Iconify from '../../../components/Iconify';\nimport Scrollbar from '../../../components/Scrollbar';\n//\nimport ChatAccount from './ChatAccount';\nimport ChatSearchResults from './ChatSearchResults';\nimport ChatContactSearch from './ChatContactSearch';\nimport ChatConversationList from './ChatConversationList';\n\n// ----------------------------------------------------------------------\n\nconst DRAWER_WIDTH = 320;\nconst COLLAPSE_WIDTH = 96;\n\nconst ToggleButtonStyle = styled((props) => <IconButton disableRipple {...props} />)(({ theme }) => ({\n  left: 0,\n  zIndex: 9,\n  width: 32,\n  height: 32,\n  position: 'absolute',\n  top: theme.spacing(13),\n  borderRadius: `0 12px 12px 0`,\n  color: theme.palette.primary.contrastText,\n  backgroundColor: theme.palette.primary.main,\n  boxShadow: theme.customShadows.primary,\n  '&:hover': {\n    backgroundColor: theme.palette.primary.darker,\n  },\n}));\n\n// ----------------------------------------------------------------------\n\nexport default function ChatSidebar() {\n  const theme = useTheme();\n  const navigate = useNavigate();\n  const { pathname } = useLocation();\n\n  const [openSidebar, setOpenSidebar] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [isSearchFocused, setSearchFocused] = useState(false);\n  const { conversations, activeConversationId } = useSelector((state) => state.chat);\n\n  const isDesktop = useResponsive('up', 'md');\n\n  const displayResults = searchQuery && isSearchFocused;\n\n  const isCollapse = isDesktop && !openSidebar;\n\n  useEffect(() => {\n    if (!isDesktop) {\n      return handleCloseSidebar();\n    }\n    return handleOpenSidebar();\n  }, [isDesktop, pathname]);\n\n  // eslint-disable-next-line consistent-return\n  useEffect(() => {\n    if (!openSidebar) {\n      return setSearchFocused(false);\n    }\n  }, [openSidebar]);\n\n  const handleOpenSidebar = () => {\n    setOpenSidebar(true);\n  };\n\n  const handleCloseSidebar = () => {\n    setOpenSidebar(false);\n  };\n\n  const handleToggleSidebar = () => {\n    setOpenSidebar((prev) => !prev);\n  };\n\n  const handleClickAwaySearch = () => {\n    setSearchFocused(false);\n    setSearchQuery('');\n  };\n\n  const handleChangeSearch = async (event) => {\n    try {\n      const { value } = event.target;\n      setSearchQuery(value);\n      if (value) {\n        const response = await axios.get('/api/chat/search', {\n          params: { query: value },\n        });\n        setSearchResults(response.data.results);\n      } else {\n        setSearchResults([]);\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const handleSearchFocus = () => {\n    setSearchFocused(true);\n  };\n\n  const handleSearchSelect = (username) => {\n    setSearchFocused(false);\n    setSearchQuery('');\n    navigate(`${PATH_DASHBOARD.chat.root}/${username}`);\n  };\n\n  const handleSelectContact = (result) => {\n    if (handleSearchSelect) {\n      handleSearchSelect(result.username);\n    }\n  };\n\n  const renderContent = (\n    <>\n      <Box sx={{ py: 2, px: 3 }}>\n        <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"center\">\n          {!isCollapse && (\n            <>\n              <ChatAccount />\n              <Box sx={{ flexGrow: 1 }} />\n            </>\n          )}\n\n          <IconButton onClick={handleToggleSidebar}>\n            <Iconify\n              width={20}\n              height={20}\n              icon={openSidebar ? 'eva:arrow-ios-back-fill' : 'eva:arrow-ios-forward-fill'}\n            />\n          </IconButton>\n\n          {!isCollapse && (\n            <IconButton onClick={() => navigate(PATH_DASHBOARD.chat.new)}>\n              <Iconify icon={'eva:edit-fill'} width={20} height={20} />\n            </IconButton>\n          )}\n        </Stack>\n\n        {!isCollapse && (\n          <ChatContactSearch\n            query={searchQuery}\n            onFocus={handleSearchFocus}\n            onChange={handleChangeSearch}\n            onClickAway={handleClickAwaySearch}\n          />\n        )}\n      </Box>\n\n      <Scrollbar>\n        {!displayResults ? (\n          <ChatConversationList\n            conversations={conversations}\n            isOpenSidebar={openSidebar}\n            activeConversationId={activeConversationId}\n            sx={{ ...(isSearchFocused && { display: 'none' }) }}\n          />\n        ) : (\n          <ChatSearchResults query={searchQuery} results={searchResults} onSelectContact={handleSelectContact} />\n        )}\n      </Scrollbar>\n    </>\n  );\n\n  return (\n    <>\n      {!isDesktop && (\n        <ToggleButtonStyle onClick={handleToggleSidebar}>\n          <Iconify width={16} height={16} icon={'eva:people-fill'} />\n        </ToggleButtonStyle>\n      )}\n\n      {isDesktop ? (\n        <Drawer\n          open={openSidebar}\n          variant=\"persistent\"\n          sx={{\n            width: DRAWER_WIDTH,\n            transition: theme.transitions.create('width'),\n            '& .MuiDrawer-paper': {\n              position: 'static',\n              width: DRAWER_WIDTH,\n            },\n            ...(isCollapse && {\n              width: COLLAPSE_WIDTH,\n              '& .MuiDrawer-paper': {\n                width: COLLAPSE_WIDTH,\n                position: 'static',\n                transform: 'none !important',\n                visibility: 'visible !important',\n              },\n            }),\n          }}\n        >\n          {renderContent}\n        </Drawer>\n      ) : (\n        <Drawer\n          ModalProps={{ keepMounted: true }}\n          open={openSidebar}\n          onClose={handleCloseSidebar}\n          sx={{\n            '& .MuiDrawer-paper': { width: DRAWER_WIDTH },\n          }}\n        >\n          {renderContent}\n        </Drawer>\n      )}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}