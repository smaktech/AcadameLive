{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projects\\\\Cdss apps\\\\Final version\\\\admin\\\\src\\\\pages\\\\dashboard\\\\Calendar.js\",\n    _s = $RefreshSig$();\n\nimport FullCalendar from '@fullcalendar/react'; // => request placed at the top\n\nimport listPlugin from '@fullcalendar/list';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport timelinePlugin from '@fullcalendar/timeline';\nimport interactionPlugin from '@fullcalendar/interaction'; // ------\n\nimport { useSnackbar } from 'notistack';\nimport { useState, useRef, useEffect } from 'react'; // @mui\n\nimport { Card, Button, Container, DialogTitle } from '@mui/material'; // redux\n\nimport { useDispatch, useSelector } from '../../redux/store';\nimport { getEvents, openModal, closeModal, updateEvent, selectEvent, selectRange } from '../../redux/slices/calendar'; // routes\n\nimport { PATH_DASHBOARD } from '../../routes/paths'; // hooks\n\nimport useSettings from '../../hooks/useSettings';\nimport useResponsive from '../../hooks/useResponsive'; // components\n\nimport Page from '../../components/Page';\nimport Iconify from '../../components/Iconify';\nimport { DialogAnimate } from '../../components/animate';\nimport HeaderBreadcrumbs from '../../components/HeaderBreadcrumbs'; // sections\n\nimport { CalendarForm, CalendarStyle, CalendarToolbar } from '../../sections/@dashboard/calendar'; // ----------------------------------------------------------------------\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst selectedEventSelector = state => {\n  const {\n    events,\n    selectedEventId\n  } = state.calendar;\n\n  if (selectedEventId) {\n    return events.find(_event => _event.id === selectedEventId);\n  }\n\n  return null;\n};\n\nexport default function Calendar() {\n  _s();\n\n  const {\n    themeStretch\n  } = useSettings();\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  const dispatch = useDispatch();\n  const isDesktop = useResponsive('up', 'sm');\n  const calendarRef = useRef(null);\n  const [date, setDate] = useState(new Date());\n  const [view, setView] = useState(isDesktop ? 'dayGridMonth' : 'listWeek');\n  const selectedEvent = useSelector(selectedEventSelector);\n  const {\n    events,\n    isOpenModal,\n    selectedRange\n  } = useSelector(state => state.calendar);\n  useEffect(() => {\n    dispatch(getEvents());\n  }, [dispatch]);\n  useEffect(() => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n      const newView = isDesktop ? 'dayGridMonth' : 'listWeek';\n      calendarApi.changeView(newView);\n      setView(newView);\n    }\n  }, [isDesktop]);\n\n  const handleClickToday = () => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n      calendarApi.today();\n      setDate(calendarApi.getDate());\n    }\n  };\n\n  const handleChangeView = newView => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n      calendarApi.changeView(newView);\n      setView(newView);\n    }\n  };\n\n  const handleClickDatePrev = () => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n      calendarApi.prev();\n      setDate(calendarApi.getDate());\n    }\n  };\n\n  const handleClickDateNext = () => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n      calendarApi.next();\n      setDate(calendarApi.getDate());\n    }\n  };\n\n  const handleSelectRange = arg => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n      calendarApi.unselect();\n    }\n\n    dispatch(selectRange(arg.start, arg.end));\n  };\n\n  const handleSelectEvent = arg => {\n    dispatch(selectEvent(arg.event.id));\n  };\n\n  const handleResizeEvent = async _ref => {\n    let {\n      event\n    } = _ref;\n\n    try {\n      dispatch(updateEvent(event.id, {\n        allDay: event.allDay,\n        start: event.start,\n        end: event.end\n      }));\n      enqueueSnackbar('Update event success', {\n        variant: 'success'\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const handleDropEvent = async _ref2 => {\n    let {\n      event\n    } = _ref2;\n\n    try {\n      dispatch(updateEvent(event.id, {\n        allDay: event.allDay,\n        start: event.start,\n        end: event.end\n      }));\n      enqueueSnackbar('Update event success', {\n        variant: 'success'\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const handleAddEvent = () => {\n    dispatch(openModal());\n  };\n\n  const handleCloseModal = () => {\n    dispatch(closeModal());\n  };\n\n  return /*#__PURE__*/_jsxDEV(Page, {\n    title: \"Calendar\",\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: themeStretch ? false : 'xl',\n      children: [/*#__PURE__*/_jsxDEV(HeaderBreadcrumbs, {\n        heading: \"Calendar\",\n        links: [{\n          name: 'Dashboard',\n          href: PATH_DASHBOARD.root\n        }, {\n          name: 'Calendar'\n        }],\n        action: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          startIcon: /*#__PURE__*/_jsxDEV(Iconify, {\n            icon: 'eva:plus-fill',\n            width: 20,\n            height: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 26\n          }, this),\n          onClick: handleAddEvent,\n          children: \"New Event\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        children: /*#__PURE__*/_jsxDEV(CalendarStyle, {\n          children: [/*#__PURE__*/_jsxDEV(CalendarToolbar, {\n            date: date,\n            view: view,\n            onNextDate: handleClickDateNext,\n            onPrevDate: handleClickDatePrev,\n            onToday: handleClickToday,\n            onChangeView: handleChangeView\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FullCalendar, {\n            weekends: true,\n            editable: true,\n            droppable: true,\n            selectable: true,\n            events: events,\n            ref: calendarRef,\n            rerenderDelay: 10,\n            initialDate: date,\n            initialView: view,\n            dayMaxEventRows: 3,\n            eventDisplay: \"block\",\n            headerToolbar: false,\n            allDayMaintainDuration: true,\n            eventResizableFromStart: true,\n            select: handleSelectRange,\n            eventDrop: handleDropEvent,\n            eventClick: handleSelectEvent,\n            eventResize: handleResizeEvent,\n            height: isDesktop ? 720 : 'auto',\n            plugins: [listPlugin, dayGridPlugin, timelinePlugin, timeGridPlugin, interactionPlugin]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogAnimate, {\n        open: isOpenModal,\n        onClose: handleCloseModal,\n        children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n          children: selectedEvent ? 'Edit Event' : 'Add Event'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CalendarForm, {\n          event: selectedEvent || {},\n          range: selectedRange,\n          onCancel: handleCloseModal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 154,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Calendar, \"ld+MqhVmfplSWrFm4MgRien7yTM=\", false, function () {\n  return [useSettings, useSnackbar, useDispatch, useResponsive, useSelector, useSelector];\n});\n\n_c = Calendar;\n\nvar _c;\n\n$RefreshReg$(_c, \"Calendar\");","map":{"version":3,"sources":["D:/Projects/Cdss apps/Final version/admin/src/pages/dashboard/Calendar.js"],"names":["FullCalendar","listPlugin","dayGridPlugin","timeGridPlugin","timelinePlugin","interactionPlugin","useSnackbar","useState","useRef","useEffect","Card","Button","Container","DialogTitle","useDispatch","useSelector","getEvents","openModal","closeModal","updateEvent","selectEvent","selectRange","PATH_DASHBOARD","useSettings","useResponsive","Page","Iconify","DialogAnimate","HeaderBreadcrumbs","CalendarForm","CalendarStyle","CalendarToolbar","selectedEventSelector","state","events","selectedEventId","calendar","find","_event","id","Calendar","themeStretch","enqueueSnackbar","dispatch","isDesktop","calendarRef","date","setDate","Date","view","setView","selectedEvent","isOpenModal","selectedRange","calendarEl","current","calendarApi","getApi","newView","changeView","handleClickToday","today","getDate","handleChangeView","handleClickDatePrev","prev","handleClickDateNext","next","handleSelectRange","arg","unselect","start","end","handleSelectEvent","event","handleResizeEvent","allDay","variant","error","console","handleDropEvent","handleAddEvent","handleCloseModal","name","href","root"],"mappings":"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","sourcesContent":["import FullCalendar from '@fullcalendar/react'; // => request placed at the top\nimport listPlugin from '@fullcalendar/list';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport timelinePlugin from '@fullcalendar/timeline';\nimport interactionPlugin from '@fullcalendar/interaction';\n// ------\nimport { useSnackbar } from 'notistack';\nimport { useState, useRef, useEffect } from 'react';\n// @mui\nimport { Card, Button, Container, DialogTitle } from '@mui/material';\n// redux\nimport { useDispatch, useSelector } from '../../redux/store';\nimport { getEvents, openModal, closeModal, updateEvent, selectEvent, selectRange } from '../../redux/slices/calendar';\n// routes\nimport { PATH_DASHBOARD } from '../../routes/paths';\n// hooks\nimport useSettings from '../../hooks/useSettings';\nimport useResponsive from '../../hooks/useResponsive';\n// components\nimport Page from '../../components/Page';\nimport Iconify from '../../components/Iconify';\nimport { DialogAnimate } from '../../components/animate';\nimport HeaderBreadcrumbs from '../../components/HeaderBreadcrumbs';\n// sections\nimport { CalendarForm, CalendarStyle, CalendarToolbar } from '../../sections/@dashboard/calendar';\n\n// ----------------------------------------------------------------------\n\nconst selectedEventSelector = (state) => {\n  const { events, selectedEventId } = state.calendar;\n  if (selectedEventId) {\n    return events.find((_event) => _event.id === selectedEventId);\n  }\n  return null;\n};\n\nexport default function Calendar() {\n  const { themeStretch } = useSettings();\n  const { enqueueSnackbar } = useSnackbar();\n  const dispatch = useDispatch();\n  const isDesktop = useResponsive('up', 'sm');\n\n  const calendarRef = useRef(null);\n  const [date, setDate] = useState(new Date());\n  const [view, setView] = useState(isDesktop ? 'dayGridMonth' : 'listWeek');\n  const selectedEvent = useSelector(selectedEventSelector);\n  const { events, isOpenModal, selectedRange } = useSelector((state) => state.calendar);\n\n  useEffect(() => {\n    dispatch(getEvents());\n  }, [dispatch]);\n\n  useEffect(() => {\n    const calendarEl = calendarRef.current;\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n      const newView = isDesktop ? 'dayGridMonth' : 'listWeek';\n      calendarApi.changeView(newView);\n      setView(newView);\n    }\n  }, [isDesktop]);\n\n  const handleClickToday = () => {\n    const calendarEl = calendarRef.current;\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n      calendarApi.today();\n      setDate(calendarApi.getDate());\n    }\n  };\n\n  const handleChangeView = (newView) => {\n    const calendarEl = calendarRef.current;\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n      calendarApi.changeView(newView);\n      setView(newView);\n    }\n  };\n\n  const handleClickDatePrev = () => {\n    const calendarEl = calendarRef.current;\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n      calendarApi.prev();\n      setDate(calendarApi.getDate());\n    }\n  };\n\n  const handleClickDateNext = () => {\n    const calendarEl = calendarRef.current;\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n      calendarApi.next();\n      setDate(calendarApi.getDate());\n    }\n  };\n\n  const handleSelectRange = (arg) => {\n    const calendarEl = calendarRef.current;\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n      calendarApi.unselect();\n    }\n    dispatch(selectRange(arg.start, arg.end));\n  };\n\n  const handleSelectEvent = (arg) => {\n    dispatch(selectEvent(arg.event.id));\n  };\n\n  const handleResizeEvent = async ({ event }) => {\n    try {\n      dispatch(\n        updateEvent(event.id, {\n          allDay: event.allDay,\n          start: event.start,\n          end: event.end,\n        })\n      );\n      enqueueSnackbar('Update event success', { variant: 'success' });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const handleDropEvent = async ({ event }) => {\n    try {\n      dispatch(\n        updateEvent(event.id, {\n          allDay: event.allDay,\n          start: event.start,\n          end: event.end,\n        })\n      );\n      enqueueSnackbar('Update event success', {\n        variant: 'success',\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const handleAddEvent = () => {\n    dispatch(openModal());\n  };\n\n  const handleCloseModal = () => {\n    dispatch(closeModal());\n  };\n\n  return (\n    <Page title=\"Calendar\">\n      <Container maxWidth={themeStretch ? false : 'xl'}>\n        <HeaderBreadcrumbs\n          heading=\"Calendar\"\n          links={[{ name: 'Dashboard', href: PATH_DASHBOARD.root }, { name: 'Calendar' }]}\n       \n          action={\n            <Button\n              variant=\"contained\"\n              startIcon={<Iconify icon={'eva:plus-fill'} width={20} height={20} />}\n              onClick={handleAddEvent}\n            >\n              New Event\n            </Button>\n          }\n        />\n\n        <Card>\n          <CalendarStyle>\n            <CalendarToolbar\n              date={date}\n              view={view}\n              onNextDate={handleClickDateNext}\n              onPrevDate={handleClickDatePrev}\n              onToday={handleClickToday}\n              onChangeView={handleChangeView}\n            />\n            <FullCalendar\n              weekends\n              editable\n              droppable\n              selectable\n              events={events}\n              ref={calendarRef}\n              rerenderDelay={10}\n              initialDate={date}\n              initialView={view}\n              dayMaxEventRows={3}\n              eventDisplay=\"block\"\n              headerToolbar={false}\n              allDayMaintainDuration\n              eventResizableFromStart\n              select={handleSelectRange}\n              eventDrop={handleDropEvent}\n              eventClick={handleSelectEvent}\n              eventResize={handleResizeEvent}\n              height={isDesktop ? 720 : 'auto'}\n              plugins={[listPlugin, dayGridPlugin, timelinePlugin, timeGridPlugin, interactionPlugin]}\n            />\n          </CalendarStyle>\n        </Card>\n\n        <DialogAnimate open={isOpenModal} onClose={handleCloseModal}>\n          <DialogTitle>{selectedEvent ? 'Edit Event' : 'Add Event'}</DialogTitle>\n          <CalendarForm event={selectedEvent || {}} range={selectedRange} onCancel={handleCloseModal} />\n        </DialogAnimate>\n      </Container>\n    </Page>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}