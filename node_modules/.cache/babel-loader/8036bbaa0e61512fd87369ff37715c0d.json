{"ast":null,"code":"import _objectSpread from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/Projects/Cdss apps/Final version/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{findIndex,isString}from'lodash';import{useDropzone}from'react-dropzone';import{useState,useCallback}from'react';// @mui\nimport{alpha,styled}from'@mui/material/styles';import{Box,IconButton}from'@mui/material';// components\nimport Image from'../../../components/Image';import Iconify from'../../../components/Iconify';import LightboxModal from'../../../components/LightboxModal';import{varFade}from'../../../components/animate';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DropZoneStyle=styled('div')(function(_ref){var theme=_ref.theme;return{width:64,height:64,fontSize:24,display:'flex',cursor:'pointer',alignItems:'center',justifyContent:'center',margin:theme.spacing(0.5),borderRadius:theme.shape.borderRadius,border:\"dashed 1px \".concat(theme.palette.divider),'&:hover':{opacity:0.72}};});// ----------------------------------------------------------------------\nexport default function KanbanTaskAttachments(_ref2){var attachments=_ref2.attachments;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openLightbox=_useState2[0],setOpenLightbox=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),selectedImage=_useState4[0],setSelectedImage=_useState4[1];var imagesLightbox=attachments;var handleOpenLightbox=function handleOpenLightbox(url){var selectedImage=findIndex(imagesLightbox,function(index){return index===url;});setOpenLightbox(true);setSelectedImage(selectedImage);};return/*#__PURE__*/_jsxs(_Fragment,{children:[attachments.map(function(attachment){return/*#__PURE__*/_jsx(Image,{src:attachment,onClick:function onClick(){return handleOpenLightbox(attachment);},sx:{m:0.5,width:64,height:64,borderRadius:1,cursor:'pointer'}},attachment);}),/*#__PURE__*/_jsx(UploadFile,{}),/*#__PURE__*/_jsx(LightboxModal,{images:imagesLightbox,mainSrc:imagesLightbox[selectedImage],photoIndex:selectedImage,setPhotoIndex:setSelectedImage,isOpen:openLightbox,onCloseRequest:function onCloseRequest(){return setOpenLightbox(false);}})]});}// ----------------------------------------------------------------------\nfunction UploadFile(){var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),files=_useState6[0],setFiles=_useState6[1];var handleRemove=function handleRemove(file){var filteredItems=files.filter(function(_file){return _file!==file;});setFiles(filteredItems);};var handleDrop=useCallback(function(acceptedFiles){setFiles(acceptedFiles.map(function(file){return Object.assign(file,{preview:URL.createObjectURL(file)});}));},[setFiles]);var _useDropzone=useDropzone({onDrop:handleDrop}),getRootProps=_useDropzone.getRootProps,getInputProps=_useDropzone.getInputProps,isDragActive=_useDropzone.isDragActive;return/*#__PURE__*/_jsxs(_Fragment,{children:[files.map(function(file){var name=file.name,preview=file.preview;var key=isString(file)?file:name;return/*#__PURE__*/_jsxs(Box,_objectSpread(_objectSpread({},varFade().inRight),{},{sx:{p:0,m:0.5,width:64,height:64,borderRadius:1,overflow:'hidden',position:'relative'},children:[/*#__PURE__*/_jsx(Image,{src:isString(file)?file:preview,sx:{height:1,position:'absolute',border:function border(theme){return\"solid 1px \".concat(theme.palette.divider);}}}),/*#__PURE__*/_jsx(Box,{sx:{top:6,right:6,position:'absolute'},children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:function onClick(){return handleRemove(file);},sx:{p:'2px',color:'common.white',bgcolor:function bgcolor(theme){return alpha(theme.palette.grey[900],0.72);},'&:hover':{bgcolor:function bgcolor(theme){return alpha(theme.palette.grey[900],0.48);}}},children:/*#__PURE__*/_jsx(Iconify,{icon:'eva:close-fill'})})})]}),key);}),/*#__PURE__*/_jsxs(DropZoneStyle,_objectSpread(_objectSpread({},getRootProps()),{},{sx:_objectSpread({},isDragActive&&{opacity:0.72}),children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({},getInputProps())),/*#__PURE__*/_jsx(Iconify,{icon:'eva:plus-fill',sx:{color:'text.secondary'}})]}))]});}","map":{"version":3,"sources":["D:/Projects/Cdss apps/Final version/admin/src/sections/@dashboard/kanban/KanbanTaskAttachments.js"],"names":["findIndex","isString","useDropzone","useState","useCallback","alpha","styled","Box","IconButton","Image","Iconify","LightboxModal","varFade","DropZoneStyle","theme","width","height","fontSize","display","cursor","alignItems","justifyContent","margin","spacing","borderRadius","shape","border","palette","divider","opacity","KanbanTaskAttachments","attachments","openLightbox","setOpenLightbox","selectedImage","setSelectedImage","imagesLightbox","handleOpenLightbox","url","index","map","attachment","m","UploadFile","files","setFiles","handleRemove","file","filteredItems","filter","_file","handleDrop","acceptedFiles","Object","assign","preview","URL","createObjectURL","onDrop","getRootProps","getInputProps","isDragActive","name","key","inRight","p","overflow","position","top","right","color","bgcolor","grey"],"mappings":"+TACA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,QAApC,CACA,OAASC,WAAT,KAA4B,gBAA5B,CACA,OAASC,QAAT,CAAmBC,WAAnB,KAAsC,OAAtC,CACA;AACA,OAASC,KAAT,CAAgBC,MAAhB,KAA8B,sBAA9B,CACA,OAASC,GAAT,CAAcC,UAAd,KAAgC,eAAhC,CACA;AACA,MAAOC,CAAAA,KAAP,KAAkB,2BAAlB,CACA,MAAOC,CAAAA,OAAP,KAAoB,6BAApB,CACA,MAAOC,CAAAA,aAAP,KAA0B,mCAA1B,CACA,OAASC,OAAT,KAAwB,6BAAxB,CAEA;6IAEA,GAAMC,CAAAA,aAAa,CAAGP,MAAM,CAAC,KAAD,CAAN,CAAc,kBAAGQ,CAAAA,KAAH,MAAGA,KAAH,OAAgB,CAClDC,KAAK,CAAE,EAD2C,CAElDC,MAAM,CAAE,EAF0C,CAGlDC,QAAQ,CAAE,EAHwC,CAIlDC,OAAO,CAAE,MAJyC,CAKlDC,MAAM,CAAE,SAL0C,CAMlDC,UAAU,CAAE,QANsC,CAOlDC,cAAc,CAAE,QAPkC,CAQlDC,MAAM,CAAER,KAAK,CAACS,OAAN,CAAc,GAAd,CAR0C,CASlDC,YAAY,CAAEV,KAAK,CAACW,KAAN,CAAYD,YATwB,CAUlDE,MAAM,sBAAgBZ,KAAK,CAACa,OAAN,CAAcC,OAA9B,CAV4C,CAWlD,UAAW,CAAEC,OAAO,CAAE,IAAX,CAXuC,CAAhB,EAAd,CAAtB,CAcA;AAMA,cAAe,SAASC,CAAAA,qBAAT,OAAgD,IAAfC,CAAAA,WAAe,OAAfA,WAAe,CAC7D,cAAwC5B,QAAQ,CAAC,KAAD,CAAhD,wCAAO6B,YAAP,eAAqBC,eAArB,eACA,eAA0C9B,QAAQ,CAAC,CAAD,CAAlD,yCAAO+B,aAAP,eAAsBC,gBAAtB,eAEA,GAAMC,CAAAA,cAAc,CAAGL,WAAvB,CAEA,GAAMM,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,GAAD,CAAS,CAClC,GAAMJ,CAAAA,aAAa,CAAGlC,SAAS,CAACoC,cAAD,CAAiB,SAACG,KAAD,QAAWA,CAAAA,KAAK,GAAKD,GAArB,EAAjB,CAA/B,CACAL,eAAe,CAAC,IAAD,CAAf,CACAE,gBAAgB,CAACD,aAAD,CAAhB,CACD,CAJD,CAMA,mBACE,2BACGH,WAAW,CAACS,GAAZ,CAAgB,SAACC,UAAD,qBACf,KAAC,KAAD,EAEE,GAAG,CAAEA,UAFP,CAGE,OAAO,CAAE,yBAAMJ,CAAAA,kBAAkB,CAACI,UAAD,CAAxB,EAHX,CAIE,EAAE,CAAE,CACFC,CAAC,CAAE,GADD,CAEF3B,KAAK,CAAE,EAFL,CAGFC,MAAM,CAAE,EAHN,CAIFQ,YAAY,CAAE,CAJZ,CAKFL,MAAM,CAAE,SALN,CAJN,EACOsB,UADP,CADe,EAAhB,CADH,cAgBE,KAAC,UAAD,IAhBF,cAkBE,KAAC,aAAD,EACE,MAAM,CAAEL,cADV,CAEE,OAAO,CAAEA,cAAc,CAACF,aAAD,CAFzB,CAGE,UAAU,CAAEA,aAHd,CAIE,aAAa,CAAEC,gBAJjB,CAKE,MAAM,CAAEH,YALV,CAME,cAAc,CAAE,gCAAMC,CAAAA,eAAe,CAAC,KAAD,CAArB,EANlB,EAlBF,GADF,CA6BD,CAED;AAEA,QAASU,CAAAA,UAAT,EAAsB,CACpB,eAA0BxC,QAAQ,CAAC,EAAD,CAAlC,yCAAOyC,KAAP,eAAcC,QAAd,eAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,IAAD,CAAU,CAC7B,GAAMC,CAAAA,aAAa,CAAGJ,KAAK,CAACK,MAAN,CAAa,SAACC,KAAD,QAAWA,CAAAA,KAAK,GAAKH,IAArB,EAAb,CAAtB,CACAF,QAAQ,CAACG,aAAD,CAAR,CACD,CAHD,CAKA,GAAMG,CAAAA,UAAU,CAAG/C,WAAW,CAC5B,SAACgD,aAAD,CAAmB,CACjBP,QAAQ,CACNO,aAAa,CAACZ,GAAd,CAAkB,SAACO,IAAD,QAChBM,CAAAA,MAAM,CAACC,MAAP,CAAcP,IAAd,CAAoB,CAClBQ,OAAO,CAAEC,GAAG,CAACC,eAAJ,CAAoBV,IAApB,CADS,CAApB,CADgB,EAAlB,CADM,CAAR,CAOD,CAT2B,CAU5B,CAACF,QAAD,CAV4B,CAA9B,CAaA,iBAAsD3C,WAAW,CAAC,CAChEwD,MAAM,CAAEP,UADwD,CAAD,CAAjE,CAAQQ,YAAR,cAAQA,YAAR,CAAsBC,aAAtB,cAAsBA,aAAtB,CAAqCC,YAArC,cAAqCA,YAArC,CAIA,mBACE,2BACGjB,KAAK,CAACJ,GAAN,CAAU,SAACO,IAAD,CAAU,CACnB,GAAQe,CAAAA,IAAR,CAA0Bf,IAA1B,CAAQe,IAAR,CAAcP,OAAd,CAA0BR,IAA1B,CAAcQ,OAAd,CACA,GAAMQ,CAAAA,GAAG,CAAG9D,QAAQ,CAAC8C,IAAD,CAAR,CAAiBA,IAAjB,CAAwBe,IAApC,CAEA,mBACE,MAAC,GAAD,gCAEMlD,OAAO,GAAGoD,OAFhB,MAGE,EAAE,CAAE,CACFC,CAAC,CAAE,CADD,CAEFvB,CAAC,CAAE,GAFD,CAGF3B,KAAK,CAAE,EAHL,CAIFC,MAAM,CAAE,EAJN,CAKFQ,YAAY,CAAE,CALZ,CAMF0C,QAAQ,CAAE,QANR,CAOFC,QAAQ,CAAE,UAPR,CAHN,wBAaE,KAAC,KAAD,EACE,GAAG,CAAElE,QAAQ,CAAC8C,IAAD,CAAR,CAAiBA,IAAjB,CAAwBQ,OAD/B,CAEE,EAAE,CAAE,CACFvC,MAAM,CAAE,CADN,CAEFmD,QAAQ,CAAE,UAFR,CAGFzC,MAAM,CAAE,gBAACZ,KAAD,4BAAwBA,KAAK,CAACa,OAAN,CAAcC,OAAtC,GAHN,CAFN,EAbF,cAqBE,KAAC,GAAD,EAAK,EAAE,CAAE,CAAEwC,GAAG,CAAE,CAAP,CAAUC,KAAK,CAAE,CAAjB,CAAoBF,QAAQ,CAAE,UAA9B,CAAT,uBACE,KAAC,UAAD,EACE,IAAI,CAAC,OADP,CAEE,OAAO,CAAE,yBAAMrB,CAAAA,YAAY,CAACC,IAAD,CAAlB,EAFX,CAGE,EAAE,CAAE,CACFkB,CAAC,CAAE,KADD,CAEFK,KAAK,CAAE,cAFL,CAGFC,OAAO,CAAE,iBAACzD,KAAD,QAAWT,CAAAA,KAAK,CAACS,KAAK,CAACa,OAAN,CAAc6C,IAAd,CAAmB,GAAnB,CAAD,CAA0B,IAA1B,CAAhB,EAHP,CAIF,UAAW,CACTD,OAAO,CAAE,iBAACzD,KAAD,QAAWT,CAAAA,KAAK,CAACS,KAAK,CAACa,OAAN,CAAc6C,IAAd,CAAmB,GAAnB,CAAD,CAA0B,IAA1B,CAAhB,EADA,CAJT,CAHN,uBAYE,KAAC,OAAD,EAAS,IAAI,CAAE,gBAAf,EAZF,EADF,EArBF,IACOT,GADP,CADF,CAwCD,CA5CA,CADH,cA+CE,MAAC,aAAD,gCACMJ,YAAY,EADlB,MAEE,EAAE,kBACIE,YAAY,EAAI,CAAEhC,OAAO,CAAE,IAAX,CADpB,CAFJ,wBAME,8BAAW+B,aAAa,EAAxB,EANF,cAQE,KAAC,OAAD,EAAS,IAAI,CAAE,eAAf,CAAgC,EAAE,CAAE,CAAEU,KAAK,CAAE,gBAAT,CAApC,EARF,IA/CF,GADF,CA4DD","sourcesContent":["import PropTypes from 'prop-types';\nimport { findIndex, isString } from 'lodash';\nimport { useDropzone } from 'react-dropzone';\nimport { useState, useCallback } from 'react';\n// @mui\nimport { alpha, styled } from '@mui/material/styles';\nimport { Box, IconButton } from '@mui/material';\n// components\nimport Image from '../../../components/Image';\nimport Iconify from '../../../components/Iconify';\nimport LightboxModal from '../../../components/LightboxModal';\nimport { varFade } from '../../../components/animate';\n\n// ----------------------------------------------------------------------\n\nconst DropZoneStyle = styled('div')(({ theme }) => ({\n  width: 64,\n  height: 64,\n  fontSize: 24,\n  display: 'flex',\n  cursor: 'pointer',\n  alignItems: 'center',\n  justifyContent: 'center',\n  margin: theme.spacing(0.5),\n  borderRadius: theme.shape.borderRadius,\n  border: `dashed 1px ${theme.palette.divider}`,\n  '&:hover': { opacity: 0.72 },\n}));\n\n// ----------------------------------------------------------------------\n\nKanbanTaskAttachments.propTypes = {\n  attachments: PropTypes.array.isRequired,\n};\n\nexport default function KanbanTaskAttachments({ attachments }) {\n  const [openLightbox, setOpenLightbox] = useState(false);\n  const [selectedImage, setSelectedImage] = useState(0);\n\n  const imagesLightbox = attachments;\n\n  const handleOpenLightbox = (url) => {\n    const selectedImage = findIndex(imagesLightbox, (index) => index === url);\n    setOpenLightbox(true);\n    setSelectedImage(selectedImage);\n  };\n\n  return (\n    <>\n      {attachments.map((attachment) => (\n        <Image\n          key={attachment}\n          src={attachment}\n          onClick={() => handleOpenLightbox(attachment)}\n          sx={{\n            m: 0.5,\n            width: 64,\n            height: 64,\n            borderRadius: 1,\n            cursor: 'pointer',\n          }}\n        />\n      ))}\n\n      <UploadFile />\n\n      <LightboxModal\n        images={imagesLightbox}\n        mainSrc={imagesLightbox[selectedImage]}\n        photoIndex={selectedImage}\n        setPhotoIndex={setSelectedImage}\n        isOpen={openLightbox}\n        onCloseRequest={() => setOpenLightbox(false)}\n      />\n    </>\n  );\n}\n\n// ----------------------------------------------------------------------\n\nfunction UploadFile() {\n  const [files, setFiles] = useState([]);\n\n  const handleRemove = (file) => {\n    const filteredItems = files.filter((_file) => _file !== file);\n    setFiles(filteredItems);\n  };\n\n  const handleDrop = useCallback(\n    (acceptedFiles) => {\n      setFiles(\n        acceptedFiles.map((file) =>\n          Object.assign(file, {\n            preview: URL.createObjectURL(file),\n          })\n        )\n      );\n    },\n    [setFiles]\n  );\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop: handleDrop,\n  });\n\n  return (\n    <>\n      {files.map((file) => {\n        const { name, preview } = file;\n        const key = isString(file) ? file : name;\n\n        return (\n          <Box\n            key={key}\n            {...varFade().inRight}\n            sx={{\n              p: 0,\n              m: 0.5,\n              width: 64,\n              height: 64,\n              borderRadius: 1,\n              overflow: 'hidden',\n              position: 'relative',\n            }}\n          >\n            <Image\n              src={isString(file) ? file : preview}\n              sx={{\n                height: 1,\n                position: 'absolute',\n                border: (theme) => `solid 1px ${theme.palette.divider}`,\n              }}\n            />\n            <Box sx={{ top: 6, right: 6, position: 'absolute' }}>\n              <IconButton\n                size=\"small\"\n                onClick={() => handleRemove(file)}\n                sx={{\n                  p: '2px',\n                  color: 'common.white',\n                  bgcolor: (theme) => alpha(theme.palette.grey[900], 0.72),\n                  '&:hover': {\n                    bgcolor: (theme) => alpha(theme.palette.grey[900], 0.48),\n                  },\n                }}\n              >\n                <Iconify icon={'eva:close-fill'} />\n              </IconButton>\n            </Box>\n          </Box>\n        );\n      })}\n\n      <DropZoneStyle\n        {...getRootProps()}\n        sx={{\n          ...(isDragActive && { opacity: 0.72 }),\n        }}\n      >\n        <input {...getInputProps()} />\n\n        <Iconify icon={'eva:plus-fill'} sx={{ color: 'text.secondary' }} />\n      </DropZoneStyle>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}