{"code":"(this[\"webpackJsonp@minimal/minimal-kit-react\"]=this[\"webpackJsonp@minimal/minimal-kit-react\"]||[]).push([[165],{2826:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return gn}));var r=n(22),i=n(1),o=n.n(i),a=n(429),u=n(106);function s(t){return\"undefined\"!==typeof PointerEvent&&t instanceof PointerEvent?!(\"mouse\"!==t.pointerType):t instanceof MouseEvent}function c(t){return!!t.touches}var l={pageX:0,pageY:0};function v(t,e){void 0===e&&(e=\"page\");var n=t.touches[0]||t.changedTouches[0]||l;return{x:n[e+\"X\"],y:n[e+\"Y\"]}}function f(t,e){return void 0===e&&(e=\"page\"),{x:t[e+\"X\"],y:t[e+\"Y\"]}}function d(t,e){return void 0===e&&(e=\"page\"),{point:c(t)?v(t,e):f(t,e)}}var p=function(t,e){void 0===e&&(e=!1);var n,r=function(e){return t(e,d(e))};return e?(n=r,function(t){var e=t instanceof MouseEvent;(!e||e&&0===t.button)&&n(t)}):r},m=n(155),g=n(500);function h(t,e,n,r){return t.addEventListener(e,n,r),function(){return t.removeEventListener(e,n,r)}}function y(t,e,n,r){Object(i.useEffect)((function(){var i=t.current;if(n&&i)return h(i,e,n,r)}),[t,e,n,r])}var b=n(472),j={pointerdown:\"mousedown\",pointermove:\"mousemove\",pointerup:\"mouseup\",pointercancel:\"mousecancel\",pointerover:\"mouseover\",pointerout:\"mouseout\",pointerenter:\"mouseenter\",pointerleave:\"mouseleave\"},x={pointerdown:\"touchstart\",pointermove:\"touchmove\",pointerup:\"touchend\",pointercancel:\"touchcancel\"};function O(t){return b.a&&null===window.onpointerdown?t:b.a&&null===window.ontouchstart?x[t]:b.a&&null===window.onmousedown?j[t]:t}function P(t,e,n,r){return h(t,O(e),p(n,\"pointerdown\"===e),r)}function E(t,e,n,r){return y(t,O(e),n&&p(n,\"pointerdown\"===e),r)}var A=function(t){return t.hasOwnProperty(\"x\")&&t.hasOwnProperty(\"y\")},T=function(t){return A(t)&&t.hasOwnProperty(\"z\")},L=n(884),V=function(t,e){return Math.abs(t-e)};function S(t,e){if(Object(L.a)(t)&&Object(L.a)(e))return V(t,e);if(A(t)&&A(e)){var n=V(t.x,e.x),r=V(t.y,e.y),i=T(t)&&T(e)?V(t.z,e.z):0;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2)+Math.pow(i,2))}}var w=n(501),M=function(){function t(t,e,n){var i=this,o=(void 0===n?{}:n).transformPagePoint;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(i.lastMoveEvent&&i.lastMoveEventInfo){var t=D(i.lastMoveEventInfo,i.history),e=null!==i.startEvent,n=S(t.offset,{x:0,y:0})>=3;if(e||n){var o=t.point,a=Object(m.d)().timestamp;i.history.push(Object(r.a)(Object(r.a)({},o),{timestamp:a}));var u=i.handlers,s=u.onStart,c=u.onMove;e||(s&&s(i.lastMoveEvent,t),i.startEvent=i.lastMoveEvent),c&&c(i.lastMoveEvent,t)}}},this.handlePointerMove=function(t,e){i.lastMoveEvent=t,i.lastMoveEventInfo=C(e,i.transformPagePoint),s(t)&&0===t.buttons?i.handlePointerUp(t,e):m.b.update(i.updatePoint,!0)},this.handlePointerUp=function(t,e){i.end();var n=i.handlers,r=n.onEnd,o=n.onSessionEnd,a=D(C(e,i.transformPagePoint),i.history);i.startEvent&&r&&r(t,a),o&&o(t,a)},!(c(t)&&t.touches.length>1)){this.handlers=e,this.transformPagePoint=o;var a=C(d(t),this.transformPagePoint),u=a.point,l=Object(m.d)().timestamp;this.history=[Object(r.a)(Object(r.a)({},u),{timestamp:l})];var v=e.onSessionStart;v&&v(t,D(a,this.history)),this.removeListeners=Object(w.a)(P(window,\"pointermove\",this.handlePointerMove),P(window,\"pointerup\",this.handlePointerUp),P(window,\"pointercancel\",this.handlePointerUp))}}return t.prototype.updateHandlers=function(t){this.handlers=t},t.prototype.end=function(){this.removeListeners&&this.removeListeners(),m.a.update(this.updatePoint)},t}();function C(t,e){return e?{point:e(t.point)}:t}function R(t,e){return{x:t.x-e.x,y:t.y-e.y}}function D(t,e){var n=t.point;return{point:n,delta:R(n,B(e)),offset:R(n,k(e)),velocity:F(e,.1)}}function k(t){return t[0]}function B(t){return t[t.length-1]}function F(t,e){if(t.length<2)return{x:0,y:0};for(var n=t.length-1,r=null,i=B(t);n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Object(g.a)(e)));)n--;if(!r)return{x:0,y:0};var o=(i.timestamp-r.timestamp)/1e3;if(0===o)return{x:0,y:0};var a={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function I(t){var e=null;return function(){return null===e&&(e=t,function(){e=null})}}var U=I(\"dragHorizontal\"),H=I(\"dragVertical\");function X(t){var e=!1;if(\"y\"===t)e=H();else if(\"x\"===t)e=U();else{var n=U(),r=H();n&&r?e=function(){n(),r()}:(n&&n(),r&&r())}return e}function N(){var t=X(!0);return!t||(t(),!1)}var Y=n(797),z=n(684);function G(t){return[t(\"x\"),t(\"y\")]}var _=n(290);function K(t,e,n){var r=e.min,i=e.max;return void 0!==r&&t<r?t=n?Object(_.a)(r,t,n.min):Math.max(t,r):void 0!==i&&t>i&&(t=n?Object(_.a)(i,t,n.max):Math.min(t,i)),t}function W(t,e,n){return{min:void 0!==e?t.min+e:void 0,max:void 0!==n?t.max+n-(t.max-t.min):void 0}}function $(t,e){var n,i=e.min-t.min,o=e.max-t.max;return e.max-e.min<t.max-t.min&&(i=(n=Object(r.e)([o,i],2))[0],o=n[1]),{min:t.min+i,max:t.min+o}}function q(t,e,n){return{min:J(t,e),max:J(t,n)}}function J(t,e){var n;return\"number\"===typeof t?t:null!==(n=t[e])&&void 0!==n?n:0}function Z(t,e){var n=t.getBoundingClientRect();return Object(z.c)(Object(z.f)(n,e))}var Q=n(390),tt=n(664);function et(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=.01),S(t,e)<n}function nt(t){return t.max-t.min}function rt(t,e){var n,r=.5,i=nt(t),o=nt(e);return o>i?r=Object(tt.a)(e.min,e.max-i,t.min):i>o&&(r=Object(tt.a)(t.min,t.max-o,e.min)),n=r,Object(Q.a)(0,1,n)}function it(t,e,n,r){void 0===r&&(r=.5),t.origin=r,t.originPoint=Object(_.a)(e.min,e.max,t.origin),t.scale=nt(n)/nt(e),et(t.scale,1,1e-4)&&(t.scale=1),t.translate=Object(_.a)(n.min,n.max,t.origin)-t.originPoint,et(t.translate)&&(t.translate=0)}function ot(t,e,n,r){it(t.x,e.x,n.x,at(r.originX)),it(t.y,e.y,n.y,at(r.originY))}function at(t){return\"number\"===typeof t?t:.5}function ut(t,e,n){t.min=n.min+e.min,t.max=t.min+nt(e)}var st,ct=n(725);!function(t){t.Animate=\"animate\",t.Hover=\"whileHover\",t.Tap=\"whileTap\",t.Drag=\"whileDrag\",t.Focus=\"whileFocus\",t.Exit=\"exit\"}(st||(st={}));var lt=n(629);function vt(t,e){return{min:e.min-t.min,max:e.max-t.min}}function ft(t,e){return{x:vt(t.x,e.x),y:vt(t.y,e.y)}}function dt(t,e){var n=t.getLayoutId(),r=e.getLayoutId();return n!==r||void 0===r&&t!==e}function pt(t){var e=t.getProps(),n=e.drag,r=e._dragX;return n&&!r}function mt(t,e){t.min=e.min,t.max=e.max}function gt(t,e,n){return n+e*(t-n)}function ht(t,e,n,r,i){return void 0!==i&&(t=gt(t,i,r)),gt(t,n,r)+e}function yt(t,e,n,r,i){void 0===e&&(e=0),void 0===n&&(n=1),t.min=ht(t.min,e,n,r,i),t.max=ht(t.max,e,n,r,i)}function bt(t,e){var n=e.x,r=e.y;yt(t.x,n.translate,n.scale,n.originPoint),yt(t.y,r.translate,r.scale,r.originPoint)}function jt(t,e,n,i){var o=Object(r.e)(i,3),a=o[0],u=o[1],s=o[2];t.min=e.min,t.max=e.max;var c=void 0!==n[s]?n[s]:.5,l=Object(_.a)(e.min,e.max,c);yt(t,n[a],n[u],l,n.scale)}var xt=[\"x\",\"scaleX\",\"originX\"],Ot=[\"y\",\"scaleY\",\"originY\"];function Pt(t,e,n){jt(t.x,e.x,n,xt),jt(t.y,e.y,n,Ot)}function Et(t,e,n,r,i){return t=gt(t-=e,1/n,r),void 0!==i&&(t=gt(t,1/i,r)),t}function At(t,e,n){var i=Object(r.e)(n,3),o=i[0],a=i[1],u=i[2];!function(t,e,n,r,i){void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r=.5);var o=Object(_.a)(t.min,t.max,r)-e;t.min=Et(t.min,e,n,o,i),t.max=Et(t.max,e,n,o,i)}(t,e[o],e[a],e[u],e.scale)}function Tt(t,e){At(t.x,e,xt),At(t.y,e,Ot)}var Lt,Vt=n(642),St=new WeakMap,wt=function(){function t(t){var e=t.visualElement;this.isDragging=!1,this.currentDirection=null,this.constraints=!1,this.elastic=Object(z.a)(),this.props={},this.hasMutatedConstraints=!1,this.cursorProgress={x:.5,y:.5},this.originPoint={},this.openGlobalLock=null,this.panSession=null,this.visualElement=e,this.visualElement.enableLayoutProjection(),St.set(e,this)}return t.prototype.start=function(t,e){var n=this,i=void 0===e?{}:e,o=i.snapToCursor,a=void 0!==o&&o,u=i.cursorProgress,s=this.props.transformPagePoint;this.panSession=new M(t,{onSessionStart:function(t){var e;n.stopMotion();var i=function(t){return d(t,\"client\")}(t).point;null===(e=n.cancelLayout)||void 0===e||e.call(n),n.cancelLayout=Object(Vt.a)((function(t,e){var o=Object(lt.a)(n.visualElement),s=Object(lt.b)(n.visualElement),c=Object(r.h)(Object(r.h)([],Object(r.e)(o)),Object(r.e)(s)),l=!1;n.isLayoutDrag()&&n.visualElement.lockProjectionTarget(),e((function(){c.forEach((function(t){return t.resetTransform()}))})),t((function(){Object(lt.d)(n.visualElement),s.forEach(lt.d)})),e((function(){c.forEach((function(t){return t.restoreTransform()})),a&&(l=n.snapToCursor(i))})),t((function(){Boolean(n.getAxisMotionValue(\"x\")&&!n.isExternalDrag())||n.visualElement.rebaseProjectionTarget(!0,n.visualElement.measureViewportBox(!1)),n.visualElement.scheduleUpdateLayoutProjection();var t=n.visualElement.projection;G((function(e){if(!l){var r=t.target[e],o=r.min,a=r.max;n.cursorProgress[e]=u?u[e]:Object(tt.a)(o,a,i[e])}var s=n.getAxisMotionValue(e);s&&(n.originPoint[e]=s.get())}))})),e((function(){m.c.update(),m.c.preRender(),m.c.render(),m.c.postRender()})),t((function(){return n.resolveDragConstraints()}))}))},onStart:function(t,e){var r,i,o,a=n.props,u=a.drag,s=a.dragPropagation;(!u||s||(n.openGlobalLock&&n.openGlobalLock(),n.openGlobalLock=X(u),n.openGlobalLock))&&(Object(Vt.b)(),n.isDragging=!0,n.currentDirection=null,null===(i=(r=n.props).onDragStart)||void 0===i||i.call(r,t,e),null===(o=n.visualElement.animationState)||void 0===o||o.setActive(st.Drag,!0))},onMove:function(t,e){var r,i,o,a,u=n.props,s=u.dragPropagation,c=u.dragDirectionLock;if(s||n.openGlobalLock){var l=e.offset;if(c&&null===n.currentDirection)return n.currentDirection=function(t,e){void 0===e&&(e=10);var n=null;Math.abs(t.y)>e?n=\"y\":Math.abs(t.x)>e&&(n=\"x\");return n}(l),void(null!==n.currentDirection&&(null===(i=(r=n.props).onDirectionLock)||void 0===i||i.call(r,n.currentDirection)));n.updateAxis(\"x\",e.point,l),n.updateAxis(\"y\",e.point,l),null===(a=(o=n.props).onDrag)||void 0===a||a.call(o,t,e),Lt=t}},onSessionEnd:function(t,e){return n.stop(t,e)}},{transformPagePoint:s})},t.prototype.resolveDragConstraints=function(){var t=this,e=this.props,n=e.dragConstraints,r=e.dragElastic,i=this.visualElement.getLayoutState().layoutCorrected;this.constraints=!!n&&(Object(Y.a)(n)?this.resolveRefConstraints(i,n):function(t,e){var n=e.top,r=e.left,i=e.bottom,o=e.right;return{x:W(t.x,r,o),y:W(t.y,n,i)}}(i,n)),this.elastic=function(t){return!1===t?t=0:!0===t&&(t=.35),{x:q(t,\"left\",\"right\"),y:q(t,\"top\",\"bottom\")}}(r),this.constraints&&!this.hasMutatedConstraints&&G((function(e){t.getAxisMotionValue(e)&&(t.constraints[e]=function(t,e){var n={};return void 0!==e.min&&(n.min=e.min-t.min),void 0!==e.max&&(n.max=e.max-t.min),n}(i[e],t.constraints[e]))}))},t.prototype.resolveRefConstraints=function(t,e){var n=this.props,r=n.onMeasureDragConstraints,i=n.transformPagePoint,o=e.current;Object(u.a)(null!==o,\"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.\"),this.constraintsBox=Z(o,i);var a=function(t,e){return{x:$(t.x,e.x),y:$(t.y,e.y)}}(t,this.constraintsBox);if(r){var s=r(Object(z.b)(a));this.hasMutatedConstraints=!!s,s&&(a=Object(z.c)(s))}return a},t.prototype.cancelDrag=function(){var t,e;this.visualElement.unlockProjectionTarget(),null===(t=this.cancelLayout)||void 0===t||t.call(this),this.isDragging=!1,this.panSession&&this.panSession.end(),this.panSession=null,!this.props.dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),null===(e=this.visualElement.animationState)||void 0===e||e.setActive(st.Drag,!1)},t.prototype.stop=function(t,e){var n,r,i;null===(n=this.panSession)||void 0===n||n.end(),this.panSession=null;var o=this.isDragging;if(this.cancelDrag(),o){var a=e.velocity;this.animateDragEnd(a),null===(i=(r=this.props).onDragEnd)||void 0===i||i.call(r,t,e)}},t.prototype.snapToCursor=function(t){var e=this;return G((function(n){if(Mt(n,e.props.drag,e.currentDirection)){var r=e.getAxisMotionValue(n);if(!r)return e.cursorProgress[n]=.5,!0;var i=e.visualElement.getLayoutState().layout,o=i[n].max-i[n].min,a=i[n].min+o/2,u=t[n]-a;e.originPoint[n]=t[n],r.set(u)}})).includes(!0)},t.prototype.updateAxis=function(t,e,n){if(Mt(t,this.props.drag,this.currentDirection))return this.getAxisMotionValue(t)?this.updateAxisMotionValue(t,n):this.updateVisualElementAxis(t,e)},t.prototype.updateAxisMotionValue=function(t,e){var n=this.getAxisMotionValue(t);if(e&&n){var r=this.originPoint[t]+e[t],i=this.constraints?K(r,this.constraints[t],this.elastic[t]):r;n.set(i)}},t.prototype.updateVisualElementAxis=function(t,e){var n,r=this.visualElement.getLayoutState().layout[t],i=r.max-r.min,o=this.cursorProgress[t],a=function(t,e,n,r,i){var o=t-e*n;return r?K(o,r,i):o}(e[t],i,o,null===(n=this.constraints)||void 0===n?void 0:n[t],this.elastic[t]);this.visualElement.setProjectionTargetAxis(t,a,a+i)},t.prototype.setProps=function(t){var e=t.drag,n=void 0!==e&&e,i=t.dragDirectionLock,o=void 0!==i&&i,a=t.dragPropagation,u=void 0!==a&&a,s=t.dragConstraints,c=void 0!==s&&s,l=t.dragElastic,v=void 0===l?.35:l,f=t.dragMomentum,d=void 0===f||f,p=Object(r.f)(t,[\"drag\",\"dragDirectionLock\",\"dragPropagation\",\"dragConstraints\",\"dragElastic\",\"dragMomentum\"]);this.props=Object(r.a)({drag:n,dragDirectionLock:o,dragPropagation:u,dragConstraints:c,dragElastic:v,dragMomentum:d},p)},t.prototype.getAxisMotionValue=function(t){var e=this.props,n=e.layout,r=e.layoutId,i=\"_drag\"+t.toUpperCase();return this.props[i]?this.props[i]:n||void 0!==r?void 0:this.visualElement.getValue(t,0)},t.prototype.isLayoutDrag=function(){return!this.getAxisMotionValue(\"x\")},t.prototype.isExternalDrag=function(){var t=this.props,e=t._dragX,n=t._dragY;return e||n},t.prototype.animateDragEnd=function(t){var e=this,n=this.props,i=n.drag,o=n.dragMomentum,a=n.dragElastic,u=n.dragTransition,s=function(t,e){void 0===e&&(e=!0);var n,r=t.getProjectionParent();return!!r&&(e?Tt(n=ft(r.projection.target,t.projection.target),r.getLatestValues()):n=ft(r.getLayoutState().layout,t.getLayoutState().layout),G((function(e){return t.setProjectionTargetAxis(e,n[e].min,n[e].max,!0)})),!0)}(this.visualElement,this.isLayoutDrag()&&!this.isExternalDrag()),c=this.constraints||{};if(s&&Object.keys(c).length&&this.isLayoutDrag()){var l=this.visualElement.getProjectionParent();if(l){var v=ft(l.projection.targetFinal,c);G((function(t){var e=v[t],n=e.min,r=e.max;c[t]={min:isNaN(n)?void 0:n,max:isNaN(r)?void 0:r}}))}}var f=G((function(n){var l;if(Mt(n,i,e.currentDirection)){var v=null!==(l=null===c||void 0===c?void 0:c[n])&&void 0!==l?l:{},f=a?200:1e6,d=a?40:1e7,p=Object(r.a)(Object(r.a)({type:\"inertia\",velocity:o?t[n]:0,bounceStiffness:f,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10},u),v);return e.getAxisMotionValue(n)?e.startAxisValueAnimation(n,p):e.visualElement.startLayoutAnimation(n,p,s)}}));return Promise.all(f).then((function(){var t,n;null===(n=(t=e.props).onDragTransitionEnd)||void 0===n||n.call(t)}))},t.prototype.stopMotion=function(){var t=this;G((function(e){var n=t.getAxisMotionValue(e);n?n.stop():t.visualElement.stopLayoutAnimation()}))},t.prototype.startAxisValueAnimation=function(t,e){var n=this.getAxisMotionValue(t);if(n){var r=n.get();return n.set(r),n.set(r),Object(ct.b)(t,n,0,e)}},t.prototype.scalePoint=function(){var t=this,e=this.props,n=e.drag,r=e.dragConstraints;if(Object(Y.a)(r)&&this.constraintsBox){this.stopMotion();var i={x:0,y:0};G((function(e){i[e]=rt(t.visualElement.projection.target[e],t.constraintsBox[e])})),this.updateConstraints((function(){G((function(e){if(Mt(e,n,null)){var r=function(t,e,n){var r=t.max-t.min,i=Object(_.a)(e.min,e.max-r,n);return{min:i,max:i+r}}(t.visualElement.projection.target[e],t.constraintsBox[e],i[e]),o=r.min,a=r.max;t.visualElement.setProjectionTargetAxis(e,o,a)}}))})),setTimeout(Vt.b,1)}},t.prototype.updateConstraints=function(t){var e=this;this.cancelLayout=Object(Vt.a)((function(n,r){var i=Object(lt.a)(e.visualElement);r((function(){return i.forEach((function(t){return t.resetTransform()}))})),n((function(){return Object(lt.d)(e.visualElement)})),r((function(){return i.forEach((function(t){return t.restoreTransform()}))})),n((function(){e.resolveDragConstraints()})),t&&r(t)}))},t.prototype.mount=function(t){var e=this,n=P(t.getInstance(),\"pointerdown\",(function(t){var n=e.props,r=n.drag,i=n.dragListener;r&&(void 0===i||i)&&e.start(t)})),r=h(window,\"resize\",(function(){e.scalePoint()})),i=t.onLayoutUpdate((function(){e.isDragging&&e.resolveDragConstraints()})),o=t.prevDragCursor;return o&&this.start(Lt,{cursorProgress:o}),function(){null===n||void 0===n||n(),null===r||void 0===r||r(),null===i||void 0===i||i(),e.cancelDrag()}},t}();function Mt(t,e,n){return(!0===e||e===t)&&(null===n||n===t)}var Ct=n(234);var Rt=n(714);var Dt=function(t){return function(e){return t(e),null}},kt={pan:Dt((function(t){var e=t.onPan,n=t.onPanStart,r=t.onPanEnd,o=t.onPanSessionStart,u=t.visualElement,s=e||n||r||o,c=Object(i.useRef)(null),l=Object(i.useContext)(a.a).transformPagePoint,v={onSessionStart:o,onStart:n,onMove:e,onEnd:function(t,e){c.current=null,r&&r(t,e)}};Object(i.useEffect)((function(){null!==c.current&&c.current.updateHandlers(v)})),E(u,\"pointerdown\",s&&function(t){c.current=new M(t,v,{transformPagePoint:l})}),Object(Rt.a)((function(){return c.current&&c.current.end()}))})),drag:Dt((function(t){var e=t.dragControls,n=t.visualElement,o=Object(i.useContext)(a.a).transformPagePoint,u=Object(Ct.a)((function(){return new wt({visualElement:n})}));u.setProps(Object(r.a)(Object(r.a)({},t),{transformPagePoint:o})),Object(i.useEffect)((function(){return e&&e.subscribe(u)}),[u]),Object(i.useEffect)((function(){return u.mount(n)}),[])}))},Bt=n(715),Ft=n(702),It=n(332),Ut=n(659),Ht=n(662);function Xt(t){return\"string\"===typeof t&&t.startsWith(\"var(--\")}var Nt=/var\\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\\)/;function Yt(t,e,n){void 0===n&&(n=1),Object(u.a)(n<=4,'Max CSS variable fallback depth detected in property \"'+t+'\". This may indicate a circular fallback dependency.');var i=Object(r.e)(function(t){var e=Nt.exec(t);if(!e)return[,];var n=Object(r.e)(e,3);return[n[1],n[2]]}(t),2),o=i[0],a=i[1];if(o){var s=window.getComputedStyle(e).getPropertyValue(o);return s?s.trim():Xt(a)?Yt(a,e,n+1):a}}function zt(t,e){return t/(e.max-e.min)*100}var Gt=\"_$css\";var _t={process:function(t,e,n){var r=n.target;if(\"string\"===typeof t){if(!Ut.d.test(t))return t;t=parseFloat(t)}return zt(t,r.x)+\"% \"+zt(t,r.y)+\"%\"}},Kt={borderRadius:Object(r.a)(Object(r.a)({},_t),{applyTo:[\"borderTopLeftRadius\",\"borderTopRightRadius\",\"borderBottomLeftRadius\",\"borderBottomRightRadius\"]}),borderTopLeftRadius:_t,borderTopRightRadius:_t,borderBottomLeftRadius:_t,borderBottomRightRadius:_t,boxShadow:{process:function(t,e){var n=e.delta,r=e.treeScale,i=t,o=t.includes(\"var(\"),a=[];o&&(t=t.replace(Nt,(function(t){return a.push(t),Gt})));var u=Ht.a.parse(t);if(u.length>5)return i;var s=Ht.a.createTransformer(t),c=\"number\"!==typeof u[0]?1:0,l=n.x.scale*r.x,v=n.y.scale*r.y;u[0+c]/=l,u[1+c]/=v;var f=Object(_.a)(l,v,.5);\"number\"===typeof u[2+c]&&(u[2+c]/=f),\"number\"===typeof u[3+c]&&(u[3+c]/=f);var d=s(u);if(o){var p=0;d=d.replace(Gt,(function(){var t=a[p];return p++,t}))}return d}}},Wt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frameTarget=Object(z.a)(),e.currentAnimationTarget=Object(z.a)(),e.isAnimating={x:!1,y:!1},e.stopAxisAnimation={x:void 0,y:void 0},e.isAnimatingTree=!1,e.animate=function(t,n,i){void 0===i&&(i={});var o=i.originBox,a=i.targetBox,u=i.visibilityAction,s=i.shouldStackAnimate,c=i.onComplete,l=i.prevParent,v=Object(r.f)(i,[\"originBox\",\"targetBox\",\"visibilityAction\",\"shouldStackAnimate\",\"onComplete\",\"prevParent\"]),f=e.props,d=f.visualElement,p=f.layout;if(!1===s)return e.isAnimatingTree=!1,e.safeToRemove();if(!e.isAnimatingTree||!0===s){s&&(e.isAnimatingTree=!0),n=o||n,t=a||t;var m=!1,g=d.getProjectionParent();if(g){var h=g.prevViewportBox,y=g.getLayoutState().layout;l&&(a&&(y=l.getLayoutState().layout),o&&!dt(l,g)&&l.prevViewportBox&&(h=l.prevViewportBox)),h&&te(l,o,a)&&(m=!0,n=ft(h,n),t=ft(y,t))}var b=$t(n,t),j=G((function(i){var o,a;if(\"position\"===p){var s=t[i].max-t[i].min;n[i].max=n[i].min+s}if(!d.projection.isTargetLocked)return void 0===u?b?e.animateAxis(i,t[i],n[i],Object(r.a)(Object(r.a)({},v),{isRelative:m})):(null===(a=(o=e.stopAxisAnimation)[i])||void 0===a||a.call(o),d.setProjectionTargetAxis(i,t[i].min,t[i].max,m)):void d.setVisibility(u===Bt.b.Show)}));return d.syncRender(),Promise.all(j).then((function(){e.isAnimatingTree=!1,c&&c(),d.notifyLayoutAnimationComplete()}))}},e}return Object(r.c)(e,t),e.prototype.componentDidMount=function(){var t=this,e=this.props.visualElement;e.animateMotionValue=ct.b,e.enableLayoutProjection(),this.unsubLayoutReady=e.onLayoutUpdate(this.animate),e.layoutSafeToRemove=function(){return t.safeToRemove()},Object(It.a)(Kt)},e.prototype.componentWillUnmount=function(){var t=this;this.unsubLayoutReady(),G((function(e){var n,r;return null===(r=(n=t.stopAxisAnimation)[e])||void 0===r?void 0:r.call(n)}))},e.prototype.animateAxis=function(t,e,n,r){var i,o,a=this,u=void 0===r?{}:r,s=u.transition,c=u.isRelative;if(!this.isAnimating[t]||!Zt(e,this.currentAnimationTarget[t])){null===(o=(i=this.stopAxisAnimation)[t])||void 0===o||o.call(i),this.isAnimating[t]=!0;var l=this.props.visualElement,v=this.frameTarget[t],f=l.getProjectionAnimationProgress()[t];f.clearListeners(),f.set(0),f.set(0);var d=function(){var r=f.get()/1e3;!function(t,e,n,r){t.min=Object(_.a)(e.min,n.min,r),t.max=Object(_.a)(e.max,n.max,r)}(v,n,e,r),l.setProjectionTargetAxis(t,v.min,v.max,c)};d();var p=f.onChange(d);this.stopAxisAnimation[t]=function(){a.isAnimating[t]=!1,f.stop(),p()},this.currentAnimationTarget[t]=e;var m=s||l.getDefaultTransition()||Qt;return Object(ct.b)(\"x\"===t?\"layoutX\":\"layoutY\",f,1e3,m&&Object(ct.a)(m,\"layout\")).then(this.stopAxisAnimation[t])}},e.prototype.safeToRemove=function(){var t,e;null===(e=(t=this.props).safeToRemove)||void 0===e||e.call(t)},e.prototype.render=function(){return null},e}(i.Component);function $t(t,e){return!Jt(t)&&!Jt(e)&&(!Zt(t.x,e.x)||!Zt(t.y,e.y))}var qt={min:0,max:0};function Jt(t){return Zt(t.x,qt)&&Zt(t.y,qt)}function Zt(t,e){return t.min===e.min&&t.max===e.max}var Qt={duration:.45,ease:[.4,0,.1,1]};function te(t,e,n){return t||!t&&!(e||n)}var ee=n(649),ne=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.componentDidMount=function(){var t=this.props,e=t.syncLayout,n=t.framerSyncLayout,r=t.visualElement;Object(ee.c)(e)&&e.register(r),Object(ee.c)(n)&&n.register(r),r.onUnmount((function(){Object(ee.c)(e)&&e.remove(r),Object(ee.c)(n)&&n.remove(r)}))},e.prototype.getSnapshotBeforeUpdate=function(){var t=this.props,e=t.syncLayout,n=t.visualElement;return Object(ee.c)(e)?e.syncUpdate():(Object(lt.c)(n),e.add(n)),null},e.prototype.componentDidUpdate=function(){var t=this.props.syncLayout;Object(ee.c)(t)||t.flush()},e.prototype.render=function(){return null},e}(o.a.Component);var re={measureLayout:function(t){var e=Object(i.useContext)(ee.b),n=Object(i.useContext)(ee.a);return o.a.createElement(ne,Object(r.a)({},t,{syncLayout:e,framerSyncLayout:n}))},layoutAnimation:function(t){var e=Object(r.e)(Object(Ft.b)(),2)[1];return i.createElement(Wt,Object(r.a)({},t,{safeToRemove:e}))}},ie=n(703),oe=n(233),ae=n(430);function ue(t,e){if(!Array.isArray(e))return!1;var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}var se=n(643),ce=n(175),le=[st.Animate,st.Hover,st.Tap,st.Drag,st.Focus,st.Exit],ve=Object(r.h)([],Object(r.e)(le)).reverse(),fe=le.length;function de(t){var e=function(t){return function(e){return Promise.all(e.map((function(e){var n=e.animation,r=e.options;return Object(se.a)(t,n,r)})))}}(t),n=function(){var t;return(t={})[st.Animate]=pe(!0),t[st.Hover]=pe(),t[st.Tap]=pe(),t[st.Drag]=pe(),t[st.Focus]=pe(),t[st.Exit]=pe(),t}(),i={},o=!0,a=function(e,n){var i=Object(ce.e)(t,n);if(i){i.transition;var o=i.transitionEnd,a=Object(r.f)(i,[\"transition\",\"transitionEnd\"]);e=Object(r.a)(Object(r.a)(Object(r.a)({},e),a),o)}return e};function u(u,s){for(var c,l=t.getProps(),v=t.getVariantContext(!0)||{},f=[],d=new Set,p={},m=1/0,g=function(e){var i=ve[e],g=n[i],h=null!==(c=l[i])&&void 0!==c?c:v[i],y=Object(ce.c)(h),b=i===s?g.isActive:null;!1===b&&(m=e);var j=h===v[i]&&h!==l[i]&&y;if(j&&o&&t.manuallyAnimateOnMount&&(j=!1),g.protectedKeys=Object(r.a)({},p),!g.isActive&&null===b||!h&&!g.prevProp||Object(ie.a)(h)||\"boolean\"===typeof h)return\"continue\";var x=function(t,e){if(\"string\"===typeof e)return e!==t;if(Object(ce.d)(e))return!ue(e,t);return!1}(g.prevProp,h)||i===s&&g.isActive&&!j&&y||e>m&&y,O=Array.isArray(h)?h:[h],P=O.reduce(a,{});!1===b&&(P={});var E=g.prevResolvedValues,A=void 0===E?{}:E,T=Object(r.a)(Object(r.a)({},A),P),L=function(t){x=!0,d.delete(t),g.needsAnimating[t]=!0};for(var V in T){var S=P[V],w=A[V];p.hasOwnProperty(V)||(S!==w?Object(ae.a)(S)&&Object(ae.a)(w)?ue(S,w)?g.protectedKeys[V]=!0:L(V):void 0!==S?L(V):d.add(V):void 0!==S&&d.has(V)?L(V):g.protectedKeys[V]=!0)}g.prevProp=h,g.prevResolvedValues=P,g.isActive&&(p=Object(r.a)(Object(r.a)({},p),P)),o&&t.blockInitialAnimation&&(x=!1),x&&!j&&f.push.apply(f,Object(r.h)([],Object(r.e)(O.map((function(t){return{animation:t,options:Object(r.a)({type:i},u)}})))))},h=0;h<fe;h++)g(h);if(i=Object(r.a)({},p),d.size){var y={};d.forEach((function(e){var n=t.getBaseTarget(e);void 0!==n&&(y[e]=n)})),f.push({animation:y})}var b=Boolean(f.length);return o&&!1===l.initial&&!t.manuallyAnimateOnMount&&(b=!1),o=!1,b?e(f):Promise.resolve()}return{isAnimated:function(t){return void 0!==i[t]},animateChanges:u,setActive:function(e,r,i){var o;return n[e].isActive===r?Promise.resolve():(null===(o=t.variantChildren)||void 0===o||o.forEach((function(t){var n;return null===(n=t.animationState)||void 0===n?void 0:n.setActive(e,r)})),n[e].isActive=r,u(i,e))},setAnimateFunction:function(n){e=n(t)},getState:function(){return n}}}function pe(t){return void 0===t&&(t=!1),{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var me={animation:Dt((function(t){var e=t.visualElement,n=t.animate;e.animationState||(e.animationState=de(e)),Object(ie.a)(n)&&Object(i.useEffect)((function(){return n.subscribe(e)}),[n])})),exit:Dt((function(t){var e=t.custom,n=t.visualElement,o=Object(r.e)(Object(Ft.b)(),2),a=o[0],u=o[1],s=Object(i.useContext)(oe.a);Object(i.useEffect)((function(){var t,r,i=null===(t=n.animationState)||void 0===t?void 0:t.setActive(st.Exit,!a,{custom:null!==(r=null===s||void 0===s?void 0:s.custom)&&void 0!==r?r:e});!a&&(null===i||void 0===i||i.then(u))}),[a])}))};function ge(t,e,n){return function(r,i){var o;s(r)&&!N()&&(null===n||void 0===n||n(r,i),null===(o=t.animationState)||void 0===o||o.setActive(st.Hover,e))}}var he=function t(e,n){return!!n&&(e===n||t(e,n.parentElement))};var ye={tap:Dt((function(t){var e=t.onTap,n=t.onTapStart,r=t.onTapCancel,o=t.whileTap,a=t.visualElement,u=e||n||r||o,s=Object(i.useRef)(!1),c=Object(i.useRef)(null);function l(){var t;null===(t=c.current)||void 0===t||t.call(c),c.current=null}function v(){var t;return l(),s.current=!1,null===(t=a.animationState)||void 0===t||t.setActive(st.Tap,!1),!N()}function f(t,n){v()&&(he(a.getInstance(),t.target)?null===e||void 0===e||e(t,n):null===r||void 0===r||r(t,n))}function d(t,e){v()&&(null===r||void 0===r||r(t,e))}E(a,\"pointerdown\",u?function(t,e){var r;l(),s.current||(s.current=!0,c.current=Object(w.a)(P(window,\"pointerup\",f),P(window,\"pointercancel\",d)),null===n||void 0===n||n(t,e),null===(r=a.animationState)||void 0===r||r.setActive(st.Tap,!0))}:void 0),Object(Rt.a)(l)})),focus:Dt((function(t){var e=t.whileFocus,n=t.visualElement;y(n,\"focus\",e?function(){var t;null===(t=n.animationState)||void 0===t||t.setActive(st.Focus,!0)}:void 0),y(n,\"blur\",e?function(){var t;null===(t=n.animationState)||void 0===t||t.setActive(st.Focus,!1)}:void 0)})),hover:Dt((function(t){var e=t.onHoverStart,n=t.onHoverEnd,r=t.whileHover,i=t.visualElement;E(i,\"pointerenter\",e||r?ge(i,!0,e):void 0),E(i,\"pointerleave\",n||r?ge(i,!1,n):void 0)}))},be=n(630),je=n(251);function xe(){return{isHydrated:!1,layout:Object(z.a)(),layoutCorrected:Object(z.a)(),treeScale:{x:1,y:1},delta:Object(z.e)(),deltaFinal:Object(z.e)(),deltaTransform:\"\"}}var Oe=xe();function Pe(t,e,n){var r=t.x,i=t.y,o=\"translate3d(\"+r.translate/e.x+\"px, \"+i.translate/e.y+\"px, 0) \";if(n){var a=n.rotate,u=n.rotateX,s=n.rotateY;a&&(o+=\"rotate(\"+a+\") \"),u&&(o+=\"rotateX(\"+u+\") \"),s&&(o+=\"rotateY(\"+s+\") \")}return o+=\"scale(\"+r.scale+\", \"+i.scale+\")\",n||o!==Ae?o:\"\"}function Ee(t){var e=t.deltaFinal;return 100*e.x.origin+\"% \"+100*e.y.origin+\"% 0\"}var Ae=Pe(Oe.delta,Oe.treeScale,{x:1,y:1}),Te=n(502),Le=[\"LayoutMeasure\",\"BeforeLayoutMeasure\",\"LayoutUpdate\",\"ViewportBoxUpdate\",\"Update\",\"Render\",\"AnimationComplete\",\"LayoutAnimationComplete\",\"AnimationStart\",\"SetAxisTarget\",\"Unmount\"];function Ve(t,e,n,r){var i,o,a=t.delta,u=t.layout,s=t.layoutCorrected,c=t.treeScale,l=e.target;o=u,mt((i=s).x,o.x),mt(i.y,o.y),function(t,e,n){var r=n.length;if(r){var i,o;e.x=e.y=1;for(var a=0;a<r;a++)o=(i=n[a]).getLayoutState().delta,e.x*=o.x.scale,e.y*=o.y.scale,bt(t,o),pt(i)&&Pt(t,t,i.getLatestValues())}}(s,c,n),ot(a,s,l,r)}var Se=n(644),we=n(475),Me=function(){function t(){this.children=[],this.isDirty=!1}return t.prototype.add=function(t){Object(Se.a)(this.children,t),this.isDirty=!0},t.prototype.remove=function(t){Object(Se.b)(this.children,t),this.isDirty=!0},t.prototype.forEach=function(t){this.isDirty&&this.children.sort(we.a),this.isDirty=!1,this.children.forEach(t)},t}();var Ce=function(t){var e=t.treeType,n=void 0===e?\"\":e,i=t.build,o=t.getBaseTarget,a=t.makeTargetAnimatable,u=t.measureViewportBox,s=t.render,c=t.readValueFromInstance,l=t.resetTransform,v=t.restoreTransform,f=t.removeValueFromRenderState,d=t.sortNodePosition,p=t.scrapeMotionValuesFromProps;return function(t,e){var g=t.parent,h=t.props,y=t.presenceId,b=t.blockInitialAnimation,j=t.visualState;void 0===e&&(e={});var x,O,P,E,A,T,L=j.latestValues,V=j.renderState,S=function(){var t=Le.map((function(){return new Te.a})),e={},n={clearAllListeners:function(){return t.forEach((function(t){return t.clear()}))},updatePropListeners:function(t){return Le.forEach((function(r){var i;null===(i=e[r])||void 0===i||i.call(e);var o=\"on\"+r,a=t[o];a&&(e[r]=n[o](a))}))}};return t.forEach((function(t,e){n[\"on\"+Le[e]]=function(e){return t.add(e)},n[\"notify\"+Le[e]]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.notify.apply(t,Object(r.h)([],Object(r.e)(e)))}})),n}(),M={isEnabled:!1,isHydrated:!1,isTargetLocked:!1,target:Object(z.a)(),targetFinal:Object(z.a)()},C=M,R=L,D=xe(),k=!1,B=new Map,F=new Map,I={},U=Object(r.a)({},L);function H(){x&&(J.isProjectionReady()&&(Pt(C.targetFinal,C.target,R),ot(D.deltaFinal,D.layoutCorrected,C.targetFinal,L)),X(),s(x,V))}function X(){var t=L;if(E&&E.isActive()){var n=E.getCrossfadeState(J);n&&(t=n)}i(J,V,t,C,D,e,h)}function N(){S.notifyUpdate(L)}function Y(){J.layoutTree.forEach(De)}var _=p(h);for(var K in _){var W=_[K];void 0!==L[K]&&Object(je.a)(W)&&W.set(L[K],!1)}var $=Object(ce.a)(h),q=Object(ce.b)(h),J=Object(r.a)(Object(r.a)({treeType:n,current:null,depth:g?g.depth+1:0,parent:g,children:new Set,path:g?Object(r.h)(Object(r.h)([],Object(r.e)(g.path)),[g]):[],layoutTree:g?g.layoutTree:new Me,presenceId:y,projection:M,variantChildren:q?new Set:void 0,isVisible:void 0,manuallyAnimateOnMount:Boolean(null===g||void 0===g?void 0:g.isMounted()),blockInitialAnimation:b,isMounted:function(){return Boolean(x)},mount:function(t){x=J.current=t,J.pointTo(J),q&&g&&!$&&(T=null===g||void 0===g?void 0:g.addVariantChild(J)),null===g||void 0===g||g.children.add(J)},unmount:function(){m.a.update(N),m.a.render(H),m.a.preRender(J.updateLayoutProjection),F.forEach((function(t){return t()})),J.stopLayoutAnimation(),J.layoutTree.remove(J),null===T||void 0===T||T(),null===g||void 0===g||g.children.delete(J),null===P||void 0===P||P(),S.clearAllListeners()},addVariantChild:function(t){var e,n=J.getClosestVariantNode();if(n)return null===(e=n.variantChildren)||void 0===e||e.add(t),function(){return n.variantChildren.delete(t)}},sortNodePosition:function(t){return d&&n===t.treeType?d(J.getInstance(),t.getInstance()):0},getClosestVariantNode:function(){return q?J:null===g||void 0===g?void 0:g.getClosestVariantNode()},scheduleUpdateLayoutProjection:g?g.scheduleUpdateLayoutProjection:function(){return m.b.preRender(J.updateTreeLayoutProjection,!1,!0)},getLayoutId:function(){return h.layoutId},getInstance:function(){return x},getStaticValue:function(t){return L[t]},setStaticValue:function(t,e){return L[t]=e},getLatestValues:function(){return L},setVisibility:function(t){J.isVisible!==t&&(J.isVisible=t,J.scheduleRender())},makeTargetAnimatable:function(t,e){return void 0===e&&(e=!0),a(J,t,h,e)},addValue:function(t,e){J.hasValue(t)&&J.removeValue(t),B.set(t,e),L[t]=e.get(),function(t,e){var n=e.onChange((function(e){L[t]=e,h.onUpdate&&m.b.update(N,!1,!0)})),r=e.onRenderRequest(J.scheduleRender);F.set(t,(function(){n(),r()}))}(t,e)},removeValue:function(t){var e;B.delete(t),null===(e=F.get(t))||void 0===e||e(),F.delete(t),delete L[t],f(t,V)},hasValue:function(t){return B.has(t)},getValue:function(t,e){var n=B.get(t);return void 0===n&&void 0!==e&&(n=Object(be.a)(e),J.addValue(t,n)),n},forEachValue:function(t){return B.forEach(t)},readValue:function(t){var n;return null!==(n=L[t])&&void 0!==n?n:c(x,t,e)},setBaseTarget:function(t,e){U[t]=e},getBaseTarget:function(t){if(o){var e=o(h,t);if(void 0!==e&&!Object(je.a)(e))return e}return U[t]}},S),{build:function(){return X(),V},scheduleRender:function(){m.b.render(H,!1,!0)},syncRender:H,setProps:function(t){h=t,S.updatePropListeners(t),I=function(t,e,n){var r;for(var i in e){var o=e[i],a=n[i];if(Object(je.a)(o))t.addValue(i,o);else if(Object(je.a)(a))t.addValue(i,Object(be.a)(o));else if(a!==o)if(t.hasValue(i)){var u=t.getValue(i);!u.hasAnimated&&u.set(o)}else t.addValue(i,Object(be.a)(null!==(r=t.getStaticValue(i))&&void 0!==r?r:o))}for(var i in n)void 0===e[i]&&t.removeValue(i);return e}(J,p(h),I)},getProps:function(){return h},getVariant:function(t){var e;return null===(e=h.variants)||void 0===e?void 0:e[t]},getDefaultTransition:function(){return h.transition},getVariantContext:function(t){if(void 0===t&&(t=!1),t)return null===g||void 0===g?void 0:g.getVariantContext();if(!$){var e=(null===g||void 0===g?void 0:g.getVariantContext())||{};return void 0!==h.initial&&(e.initial=h.initial),e}for(var n={},r=0;r<Fe;r++){var i=Be[r],o=h[i];(Object(ce.c)(o)||!1===o)&&(n[i]=o)}return n},enableLayoutProjection:function(){M.isEnabled=!0,J.layoutTree.add(J)},lockProjectionTarget:function(){M.isTargetLocked=!0},unlockProjectionTarget:function(){J.stopLayoutAnimation(),M.isTargetLocked=!1},getLayoutState:function(){return D},setCrossfader:function(t){E=t},isProjectionReady:function(){return M.isEnabled&&M.isHydrated&&D.isHydrated},startLayoutAnimation:function(t,e,n){void 0===n&&(n=!1);var r=J.getProjectionAnimationProgress()[t],i=n?M.relativeTarget[t]:M.target[t],o=i.min,a=i.max-o;return r.clearListeners(),r.set(o),r.set(o),r.onChange((function(e){J.setProjectionTargetAxis(t,e,e+a,n)})),J.animateMotionValue(t,r,0,e)},stopLayoutAnimation:function(){G((function(t){return J.getProjectionAnimationProgress()[t].stop()}))},measureViewportBox:function(t){void 0===t&&(t=!0);var n=u(x,e);return t||Tt(n,L),n},getProjectionAnimationProgress:function(){return A||(A={x:Object(be.a)(0),y:Object(be.a)(0)}),A},setProjectionTargetAxis:function(t,e,n,r){var i;void 0===r&&(r=!1),r?(M.relativeTarget||(M.relativeTarget=Object(z.a)()),i=M.relativeTarget[t]):(M.relativeTarget=void 0,i=M.target[t]),M.isHydrated=!0,i.min=e,i.max=n,k=!0,S.notifySetAxisTarget()},rebaseProjectionTarget:function(t,e){void 0===e&&(e=D.layout);var n=J.getProjectionAnimationProgress(),r=n.x,i=n.y,o=!M.relativeTarget&&!M.isTargetLocked&&!r.isAnimating()&&!i.isAnimating();(t||o)&&G((function(t){var n=e[t],r=n.min,i=n.max;J.setProjectionTargetAxis(t,r,i)}))},notifyLayoutReady:function(t){!function(t){var e=t.getProjectionParent();if(e){var n=ft(e.getLayoutState().layout,t.getLayoutState().layout);G((function(e){t.setProjectionTargetAxis(e,n[e].min,n[e].max,!0)}))}else t.rebaseProjectionTarget()}(J),J.notifyLayoutUpdate(D.layout,J.prevViewportBox||D.layout,t)},resetTransform:function(){return l(J,x,h)},restoreTransform:function(){return v(x,V)},updateLayoutProjection:function(){if(J.isProjectionReady()){var t=D.delta,e=D.treeScale,n=e.x,r=e.y,i=D.deltaTransform;Ve(D,C,J.path,L),k&&J.notifyViewportBoxUpdate(C.target,t),k=!1;var o=Pe(t,e);o===i&&n===e.x&&r===e.y||J.scheduleRender(),D.deltaTransform=o}},updateTreeLayoutProjection:function(){J.layoutTree.forEach(Re),m.b.preRender(Y,!1,!0)},getProjectionParent:function(){if(void 0===O){for(var t=!1,e=J.path.length-1;e>=0;e--){var n=J.path[e];if(n.projection.isEnabled){t=n;break}}O=t}return O},resolveRelativeTargetBox:function(){var t=J.getProjectionParent();if(M.relativeTarget&&t&&(function(t,e){ut(t.target.x,t.relativeTarget.x,e.target.x),ut(t.target.y,t.relativeTarget.y,e.target.y)}(M,t.projection),pt(t))){var e=M.target;Pt(e,e,t.getLatestValues())}},shouldResetTransform:function(){return Boolean(h._layoutResetTransform)},pointTo:function(t){C=t.projection,R=t.getLatestValues(),null===P||void 0===P||P(),P=Object(w.a)(t.onSetAxisTarget(J.scheduleUpdateLayoutProjection),t.onLayoutAnimationComplete((function(){var t;J.isPresent?J.presence=Bt.a.Present:null===(t=J.layoutSafeToRemove)||void 0===t||t.call(J)})))},isPresent:!0,presence:Bt.a.Entering});return J}};function Re(t){t.resolveRelativeTargetBox()}function De(t){t.updateLayoutProjection()}var ke,Be=Object(r.h)([\"initial\"],Object(r.e)(le)),Fe=Be.length,Ie=n(483),Ue=n(485),He=n(799),Xe=n(289),Ne=n(252),Ye=n(934),ze=new Set([\"width\",\"height\",\"top\",\"left\",\"right\",\"bottom\",\"x\",\"y\"]),Ge=function(t){return ze.has(t)},_e=function(t,e){t.set(e,!1),t.set(e)},Ke=function(t){return t===Xe.b||t===Ut.d};!function(t){t.width=\"width\",t.height=\"height\",t.left=\"left\",t.right=\"right\",t.top=\"top\",t.bottom=\"bottom\"}(ke||(ke={}));var We=function(t,e){return parseFloat(t.split(\", \")[e])},$e=function(t,e){return function(n,r){var i=r.transform;if(\"none\"===i||!i)return 0;var o=i.match(/^matrix3d\\((.+)\\)$/);if(o)return We(o[1],e);var a=i.match(/^matrix\\((.+)\\)$/);return a?We(a[1],t):0}},qe=new Set([\"x\",\"y\",\"z\"]),Je=Ne.d.filter((function(t){return!qe.has(t)}));var Ze={width:function(t){var e=t.x;return e.max-e.min},height:function(t){var e=t.y;return e.max-e.min},top:function(t,e){var n=e.top;return parseFloat(n)},left:function(t,e){var n=e.left;return parseFloat(n)},bottom:function(t,e){var n=t.y,r=e.top;return parseFloat(r)+(n.max-n.min)},right:function(t,e){var n=t.x,r=e.left;return parseFloat(r)+(n.max-n.min)},x:$e(4,13),y:$e(5,14)},Qe=function(t,e,n,i){void 0===n&&(n={}),void 0===i&&(i={}),e=Object(r.a)({},e),i=Object(r.a)({},i);var o=Object.keys(e).filter(Ge),a=[],s=!1,c=[];if(o.forEach((function(r){var o=t.getValue(r);if(t.hasValue(r)){var l,v=n[r],f=e[r],d=Object(Ye.b)(v);if(Object(ae.a)(f))for(var p=f.length,m=null===f[0]?1:0;m<p;m++)l?Object(u.a)(Object(Ye.b)(f[m])===l,\"All keyframes must be of the same type\"):(l=Object(Ye.b)(f[m]),Object(u.a)(l===d||Ke(d)&&Ke(l),\"Keyframes must be of the same dimension as the current value\"));else l=Object(Ye.b)(f);if(d!==l)if(Ke(d)&&Ke(l)){var g=o.get();\"string\"===typeof g&&o.set(parseFloat(g)),\"string\"===typeof f?e[r]=parseFloat(f):Array.isArray(f)&&l===Ut.d&&(e[r]=f.map(parseFloat))}else(null===d||void 0===d?void 0:d.transform)&&(null===l||void 0===l?void 0:l.transform)&&(0===v||0===f)?0===v?o.set(l.transform(v)):e[r]=d.transform(f):(s||(a=function(t){var e=[];return Je.forEach((function(n){var r=t.getValue(n);void 0!==r&&(e.push([n,r.get()]),r.set(n.startsWith(\"scale\")?1:0))})),e.length&&t.syncRender(),e}(t),s=!0),c.push(r),i[r]=void 0!==i[r]?i[r]:e[r],_e(o,f))}})),c.length){var l=function(t,e,n){var r=e.measureViewportBox(),i=e.getInstance(),o=getComputedStyle(i),a=o.display,u={top:o.top,left:o.left,bottom:o.bottom,right:o.right,transform:o.transform};\"none\"===a&&e.setStaticValue(\"display\",t.display||\"block\"),e.syncRender();var s=e.measureViewportBox();return n.forEach((function(n){var i=e.getValue(n);_e(i,Ze[n](r,u)),t[n]=Ze[n](s,o)})),t}(e,t,c);return a.length&&a.forEach((function(e){var n=Object(r.e)(e,2),i=n[0],o=n[1];t.getValue(i).set(o)})),t.syncRender(),{target:l,transitionEnd:i}}return{target:e,transitionEnd:i}};function tn(t,e,n,r){return function(t){return Object.keys(t).some(Ge)}(e)?Qe(t,e,n,r):{target:e,transitionEnd:r}}var en=function(t,e,n,i){var o=function(t,e,n){var i,o=Object(r.f)(e,[]),a=t.getInstance();if(!(a instanceof HTMLElement))return{target:o,transitionEnd:n};for(var u in n&&(n=Object(r.a)({},n)),t.forEachValue((function(t){var e=t.get();if(Xt(e)){var n=Yt(e,a);n&&t.set(n)}})),o){var s=o[u];if(Xt(s)){var c=Yt(s,a);c&&(o[u]=c,n&&(null!==(i=n[u])&&void 0!==i||(n[u]=s)))}}return{target:o,transitionEnd:n}}(t,e,i);return tn(t,e=o.target,n,i=o.transitionEnd)},nn=n(473),rn=n(801),on=n(716);var an={treeType:\"dom\",readValueFromInstance:function(t,e){if(Object(Ne.b)(e)){var n=Object(on.a)(e);return n&&n.default||0}var r,i=(r=t,window.getComputedStyle(r));return(Object(He.a)(e)?i.getPropertyValue(e):i[e])||0},sortNodePosition:function(t,e){return 2&t.compareDocumentPosition(e)?1:-1},getBaseTarget:function(t,e){var n;return null===(n=t.style)||void 0===n?void 0:n[e]},measureViewportBox:function(t,e){return Z(t,e.transformPagePoint)},resetTransform:function(t,e,n){var r=n.transformTemplate;e.style.transform=r?r({},\"\"):\"none\",t.scheduleRender()},restoreTransform:function(t,e){t.style.transform=e.style.transform},removeValueFromRenderState:function(t,e){var n=e.vars,r=e.style;delete n[t],delete r[t]},makeTargetAnimatable:function(t,e,n,i){var o=n.transformValues;void 0===i&&(i=!0);var a=e.transition,u=e.transitionEnd,s=Object(r.f)(e,[\"transition\",\"transitionEnd\"]),c=Object(Ie.b)(s,a||{},t);if(o&&(u&&(u=o(u)),s&&(s=o(s)),c&&(c=o(c))),i){Object(Ie.a)(t,s,c);var l=en(t,s,c,u);u=l.transitionEnd,s=l.target}return Object(r.a)({transition:a,transitionEnd:u},s)},scrapeMotionValuesFromProps:nn.a,build:function(t,e,n,r,i,o,a){void 0!==t.isVisible&&(e.style.visibility=t.isVisible?\"visible\":\"hidden\");var u=r.isEnabled&&i.isHydrated;Object(Ue.a)(e,n,r,i,o,a.transformTemplate,u?Pe:void 0,u?Ee:void 0)},render:rn.a},un=Ce(an),sn=n(798),cn=n(484),ln=n(803),vn=n(802),fn=n(800),dn=Ce(Object(r.a)(Object(r.a)({},an),{getBaseTarget:function(t,e){return t[e]},readValueFromInstance:function(t,e){var n;return Object(Ne.b)(e)?(null===(n=Object(on.a)(e))||void 0===n?void 0:n.default)||0:(e=vn.a.has(e)?e:Object(ln.a)(e),t.getAttribute(e))},scrapeMotionValuesFromProps:sn.a,build:function(t,e,n,r,i,o,a){var u=r.isEnabled&&i.isHydrated;Object(cn.a)(e,n,r,i,o,a.transformTemplate,u?Pe:void 0,u?Ee:void 0)},render:fn.a})),pn=n(486),mn=Object(r.a)(Object(r.a)({renderer:function(t,e){return Object(pn.a)(t)?dn(e,{enableHardwareAcceleration:!1}):un(e,{enableHardwareAcceleration:!0})}},me),ye),gn=Object(r.a)(Object(r.a)(Object(r.a)({},mn),kt),re)}}]);","name":"static/js/165.0396e24b.chunk.js","map":{"version":3,"sources":["static/js/165.0396e24b.chunk.js"],"names":["this","push","module","__webpack_exports__","__webpack_require__","d","domMax","tslib_es6","react","react_default","n","MotionConfigContext","hey_listen_es","isMouseEvent","event","PointerEvent","pointerType","MouseEvent","isTouchEvent","touches","defaultPagePoint","pageX","pageY","pointFromTouch","e","pointType","point","changedTouches","x","y","pointFromMouse","extractEventInfo","wrapHandler","handler","shouldFilterPrimaryPointer","eventHandler","listener","button","es","time_conversion","addDomEvent","target","eventName","options","addEventListener","removeEventListener","useDomEvent","ref","Object","element","current","is_browser","mouseEventNames","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","pointerenter","pointerleave","touchEventNames","getPointerEventName","name","window","onpointerdown","ontouchstart","onmousedown","addPointerEvent","usePointerEvent","isPoint","hasOwnProperty","is_point_3d_isPoint3D","inc","distance1D","a","b","Math","abs","distance","xDelta","yDelta","zDelta","z","sqrt","pow","pipe","PanSession_PanSession","PanSession","handlers","_a","_this","transformPagePoint","startEvent","lastMoveEvent","lastMoveEventInfo","updatePoint","info","getPanInfo","history","isPanStarted","isDistancePastThreshold","offset","timestamp","onStart","onMove","handlePointerMove","transformPoint","buttons","handlePointerUp","update","end","onEnd","onSessionEnd","panInfo","length","initialInfo","onSessionStart","removeListeners","prototype","updateHandlers","subtractPoint","delta","lastDevicePoint","startDevicePoint","velocity","getVelocity","timeDelta","i","timestampedPoint","lastPoint","time","currentVelocity","Infinity","createLock","lock","globalHorizontalLock","globalVerticalLock","getGlobalLock","drag","openHorizontal_1","openVertical_1","isDragActive","openGestureLock","is_ref_object","geometry","eachAxis","mix","applyConstraints","elastic","min","max","undefined","calcRelativeAxisConstraints","axis","calcViewportAxisConstraints","layoutAxis","constraintsAxis","resolveAxisElastic","dragElastic","minLabel","maxLabel","resolvePointElastic","label","getBoundingBox","box","getBoundingClientRect","clamp","utils_progress","isNear","value","maxDistance","calcLength","calcOrigin","source","v","origin","sourceLength","targetLength","updateAxisDelta","originPoint","scale","translate","updateBoxDelta","defaultOrigin","originX","originY","calcRelativeAxis","relative","parent","AnimationType","transitions","utils","calcRelativeOffsetAxis","child","calcRelativeOffset","checkIfParentHasChanged","prev","next","prevId","getLayoutId","nextId","isDraggable","visualElement","getProps","_dragX","resetAxis","originAxis","scalePoint","applyPointDelta","boxScale","applyAxisDelta","applyBoxDelta","applyAxisTransforms","final","transforms","_b","key","scaleKey","originKey","axisOrigin","xKeys","yKeys","applyBoxTransforms","finalBox","removePointDelta","removeAxisTransforms","removeAxisDelta","removeBoxTransforms","lastPointerEvent","batch_layout","elementDragControls","WeakMap","VisualElementDragControls_VisualElementDragControls","VisualElementDragControls","isDragging","currentDirection","constraints","props","hasMutatedConstraints","cursorProgress","openGlobalLock","panSession","enableLayoutProjection","set","start","originEvent","_c","snapToCursor","stopMotion","initialPoint","getViewportPointFromEvent","cancelLayout","call","read","write","ancestors","children","tree","hasManuallySetCursorOrigin","isLayoutDrag","lockProjectionTarget","forEach","resetTransform","restoreTransform","Boolean","getAxisMotionValue","isExternalDrag","rebaseProjectionTarget","measureViewportBox","scheduleUpdateLayoutProjection","projection","axisValue","get","preRender","render","postRender","resolveDragConstraints","_d","dragPropagation","onDragStart","animationState","setActive","Drag","_e","dragDirectionLock","lockThreshold","direction","getCurrentDirection","onDirectionLock","updateAxis","onDrag","stop","dragConstraints","layout","getLayoutState","layoutCorrected","resolveRefConstraints","layoutBox","top","left","bottom","right","calcRelativeConstraints","resolveDragElastic","relativeConstraints","rebaseAxisConstraints","onMeasureDragConstraints","constraintsElement","constraintsBox","measuredConstraints","calcViewportConstraints","userConstraints","cancelDrag","unlockProjectionTarget","animateDragEnd","onDragEnd","shouldDrag","length_1","center","includes","updateAxisMotionValue","updateVisualElementAxis","nextValue","axisLayout","axisLength","axisProgress","progress","calcConstrainedMinPoint","setProjectionTargetAxis","setProps","_f","_g","dragMomentum","remainingProps","layoutId","dragKey","toUpperCase","getValue","_dragY","dragTransition","isRelative","projectionParent","getProjectionParent","getLatestValues","convertToRelativeProjection","keys","relativeConstraints_1","targetFinal","isNaN","momentumAnimations","transition","bounceStiffness","bounceDamping","inertia","type","timeConstant","restDelta","restSpeed","startAxisValueAnimation","startLayoutAnimation","Promise","all","then","onDragTransitionEnd","stopLayoutAnimation","currentValue","boxProgress","updateConstraints","calcPositionFromProgress","setTimeout","onReady","mount","stopPointerListener","getInstance","dragListener","stopResizeListener","stopLayoutUpdateListener","onLayoutUpdate","prevDragCursor","use_constant","use_unmount_effect","makeRenderlessComponent","hook","drag_drag","pan","onPan","onPanStart","onPanEnd","onPanSessionStart","hasPanEvents","groupDragControls","dragControls","subscribe","types","use_presence","scale_correction","units","complex","isCSSVariable","startsWith","cssVariableRegex","getVariableValue","depth","match","exec","parseCSSVariable","token","fallback","resolved","getComputedStyle","getPropertyValue","trim","pixelsToPercent","pixels","varToken","borderCorrectionDefinition","process","latest","_layoutState","test","parseFloat","defaultScaleCorrectors","borderRadius","applyTo","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","boxShadow","treeScale","original","containsCSSVariables","cssVariables","replace","shadow","parse","template","createTransformer","xScale","yScale","averageScale","output","i_1","cssVariable","Animate_Animate","_super","Animate","apply","arguments","frameTarget","currentAnimationTarget","isAnimating","stopAxisAnimation","isAnimatingTree","animate","originBox","targetBox","visibilityAction","shouldStackAnimate","onComplete","prevParent","config","safeToRemove","prevParentViewportBox","prevViewportBox","parentLayout","isProvidedCorrectDataForRelativeSharedLayout","boxHasMoved","hasMoved","animations","isTargetLocked","animateAxis","setVisibility","Show","syncRender","notifyLayoutAnimationComplete","componentDidMount","animateMotionValue","unsubLayoutReady","layoutSafeToRemove","componentWillUnmount","axisIsEqual","layoutProgress","getProjectionAnimationProgress","clearListeners","frame","p","tweenAxis","unsubscribeProgress","onChange","layoutTransition","getDefaultTransition","defaultLayoutTransition","isZeroBox","zeroAxis","duration","ease","SharedLayoutContext","Measure_Measure","Measure","syncLayout","framerSyncLayout","register","onUnmount","remove","getSnapshotBeforeUpdate","syncUpdate","add","componentDidUpdate","flush","Component","layoutAnimations","measureLayout","createElement","layoutAnimation","is_animation_controls","PresenceContext","is_keyframes_target","shallowCompare","Array","isArray","prevLength","utils_animation","variants","variantPriorityOrder","Hover","Tap","Focus","Exit","reversePriorityOrder","reverse","numAnimationTypes","createAnimationState","map","animation","animateList","state","createTypeState","createState","allAnimatedKeys","isInitialRender","buildResolvedTypeValues","acc","definition","transitionEnd","animateChanges","changedActiveType","context","getVariantContext","removedKeys","Set","encounteredKeys","removedVariantIndex","_loop_1","typeState","prop","propIsVariant","activeDelta","isActive","isInherited","manuallyAnimateOnMount","protectedKeys","prevProp","shouldAnimateType","variantsHaveChanged","definitionList","resolvedValues","reduce","prevResolvedValues","allKeys","markToAnimate","delete","needsAnimating","has","blockInitialAnimation","size","fallbackAnimation_1","fallbackTarget","getBaseTarget","shouldAnimate","initial","resolve","isAnimated","variantChildren","setAnimateFunction","makeAnimator","getState","animations_animations","exit","custom","isPresent","onExitComplete","presenceContext","createHoverEvent","callback","isNodeOrChild","parentElement","gestureAnimations","tap","onTap","onTapStart","onTapCancel","whileTap","hasPressListeners","isPressing","cancelPointerEndListeners","removePointerEndListener","checkPointerEnd","onPointerUp","onPointerCancel","focus","whileFocus","hover","onHoverStart","onHoverEnd","whileHover","es_value","is_motion_value","createLayoutState","isHydrated","deltaFinal","deltaTransform","zeroLayout","buildLayoutProjectionTransform","latestTransform","transform","rotate","rotateX","rotateY","identityProjection","buildLayoutProjectionTransformOrigin","subscription_manager","names","updateLayoutDeltas","treePath","transformOrigin","treeLength","node","applyTreeDeltas","array","compare_by_depth","flat_tree_FlatTree","FlatTree","isDirty","sort","render_visualElement","treeType","build","_getBaseTarget","_makeTargetAnimatable","makeTargetAnimatable","_measureViewportBox","renderInstance","readValueFromInstance","_resetTransform","_restoreTransform","removeValueFromRenderState","_sortNodePosition","sortNodePosition","scrapeMotionValuesFromProps","presenceId","visualState","instance","unsubscribeFromLeadVisualElement","crossfader","projectionTargetProgress","removeFromVariantTree","latestValues","renderState","lifecycles","managers","propSubscriptions","clearAllListeners","manager","clear","updatePropListeners","on","propListener","args","_i","notify","createLifecycles","isEnabled","leadProjection","leadLatestValues","layoutState","hasViewportBoxUpdated","values","Map","valueSubscriptions","prevMotionValues","baseTarget","isProjectionReady","triggerBuild","valuesToRender","crossfadedValues","getCrossfadeState","notifyUpdate","_updateTreeLayoutProjection","layoutTree","fireUpdateLayoutProjection","initialMotionValues","isControllingVariants","isVariantNode","path","isVisible","isMounted","newInstance","pointTo","addVariantChild","unmount","updateLayoutProjection","closestVariantNode","getClosestVariantNode","other","updateTreeLayoutProjection","getStaticValue","setStaticValue","visibility","scheduleRender","canMutate","addValue","hasValue","removeValue","removeOnChange","latestValue","onUpdate","removeOnRenderRequest","onRenderRequest","bindToMotionValue","defaultValue","forEachValue","readValue","setBaseTarget","newProps","prevValue","existingValue","hasAnimated","updateMotionValuesFromProps","getVariant","startAtParent","context_1","numVariantProps","name_1","variantProps","setCrossfader","newCrossfader","relativeTarget","withTransform","viewportBox","notifySetAxisTarget","force","shouldRebase","notifyLayoutReady","relativeOffset","setCurrentViewportBox","notifyLayoutUpdate","prevTreeScaleX","prevTreeScaleY","prevDeltaTransform","notifyViewportBoxUpdate","fireResolveRelativeTargetBox","foundParent","ancestor","resolveRelativeTargetBox","relativeParent","parentProjection","calcRelativeBox","shouldResetTransform","_layoutResetTransform","newLead","onSetAxisTarget","onLayoutAnimationComplete","presence","Present","Entering","BoundingBoxDimension","setters","build_styles","is_css_variable","numbers","dimensions","positionalKeys","isPositionalKey","setAndResetVelocity","to","unit_conversion_isNumOrPxType","getPosFromMatrix","matrix","pos","split","getTranslateFromMatrix","pos2","pos3","_bbox","matrix3d","transformKeys","nonTranslationalTransformKeys","filter","positionalValues","width","height","unit_conversion_checkAndConvertChangedValueTypes","targetPositionalKeys","removedTransformValues","hasAttemptedToRemoveTransformValues","changedValueTypeKeys","toType","from","fromType","numKeyframes","removedTransforms","removeNonTranslationalTransform","convertedTarget","changedKeys","originBbox","elementComputedStyle","display","originComputedStyle","targetBbox","convertChangedValueTypes","unitConversion","some","hasPositionalKey","parse_dom_variant_parseDomVariant","HTMLElement","resolveCSSVariables","scrape_motion_values","utils_render","defaults","htmlConfig","domElement","defaultType","default","computedStyle","compareDocumentPosition","style","transformTemplate","mutableState","vars","transformValues","parsed","isProjectionTranform","htmlVisualElement","utils_scrape_motion_values","build_attrs","camel_to_dash","camel_case_attrs","svg_utils_render","svgVisualElement","getAttribute","_element","is_svg_component","domAnimation","renderer","enableHardwareAcceleration"],"mappings":"CAACA,KAAK,0CAA4CA,KAAK,2CAA6C,IAAIC,KAAK,CAAC,CAAC,KAAK,CAE9G,KACA,SAAUC,EAAQC,EAAqBC,GAE7C,aAGAA,EAAoBC,EAAEF,EAAqB,KAAK,WAAa,OAAqBG,MAGlF,IAAIC,EAAYH,EAAoB,IAGhCI,EAAQJ,EAAoB,GAC5BK,EAA6BL,EAAoBM,EAAEF,GAGnDG,EAAsBP,EAAoB,KAG1CQ,EAAgBR,EAAoB,KAGxC,SAASS,EAAaC,GAEpB,MAA4B,qBAAjBC,cAAgCD,aAAiBC,eAC1B,UAAtBD,EAAME,aAGXF,aAAiBG,WAG1B,SAASC,EAAaJ,GAEpB,QADmBA,EAAMK,QAuB3B,IAAIC,EAAmB,CACrBC,MAAO,EACPC,MAAO,GAGT,SAASC,EAAeC,EAAGC,QACP,IAAdA,IACFA,EAAY,QAGd,IACIC,EADeF,EAAEL,QAAQ,IAAMK,EAAEG,eAAe,IACxBP,EAC5B,MAAO,CACLQ,EAAGF,EAAMD,EAAY,KACrBI,EAAGH,EAAMD,EAAY,MAIzB,SAASK,EAAeJ,EAAOD,GAK7B,YAJkB,IAAdA,IACFA,EAAY,QAGP,CACLG,EAAGF,EAAMD,EAAY,KACrBI,EAAGH,EAAMD,EAAY,MAIzB,SAASM,EAAiBjB,EAAOW,GAK/B,YAJkB,IAAdA,IACFA,EAAY,QAGP,CACLC,MAAOR,EAAaJ,GAASS,EAAeT,EAAOW,GAAaK,EAAehB,EAAOW,IAQ1F,IAAIO,EAAc,SAAqBC,EAASC,QACX,IAA/BA,IACFA,GAA6B,GAG/B,IA3D4BC,EA2DxBC,EAAW,SAAkBtB,GAC/B,OAAOmB,EAAQnB,EAAOiB,EAAiBjB,KAGzC,OAAOoB,GA/DqBC,EA+D6BC,EA9DlD,SAAUtB,GACf,IAAID,EAAeC,aAAiBG,aACZJ,GAAgBA,GAAiC,IAAjBC,EAAMuB,SAG5DF,EAAarB,KAyDoDsB,GAKnEE,EAAKlC,EAAoB,KAGzBmC,EAAkBnC,EAAoB,KAK1C,SAASoC,EAAYC,EAAQC,EAAWT,EAASU,GAE/C,OADAF,EAAOG,iBAAiBF,EAAWT,EAASU,GACrC,WACL,OAAOF,EAAOI,oBAAoBH,EAAWT,EAASU,IA0B1D,SAASG,EAAYC,EAAKL,EAAWT,EAASU,GAC5CK,OAAOxC,EAAiB,UAAxBwC,EAA2B,WACzB,IAAIC,EAAUF,EAAIG,QAElB,GAAIjB,GAAWgB,EACb,OAAOT,EAAYS,EAASP,EAAWT,EAASU,KAEjD,CAACI,EAAKL,EAAWT,EAASU,IAK/B,IAAIQ,EAAa/C,EAAoB,KAsBjCgD,EAAkB,CACpBC,YAAa,YACbC,YAAa,YACbC,UAAW,UACXC,cAAe,cACfC,YAAa,YACbC,WAAY,WACZC,aAAc,aACdC,aAAc,cAEZC,EAAkB,CACpBR,YAAa,aACbC,YAAa,YACbC,UAAW,WACXC,cAAe,eAGjB,SAASM,EAAoBC,GAC3B,OAlCOZ,EAA8B,GAA8B,OAAzBa,OAAOC,cAmCxCF,EA/BFZ,EAA8B,GAA6B,OAAxBa,OAAOE,aAiCxCL,EAAgBE,GA7BlBZ,EAA8B,GAA4B,OAAvBa,OAAOG,YA+BxCf,EAAgBW,GAGlBA,EAGT,SAASK,EAAgB3B,EAAQC,EAAWT,EAASU,GACnD,OAAOH,EAAYC,EAAQqB,EAAoBpB,GAAYV,EAAYC,EAAuB,gBAAdS,GAA8BC,GAGhH,SAAS0B,EAAgBtB,EAAKL,EAAWT,EAASU,GAChD,OAAOG,EAAYC,EAAKe,EAAoBpB,GAAYT,GAAWD,EAAYC,EAAuB,gBAAdS,GAA8BC,GAKxH,IAAI2B,EAAU,SAAiB5C,GAC7B,OAAOA,EAAM6C,eAAe,MAAQ7C,EAAM6C,eAAe,MAOvDC,EAAwB,SAAmB9C,GAC7C,OAAO4C,EAAQ5C,IAAUA,EAAM6C,eAAe,MAK5CE,EAAMrE,EAAoB,KAO1BsE,EAAa,SAAoBC,EAAGC,GACtC,OAAOC,KAAKC,IAAIH,EAAIC,IAGtB,SAASG,EAASJ,EAAGC,GACnB,GAAI5B,OAAOyB,EAAmB,EAA1BzB,CAA6B2B,IAAM3B,OAAOyB,EAAmB,EAA1BzB,CAA6B4B,GAClE,OAAOF,EAAWC,EAAGC,GAChB,GAAIN,EAAQK,IAAML,EAAQM,GAAI,CACnC,IAAII,EAASN,EAAWC,EAAE/C,EAAGgD,EAAEhD,GAC3BqD,EAASP,EAAWC,EAAE9C,EAAG+C,EAAE/C,GAC3BqD,EAASV,EAAsBG,IAAMH,EAAsBI,GAAKF,EAAWC,EAAEQ,EAAGP,EAAEO,GAAK,EAC3F,OAAON,KAAKO,KAAKP,KAAKQ,IAAIL,EAAQ,GAAKH,KAAKQ,IAAIJ,EAAQ,GAAKJ,KAAKQ,IAAIH,EAAQ,KAMlF,IAAII,EAAOlF,EAAoB,KAc3BmF,EAEJ,WACE,SAASC,EAAW1E,EAAO2E,EAAUC,GACnC,IAAIC,EAAQ3F,KAGR4F,QADY,IAAPF,EAAgB,GAAKA,GACFE,mBAoF5B,GA9EA5F,KAAK6F,WAAa,KAKlB7F,KAAK8F,cAAgB,KAKrB9F,KAAK+F,kBAAoB,KAKzB/F,KAAKyF,SAAW,GAEhBzF,KAAKgG,YAAc,WACjB,GAAML,EAAMG,eAAiBH,EAAMI,kBAAnC,CACA,IAAIE,EAAOC,EAAWP,EAAMI,kBAAmBJ,EAAMQ,SACjDC,EAAoC,OAArBT,EAAME,WAIrBQ,EAA0BtB,EAASkB,EAAKK,OAAQ,CAClD1E,EAAG,EACHC,EAAG,KACC,EACN,GAAKuE,GAAiBC,EAAtB,CACA,IAAI3E,EAAQuE,EAAKvE,MACb6E,EAAYvD,OAAOV,EAAyB,EAAhCU,GAAqCuD,UAErDZ,EAAMQ,QAAQlG,KAAK+C,OAAOzC,EAA4B,EAAnCyC,CAAsCA,OAAOzC,EAA4B,EAAnCyC,CAAsC,GAAItB,GAAQ,CACzG6E,UAAWA,KAGb,IAAIb,EAAKC,EAAMF,SACXe,EAAUd,EAAGc,QACbC,EAASf,EAAGe,OAEXL,IACHI,GAAWA,EAAQb,EAAMG,cAAeG,GACxCN,EAAME,WAAaF,EAAMG,eAG3BW,GAAUA,EAAOd,EAAMG,cAAeG,MAGxCjG,KAAK0G,kBAAoB,SAAU5F,EAAOmF,GACxCN,EAAMG,cAAgBhF,EACtB6E,EAAMI,kBAAoBY,EAAeV,EAAMN,EAAMC,oBAEjD/E,EAAaC,IAA4B,IAAlBA,EAAM8F,QAC/BjB,EAAMkB,gBAAgB/F,EAAOmF,GAM/B3D,EAAoB,EAAEwE,OAAOnB,EAAMK,aAAa,IAGlDhG,KAAK6G,gBAAkB,SAAU/F,EAAOmF,GACtCN,EAAMoB,MAEN,IAAIrB,EAAKC,EAAMF,SACXuB,EAAQtB,EAAGsB,MACXC,EAAevB,EAAGuB,aAClBC,EAAUhB,EAAWS,EAAeV,EAAMN,EAAMC,oBAAqBD,EAAMQ,SAE3ER,EAAME,YAAcmB,GACtBA,EAAMlG,EAAOoG,GAGfD,GAAgBA,EAAanG,EAAOoG,MAIlChG,EAAaJ,IAAUA,EAAMK,QAAQgG,OAAS,GAAlD,CACAnH,KAAKyF,SAAWA,EAChBzF,KAAK4F,mBAAqBA,EAC1B,IACIwB,EAAcT,EADP5E,EAAiBjB,GACWd,KAAK4F,oBACxClE,EAAQ0F,EAAY1F,MACpB6E,EAAYvD,OAAOV,EAAyB,EAAhCU,GAAqCuD,UACrDvG,KAAKmG,QAAU,CAACnD,OAAOzC,EAA4B,EAAnCyC,CAAsCA,OAAOzC,EAA4B,EAAnCyC,CAAsC,GAAItB,GAAQ,CACtG6E,UAAWA,KAEb,IAAIc,EAAiB5B,EAAS4B,eAC9BA,GAAkBA,EAAevG,EAAOoF,EAAWkB,EAAapH,KAAKmG,UACrEnG,KAAKsH,gBAAkBtE,OAAOsC,EAAmB,EAA1BtC,CAA6BoB,EAAgBJ,OAAQ,cAAehE,KAAK0G,mBAAoBtC,EAAgBJ,OAAQ,YAAahE,KAAK6G,iBAAkBzC,EAAgBJ,OAAQ,gBAAiBhE,KAAK6G,mBAYhO,OATArB,EAAW+B,UAAUC,eAAiB,SAAU/B,GAC9CzF,KAAKyF,SAAWA,GAGlBD,EAAW+B,UAAUR,IAAM,WACzB/G,KAAKsH,iBAAmBtH,KAAKsH,kBAC7BhF,EAAuB,EAAEwE,OAAO9G,KAAKgG,cAGhCR,EAjHT,GAoHA,SAASmB,EAAeV,EAAML,GAC5B,OAAOA,EAAqB,CAC1BlE,MAAOkE,EAAmBK,EAAKvE,QAC7BuE,EAGN,SAASwB,EAAc9C,EAAGC,GACxB,MAAO,CACLhD,EAAG+C,EAAE/C,EAAIgD,EAAEhD,EACXC,EAAG8C,EAAE9C,EAAI+C,EAAE/C,GAIf,SAASqE,EAAWR,EAAIS,GACtB,IAAIzE,EAAQgE,EAAGhE,MACf,MAAO,CACLA,MAAOA,EACPgG,MAAOD,EAAc/F,EAAOiG,EAAgBxB,IAC5CG,OAAQmB,EAAc/F,EAAOkG,EAAiBzB,IAC9C0B,SAAUC,EAAY3B,EAAS,KAInC,SAASyB,EAAiBzB,GACxB,OAAOA,EAAQ,GAGjB,SAASwB,EAAgBxB,GACvB,OAAOA,EAAQA,EAAQgB,OAAS,GAGlC,SAASW,EAAY3B,EAAS4B,GAC5B,GAAI5B,EAAQgB,OAAS,EACnB,MAAO,CACLvF,EAAG,EACHC,EAAG,GAQP,IAJA,IAAImG,EAAI7B,EAAQgB,OAAS,EACrBc,EAAmB,KACnBC,EAAYP,EAAgBxB,GAEzB6B,GAAK,IACVC,EAAmB9B,EAAQ6B,KAEvBE,EAAU3B,UAAY0B,EAAiB1B,UAAYvD,OAAOT,EAA+C,EAAtDS,CAAyD+E,MAIhHC,IAGF,IAAKC,EACH,MAAO,CACLrG,EAAG,EACHC,EAAG,GAIP,IAAIsG,GAAQD,EAAU3B,UAAY0B,EAAiB1B,WAAa,IAEhE,GAAa,IAAT4B,EACF,MAAO,CACLvG,EAAG,EACHC,EAAG,GAIP,IAAIuG,EAAkB,CACpBxG,GAAIsG,EAAUtG,EAAIqG,EAAiBrG,GAAKuG,EACxCtG,GAAIqG,EAAUrG,EAAIoG,EAAiBpG,GAAKsG,GAW1C,OARIC,EAAgBxG,IAAMyG,EAAAA,IACxBD,EAAgBxG,EAAI,GAGlBwG,EAAgBvG,IAAMwG,EAAAA,IACxBD,EAAgBvG,EAAI,GAGfuG,EAKT,SAASE,EAAWvE,GAClB,IAAIwE,EAAO,KACX,OAAO,WAKL,OAAa,OAATA,IACFA,EAAOxE,EALM,WACbwE,EAAO,QAYb,IAAIC,EAAuBF,EAAW,kBAClCG,EAAqBH,EAAW,gBAEpC,SAASI,EAAcC,GACrB,IAAIJ,GAAO,EAEX,GAAa,MAATI,EACFJ,EAAOE,SACF,GAAa,MAATE,EACTJ,EAAOC,QACF,CACL,IAAII,EAAmBJ,IACnBK,EAAiBJ,IAEjBG,GAAoBC,EACtBN,EAAO,WACLK,IACAC,MAIED,GAAkBA,IAClBC,GAAgBA,KAIxB,OAAON,EAGT,SAASO,IAGP,IAAIC,EAAkBL,GAAc,GACpC,OAAKK,IACLA,KACO,GAKT,IAAIC,EAAgB5I,EAAoB,KAGpC6I,EAAW7I,EAAoB,KAInC,SAAS8I,EAASjH,GAChB,MAAO,CAACA,EAAQ,KAAMA,EAAQ,MAKhC,IAAIkH,EAAM/I,EAAoB,KAW9B,SAASgJ,EAAiB1H,EAAOgE,EAAI2D,GACnC,IAAIC,EAAM5D,EAAG4D,IACTC,EAAM7D,EAAG6D,IAUb,YARYC,IAARF,GAAqB5H,EAAQ4H,EAE/B5H,EAAQ2H,EAAUrG,OAAOmG,EAAiB,EAAxBnG,CAA2BsG,EAAK5H,EAAO2H,EAAQC,KAAOzE,KAAK0E,IAAI7H,EAAO4H,QACvEE,IAARD,GAAqB7H,EAAQ6H,IAEtC7H,EAAQ2H,EAAUrG,OAAOmG,EAAiB,EAAxBnG,CAA2BuG,EAAK7H,EAAO2H,EAAQE,KAAO1E,KAAKyE,IAAI5H,EAAO6H,IAGnF7H,EAwBT,SAAS+H,EAA4BC,EAAMJ,EAAKC,GAC9C,MAAO,CACLD,SAAaE,IAARF,EAAoBI,EAAKJ,IAAMA,OAAME,EAC1CD,SAAaC,IAARD,EAAoBG,EAAKH,IAAMA,GAAOG,EAAKH,IAAMG,EAAKJ,UAAOE,GAwBtE,SAASG,EAA4BC,EAAYC,GAC/C,IAAInE,EAEA4D,EAAMO,EAAgBP,IAAMM,EAAWN,IACvCC,EAAMM,EAAgBN,IAAMK,EAAWL,IAO3C,OAJIM,EAAgBN,IAAMM,EAAgBP,IAAMM,EAAWL,IAAMK,EAAWN,MACjBA,GAAzD5D,EAAK1C,OAAOzC,EAA0B,EAAjCyC,CAAoC,CAACuG,EAAKD,GAAM,IAAa,GAAIC,EAAM7D,EAAG,IAG1E,CACL4D,IAAKM,EAAWN,IAAMA,EACtBC,IAAKK,EAAWN,IAAMC,GAgE1B,SAASO,EAAmBC,EAAaC,EAAUC,GACjD,MAAO,CACLX,IAAKY,EAAoBH,EAAaC,GACtCT,IAAKW,EAAoBH,EAAaE,IAI1C,SAASC,EAAoBH,EAAaI,GACxC,IAAIzE,EAEJ,MAA8B,kBAAhBqE,EAA2BA,EAA4C,QAA7BrE,EAAKqE,EAAYI,UAA2B,IAAPzE,EAAgBA,EAAK,EAgBpH,SAAS0E,EAAenH,EAAS2C,GAC/B,IAAIyE,EAAMpH,EAAQqH,wBAClB,OAAOtH,OAAOiG,EAA8C,EAArDjG,CAAwDA,OAAOiG,EAAuC,EAA9CjG,CAAiDqH,EAAKzE,IAKvH,IAAI2E,EAAQnK,EAAoB,KAG5BoK,GAAiBpK,EAAoB,KAazC,SAASqK,GAAOC,EAAOjI,EAAQkI,GAS7B,YARe,IAAXlI,IACFA,EAAS,QAGS,IAAhBkI,IACFA,EAAc,KAGT5F,EAAS2F,EAAOjI,GAAUkI,EAGnC,SAASC,GAAWlB,GAClB,OAAOA,EAAKH,IAAMG,EAAKJ,IAQzB,SAASuB,GAAWC,EAAQrI,GAC1B,IA9BoDsI,EA8BhDC,EAAS,GACTC,EAAeL,GAAWE,GAC1BI,EAAeN,GAAWnI,GAQ9B,OANIyI,EAAeD,EACjBD,EAAShI,OAAOwH,GAAiC,EAAxCxH,CAA2CP,EAAO6G,IAAK7G,EAAO8G,IAAM0B,EAAcH,EAAOxB,KACzF2B,EAAeC,IACxBF,EAAShI,OAAOwH,GAAiC,EAAxCxH,CAA2C8H,EAAOxB,IAAKwB,EAAOvB,IAAM2B,EAAczI,EAAO6G,MArChDyB,EAwCpBC,EAvCzBhI,OAAOuH,EAAqB,EAA5BvH,CAA+B,EAAG,EAAG+H,GAiD9C,SAASI,GAAgBzD,EAAOoD,EAAQrI,EAAQuI,QAC/B,IAAXA,IACFA,EAAS,IAGXtD,EAAMsD,OAASA,EACftD,EAAM0D,YAAcpI,OAAOmG,EAAiB,EAAxBnG,CAA2B8H,EAAOxB,IAAKwB,EAAOvB,IAAK7B,EAAMsD,QAC7EtD,EAAM2D,MAAQT,GAAWnI,GAAUmI,GAAWE,GAC1CL,GAAO/C,EAAM2D,MAAO,EAAG,QAAS3D,EAAM2D,MAAQ,GAClD3D,EAAM4D,UAAYtI,OAAOmG,EAAiB,EAAxBnG,CAA2BP,EAAO6G,IAAK7G,EAAO8G,IAAK7B,EAAMsD,QAAUtD,EAAM0D,YACvFX,GAAO/C,EAAM4D,aAAY5D,EAAM4D,UAAY,GAUjD,SAASC,GAAe7D,EAAOoD,EAAQrI,EAAQuI,GAC7CG,GAAgBzD,EAAM9F,EAAGkJ,EAAOlJ,EAAGa,EAAOb,EAAG4J,GAAcR,EAAOS,UAClEN,GAAgBzD,EAAM7F,EAAGiJ,EAAOjJ,EAAGY,EAAOZ,EAAG2J,GAAcR,EAAOU,UAQpE,SAASF,GAAcR,GACrB,MAAyB,kBAAXA,EAAsBA,EAAS,GAG/C,SAASW,GAAiBlJ,EAAQmJ,EAAUC,GAC1CpJ,EAAO6G,IAAMuC,EAAOvC,IAAMsC,EAAStC,IACnC7G,EAAO8G,IAAM9G,EAAO6G,IAAMsB,GAAWgB,GAUvC,IAGIE,GAHAC,GAAc3L,EAAoB,MAKtC,SAAW0L,GACTA,EAAuB,QAAI,UAC3BA,EAAqB,MAAI,aACzBA,EAAmB,IAAI,WACvBA,EAAoB,KAAI,YACxBA,EAAqB,MAAI,aACzBA,EAAoB,KAAI,OAN1B,CAOGA,KAAkBA,GAAgB,KAIrC,IAAIE,GAAQ5L,EAAoB,KAUhC,SAAS6L,GAAuBJ,EAAQK,GACtC,MAAO,CACL5C,IAAK4C,EAAM5C,IAAMuC,EAAOvC,IACxBC,IAAK2C,EAAM3C,IAAMsC,EAAOvC,KAI5B,SAAS6C,GAAmBN,EAAQK,GAClC,MAAO,CACLtK,EAAGqK,GAAuBJ,EAAOjK,EAAGsK,EAAMtK,GAC1CC,EAAGoK,GAAuBJ,EAAOhK,EAAGqK,EAAMrK,IAI9C,SAASuK,GAAwBC,EAAMC,GACrC,IAAIC,EAASF,EAAKG,cACdC,EAASH,EAAKE,cAClB,OAAOD,IAAWE,QAAqBjD,IAAXiD,GAAwBJ,IAASC,EAK/D,SAASI,GAAYC,GACnB,IAAIjH,EAAKiH,EAAcC,WACnBjE,EAAOjD,EAAGiD,KACVkE,EAASnH,EAAGmH,OAEhB,OAAOlE,IAASkE,EAclB,SAASC,GAAUpD,EAAMqD,GACvBrD,EAAKJ,IAAMyD,EAAWzD,IACtBI,EAAKH,IAAMwD,EAAWxD,IAkBxB,SAASyD,GAAWtL,EAAO2J,EAAOD,GAGhC,OAAOA,EADMC,GADY3J,EAAQ0J,GASnC,SAAS6B,GAAgBvL,EAAO4J,EAAWD,EAAOD,EAAa8B,GAK7D,YAJiB1D,IAAb0D,IACFxL,EAAQsL,GAAWtL,EAAOwL,EAAU9B,IAG/B4B,GAAWtL,EAAO2J,EAAOD,GAAeE,EAOjD,SAAS6B,GAAezD,EAAM4B,EAAWD,EAAOD,EAAa8B,QACzC,IAAd5B,IACFA,EAAY,QAGA,IAAVD,IACFA,EAAQ,GAGV3B,EAAKJ,IAAM2D,GAAgBvD,EAAKJ,IAAKgC,EAAWD,EAAOD,EAAa8B,GACpExD,EAAKH,IAAM0D,GAAgBvD,EAAKH,IAAK+B,EAAWD,EAAOD,EAAa8B,GAOtE,SAASE,GAAc/C,EAAK3E,GAC1B,IAAI9D,EAAI8D,EAAG9D,EACPC,EAAI6D,EAAG7D,EACXsL,GAAe9C,EAAIzI,EAAGA,EAAE0J,UAAW1J,EAAEyJ,MAAOzJ,EAAEwJ,aAC9C+B,GAAe9C,EAAIxI,EAAGA,EAAEyJ,UAAWzJ,EAAEwJ,MAAOxJ,EAAEuJ,aAShD,SAASiC,GAAoBC,EAAO5D,EAAM6D,EAAY7H,GACpD,IAAI8H,EAAKxK,OAAOzC,EAA0B,EAAjCyC,CAAoC0C,EAAI,GAC7C+H,EAAMD,EAAG,GACTE,EAAWF,EAAG,GACdG,EAAYH,EAAG,GAGnBF,EAAMhE,IAAMI,EAAKJ,IACjBgE,EAAM/D,IAAMG,EAAKH,IACjB,IAAIqE,OAAuCpE,IAA1B+D,EAAWI,GAA2BJ,EAAWI,GAAa,GAC3EvC,EAAcpI,OAAOmG,EAAiB,EAAxBnG,CAA2B0G,EAAKJ,IAAKI,EAAKH,IAAKqE,GAEjET,GAAeG,EAAOC,EAAWE,GAAMF,EAAWG,GAAWtC,EAAamC,EAAWlC,OAOvF,IAAIwC,GAAQ,CAAC,IAAK,SAAU,WACxBC,GAAQ,CAAC,IAAK,SAAU,WAK5B,SAASC,GAAmBC,EAAU3D,EAAKkD,GACzCF,GAAoBW,EAASpM,EAAGyI,EAAIzI,EAAG2L,EAAYM,IACnDR,GAAoBW,EAASnM,EAAGwI,EAAIxI,EAAG0L,EAAYO,IAOrD,SAASG,GAAiBvM,EAAO4J,EAAWD,EAAOD,EAAa8B,GAQ9D,OANAxL,EAAQsL,GADRtL,GAAS4J,EACiB,EAAID,EAAOD,QAEpB5B,IAAb0D,IACFxL,EAAQsL,GAAWtL,EAAO,EAAIwL,EAAU9B,IAGnC1J,EA8BT,SAASwM,GAAqBxE,EAAM6D,EAAY7H,GAC9C,IAAI8H,EAAKxK,OAAOzC,EAA0B,EAAjCyC,CAAoC0C,EAAI,GAC7C+H,EAAMD,EAAG,GACTE,EAAWF,EAAG,GACdG,EAAYH,EAAG,IA3BrB,SAAyB9D,EAAM4B,EAAWD,EAAOL,EAAQkC,QACrC,IAAd5B,IACFA,EAAY,QAGA,IAAVD,IACFA,EAAQ,QAGK,IAAXL,IACFA,EAAS,IAGX,IAAII,EAAcpI,OAAOmG,EAAiB,EAAxBnG,CAA2B0G,EAAKJ,IAAKI,EAAKH,IAAKyB,GAAUM,EAC3E5B,EAAKJ,IAAM2E,GAAiBvE,EAAKJ,IAAKgC,EAAWD,EAAOD,EAAa8B,GACrExD,EAAKH,IAAM0E,GAAiBvE,EAAKH,IAAK+B,EAAWD,EAAOD,EAAa8B,GAcrEiB,CAAgBzE,EAAM6D,EAAWE,GAAMF,EAAWG,GAAWH,EAAWI,GAAYJ,EAAWlC,OAQjG,SAAS+C,GAAoB/D,EAAKkD,GAChCW,GAAqB7D,EAAIzI,EAAG2L,EAAYM,IACxCK,GAAqB7D,EAAIxI,EAAG0L,EAAYO,IAmE1C,IA6BIO,GA7BAC,GAAelO,EAAoB,KAwBnCmO,GAAsB,IAAIC,QAO1BC,GAEJ,WACE,SAASC,EAA0BhJ,GACjC,IAAIiH,EAAgBjH,EAAGiH,cAOvB3M,KAAK2O,YAAa,EAOlB3O,KAAK4O,iBAAmB,KAOxB5O,KAAK6O,aAAc,EAOnB7O,KAAKqJ,QAAUrG,OAAOiG,EAA0B,EAAjCjG,GAOfhD,KAAK8O,MAAQ,GAKb9O,KAAK+O,uBAAwB,EAS7B/O,KAAKgP,eAAiB,CACpBpN,EAAG,GACHC,EAAG,IAIL7B,KAAKoL,YAAc,GAInBpL,KAAKiP,eAAiB,KAKtBjP,KAAKkP,WAAa,KAClBlP,KAAK2M,cAAgBA,EACrB3M,KAAK2M,cAAcwC,yBACnBZ,GAAoBa,IAAIzC,EAAe3M,MAumBzC,OA9lBA0O,EAA0BnH,UAAU8H,MAAQ,SAAUC,EAAa5J,GACjE,IAAIC,EAAQ3F,KAERwN,OAAY,IAAP9H,EAAgB,GAAKA,EAC1B6J,EAAK/B,EAAGgC,aACRA,OAAsB,IAAPD,GAAwBA,EACvCP,EAAiBxB,EAAGwB,eAiKpBpJ,EAAqB5F,KAAK8O,MAAMlJ,mBACpC5F,KAAKkP,WAAa,IAAI3J,EAAsB+J,EAAa,CACvDjI,eAjKmB,SAAwBvG,GAC3C,IAAI4E,EAIJC,EAAM8J,aAQN,IAAIC,EAhpCV,SAAmC5O,GACjC,OAAOiB,EAAiBjB,EAAO,UA+oCR6O,CAA0B7O,GAAOY,MACtB,QAA7BgE,EAAKC,EAAMiK,oBAAiC,IAAPlK,GAAyBA,EAAGmK,KAAKlK,GACvEA,EAAMiK,aAAe5M,OAAOsL,GAAkC,EAAzCtL,EAA4C,SAAU8M,EAAMC,GAC/E,IAAIC,EAAYhN,OAAOgJ,GAA0C,EAAjDhJ,CAAoD2C,EAAMgH,eACtEsD,EAAWjN,OAAOgJ,GAAyC,EAAhDhJ,CAAmD2C,EAAMgH,eAEpEuD,EAAOlN,OAAOzC,EAAiC,EAAxCyC,CAA2CA,OAAOzC,EAAiC,EAAxCyC,CAA2C,GAAIA,OAAOzC,EAA0B,EAAjCyC,CAAoCgN,IAAahN,OAAOzC,EAA0B,EAAjCyC,CAAoCiN,IAEtLE,GAA6B,EAMjCxK,EAAMyK,gBAAkBzK,EAAMgH,cAAc0D,uBAC5CN,GAAM,WACJG,EAAKI,SAAQ,SAAUrN,GACrB,OAAOA,EAAQsN,uBAGnBT,GAAK,WACH9M,OAAOgJ,GAAuC,EAA9ChJ,CAAiD2C,EAAMgH,eACvDsD,EAASK,QAAQtE,GAAuC,MAE1D+D,GAAM,WACJG,EAAKI,SAAQ,SAAUrN,GACrB,OAAOA,EAAQuN,sBAGbhB,IACFW,EAA6BxK,EAAM6J,aAAaE,OAGpDI,GAAK,WACkBW,QAAQ9K,EAAM+K,mBAAmB,OAAS/K,EAAMgL,mBAGnEhL,EAAMgH,cAAciE,wBAAuB,EAAMjL,EAAMgH,cAAckE,oBAAmB,IAG1FlL,EAAMgH,cAAcmE,iCAcpB,IAAIC,EAAapL,EAAMgH,cAAcoE,WACrC7H,GAAS,SAAUQ,GACjB,IAAKyG,EAA4B,CAC/B,IAAIzK,EAAKqL,EAAWtO,OAAOiH,GACvBJ,EAAM5D,EAAG4D,IACTC,EAAM7D,EAAG6D,IACb5D,EAAMqJ,eAAetF,GAAQsF,EAAiBA,EAAetF,GAAQ1G,OAAOwH,GAAiC,EAAxCxH,CAA2CsG,EAAKC,EAAKmG,EAAahG,IAQzI,IAAIsH,EAAYrL,EAAM+K,mBAAmBhH,GAErCsH,IACFrL,EAAMyF,YAAY1B,GAAQsH,EAAUC,aAI1ClB,GAAM,WACJzN,EAAsB,EAAEwE,SACxBxE,EAAsB,EAAE4O,YACxB5O,EAAsB,EAAE6O,SACxB7O,EAAsB,EAAE8O,gBAE1BtB,GAAK,WACH,OAAOnK,EAAM0L,gCAmEjB7K,QA9DY,SAAiB1F,EAAOmF,GACpC,IAAIP,EAAI8H,EAAI+B,EAGR+B,EAAK3L,EAAMmJ,MACXnG,EAAO2I,EAAG3I,KACV4I,EAAkBD,EAAGC,kBAErB5I,GAAS4I,IACP5L,EAAMsJ,gBAAgBtJ,EAAMsJ,iBAChCtJ,EAAMsJ,eAAiBvG,EAAcC,GAEhChD,EAAMsJ,mBAGbjM,OAAOsL,GAAkC,EAAzCtL,GAEA2C,EAAMgJ,YAAa,EACnBhJ,EAAMiJ,iBAAmB,KAEiB,QAAzCpB,GAAM9H,EAAKC,EAAMmJ,OAAO0C,mBAAgC,IAAPhE,GAAyBA,EAAGqC,KAAKnK,EAAI5E,EAAOmF,GAChD,QAA7CsJ,EAAK5J,EAAMgH,cAAc8E,sBAAmC,IAAPlC,GAAyBA,EAAGmC,UAAU5F,GAAc6F,MAAM,KA0ChHlL,OAvCW,SAAgB3F,EAAOmF,GAClC,IAAIP,EAAI8H,EAAI+B,EAAI+B,EAEZM,EAAKjM,EAAMmJ,MACXyC,EAAkBK,EAAGL,gBACrBM,EAAoBD,EAAGC,kBAE3B,GAAKN,GAAoB5L,EAAMsJ,eAA/B,CACA,IAAI3I,EAASL,EAAKK,OAElB,GAAIuL,GAAgD,OAA3BlM,EAAMiJ,iBAO7B,OANAjJ,EAAMiJ,iBA8dd,SAA6BtI,EAAQwL,QACb,IAAlBA,IACFA,EAAgB,IAGlB,IAAIC,EAAY,KAEZlN,KAAKC,IAAIwB,EAAOzE,GAAKiQ,EACvBC,EAAY,IACHlN,KAAKC,IAAIwB,EAAO1E,GAAKkQ,IAC9BC,EAAY,KAGd,OAAOA,EA3ewBC,CAAoB1L,QAEd,OAA3BX,EAAMiJ,mBACsC,QAA7CpB,GAAM9H,EAAKC,EAAMmJ,OAAOmD,uBAAoC,IAAPzE,GAAyBA,EAAGqC,KAAKnK,EAAIC,EAAMiJ,oBAOrGjJ,EAAMuM,WAAW,IAAKjM,EAAKvE,MAAO4E,GAElCX,EAAMuM,WAAW,IAAKjM,EAAKvE,MAAO4E,GAGG,QAApCgL,GAAM/B,EAAK5J,EAAMmJ,OAAOqD,cAA2B,IAAPb,GAAyBA,EAAGzB,KAAKN,EAAIzO,EAAOmF,GAEzFoI,GAAmBvN,IAYnBmG,aATiB,SAAsBnG,EAAOmF,GAC9C,OAAON,EAAMyM,KAAKtR,EAAOmF,KASxB,CACDL,mBAAoBA,KAIxB8I,EAA0BnH,UAAU8J,uBAAyB,WAC3D,IAAI1L,EAAQ3F,KAER0F,EAAK1F,KAAK8O,MACVuD,EAAkB3M,EAAG2M,gBACrBtI,EAAcrE,EAAGqE,YACjBuI,EAAStS,KAAK2M,cAAc4F,iBAAiBC,gBAG/CxS,KAAK6O,cADHwD,IACiBrP,OAAOgG,EAAmC,EAA1ChG,CAA6CqP,GAAmBrS,KAAKyS,sBAAsBH,EAAQD,GArzB5H,SAAiCK,EAAWhN,GAC1C,IAAIiN,EAAMjN,EAAGiN,IACTC,EAAOlN,EAAGkN,KACVC,EAASnN,EAAGmN,OACZC,EAAQpN,EAAGoN,MACf,MAAO,CACLlR,EAAG6H,EAA4BiJ,EAAU9Q,EAAGgR,EAAME,GAClDjR,EAAG4H,EAA4BiJ,EAAU7Q,EAAG8Q,EAAKE,IA8yB0FE,CAAwBT,EAAQD,IAK3KrS,KAAKqJ,QA3uBT,SAA4BU,GAO1B,OANoB,IAAhBA,EACFA,EAAc,GACW,IAAhBA,IACTA,EATiB,KAYZ,CACLnI,EAAGkI,EAAmBC,EAAa,OAAQ,SAC3ClI,EAAGiI,EAAmBC,EAAa,MAAO,WAkuB3BiJ,CAAmBjJ,GAM9B/J,KAAK6O,cAAgB7O,KAAK+O,uBAC5B7F,GAAS,SAAUQ,GACb/D,EAAM+K,mBAAmBhH,KAC3B/D,EAAMkJ,YAAYnF,GAvwB5B,SAA+B4I,EAAQzD,GACrC,IAAIoE,EAAsB,GAU1B,YARwBzJ,IAApBqF,EAAYvF,MACd2J,EAAoB3J,IAAMuF,EAAYvF,IAAMgJ,EAAOhJ,UAG7BE,IAApBqF,EAAYtF,MACd0J,EAAoB1J,IAAMsF,EAAYtF,IAAM+I,EAAOhJ,KAG9C2J,EA4vB2BC,CAAsBZ,EAAO5I,GAAO/D,EAAMkJ,YAAYnF,SAMxFgF,EAA0BnH,UAAUkL,sBAAwB,SAAUC,EAAW7D,GAC/E,IAAInJ,EAAK1F,KAAK8O,MACVqE,EAA2BzN,EAAGyN,yBAC9BvN,EAAqBF,EAAGE,mBACxBwN,EAAqBvE,EAAY3L,QACrCF,OAAOpC,EAAiC,EAAxCoC,CAAkE,OAAvBoQ,EAA6B,0GACxEpT,KAAKqT,eAAiBjJ,EAAegJ,EAAoBxN,GACzD,IAAI0N,EA5yBR,SAAiCZ,EAAWW,GAC1C,MAAO,CACLzR,EAAG+H,EAA4B+I,EAAU9Q,EAAGyR,EAAezR,GAC3DC,EAAG8H,EAA4B+I,EAAU7Q,EAAGwR,EAAexR,IAyyBjC0R,CAAwBb,EAAW1S,KAAKqT,gBAMlE,GAAIF,EAA0B,CAC5B,IAAIK,EAAkBL,EAAyBnQ,OAAOiG,EAA8C,EAArDjG,CAAwDsQ,IACvGtT,KAAK+O,wBAA0ByE,EAE3BA,IACFF,EAAsBtQ,OAAOiG,EAA8C,EAArDjG,CAAwDwQ,IAIlF,OAAOF,GAGT5E,EAA0BnH,UAAUkM,WAAa,WAC/C,IAAI/N,EAAI8H,EAERxN,KAAK2M,cAAc+G,yBACU,QAA5BhO,EAAK1F,KAAK4P,oBAAiC,IAAPlK,GAAyBA,EAAGmK,KAAK7P,MACtEA,KAAK2O,YAAa,EAClB3O,KAAKkP,YAAclP,KAAKkP,WAAWnI,MACnC/G,KAAKkP,WAAa,MAEblP,KAAK8O,MAAMyC,iBAAmBvR,KAAKiP,iBACtCjP,KAAKiP,iBACLjP,KAAKiP,eAAiB,MAGqB,QAA5CzB,EAAKxN,KAAK2M,cAAc8E,sBAAmC,IAAPjE,GAAyBA,EAAGkE,UAAU5F,GAAc6F,MAAM,IAGjHjD,EAA0BnH,UAAU6K,KAAO,SAAUtR,EAAOmF,GAC1D,IAAIP,EAAI8H,EAAI+B,EAEe,QAA1B7J,EAAK1F,KAAKkP,kBAA+B,IAAPxJ,GAAyBA,EAAGqB,MAC/D/G,KAAKkP,WAAa,KAClB,IAAIP,EAAa3O,KAAK2O,WAEtB,GADA3O,KAAKyT,aACA9E,EAAL,CACA,IAAI9G,EAAW5B,EAAK4B,SACpB7H,KAAK2T,eAAe9L,GACmB,QAAtC0H,GAAM/B,EAAKxN,KAAK8O,OAAO8E,iBAA8B,IAAPrE,GAAyBA,EAAGM,KAAKrC,EAAI1M,EAAOmF,KAG7FyI,EAA0BnH,UAAUiI,aAAe,SAAU9N,GAC3D,IAAIiE,EAAQ3F,KAEZ,OAAOkJ,GAAS,SAAUQ,GAGxB,GAAKmK,GAAWnK,EAFL/D,EAAMmJ,MAAMnG,KAEKhD,EAAMiJ,kBAAlC,CAEA,IAAIoC,EAAYrL,EAAM+K,mBAAmBhH,GAEzC,IAAIsH,EAUF,OADArL,EAAMqJ,eAAetF,GAAQ,IACtB,EATP,IAAIW,EAAM1E,EAAMgH,cAAc4F,iBAAiBD,OAE3CwB,EAAWzJ,EAAIX,GAAMH,IAAMc,EAAIX,GAAMJ,IACrCyK,EAAS1J,EAAIX,GAAMJ,IAAMwK,EAAW,EACpCxN,EAAS5E,EAAMgI,GAAQqK,EAC3BpO,EAAMyF,YAAY1B,GAAQhI,EAAMgI,GAChCsH,EAAU5B,IAAI9I,OAKf0N,UAAS,IAOdtF,EAA0BnH,UAAU2K,WAAa,SAAUxI,EAAMhI,EAAO4E,GAGtE,GAAKuN,GAAWnK,EAFL1J,KAAK8O,MAAMnG,KAEM3I,KAAK4O,kBACjC,OAAO5O,KAAK0Q,mBAAmBhH,GAAQ1J,KAAKiU,sBAAsBvK,EAAMpD,GAAUtG,KAAKkU,wBAAwBxK,EAAMhI,IAGvHgN,EAA0BnH,UAAU0M,sBAAwB,SAAUvK,EAAMpD,GAC1E,IAAI0K,EAAYhR,KAAK0Q,mBAAmBhH,GACxC,GAAKpD,GAAW0K,EAAhB,CACA,IAAImD,EAAYnU,KAAKoL,YAAY1B,GAAQpD,EAAOoD,GAC5C5C,EAAS9G,KAAK6O,YAAczF,EAAiB+K,EAAWnU,KAAK6O,YAAYnF,GAAO1J,KAAKqJ,QAAQK,IAASyK,EAC1GnD,EAAU5B,IAAItI,KAGhB4H,EAA0BnH,UAAU2M,wBAA0B,SAAUxK,EAAMhI,GAC5E,IAAIgE,EAGA0O,EAAapU,KAAK2M,cAAc4F,iBAAiBD,OAAO5I,GAGxD2K,EAAaD,EAAW7K,IAAM6K,EAAW9K,IAEzCgL,EAAetU,KAAKgP,eAAetF,GAEnCJ,EA/8BR,SAAiC5H,EAAOyF,EAAQoN,EAAU1F,EAAaxF,GAErE,IAAIC,EAAM5H,EAAQyF,EAASoN,EAC3B,OAAO1F,EAAczF,EAAiBE,EAAKuF,EAAaxF,GAAWC,EA48BvDkL,CAAwB9S,EAAMgI,GAAO2K,EAAYC,EAA0C,QAA3B5O,EAAK1F,KAAK6O,mBAAgC,IAAPnJ,OAAgB,EAASA,EAAGgE,GAAO1J,KAAKqJ,QAAQK,IAE7J1J,KAAK2M,cAAc8H,wBAAwB/K,EAAMJ,EAAKA,EAAM+K,IAG9D3F,EAA0BnH,UAAUmN,SAAW,SAAUhP,GACvD,IAAI8H,EAAK9H,EAAGiD,KACRA,OAAc,IAAP6E,GAAwBA,EAC/B+B,EAAK7J,EAAGmM,kBACRA,OAA2B,IAAPtC,GAAwBA,EAC5C+B,EAAK5L,EAAG6L,gBACRA,OAAyB,IAAPD,GAAwBA,EAC1CM,EAAKlM,EAAG2M,gBACRA,OAAyB,IAAPT,GAAwBA,EAC1C+C,EAAKjP,EAAGqE,YACRA,OAAqB,IAAP4K,EA53BD,IA43BkCA,EAC/CC,EAAKlP,EAAGmP,aACRA,OAAsB,IAAPD,GAAuBA,EACtCE,EAAiB9R,OAAOzC,EAA0B,EAAjCyC,CAAoC0C,EAAI,CAAC,OAAQ,oBAAqB,kBAAmB,kBAAmB,cAAe,iBAEhJ1F,KAAK8O,MAAQ9L,OAAOzC,EAA4B,EAAnCyC,CAAsC,CACjD2F,KAAMA,EACNkJ,kBAAmBA,EACnBN,gBAAiBA,EACjBc,gBAAiBA,EACjBtI,YAAaA,EACb8K,aAAcA,GACbC,IAYLpG,EAA0BnH,UAAUmJ,mBAAqB,SAAUhH,GACjE,IAAIhE,EAAK1F,KAAK8O,MACVwD,EAAS5M,EAAG4M,OACZyC,EAAWrP,EAAGqP,SACdC,EAAU,QAAUtL,EAAKuL,cAE7B,OAAIjV,KAAK8O,MAAMkG,GACNhV,KAAK8O,MAAMkG,GACR1C,QAAuB9I,IAAbuL,OAAf,EACE/U,KAAK2M,cAAcuI,SAASxL,EAAM,IAI7CgF,EAA0BnH,UAAU6I,aAAe,WACjD,OAAQpQ,KAAK0Q,mBAAmB,MAGlChC,EAA0BnH,UAAUoJ,eAAiB,WACnD,IAAIjL,EAAK1F,KAAK8O,MACVjC,EAASnH,EAAGmH,OACZsI,EAASzP,EAAGyP,OAChB,OAAOtI,GAAUsI,GAGnBzG,EAA0BnH,UAAUoM,eAAiB,SAAU9L,GAC7D,IAAIlC,EAAQ3F,KAER0F,EAAK1F,KAAK8O,MACVnG,EAAOjD,EAAGiD,KACVkM,EAAenP,EAAGmP,aAClB9K,EAAcrE,EAAGqE,YACjBqL,EAAiB1P,EAAG0P,eAMpBC,EAhhBR,SAAqC1I,EAAeyD,QAC7B,IAAjBA,IACFA,GAAe,GAGjB,IAEI9J,EAFAgP,EAAmB3I,EAAc4I,sBACrC,QAAKD,IAGDlF,EAEFhC,GADA9H,EAAS6F,GAAmBmJ,EAAiBvE,WAAWtO,OAAQkK,EAAcoE,WAAWtO,QAC7D6S,EAAiBE,mBAE7ClP,EAAS6F,GAAmBmJ,EAAiB/C,iBAAiBD,OAAQ3F,EAAc4F,iBAAiBD,QAGvGpJ,GAAS,SAAUQ,GACjB,OAAOiD,EAAc8H,wBAAwB/K,EAAMpD,EAAOoD,GAAMJ,IAAKhD,EAAOoD,GAAMH,KAAK,OAElF,GA6fYkM,CAA4BzV,KAAK2M,cAAe3M,KAAKoQ,iBAAmBpQ,KAAK2Q,kBAM1F9B,EAAc7O,KAAK6O,aAAe,GAEtC,GAAIwG,GAAcrS,OAAO0S,KAAK7G,GAAa1H,QAAUnH,KAAKoQ,eAAgB,CACxE,IAAIkF,EAAmBtV,KAAK2M,cAAc4I,sBAE1C,GAAID,EAAkB,CACpB,IAAIK,EAAwBxJ,GAAmBmJ,EAAiBvE,WAAW6E,YAAa/G,GACxF3F,GAAS,SAAUQ,GACjB,IAAIhE,EAAKiQ,EAAsBjM,GAC3BJ,EAAM5D,EAAG4D,IACTC,EAAM7D,EAAG6D,IACbsF,EAAYnF,GAAQ,CAClBJ,IAAKuM,MAAMvM,QAAOE,EAAYF,EAC9BC,IAAKsM,MAAMtM,QAAOC,EAAYD,OAMtC,IAAIuM,EAAqB5M,GAAS,SAAUQ,GAC1C,IAAIhE,EAEJ,GAAKmO,GAAWnK,EAAMf,EAAMhD,EAAMiJ,kBAAlC,CAIA,IAAImH,EAAoG,QAAtFrQ,EAAqB,OAAhBmJ,QAAwC,IAAhBA,OAAyB,EAASA,EAAYnF,UAA0B,IAAPhE,EAAgBA,EAAK,GAQjIsQ,EAAkBjM,EAAc,IAAM,IACtCkM,EAAgBlM,EAAc,GAAK,IAEnCmM,EAAUlT,OAAOzC,EAA4B,EAAnCyC,CAAsCA,OAAOzC,EAA4B,EAAnCyC,CAAsC,CACxFmT,KAAM,UACNtO,SAAUgN,EAAehN,EAAS6B,GAAQ,EAC1CsM,gBAAiBA,EACjBC,cAAeA,EACfG,aAAc,IACdC,UAAW,EACXC,UAAW,IACVlB,GAAiBW,GAKpB,OAAOpQ,EAAM+K,mBAAmBhH,GAAQ/D,EAAM4Q,wBAAwB7M,EAAMwM,GAAWvQ,EAAMgH,cAAc6J,qBAAqB9M,EAAMwM,EAASb,OAGjJ,OAAOoB,QAAQC,IAAIZ,GAAoBa,MAAK,WAC1C,IAAIjR,EAAI8H,EAE0C,QAAjDA,GAAM9H,EAAKC,EAAMmJ,OAAO8H,2BAAwC,IAAPpJ,GAAyBA,EAAGqC,KAAKnK,OAI/FgJ,EAA0BnH,UAAUkI,WAAa,WAC/C,IAAI9J,EAAQ3F,KAEZkJ,GAAS,SAAUQ,GACjB,IAAIsH,EAAYrL,EAAM+K,mBAAmBhH,GAEzCsH,EAAYA,EAAUoB,OAASzM,EAAMgH,cAAckK,0BAIvDnI,EAA0BnH,UAAUgP,wBAA0B,SAAU7M,EAAMqM,GAC5E,IAAI/E,EAAYhR,KAAK0Q,mBAAmBhH,GACxC,GAAKsH,EAAL,CACA,IAAI8F,EAAe9F,EAAUC,MAI7B,OAHAD,EAAU5B,IAAI0H,GACd9F,EAAU5B,IAAI0H,GAEP9T,OAAO+I,GAAoC,EAA3C/I,CAA8C0G,EAAMsH,EAAW,EAAG+E,KAG3ErH,EAA0BnH,UAAUyF,WAAa,WAC/C,IAAIrH,EAAQ3F,KAER0F,EAAK1F,KAAK8O,MACVnG,EAAOjD,EAAGiD,KACV0J,EAAkB3M,EAAG2M,gBACzB,GAAKrP,OAAOgG,EAAmC,EAA1ChG,CAA6CqP,IAAqBrS,KAAKqT,eAA5E,CAEArT,KAAKyP,aAEL,IAAIsH,EAAc,CAChBnV,EAAG,EACHC,EAAG,GAELqH,GAAS,SAAUQ,GACjBqN,EAAYrN,GAAQmB,GAAWlF,EAAMgH,cAAcoE,WAAWtO,OAAOiH,GAAO/D,EAAM0N,eAAe3J,OAQnG1J,KAAKgX,mBAAkB,WACrB9N,GAAS,SAAUQ,GACjB,GAAKmK,GAAWnK,EAAMf,EAAM,MAA5B,CAGA,IAAIjD,EAtkCZ,SAAkCgE,EAAMmF,EAAa0F,GACnD,IAAIF,EAAa3K,EAAKH,IAAMG,EAAKJ,IAC7BA,EAAMtG,OAAOmG,EAAiB,EAAxBnG,CAA2B6L,EAAYvF,IAAKuF,EAAYtF,IAAM8K,EAAYE,GACpF,MAAO,CACLjL,IAAKA,EACLC,IAAKD,EAAM+K,GAikCE4C,CAAyBtR,EAAMgH,cAAcoE,WAAWtO,OAAOiH,GAAO/D,EAAM0N,eAAe3J,GAAOqN,EAAYrN,IACnHJ,EAAM5D,EAAG4D,IACTC,EAAM7D,EAAG6D,IAEb5D,EAAMgH,cAAc8H,wBAAwB/K,EAAMJ,EAAKC,UAQ3D2N,WAAW5I,GAAkC,EAAG,KAGlDI,EAA0BnH,UAAUyP,kBAAoB,SAAUG,GAChE,IAAIxR,EAAQ3F,KAEZA,KAAK4P,aAAe5M,OAAOsL,GAAkC,EAAzCtL,EAA4C,SAAU8M,EAAMC,GAC9E,IAAIC,EAAYhN,OAAOgJ,GAA0C,EAAjDhJ,CAAoD2C,EAAMgH,eAC1EoD,GAAM,WACJ,OAAOC,EAAUM,SAAQ,SAAUrN,GACjC,OAAOA,EAAQsN,uBAGnBT,GAAK,WACH,OAAO9M,OAAOgJ,GAAuC,EAA9ChJ,CAAiD2C,EAAMgH,kBAEhEoD,GAAM,WACJ,OAAOC,EAAUM,SAAQ,SAAUrN,GACjC,OAAOA,EAAQuN,yBAGnBV,GAAK,WACHnK,EAAM0L,4BAEJ8F,GAASpH,EAAMoH,OAIvBzI,EAA0BnH,UAAU6P,MAAQ,SAAUzK,GACpD,IAAIhH,EAAQ3F,KAORqX,EAAsBjT,EALZuI,EAAc2K,cAKuB,eAAe,SAAUxW,GAC1E,IAAI4E,EAAKC,EAAMmJ,MACXnG,EAAOjD,EAAGiD,KACV6E,EAAK9H,EAAG6R,aAEZ5O,SAD0B,IAAP6E,GAAuBA,IAClB7H,EAAM0J,MAAMvO,MAOlC0W,EAAqBhV,EAAYwB,OAAQ,UAAU,WACrD2B,EAAMqH,gBAOJyK,EAA2B9K,EAAc+K,gBAAe,WACtD/R,EAAMgJ,YACRhJ,EAAM0L,4BAQNsG,EAAiBhL,EAAcgL,eAYnC,OAVIA,GACF3X,KAAKqP,MAAMhB,GAAkB,CAC3BW,eAAgB2I,IAQb,WACmB,OAAxBN,QAAwD,IAAxBA,GAA0CA,IACnD,OAAvBG,QAAsD,IAAvBA,GAAyCA,IAC3C,OAA7BC,QAAkE,IAA7BA,GAA+CA,IAEpF9R,EAAM8N,eAIH/E,EA5qBT,GA+qBA,SAASmF,GAAW9B,EAAWpJ,EAAMiG,GACnC,QAAiB,IAATjG,GAAiBA,IAASoJ,KAAoC,OAArBnD,GAA6BA,IAAqBmD,GA6BrG,IAAI6F,GAAexX,EAAoB,KAuCvC,IAAIyX,GAAqBzX,EAAoB,KA2D7C,IAAI0X,GAA0B,SAAiCC,GAC7D,OAAO,SAAUjJ,GAEf,OADAiJ,EAAKjJ,GACE,OASPkJ,GAAY,CACdC,IAAKH,IAnDP,SAAuBpS,GACrB,IAAIwS,EAAQxS,EAAGwS,MACXC,EAAazS,EAAGyS,WAChBC,EAAW1S,EAAG0S,SACdC,EAAoB3S,EAAG2S,kBACvB1L,EAAgBjH,EAAGiH,cACnB2L,EAAeJ,GAASC,GAAcC,GAAYC,EAClDnJ,EAAalM,OAAOxC,EAAc,OAArBwC,CAAwB,MACrC4C,EAAqB5C,OAAOxC,EAAkB,WAAzBwC,CAA4BrC,EAAiD,GAAGiF,mBACrGH,EAAW,CACb4B,eAAgBgR,EAChB7R,QAAS2R,EACT1R,OAAQyR,EACRlR,MAAO,SAAelG,EAAOmF,GAC3BiJ,EAAWhM,QAAU,KACrBkV,GAAYA,EAAStX,EAAOmF,KAGhCjD,OAAOxC,EAAiB,UAAxBwC,EAA2B,WACE,OAAvBkM,EAAWhM,SACbgM,EAAWhM,QAAQsE,eAAe/B,MAUtCpB,EAAgBsI,EAAe,cAAe2L,GAN9C,SAAuBxX,GACrBoO,EAAWhM,QAAU,IAAIqC,EAAsBzE,EAAO2E,EAAU,CAC9DG,mBAAoBA,MAKxB5C,OAAO6U,GAA6C,EAApD7U,EAAuD,WACrD,OAAOkM,EAAWhM,SAAWgM,EAAWhM,QAAQ6D,YAoBlD4B,KAAMmP,IAlGR,SAAiBhJ,GACf,IAAIyJ,EAAoBzJ,EAAM0J,aAC1B7L,EAAgBmC,EAAMnC,cACtB/G,EAAqB5C,OAAOxC,EAAkB,WAAzBwC,CAA4BrC,EAAiD,GAAGiF,mBACrG4S,EAAexV,OAAO4U,GAAkC,EAAzC5U,EAA4C,WAC7D,OAAO,IAAIyL,GAAoD,CAC7D9B,cAAeA,OAGnB6L,EAAa9D,SAAS1R,OAAOzC,EAA4B,EAAnCyC,CAAsCA,OAAOzC,EAA4B,EAAnCyC,CAAsC,GAAI8L,GAAQ,CAC5GlJ,mBAAoBA,KAItB5C,OAAOxC,EAAiB,UAAxBwC,EAA2B,WACzB,OAAOuV,GAAqBA,EAAkBE,UAAUD,KACvD,CAACA,IAEJxV,OAAOxC,EAAiB,UAAxBwC,EAA2B,WACzB,OAAOwV,EAAapB,MAAMzK,KACzB,QAkFD+L,GAAQtY,EAAoB,KAG5BuY,GAAevY,EAAoB,KAGnCwY,GAAmBxY,EAAoB,KAGvCyY,GAAQzY,EAAoB,KAG5B0Y,GAAU1Y,EAAoB,KAMlC,SAAS2Y,GAAcrO,GACrB,MAAwB,kBAAVA,GAAsBA,EAAMsO,WAAW,UAavD,IAAIC,GAAmB,uDAevB,SAASC,GAAiBhW,EAASD,EAASkW,QAC5B,IAAVA,IACFA,EAAQ,GAGVnW,OAAOpC,EAAiC,EAAxCoC,CAA2CmW,GAP9B,EAOiD,yDAA4DjW,EAAU,wDAEpI,IAAIwC,EAAK1C,OAAOzC,EAA0B,EAAjCyC,CApBX,SAA0BE,GACxB,IAAIkW,EAAQH,GAAiBI,KAAKnW,GAClC,IAAKkW,EAAO,MAAO,CAAC,GAEpB,IAAI1T,EAAK1C,OAAOzC,EAA0B,EAAjCyC,CAAoCoW,EAAO,GAIpD,MAAO,CAHK1T,EAAG,GACAA,EAAG,IAc2B4T,CAAiBpW,GAAU,GACpEqW,EAAQ7T,EAAG,GACX8T,EAAW9T,EAAG,GAGlB,GAAK6T,EAAL,CAEA,IAAIE,EAAWzV,OAAO0V,iBAAiBzW,GAAS0W,iBAAiBJ,GAEjE,OAAIE,EACKA,EAASG,OACPb,GAAcS,GAEhBN,GAAiBM,EAAUvW,EAASkW,EAAQ,GAE5CK,GA6DX,SAASK,GAAgBC,EAAQpQ,GAC/B,OAAOoQ,GAAUpQ,EAAKH,IAAMG,EAAKJ,KAAO,IAoC1C,IAAIyQ,GAAW,QAwDf,IAAIC,GAA6B,CAC/BC,QAlFF,SAA6BC,EAAQC,EAAczU,GACjD,IAAIjD,EAASiD,EAAGjD,OAMhB,GAAsB,kBAAXyX,EAAqB,CAC9B,IAAIrB,GAAkB,EAAEuB,KAAKF,GAG3B,OAAOA,EAFPA,EAASG,WAAWH,GAaxB,OAFQL,GAAgBK,EAAQzX,EAAOb,GAE5B,KADHiY,GAAgBK,EAAQzX,EAAOZ,GACjB,MA8DpByY,GAAyB,CAC3BC,aAAcvX,OAAOzC,EAA4B,EAAnCyC,CAAsCA,OAAOzC,EAA4B,EAAnCyC,CAAsC,GAAIgX,IAA6B,CACzHQ,QAAS,CAAC,sBAAuB,uBAAwB,yBAA0B,6BAErFC,oBAAqBT,GACrBU,qBAAsBV,GACtBW,uBAAwBX,GACxBY,wBAAyBZ,GACzBa,UAAW,CACTZ,QAlEJ,SAA0BC,EAAQxU,GAChC,IAAIgC,EAAQhC,EAAGgC,MACXoT,EAAYpV,EAAGoV,UACfC,EAAWb,EAKXc,EAAuBd,EAAOlG,SAAS,QACvCiH,EAAe,GAEfD,IACFd,EAASA,EAAOgB,QAAQjC,IAAkB,SAAUG,GAElD,OADA6B,EAAahb,KAAKmZ,GACXW,OAIX,IAAIoB,EAASrC,GAAyB,EAAEsC,MAAMlB,GAE9C,GAAIiB,EAAOhU,OAAS,EAAG,OAAO4T,EAC9B,IAAIM,EAAWvC,GAAyB,EAAEwC,kBAAkBpB,GACxD5T,EAA8B,kBAAd6U,EAAO,GAAkB,EAAI,EAE7CI,EAAS7T,EAAM9F,EAAEyJ,MAAQyP,EAAUlZ,EACnC4Z,EAAS9T,EAAM7F,EAAEwJ,MAAQyP,EAAUjZ,EACvCsZ,EAAO,EAAI7U,IAAWiV,EACtBJ,EAAO,EAAI7U,IAAWkV,EAQtB,IAAIC,EAAezY,OAAOmG,EAAiB,EAAxBnG,CAA2BuY,EAAQC,EAAQ,IAE5B,kBAAvBL,EAAO,EAAI7U,KAAsB6U,EAAO,EAAI7U,IAAWmV,GAEhC,kBAAvBN,EAAO,EAAI7U,KAAsB6U,EAAO,EAAI7U,IAAWmV,GAClE,IAAIC,EAASL,EAASF,GAEtB,GAAIH,EAAsB,CACxB,IAAIW,EAAM,EACVD,EAASA,EAAOR,QAAQnB,IAAU,WAChC,IAAI6B,EAAcX,EAAaU,GAE/B,OADAA,IACOC,KAIX,OAAOF,KAgCLG,GAEJ,SAAUC,GAGR,SAASC,IACP,IAAIpW,EAAmB,OAAXmW,GAAmBA,EAAOE,MAAMhc,KAAMic,YAAcjc,KAgKhE,OAzJA2F,EAAMuW,YAAclZ,OAAOiG,EAA0B,EAAjCjG,GAMpB2C,EAAMwW,uBAAyBnZ,OAAOiG,EAA0B,EAAjCjG,GAK/B2C,EAAMyW,YAAc,CAClBxa,GAAG,EACHC,GAAG,GAEL8D,EAAM0W,kBAAoB,CACxBza,OAAG4H,EACH3H,OAAG2H,GAEL7D,EAAM2W,iBAAkB,EAExB3W,EAAM4W,QAAU,SAAU9Z,EAAQuI,EAAQtF,QAC7B,IAAPA,IACFA,EAAK,IAGP,IAAI8W,EAAY9W,EAAG8W,UACfC,EAAY/W,EAAG+W,UACfC,EAAmBhX,EAAGgX,iBACtBC,EAAqBjX,EAAGiX,mBACxBC,EAAalX,EAAGkX,WAChBC,EAAanX,EAAGmX,WAChBC,EAAS9Z,OAAOzC,EAA0B,EAAjCyC,CAAoC0C,EAAI,CAAC,YAAa,YAAa,mBAAoB,qBAAsB,aAAc,eAEpI8H,EAAK7H,EAAMmJ,MACXnC,EAAgBa,EAAGb,cACnB2F,EAAS9E,EAAG8E,OAKhB,IAA2B,IAAvBqK,EAEF,OADAhX,EAAM2W,iBAAkB,EACjB3W,EAAMoX,eAOf,IAAIpX,EAAM2W,kBAA0C,IAAvBK,EAA7B,CAEWA,IACThX,EAAM2W,iBAAkB,GAQ1BtR,EAASwR,GAAaxR,EACtBvI,EAASga,GAAaha,EAOtB,IAAI4S,GAAa,EACbC,EAAmB3I,EAAc4I,sBAErC,GAAID,EAAkB,CACpB,IAAI0H,EAAwB1H,EAAiB2H,gBACzCC,EAAe5H,EAAiB/C,iBAAiBD,OAKjDuK,IAMEJ,IACFS,EAAeL,EAAWtK,iBAAiBD,QASzCkK,IAAcpQ,GAAwByQ,EAAYvH,IAAqBuH,EAAWI,kBACpFD,EAAwBH,EAAWI,kBAInCD,GAAyBG,GAA6CN,EAAYL,EAAWC,KAC/FpH,GAAa,EACbrK,EAASmB,GAAmB6Q,EAAuBhS,GACnDvI,EAAS0J,GAAmB+Q,EAAcza,IAI9C,IAAI2a,EAAcC,GAASrS,EAAQvI,GAC/B6a,EAAapU,GAAS,SAAUQ,GAClC,IAAIhE,EAAI8H,EAOR,GAAe,aAAX8E,EAAuB,CACzB,IAAIpH,EAAezI,EAAOiH,GAAMH,IAAM9G,EAAOiH,GAAMJ,IACnD0B,EAAOtB,GAAMH,IAAMyB,EAAOtB,GAAMJ,IAAM4B,EAGxC,IAAIyB,EAAcoE,WAAWwM,eAEtB,YAAyB/T,IAArBkT,EAEAU,EAGFzX,EAAM6X,YAAY9T,EAAMjH,EAAOiH,GAAOsB,EAAOtB,GAAO1G,OAAOzC,EAA4B,EAAnCyC,CAAsCA,OAAOzC,EAA4B,EAAnCyC,CAAsC,GAAI8Z,GAAS,CAClJzH,WAAYA,MAGkC,QAA/C7H,GAAM9H,EAAKC,EAAM0W,mBAAmB3S,UAA0B,IAAP8D,GAAyBA,EAAGqC,KAAKnK,GAGlFiH,EAAc8H,wBAAwB/K,EAAMjH,EAAOiH,GAAMJ,IAAK7G,EAAOiH,GAAMH,IAAK8L,SAXvF1I,EAAc8Q,cAAcf,IAAqBhE,GAAgC,EAAEgF,SAsBvF,OAPA/Q,EAAcgR,aAOPlH,QAAQC,IAAI4G,GAAY3G,MAAK,WAClChR,EAAM2W,iBAAkB,EACxBM,GAAcA,IACdjQ,EAAciR,qCAIXjY,EA0GT,OA7QA3C,OAAOzC,EAA6B,EAApCyC,CAAuC+Y,EAASD,GAsKhDC,EAAQxU,UAAUsW,kBAAoB,WACpC,IAAIlY,EAAQ3F,KAER2M,EAAgB3M,KAAK8O,MAAMnC,cAC/BA,EAAcmR,mBAAqB/R,GAAoC,EACvEY,EAAcwC,yBACdnP,KAAK+d,iBAAmBpR,EAAc+K,eAAe1X,KAAKuc,SAE1D5P,EAAcqR,mBAAqB,WACjC,OAAOrY,EAAMoX,gBAGf/Z,OAAO4V,GAA6C,EAApD5V,CAAuDsX,KAGzDyB,EAAQxU,UAAU0W,qBAAuB,WACvC,IAAItY,EAAQ3F,KAEZA,KAAK+d,mBACL7U,GAAS,SAAUQ,GACjB,IAAIhE,EAAI8H,EAER,OAAuD,QAA/CA,GAAM9H,EAAKC,EAAM0W,mBAAmB3S,UAA0B,IAAP8D,OAAgB,EAASA,EAAGqC,KAAKnK,OAUpGqW,EAAQxU,UAAUiW,YAAc,SAAU9T,EAAMjH,EAAQuI,EAAQtF,GAC9D,IAEI8H,EAAI+B,EAFJ5J,EAAQ3F,KAIRsR,OAAY,IAAP5L,EAAgB,GAAKA,EAC1BqQ,EAAazE,EAAGyE,WAChBV,EAAa/D,EAAG+D,WAMpB,IAAIrV,KAAKoc,YAAY1S,KAASwU,GAAYzb,EAAQzC,KAAKmc,uBAAuBzS,IAA9E,CAI+C,QAA9C6F,GAAM/B,EAAKxN,KAAKqc,mBAAmB3S,UAA0B,IAAP6F,GAAyBA,EAAGM,KAAKrC,GACxFxN,KAAKoc,YAAY1S,IAAQ,EACzB,IAAIiD,EAAgB3M,KAAK8O,MAAMnC,cAC3BuP,EAAclc,KAAKkc,YAAYxS,GAC/ByU,EAAiBxR,EAAcyR,iCAAiC1U,GAMpEyU,EAAeE,iBACfF,EAAe/O,IAAI,GACnB+O,EAAe/O,IAAI,GAMnB,IAAIkP,EAAQ,WAEV,IAAIC,EAAIJ,EAAelN,MAhPR,KA72CrB,SAAmBxO,EAAQ4J,EAAMC,EAAMiS,GACrC9b,EAAO6G,IAAMtG,OAAOmG,EAAiB,EAAxBnG,CAA2BqJ,EAAK/C,IAAKgD,EAAKhD,IAAKiV,GAC5D9b,EAAO8G,IAAMvG,OAAOmG,EAAiB,EAAxBnG,CAA2BqJ,EAAK9C,IAAK+C,EAAK/C,IAAKgV,GA6lDxDC,CAAUtC,EAAalR,EAAQvI,EAAQ8b,GACvC5R,EAAc8H,wBAAwB/K,EAAMwS,EAAY5S,IAAK4S,EAAY3S,IAAK8L,IAIhFiJ,IAEA,IAAIG,EAAsBN,EAAeO,SAASJ,GAElDte,KAAKqc,kBAAkB3S,GAAQ,WAC7B/D,EAAMyW,YAAY1S,IAAQ,EAC1ByU,EAAe/L,OACfqM,KAGFze,KAAKmc,uBAAuBzS,GAAQjH,EACpC,IAAIkc,EAAmB5I,GAAcpJ,EAAciS,wBAA0BC,GAG7E,OADgB7b,OAAO+I,GAAoC,EAA3C/I,CAAuD,MAAT0G,EAAe,UAAY,UAAWyU,EApQnF,IAoQmHQ,GAAoB3b,OAAO+I,GAAwC,EAA/C/I,CAAkD2b,EAAkB,WAAWhI,KAAK3W,KAAKqc,kBAAkB3S,MAIrQqS,EAAQxU,UAAUwV,aAAe,WAC/B,IAAIrX,EAAI8H,EAEkC,QAAzCA,GAAM9H,EAAK1F,KAAK8O,OAAOiO,oBAAiC,IAAPvP,GAAyBA,EAAGqC,KAAKnK,IAGrFqW,EAAQxU,UAAU4J,OAAS,WACzB,OAAO,MAGF4K,EA9QT,CA+QEvb,EAAiB,WAWnB,SAAS6c,GAAS1Y,EAAGC,GACnB,OAAQka,GAAUna,KAAOma,GAAUla,MAAQsZ,GAAYvZ,EAAE/C,EAAGgD,EAAEhD,KAAOsc,GAAYvZ,EAAE9C,EAAG+C,EAAE/C,IAG1F,IAAIkd,GAAW,CACbzV,IAAK,EACLC,IAAK,GAGP,SAASuV,GAAUna,GACjB,OAAOuZ,GAAYvZ,EAAE/C,EAAGmd,KAAab,GAAYvZ,EAAE9C,EAAGkd,IAGxD,SAASb,GAAYvZ,EAAGC,GACtB,OAAOD,EAAE2E,MAAQ1E,EAAE0E,KAAO3E,EAAE4E,MAAQ3E,EAAE2E,IAGxC,IAAIsV,GAA0B,CAC5BG,SAAU,IACVC,KAAM,CAAC,GAAK,EAAG,GAAK,IAGtB,SAAS9B,GAA6CN,EAAYL,EAAWC,GAC3E,OAAOI,IAAeA,KAAgBL,GAAaC,GAKrD,IAAIyC,GAAsB9e,EAAoB,KAW1C+e,GAEJ,SAAUrD,GAGR,SAASsD,IACP,OAAkB,OAAXtD,GAAmBA,EAAOE,MAAMhc,KAAMic,YAAcjc,KAwD7D,OA3DAgD,OAAOzC,EAA6B,EAApCyC,CAAuCoc,EAAStD,GAUhDsD,EAAQ7X,UAAUsW,kBAAoB,WACpC,IAAInY,EAAK1F,KAAK8O,MACVuQ,EAAa3Z,EAAG2Z,WAChBC,EAAmB5Z,EAAG4Z,iBACtB3S,EAAgBjH,EAAGiH,cACvB3J,OAAOkc,GAA4C,EAAnDlc,CAAsDqc,IAAeA,EAAWE,SAAS5S,GACzF3J,OAAOkc,GAA4C,EAAnDlc,CAAsDsc,IAAqBA,EAAiBC,SAAS5S,GACrGA,EAAc6S,WAAU,WAClBxc,OAAOkc,GAA4C,EAAnDlc,CAAsDqc,IACxDA,EAAWI,OAAO9S,GAGhB3J,OAAOkc,GAA4C,EAAnDlc,CAAsDsc,IACxDA,EAAiBG,OAAO9S,OAY9ByS,EAAQ7X,UAAUmY,wBAA0B,WAC1C,IAAIha,EAAK1F,KAAK8O,MACVuQ,EAAa3Z,EAAG2Z,WAChB1S,EAAgBjH,EAAGiH,cASvB,OAPI3J,OAAOkc,GAA4C,EAAnDlc,CAAsDqc,GACxDA,EAAWM,cAEX3c,OAAOgJ,GAAmC,EAA1ChJ,CAA6C2J,GAC7C0S,EAAWO,IAAIjT,IAGV,MAGTyS,EAAQ7X,UAAUsY,mBAAqB,WACrC,IAAIR,EAAarf,KAAK8O,MAAMuQ,WACvBrc,OAAOkc,GAA4C,EAAnDlc,CAAsDqc,IAAaA,EAAWS,SAGrFV,EAAQ7X,UAAU4J,OAAS,WACzB,OAAO,MAGFiO,EA5DT,CA6DE3e,EAAckE,EAAEob,WAelB,IAAIC,GAAmB,CACrBC,cAdF,SAAgCnR,GAC9B,IAAIuQ,EAAarc,OAAOxC,EAAkB,WAAzBwC,CAA4Bkc,GAAiD,GAC1FI,EAAmBtc,OAAOxC,EAAkB,WAAzBwC,CAA4Bkc,GAAqD,GACxG,OAAOze,EAAckE,EAAEub,cAAcf,GAAiBnc,OAAOzC,EAA4B,EAAnCyC,CAAsC,GAAI8L,EAAO,CACrGuQ,WAAYA,EACZC,iBAAkBA,MAUpBa,gBAhIF,SAAsCrR,GACpC,IACIiO,EADK/Z,OAAOzC,EAA0B,EAAjCyC,CAAoCA,OAAO2V,GAAkC,EAAzC3V,GAA+C,GACtE,GAEtB,OAAOxC,EAAqB,cAAEqb,GAAiB7Y,OAAOzC,EAA4B,EAAnCyC,CAAsC,GAAI8L,EAAO,CAC9FiO,aAAcA,OA+HdqD,GAAwBhgB,EAAoB,KAG5CigB,GAAkBjgB,EAAoB,KAGtCkgB,GAAsBlgB,EAAoB,KAG9C,SAASmgB,GAAejU,EAAMD,GAC5B,IAAKmU,MAAMC,QAAQpU,GAAO,OAAO,EACjC,IAAIqU,EAAarU,EAAKlF,OACtB,GAAIuZ,IAAepU,EAAKnF,OAAQ,OAAO,EAEvC,IAAK,IAAIa,EAAI,EAAGA,EAAI0Y,EAAY1Y,IAC9B,GAAIqE,EAAKrE,KAAOsE,EAAKtE,GAAI,OAAO,EAGlC,OAAO,EAKT,IAAI2Y,GAAkBvgB,EAAoB,KAGtCwgB,GAAWxgB,EAAoB,KAU/BygB,GAAuB,CAAC/U,GAAciQ,QAASjQ,GAAcgV,MAAOhV,GAAciV,IAAKjV,GAAc6F,KAAM7F,GAAckV,MAAOlV,GAAcmV,MAE9IC,GAAuBle,OAAOzC,EAAiC,EAAxCyC,CAA2C,GAAIA,OAAOzC,EAA0B,EAAjCyC,CAAoC6d,KAAuBM,UAEjIC,GAAoBP,GAAqB1Z,OAY7C,SAASka,GAAqB1U,GAC5B,IAAI4P,EAXN,SAAqB5P,GACnB,OAAO,SAAU2Q,GACf,OAAO7G,QAAQC,IAAI4G,EAAWgE,KAAI,SAAU5b,GAC1C,IAAI6b,EAAY7b,EAAG6b,UACf5e,EAAU+C,EAAG/C,QACjB,OAAOK,OAAO2d,GAA8C,EAArD3d,CAAwD2J,EAAe4U,EAAW5e,QAM/E6e,CAAY7U,GACtB8U,EAqVN,WACE,IAAI/b,EAEJ,OAAOA,EAAK,IAAOoG,GAAciQ,SAAW2F,IAAgB,GAAOhc,EAAGoG,GAAcgV,OAASY,KAAmBhc,EAAGoG,GAAciV,KAAOW,KAAmBhc,EAAGoG,GAAc6F,MAAQ+P,KAAmBhc,EAAGoG,GAAckV,OAASU,KAAmBhc,EAAGoG,GAAcmV,MAAQS,KAAmBhc,EAxVpRic,GACRC,EAAkB,GAClBC,GAAkB,EAMlBC,EAA0B,SAAiCC,EAAKC,GAClE,IAAIvI,EAAWzW,OAAO4d,GAAiC,EAAxC5d,CAA2C2J,EAAeqV,GAEzE,GAAIvI,EAAU,CACZA,EAAS1D,WAET,IAAIkM,EAAgBxI,EAASwI,cACzBxf,EAASO,OAAOzC,EAA0B,EAAjCyC,CAAoCyW,EAAU,CAAC,aAAc,kBAE1EsI,EAAM/e,OAAOzC,EAA4B,EAAnCyC,CAAsCA,OAAOzC,EAA4B,EAAnCyC,CAAsCA,OAAOzC,EAA4B,EAAnCyC,CAAsC,GAAI+e,GAAMtf,GAASwf,GAG7I,OAAOF,GA2BT,SAASG,EAAevf,EAASwf,GA8M/B,IA7MA,IAAIzc,EAEAoJ,EAAQnC,EAAcC,WACtBwV,EAAUzV,EAAc0V,mBAAkB,IAAS,GAMnD/E,EAAa,GAMbgF,EAAc,IAAIC,IAOlBC,EAAkB,GAMlBC,EAAsBpa,EAAAA,EAEtBqa,EAAU,SAAiB1a,GAC7B,IAAImO,EAAO+K,GAAqBlZ,GAC5B2a,EAAYlB,EAAMtL,GAClByM,EAA8B,QAAtBld,EAAKoJ,EAAMqH,UAA0B,IAAPzQ,EAAgBA,EAAK0c,EAAQjM,GACnE0M,EAAgB7f,OAAO4d,GAAiC,EAAxC5d,CAA2C4f,GAM3DE,EAAc3M,IAASgM,EAAoBQ,EAAUI,SAAW,MAChD,IAAhBD,IAAuBL,EAAsBza,GAQjD,IAAIgb,EAAcJ,IAASR,EAAQjM,IAASyM,IAAS9T,EAAMqH,IAAS0M,EAgBpE,GAXIG,GAAenB,GAAmBlV,EAAcsW,yBAClDD,GAAc,GAQhBL,EAAUO,cAAgBlgB,OAAOzC,EAA4B,EAAnCyC,CAAsC,GAAIwf,IAGnEG,EAAUI,UAA4B,OAAhBD,IACtBF,IAASD,EAAUQ,UACpBngB,OAAOod,GAAmD,EAA1Dpd,CAA6D4f,IAAyB,mBAATA,EAC3E,MAAO,WAST,IAAIQ,EAgMV,SAA6B/W,EAAMC,GACjC,GAAoB,kBAATA,EACT,OAAOA,IAASD,EACX,GAAIrJ,OAAO4d,GAAkC,EAAzC5d,CAA4CsJ,GACrD,OAAQiU,GAAejU,EAAMD,GAG/B,OAAO,EAvMqBgX,CAAoBV,EAAUQ,SAAUP,IAChEzM,IAASgM,GAAqBQ,EAAUI,WAAaC,GAAeH,GACpE7a,EAAIya,GAAuBI,EAMvBS,EAAiB9C,MAAMC,QAAQmC,GAAQA,EAAO,CAACA,GAM/CW,EAAiBD,EAAeE,OAAO1B,EAAyB,KAChD,IAAhBgB,IAAuBS,EAAiB,IAW5C,IAAI/V,EAAKmV,EAAUc,mBACfA,OAA4B,IAAPjW,EAAgB,GAAKA,EAE1CkW,EAAU1gB,OAAOzC,EAA4B,EAAnCyC,CAAsCA,OAAOzC,EAA4B,EAAnCyC,CAAsC,GAAIygB,GAAqBF,GAE/GI,EAAgB,SAAuBlW,GACzC2V,GAAoB,EACpBd,EAAYsB,OAAOnW,GACnBkV,EAAUkB,eAAepW,IAAO,GAGlC,IAAK,IAAIA,KAAOiW,EAAS,CACvB,IAAIpX,EAAOiX,EAAe9V,GACtBpB,EAAOoX,EAAmBhW,GAE1B+U,EAAgBje,eAAekJ,KAK/BnB,IAASD,EAKPrJ,OAAOsd,GAA+C,EAAtDtd,CAAyDsJ,IAAStJ,OAAOsd,GAA+C,EAAtDtd,CAAyDqJ,GACxHkU,GAAejU,EAAMD,GAOxBsW,EAAUO,cAAczV,IAAO,EAN/BkW,EAAclW,QAQEjE,IAAT8C,EAETqX,EAAclW,GAGd6U,EAAY1C,IAAInS,QAEAjE,IAAT8C,GAAsBgW,EAAYwB,IAAIrW,GAK/CkW,EAAclW,GAMdkV,EAAUO,cAAczV,IAAO,GASnCkV,EAAUQ,SAAWP,EACrBD,EAAUc,mBAAqBF,EAK3BZ,EAAUI,WACZP,EAAkBxf,OAAOzC,EAA4B,EAAnCyC,CAAsCA,OAAOzC,EAA4B,EAAnCyC,CAAsC,GAAIwf,GAAkBe,IAGlH1B,GAAmBlV,EAAcoX,wBACnCX,GAAoB,GASlBA,IAAsBJ,GACxB1F,EAAWrd,KAAK+b,MAAMsB,EAAYta,OAAOzC,EAAiC,EAAxCyC,CAA2C,GAAIA,OAAOzC,EAA0B,EAAjCyC,CAAoCsgB,EAAehC,KAAI,SAAUC,GAChJ,MAAO,CACLA,UAAWA,EACX5e,QAASK,OAAOzC,EAA4B,EAAnCyC,CAAsC,CAC7CmT,KAAMA,GACLxT,WAaFqF,EAAI,EAAGA,EAAIoZ,GAAmBpZ,IACrC0a,EAAQ1a,GAUV,GAPA4Z,EAAkB5e,OAAOzC,EAA4B,EAAnCyC,CAAsC,GAAIwf,GAOxDF,EAAY0B,KAAM,CACpB,IAAIC,EAAsB,GAC1B3B,EAAYhS,SAAQ,SAAU7C,GAC5B,IAAIyW,EAAiBvX,EAAcwX,cAAc1W,QAE1BjE,IAAnB0a,IACFD,EAAoBxW,GAAOyW,MAG/B5G,EAAWrd,KAAK,CACdshB,UAAW0C,IAIf,IAAIG,EAAgB3T,QAAQ6M,EAAWnW,QAOvC,OALI0a,IAAqC,IAAlB/S,EAAMuV,UAAsB1X,EAAcsW,yBAC/DmB,GAAgB,GAGlBvC,GAAkB,EACXuC,EAAgB7H,EAAQe,GAAc7G,QAAQ6N,UAsBvD,MAAO,CACLC,WA7RF,SAAoB9W,GAClB,YAAgCjE,IAAzBoY,EAAgBnU,IA6RvByU,eAAgBA,EAChBxQ,UAlBF,SAAmByE,EAAM4M,EAAUpgB,GACjC,IAAI+C,EAGJ,OAAI+b,EAAMtL,GAAM4M,WAAaA,EAAiBtM,QAAQ6N,WAEb,QAAxC5e,EAAKiH,EAAc6X,uBAAoC,IAAP9e,GAAyBA,EAAG4K,SAAQ,SAAUpE,GAC7F,IAAIxG,EAEJ,OAAuC,QAA/BA,EAAKwG,EAAMuF,sBAAmC,IAAP/L,OAAgB,EAASA,EAAGgM,UAAUyE,EAAM4M,MAE7FtB,EAAMtL,GAAM4M,SAAWA,EAChBb,EAAevf,EAASwT,KAO/BsO,mBAvRF,SAA4BC,GAC1BnI,EAAUmI,EAAa/X,IAuRvBgY,SAAU,WACR,OAAOlD,IAeb,SAASC,GAAgBqB,GAKvB,YAJiB,IAAbA,IACFA,GAAW,GAGN,CACLA,SAAUA,EACVG,cAAe,GACfW,eAAgB,GAChBJ,mBAAoB,IAoBxB,IAAImB,GAAwB,CAC1BrD,UAAWzJ,IAAwB,SAAUpS,GAC3C,IAAIiH,EAAgBjH,EAAGiH,cACnB4P,EAAU7W,EAAG6W,QAOjB5P,EAAc8E,iBAAmB9E,EAAc8E,eAAiB4P,GAAqB1U,IAKjF3J,OAAOod,GAAmD,EAA1Dpd,CAA6DuZ,IAC/DvZ,OAAOxC,EAAiB,UAAxBwC,EAA2B,WACzB,OAAOuZ,EAAQ9D,UAAU9L,KACxB,CAAC4P,OAGRsI,KAAM/M,IAAwB,SAAUhJ,GACtC,IAAIgW,EAAShW,EAAMgW,OACfnY,EAAgBmC,EAAMnC,cAEtBjH,EAAK1C,OAAOzC,EAA0B,EAAjCyC,CAAoCA,OAAO2V,GAAkC,EAAzC3V,GAA+C,GACxF+hB,EAAYrf,EAAG,GACfsf,EAAiBtf,EAAG,GAEpBuf,EAAkBjiB,OAAOxC,EAAkB,WAAzBwC,CAA4Bqd,GAAyC,GAC3Frd,OAAOxC,EAAiB,UAAxBwC,EAA2B,WACzB,IAAI0C,EAAI8H,EAEJ+T,EAAoD,QAAvC7b,EAAKiH,EAAc8E,sBAAmC,IAAP/L,OAAgB,EAASA,EAAGgM,UAAU5F,GAAcmV,MAAO8D,EAAW,CACpID,OAA4G,QAAnGtX,EAAyB,OAApByX,QAAgD,IAApBA,OAA6B,EAASA,EAAgBH,cAA2B,IAAPtX,EAAgBA,EAAKsX,KAE1IC,IAA4B,OAAdxD,QAAoC,IAAdA,GAAgCA,EAAU5K,KAAKqO,MACnF,CAACD,QAyCR,SAASG,GAAiBvY,EAAeoW,EAAUoC,GACjD,OAAO,SAAUrkB,EAAOmF,GACtB,IAAIP,EAEC7E,EAAaC,KAAUgI,MACf,OAAbqc,QAAkC,IAAbA,GAA+BA,EAASrkB,EAAOmF,GAC5B,QAAvCP,EAAKiH,EAAc8E,sBAAmC,IAAP/L,GAAyBA,EAAGgM,UAAU5F,GAAcgV,MAAOiC,KAsB/G,IAAIqC,GAAgB,SAASA,EAAcvZ,EAAQK,GACjD,QAAKA,IAEML,IAAWK,GAGbkZ,EAAcvZ,EAAQK,EAAMmZ,iBAgFvC,IAAIC,GAAoB,CACtBC,IAAKzN,IA/DP,SAAuBpS,GACrB,IAAI8f,EAAQ9f,EAAG8f,MACXC,EAAa/f,EAAG+f,WAChBC,EAAchgB,EAAGggB,YACjBC,EAAWjgB,EAAGigB,SACdhZ,EAAgBjH,EAAGiH,cACnBiZ,EAAoBJ,GAASC,GAAcC,GAAeC,EAC1DE,EAAa7iB,OAAOxC,EAAc,OAArBwC,EAAwB,GACrC8iB,EAA4B9iB,OAAOxC,EAAc,OAArBwC,CAAwB,MAExD,SAAS+iB,IACP,IAAIrgB,EAEyC,QAA5CA,EAAKogB,EAA0B5iB,eAA4B,IAAPwC,GAAyBA,EAAGmK,KAAKiW,GACtFA,EAA0B5iB,QAAU,KAGtC,SAAS8iB,IACP,IAAItgB,EAKJ,OAHAqgB,IACAF,EAAW3iB,SAAU,EACmB,QAAvCwC,EAAKiH,EAAc8E,sBAAmC,IAAP/L,GAAyBA,EAAGgM,UAAU5F,GAAciV,KAAK,IACjGjY,IAGV,SAASmd,EAAYnlB,EAAOmF,GACrB+f,MAMJZ,GAAczY,EAAc2K,cAAexW,EAAM2B,QAAyG,OAAV+iB,QAA4B,IAAVA,GAA4BA,EAAM1kB,EAAOmF,GAAhI,OAAhByf,QAAwC,IAAhBA,GAAkCA,EAAY5kB,EAAOmF,IAG3I,SAASigB,EAAgBplB,EAAOmF,GACzB+f,MACW,OAAhBN,QAAwC,IAAhBA,GAAkCA,EAAY5kB,EAAOmF,IAc/E5B,EAAgBsI,EAAe,cAAeiZ,EAX9C,SAAuB9kB,EAAOmF,GAC5B,IAAIP,EAEJqgB,IACIF,EAAW3iB,UACf2iB,EAAW3iB,SAAU,EACrB4iB,EAA0B5iB,QAAUF,OAAOsC,EAAmB,EAA1BtC,CAA6BoB,EAAgBJ,OAAQ,YAAaiiB,GAAc7hB,EAAgBJ,OAAQ,gBAAiBkiB,IAC9I,OAAfT,QAAsC,IAAfA,GAAiCA,EAAW3kB,EAAOmF,GAClC,QAAvCP,EAAKiH,EAAc8E,sBAAmC,IAAP/L,GAAyBA,EAAGgM,UAAU5F,GAAciV,KAAK,UAGzBvX,GAClFxG,OAAO6U,GAA6C,EAApD7U,CAAuD+iB,MAWvDI,MAAOrO,IA/IT,SAAyBpS,GACvB,IAAI0gB,EAAa1gB,EAAG0gB,WAChBzZ,EAAgBjH,EAAGiH,cAcvB7J,EAAY6J,EAAe,QAASyZ,EAZtB,WACZ,IAAI1gB,EAEoC,QAAvCA,EAAKiH,EAAc8E,sBAAmC,IAAP/L,GAAyBA,EAAGgM,UAAU5F,GAAckV,OAAO,SASlDxX,GAC3D1G,EAAY6J,EAAe,OAAQyZ,EAPtB,WACX,IAAI1gB,EAEoC,QAAvCA,EAAKiH,EAAc8E,sBAAmC,IAAP/L,GAAyBA,EAAGgM,UAAU5F,GAAckV,OAAO,SAIpDxX,MA+HzD6c,MAAOvO,IA3GT,SAAyBpS,GACvB,IAAI4gB,EAAe5gB,EAAG4gB,aAClBC,EAAa7gB,EAAG6gB,WAChBC,EAAa9gB,EAAG8gB,WAChB7Z,EAAgBjH,EAAGiH,cACvBtI,EAAgBsI,EAAe,eAAgB2Z,GAAgBE,EAAatB,GAAiBvY,GAAe,EAAM2Z,QAAgB9c,GAClInF,EAAgBsI,EAAe,eAAgB4Z,GAAcC,EAAatB,GAAiBvY,GAAe,EAAO4Z,QAAc/c,OAyG7Hid,GAAWrmB,EAAoB,KAG/BsmB,GAAkBtmB,EAAoB,KAe1C,SAASumB,KACP,MAAO,CACLC,YAAY,EACZtU,OAAQtP,OAAOiG,EAA0B,EAAjCjG,GACRwP,gBAAiBxP,OAAOiG,EAA0B,EAAjCjG,GACjB8X,UAAW,CACTlZ,EAAG,EACHC,EAAG,GAEL6F,MAAO1E,OAAOiG,EAAwB,EAA/BjG,GACP6jB,WAAY7jB,OAAOiG,EAAwB,EAA/BjG,GACZ8jB,eAAgB,IAIpB,IAAIC,GAAaJ,KASjB,SAASK,GAA+BthB,EAAIoV,EAAWmM,GACrD,IAAIrlB,EAAI8D,EAAG9D,EACPC,EAAI6D,EAAG7D,EAUPqlB,EAAY,eAFCtlB,EAAE0J,UAAYwP,EAAUlZ,EAEK,OAD7BC,EAAEyJ,UAAYwP,EAAUjZ,EAC2B,UAEpE,GAAIolB,EAAiB,CACnB,IAAIE,EAASF,EAAgBE,OACzBC,EAAUH,EAAgBG,QAC1BC,EAAUJ,EAAgBI,QAC1BF,IAAQD,GAAa,UAAYC,EAAS,MAC1CC,IAASF,GAAa,WAAaE,EAAU,MAC7CC,IAASH,GAAa,WAAaG,EAAU,MAInD,OADAH,GAAa,SAAWtlB,EAAEyJ,MAAQ,KAAOxJ,EAAEwJ,MAAQ,IAC3C4b,GAAmBC,IAAcI,GAA0BJ,EAAL,GAOhE,SAASK,GAAqC7hB,GAC5C,IAAImhB,EAAanhB,EAAGmhB,WACpB,OAA6B,IAAtBA,EAAWjlB,EAAEoJ,OAAe,KAA6B,IAAtB6b,EAAWhlB,EAAEmJ,OAAe,MAGxE,IAAIsc,GAAqBN,GAA+BD,GAAWrf,MAAOqf,GAAWjM,UAAW,CAC9FlZ,EAAG,EACHC,EAAG,IAID2lB,GAAuBpnB,EAAoB,KAK3CqnB,GAAQ,CAAC,gBAAiB,sBAAuB,eAAgB,oBAAqB,SAAU,SAAU,oBAAqB,0BAA2B,iBAAkB,gBAAiB,WAkGjM,SAASC,GAAmBhiB,EAAI8H,EAAIma,EAAUC,GAC5C,IA3+EgBvd,EAAKmS,EA2+EjB9U,EAAQhC,EAAGgC,MACX4K,EAAS5M,EAAG4M,OACZE,EAAkB9M,EAAG8M,gBACrBsI,EAAYpV,EAAGoV,UACfrY,EAAS+K,EAAG/K,OA/+EK+Z,EAq/EKlK,EAp/E1BxF,IADgBzC,EAq/EPmI,GAp/EK5Q,EAAG4a,EAAU5a,GAC3BkL,GAAUzC,EAAIxI,EAAG2a,EAAU3a,GA6J7B,SAAyBwI,EAAKyQ,EAAW6M,GACvC,IAAIE,EAAaF,EAASxgB,OAC1B,GAAK0gB,EAAL,CAGA,IAAIC,EACApgB,EAFJoT,EAAUlZ,EAAIkZ,EAAUjZ,EAAI,EAI5B,IAAK,IAAImG,EAAI,EAAGA,EAAI6f,EAAY7f,IAE9BN,GADAogB,EAAOH,EAAS3f,IACHuK,iBAAiB7K,MAE9BoT,EAAUlZ,GAAK8F,EAAM9F,EAAEyJ,MACvByP,EAAUjZ,GAAK6F,EAAM7F,EAAEwJ,MAEvB+B,GAAc/C,EAAK3C,GAEfgF,GAAYob,IACd/Z,GAAmB1D,EAAKA,EAAKyd,EAAKtS,oBA00EtCuS,CAAgBvV,EAAiBsI,EAAW6M,GAW5Cpc,GAAe7D,EAAO8K,EAAiB/P,EAAQmlB,GAKjD,IAAII,GAAQ5nB,EAAoB,KAG5B6nB,GAAmB7nB,EAAoB,KAMvC8nB,GAEJ,WACE,SAASC,IACPnoB,KAAKiQ,SAAW,GAChBjQ,KAAKooB,SAAU,EAmBjB,OAhBAD,EAAS5gB,UAAUqY,IAAM,SAAU1T,GACjClJ,OAAOglB,GAA6B,EAApChlB,CAAuChD,KAAKiQ,SAAU/D,GACtDlM,KAAKooB,SAAU,GAGjBD,EAAS5gB,UAAUkY,OAAS,SAAUvT,GACpClJ,OAAOglB,GAA0B,EAAjChlB,CAAoChD,KAAKiQ,SAAU/D,GACnDlM,KAAKooB,SAAU,GAGjBD,EAAS5gB,UAAU+I,QAAU,SAAU6U,GACrCnlB,KAAKooB,SAAWpoB,KAAKiQ,SAASoY,KAAKJ,GAAyC,GAC5EjoB,KAAKooB,SAAU,EACfpoB,KAAKiQ,SAASK,QAAQ6U,IAGjBgD,EAtBT,GAmEA,IAAIG,GAAuB,SAAuB5iB,GAChD,IAAI8H,EAAK9H,EAAG6iB,SACRA,OAAkB,IAAP/a,EAAgB,GAAKA,EAChCgb,EAAQ9iB,EAAG8iB,MACXC,EAAiB/iB,EAAGye,cACpBuE,EAAwBhjB,EAAGijB,qBAC3BC,EAAsBljB,EAAGmL,mBACzBgY,EAAiBnjB,EAAGyL,OACpB2X,EAAwBpjB,EAAGojB,sBAC3BC,EAAkBrjB,EAAG6K,eACrByY,EAAoBtjB,EAAG8K,iBACvByY,EAA6BvjB,EAAGujB,2BAChCC,EAAoBxjB,EAAGyjB,iBACvBC,EAA8B1jB,EAAG0jB,4BACrC,OAAO,SAAU1jB,EAAI/C,GACnB,IAAIkJ,EAASnG,EAAGmG,OACZiD,EAAQpJ,EAAGoJ,MACXua,EAAa3jB,EAAG2jB,WAChBtF,EAAwBre,EAAGqe,sBAC3BuF,EAAc5jB,EAAG4jB,iBAEL,IAAZ3mB,IACFA,EAAU,IAGZ,IASI4mB,EAmBAjU,EAWAkU,EAcAC,EAkCAC,EAcAC,EArGAC,EAAeN,EAAYM,aAC3BC,EAAcP,EAAYO,YAc1BC,EAvPR,WACE,IAAIC,EAAWtC,GAAMnG,KAAI,WACvB,OAAO,IAAIkG,GAAkD,KAE3DwC,EAAoB,GACpBF,EAAa,CACfG,kBAAmB,WACjB,OAAOF,EAASzZ,SAAQ,SAAU4Z,GAChC,OAAOA,EAAQC,YAGnBC,oBAAqB,SAA6Btb,GAChD,OAAO2Y,GAAMnX,SAAQ,SAAUvM,GAC7B,IAAI2B,EAE+B,QAAlCA,EAAKskB,EAAkBjmB,UAA0B,IAAP2B,GAAyBA,EAAGmK,KAAKma,GAC5E,IAAIK,EAAK,KAAOtmB,EACZumB,EAAexb,EAAMub,GAErBC,IACFN,EAAkBjmB,GAAQ+lB,EAAWO,GAAIC,SAoBjD,OAfAP,EAASzZ,SAAQ,SAAU4Z,EAASliB,GAClC8hB,EAAW,KAAOrC,GAAMzf,IAAM,SAAU/F,GACtC,OAAOioB,EAAQtK,IAAI3d,IAGrB6nB,EAAW,SAAWrC,GAAMzf,IAAM,WAGhC,IAFA,IAAIuiB,EAAO,GAEFC,EAAK,EAAGA,EAAKvO,UAAU9U,OAAQqjB,IACtCD,EAAKC,GAAMvO,UAAUuO,GAGvB,OAAON,EAAQO,OAAOzO,MAAMkO,EAASlnB,OAAOzC,EAAiC,EAAxCyC,CAA2C,GAAIA,OAAOzC,EAA0B,EAAjCyC,CAAoCunB,SAGrHT,EA+MYY,GAKb3Z,EA9UC,CACL4Z,WAAW,EACX/D,YAAY,EACZrJ,gBAAgB,EAChB9a,OAAQO,OAAOiG,EAA0B,EAAjCjG,GACR4S,YAAa5S,OAAOiG,EAA0B,EAAjCjG,IA0VT4nB,EAAiB7Z,EACjB8Z,EAAmBjB,EAUnBkB,EAAcnE,KAWdoE,GAAwB,EAOxBC,EAAS,IAAIC,IAMbC,EAAqB,IAAID,IAOzBE,EAAmB,GAcnBC,EAAapoB,OAAOzC,EAA4B,EAAnCyC,CAAsC,GAAI4mB,GAa3D,SAASzY,IACFoY,IAEDtmB,EAAQooB,sBAMVtd,GAAmB6c,EAAehV,YAAagV,EAAenoB,OAAQooB,GAQtEtf,GAAeuf,EAAYjE,WAAYiE,EAAYtY,gBAAiBoY,EAAehV,YAAagU,IAGlG0B,IACAzC,EAAeU,EAAUM,IAG3B,SAASyB,IACP,IAAIC,EAAiB3B,EAErB,GAAIH,GAAcA,EAAW1G,WAAY,CACvC,IAAIyI,EAAmB/B,EAAWgC,kBAAkBxoB,GAChDuoB,IAAkBD,EAAiBC,GAGzChD,EAAMvlB,EAAS4mB,EAAa0B,EAAgBX,EAAgBE,EAAanoB,EAASmM,GAGpF,SAAShI,IACPgjB,EAAW4B,aAAa9B,GAuB1B,SAAS+B,IACP1oB,EAAQ2oB,WAAWtb,QAAQub,IA8B7B,IAAIC,EAAsB1C,EAA4Bta,GAEtD,IAAK,IAAIrB,KAAOqe,EAAqB,CACnC,IAAIphB,EAAQohB,EAAoBre,QAENjE,IAAtBogB,EAAanc,IAAsBzK,OAAO0jB,GAAuC,EAA9C1jB,CAAiD0H,IACtFA,EAAM0E,IAAIwa,EAAanc,IAAM,GAQjC,IAAIse,EAAwB/oB,OAAO4d,GAA6C,EAApD5d,CAAuD8L,GAC/Ekd,EAAgBhpB,OAAO4d,GAAqC,EAA5C5d,CAA+C8L,GAE/D7L,EAAUD,OAAOzC,EAA4B,EAAnCyC,CAAsCA,OAAOzC,EAA4B,EAAnCyC,CAAsC,CACxFulB,SAAUA,EAMVrlB,QAAS,KAKTiW,MAAOtN,EAASA,EAAOsN,MAAQ,EAAI,EACnCtN,OAAQA,EACRoE,SAAU,IAAIsS,IAMd0J,KAAMpgB,EAAS7I,OAAOzC,EAAiC,EAAxCyC,CAA2CA,OAAOzC,EAAiC,EAAxCyC,CAA2C,GAAIA,OAAOzC,EAA0B,EAAjCyC,CAAoC6I,EAAOogB,OAAQ,CAACpgB,IAAW,GACxK+f,WAAY/f,EAASA,EAAO+f,WAAa,IAAI1D,GAK7CmB,WAAYA,EACZtY,WAAYA,EAOZyT,gBAAiBwH,EAAgB,IAAIzJ,SAAQ/Y,EAQ7C0iB,eAAW1iB,EAUXyZ,uBAAwBxS,QAAmB,OAAX5E,QAA8B,IAAXA,OAAoB,EAASA,EAAOsgB,aAMvFpI,sBAAuBA,EAOvBoI,UAAW,WACT,OAAO1b,QAAQ8Y,IAEjBnS,MAAO,SAAegV,GACpB7C,EAAWtmB,EAAQC,QAAUkpB,EAC7BnpB,EAAQopB,QAAQppB,GAEZ+oB,GAAiBngB,IAAWkgB,IAC9BpC,EAAmC,OAAX9d,QAA8B,IAAXA,OAAoB,EAASA,EAAOygB,gBAAgBrpB,IAGtF,OAAX4I,QAA8B,IAAXA,GAA6BA,EAAOoE,SAAS2P,IAAI3c,IAMtEspB,QAAS,WACPjqB,EAAuB,EAAEwE,OAAOA,GAChCxE,EAAuB,EAAE6O,OAAOA,GAChC7O,EAAuB,EAAE4O,UAAUjO,EAAQupB,wBAC3CtB,EAAmB5a,SAAQ,SAAUmP,GACnC,OAAOA,OAETxc,EAAQ4T,sBACR5T,EAAQ2oB,WAAWnM,OAAOxc,GACA,OAA1B0mB,QAA4D,IAA1BA,GAA4CA,IACnE,OAAX9d,QAA8B,IAAXA,GAA6BA,EAAOoE,SAAS2T,OAAO3gB,GAClC,OAArCumB,QAAkF,IAArCA,GAAuDA,IACpGM,EAAWG,qBAMbqC,gBAAiB,SAAyBpgB,GACxC,IAAIxG,EAEA+mB,EAAqBxpB,EAAQypB,wBAEjC,GAAID,EAEF,OAD8C,QAA7C/mB,EAAK+mB,EAAmBjI,uBAAoC,IAAP9e,GAAyBA,EAAGka,IAAI1T,GAC/E,WACL,OAAOugB,EAAmBjI,gBAAgBZ,OAAO1X,KAIvDid,iBAAkB,SAA0BwD,GAI1C,OAAKzD,GAAqBX,IAAaoE,EAAMpE,SACtCW,EAAkBjmB,EAAQqU,cAAeqV,EAAMrV,eADQ,GAQhEoV,sBAAuB,WACrB,OAAOV,EAAgB/oB,EAAqB,OAAX4I,QAA8B,IAAXA,OAAoB,EAASA,EAAO6gB,yBAQ1F5b,+BAAgCjF,EAASA,EAAOiF,+BAAiC,WAC/E,OAAOxO,EAAoB,EAAE4O,UAAUjO,EAAQ2pB,4BAA4B,GAAO,IAMpFpgB,YAAa,WACX,OAAOsC,EAAMiG,UAMfuC,YAAa,WACX,OAAOiS,GAMTsD,eAAgB,SAAwBpf,GACtC,OAAOmc,EAAanc,IAEtBqf,eAAgB,SAAwBrf,EAAK/C,GAC3C,OAAOkf,EAAanc,GAAO/C,GAQ7B8K,gBAAiB,WACf,OAAOoU,GAOTnM,cAAe,SAAuBsP,GAChC9pB,EAAQipB,YAAca,IAC1B9pB,EAAQipB,UAAYa,EACpB9pB,EAAQ+pB,mBAUVrE,qBAAsB,SAA8BlmB,EAAQwqB,GAK1D,YAJkB,IAAdA,IACFA,GAAY,GAGPvE,EAAsBzlB,EAASR,EAAQqM,EAAOme,IAOvDC,SAAU,SAAkBzf,EAAK/C,GAE3BzH,EAAQkqB,SAAS1f,IAAMxK,EAAQmqB,YAAY3f,GAC/Cud,EAAO5b,IAAI3B,EAAK/C,GAChBkf,EAAanc,GAAO/C,EAAMuG,MAnP9B,SAA2BxD,EAAK/C,GAC9B,IAAI2iB,EAAiB3iB,EAAMgU,UAAS,SAAU4O,GAC5C1D,EAAanc,GAAO6f,EACpBxe,EAAMye,UAAYjrB,EAAoB,EAAEwE,OAAOA,GAAQ,GAAO,MAE5D0mB,EAAwB9iB,EAAM+iB,gBAAgBxqB,EAAQ+pB,gBAC1D9B,EAAmB9b,IAAI3B,GAAK,WAC1B4f,IACAG,OA4OAE,CAAkBjgB,EAAK/C,IAMzB0iB,YAAa,SAAqB3f,GAChC,IAAI/H,EAEJslB,EAAOpH,OAAOnW,GACyB,QAAtC/H,EAAKwlB,EAAmBja,IAAIxD,UAAyB,IAAP/H,GAAyBA,IACxEwlB,EAAmBtH,OAAOnW,UACnBmc,EAAanc,GACpBwb,EAA2Bxb,EAAKoc,IAMlCsD,SAAU,SAAkB1f,GAC1B,OAAOud,EAAOlH,IAAIrW,IAOpByH,SAAU,SAAkBzH,EAAKkgB,GAC/B,IAAIjjB,EAAQsgB,EAAO/Z,IAAIxD,GAOvB,YALcjE,IAAVkB,QAAwClB,IAAjBmkB,IACzBjjB,EAAQ1H,OAAOyjB,GAA8B,EAArCzjB,CAAwC2qB,GAChD1qB,EAAQiqB,SAASzf,EAAK/C,IAGjBA,GAMTkjB,aAAc,SAAsBzI,GAClC,OAAO6F,EAAO1a,QAAQ6U,IAQxB0I,UAAW,SAAmBpgB,GAC5B,IAAI/H,EAEJ,OAAoC,QAA5BA,EAAKkkB,EAAanc,UAAyB,IAAP/H,EAAgBA,EAAKojB,EAAsBS,EAAU9b,EAAK9K,IAOxGmrB,cAAe,SAAuBrgB,EAAK/C,GACzC0gB,EAAW3d,GAAO/C,GAOpByZ,cAAe,SAAuB1W,GACpC,GAAIgb,EAAgB,CAClB,IAAIhmB,EAASgmB,EAAe3Z,EAAOrB,GAEnC,QAAejE,IAAX/G,IAAyBO,OAAO0jB,GAAuC,EAA9C1jB,CAAiDP,GAAS,OAAOA,EAGhG,OAAO2oB,EAAW3d,KAEnBqc,GAAa,CAIdtB,MAAO,WAEL,OADA8C,IACOzB,GAMTmD,eAAgB,WACd1qB,EAAoB,EAAE6O,OAAOA,GAAQ,GAAO,IAS9CwM,WAAYxM,EAMZuD,SAAU,SAAkBqZ,GAC1Bjf,EAAQif,EACRjE,EAAWM,oBAAoB2D,GAC/B5C,EArsBR,SAAqCloB,EAASqJ,EAAMD,GAClD,IAAI3G,EAEJ,IAAK,IAAI+H,KAAOnB,EAAM,CACpB,IAAI6H,EAAY7H,EAAKmB,GACjBugB,EAAY3hB,EAAKoB,GAErB,GAAIzK,OAAO0jB,GAAuC,EAA9C1jB,CAAiDmR,GAKnDlR,EAAQiqB,SAASzf,EAAK0G,QACjB,GAAInR,OAAO0jB,GAAuC,EAA9C1jB,CAAiDgrB,GAK1D/qB,EAAQiqB,SAASzf,EAAKzK,OAAOyjB,GAA8B,EAArCzjB,CAAwCmR,SACzD,GAAI6Z,IAAc7Z,EAMvB,GAAIlR,EAAQkqB,SAAS1f,GAAM,CACzB,IAAIwgB,EAAgBhrB,EAAQiS,SAASzH,IAEpCwgB,EAAcC,aAAeD,EAAc7e,IAAI+E,QAEhDlR,EAAQiqB,SAASzf,EAAKzK,OAAOyjB,GAA8B,EAArCzjB,CAA+E,QAAtC0C,EAAKzC,EAAQ4pB,eAAepf,UAAyB,IAAP/H,EAAgBA,EAAKyO,IAMxI,IAAK,IAAI1G,KAAOpB,OACI7C,IAAd8C,EAAKmB,IAAoBxK,EAAQmqB,YAAY3f,GAGnD,OAAOnB,EA6pBkB6hB,CAA4BlrB,EAASmmB,EAA4Bta,GAAQqc,IAE9Fve,SAAU,WACR,OAAOkC,GAOTsf,WAAY,SAAoBrqB,GAC9B,IAAI2B,EAEJ,OAAiC,QAAzBA,EAAKoJ,EAAM8R,gBAA6B,IAAPlb,OAAgB,EAASA,EAAG3B,IAMvE6a,qBAAsB,WACpB,OAAO9P,EAAMiH,YAMfsM,kBAAmB,SAA2BgM,GAK5C,QAJsB,IAAlBA,IACFA,GAAgB,GAGdA,EAAe,OAAkB,OAAXxiB,QAA8B,IAAXA,OAAoB,EAASA,EAAOwW,oBAEjF,IAAK0J,EAAuB,CAC1B,IAAIuC,GAAwB,OAAXziB,QAA8B,IAAXA,OAAoB,EAASA,EAAOwW,sBAAwB,GAMhG,YAJsB7Y,IAAlBsF,EAAMuV,UACRiK,EAAUjK,QAAUvV,EAAMuV,SAGrBiK,EAKT,IAFA,IAAIlM,EAAU,GAELpa,EAAI,EAAGA,EAAIumB,GAAiBvmB,IAAK,CACxC,IAAIwmB,EAASC,GAAazmB,GACtB4a,EAAO9T,EAAM0f,IAEbxrB,OAAO4d,GAAiC,EAAxC5d,CAA2C4f,KAAkB,IAATA,KACtDR,EAAQoM,GAAU5L,GAItB,OAAOR,GAQTjT,uBAAwB,WACtB4B,EAAW4Z,WAAY,EACvB1nB,EAAQ2oB,WAAWhM,IAAI3c,IAOzBoN,qBAAsB,WACpBU,EAAWwM,gBAAiB,GAE9B7J,uBAAwB,WACtBzQ,EAAQ4T,sBACR9F,EAAWwM,gBAAiB,GAE9BhL,eAAgB,WACd,OAAOuY,GAET4D,cAAe,SAAuBC,GACpClF,EAAakF,GAEftD,kBAAmB,WACjB,OAAOta,EAAW4Z,WAAa5Z,EAAW6V,YAAckE,EAAYlE,YAMtEpQ,qBAAsB,SAA8B9M,EAAMqM,EAAYV,QACjD,IAAfA,IACFA,GAAa,GAGf,IAAId,EAAWtR,EAAQmb,iCAAiC1U,GAEpDhE,EAAK2P,EAAatE,EAAW6d,eAAellB,GAAQqH,EAAWtO,OAAOiH,GACtEJ,EAAM5D,EAAG4D,IAGTnC,EAFMzB,EAAG6D,IAEMD,EAQnB,OAPAiL,EAAS8J,iBACT9J,EAASnF,IAAI9F,GACbiL,EAASnF,IAAI9F,GAEbiL,EAASmK,UAAS,SAAU3T,GAC1B9H,EAAQwR,wBAAwB/K,EAAMqB,EAAGA,EAAI5D,EAAQkO,MAEhDpS,EAAQ6a,mBAAmBpU,EAAM6K,EAAU,EAAGwB,IAMvDc,oBAAqB,WACnB3N,GAAS,SAAUQ,GACjB,OAAOzG,EAAQmb,iCAAiC1U,GAAM0I,WAS1DvB,mBAAoB,SAA4Bge,QACxB,IAAlBA,IACFA,GAAgB,GAGlB,IAAIC,EAAclG,EAAoBW,EAAU5mB,GAGhD,OADKksB,GAAezgB,GAAoB0gB,EAAalF,GAC9CkF,GAOT1Q,+BAAgC,WAK9B,OAJAsL,IAA6BA,EAA2B,CACtD9nB,EAAGoB,OAAOyjB,GAA8B,EAArCzjB,CAAwC,GAC3CnB,EAAGmB,OAAOyjB,GAA8B,EAArCzjB,CAAwC,KAEtC0mB,GAOTjV,wBAAyB,SAAiC/K,EAAMJ,EAAKC,EAAK8L,GAKxE,IAAI5S,OAJe,IAAf4S,IACFA,GAAa,GAKXA,GACGtE,EAAW6d,iBACd7d,EAAW6d,eAAiB5rB,OAAOiG,EAA0B,EAAjCjG,IAG9BP,EAASsO,EAAW6d,eAAellB,KAEnCqH,EAAW6d,oBAAiBplB,EAC5B/G,EAASsO,EAAWtO,OAAOiH,IAG7BqH,EAAW6V,YAAa,EACxBnkB,EAAO6G,IAAMA,EACb7G,EAAO8G,IAAMA,EAEbwhB,GAAwB,EACxBjB,EAAWiF,uBASbne,uBAAwB,SAAgCoe,EAAO3kB,QACjD,IAARA,IACFA,EAAMygB,EAAYxY,QAGpB,IAAI5M,EAAKzC,EAAQmb,iCACbxc,EAAI8D,EAAG9D,EACPC,EAAI6D,EAAG7D,EAEPotB,GAAgBle,EAAW6d,iBAAmB7d,EAAWwM,iBAAmB3b,EAAEwa,gBAAkBva,EAAEua,eAElG4S,GAASC,IACX/lB,GAAS,SAAUQ,GACjB,IAAIhE,EAAK2E,EAAIX,GACTJ,EAAM5D,EAAG4D,IACTC,EAAM7D,EAAG6D,IACbtG,EAAQwR,wBAAwB/K,EAAMJ,EAAKC,OAUjD2lB,kBAAmB,SAA2BpS,IA/xBpD,SAA+BnQ,GAC7B,IAAI2I,EAAmB3I,EAAc4I,sBAErC,GAAKD,EAAL,CAKA,IAAI6Z,EAAiBhjB,GAAmBmJ,EAAiB/C,iBAAiBD,OAAQ3F,EAAc4F,iBAAiBD,QACjHpJ,GAAS,SAAUQ,GACjBiD,EAAc8H,wBAAwB/K,EAAMylB,EAAezlB,GAAMJ,IAAK6lB,EAAezlB,GAAMH,KAAK,WANhGoD,EAAciE,yBA4xBVwe,CAAsBnsB,GACtBA,EAAQosB,mBAAmBvE,EAAYxY,OAAQrP,EAAQga,iBAAmB6N,EAAYxY,OAAQwK,IAMhGvM,eAAgB,WACd,OAAOwY,EAAgB9lB,EAASsmB,EAAUza,IAE5C0B,iBAAkB,WAChB,OAAOwY,EAAkBO,EAAUM,IAErC2C,uBA9lBF,WACE,GAAKvpB,EAAQooB,oBAAb,CACA,IAAI3jB,EAAQojB,EAAYpjB,MACpBoT,EAAYgQ,EAAYhQ,UACxBwU,EAAiBxU,EAAUlZ,EAC3B2tB,EAAiBzU,EAAUjZ,EAC3B2tB,EAAqB1E,EAAYhE,eACrCY,GAAmBoD,EAAaF,EAAgB3nB,EAAQgpB,KAAMrC,GAC9DmB,GAAyB9nB,EAAQwsB,wBAAwB7E,EAAenoB,OAAQiF,GAChFqjB,GAAwB,EACxB,IAAIjE,EAAiBE,GAA+Btf,EAAOoT,GAEvDgM,IAAmB0I,GACvBF,IAAmBxU,EAAUlZ,GAAK2tB,IAAmBzU,EAAUjZ,GAC7DoB,EAAQ+pB,iBAGVlC,EAAYhE,eAAiBA,IA8kB7B8F,2BAA4B,WAC1B3pB,EAAQ2oB,WAAWtb,QAAQof,IAQ3BptB,EAAoB,EAAE4O,UAAUya,GAA6B,GAAO,IAEtEpW,oBAAqB,WACnB,QAAyB/L,IAArB8L,EAAgC,CAGlC,IAFA,IAAIqa,GAAc,EAET3nB,EAAI/E,EAAQgpB,KAAK9kB,OAAS,EAAGa,GAAK,EAAGA,IAAK,CACjD,IAAI4nB,EAAW3sB,EAAQgpB,KAAKjkB,GAE5B,GAAI4nB,EAAS7e,WAAW4Z,UAAW,CACjCgF,EAAcC,EACd,OAIJta,EAAmBqa,EAGrB,OAAOra,GAETua,yBAA0B,WACxB,IAAIC,EAAiB7sB,EAAQsS,sBAC7B,GAAKxE,EAAW6d,gBAAmBkB,IAt9G3C,SAAyB/e,EAAYgf,GACnCpkB,GAAiBoF,EAAWtO,OAAOb,EAAGmP,EAAW6d,eAAehtB,EAAGmuB,EAAiBttB,OAAOb,GAC3F+J,GAAiBoF,EAAWtO,OAAOZ,EAAGkP,EAAW6d,eAAe/sB,EAAGkuB,EAAiBttB,OAAOZ,GAq9GrFmuB,CAAgBjf,EAAY+e,EAAe/e,YAEvCrE,GAAYojB,IAAiB,CAC/B,IAAIrtB,EAASsO,EAAWtO,OACxBsL,GAAmBtL,EAAQA,EAAQqtB,EAAeta,qBAGtDya,qBAAsB,WACpB,OAAOxf,QAAQ3B,EAAMohB,wBAMvB7D,QAAS,SAAiB8D,GACxBvF,EAAiBuF,EAAQpf,WACzB8Z,EAAmBsF,EAAQ3a,kBAKU,OAArCgU,QAAkF,IAArCA,GAAuDA,IACpGA,EAAmCxmB,OAAOsC,EAAmB,EAA1BtC,CAA6BmtB,EAAQC,gBAAgBntB,EAAQ6N,gCAAiCqf,EAAQE,2BAA0B,WACjK,IAAI3qB,EAEAzC,EAAQ8hB,UACV9hB,EAAQqtB,SAAW5X,GAAwB,EAAE6X,QAEP,QAArC7qB,EAAKzC,EAAQ+a,0BAAuC,IAAPtY,GAAyBA,EAAGmK,KAAK5M,QAKrF8hB,WAAW,EACXuL,SAAU5X,GAAwB,EAAE8X,WAGtC,OAAOvtB,IAIX,SAASysB,GAA6BxjB,GACpCA,EAAM2jB,2BAGR,SAAShE,GAA2B3f,GAClCA,EAAMsgB,yBAGR,IAkDIiE,GAlDAhC,GAAezrB,OAAOzC,EAAiC,EAAxCyC,CAA2C,CAAC,WAAYA,OAAOzC,EAA0B,EAAjCyC,CAAoC6d,KAE3G0N,GAAkBE,GAAatnB,OAG/BupB,GAAUtwB,EAAoB,KAG9BuwB,GAAevwB,EAAoB,KAGnCwwB,GAAkBxwB,EAAoB,KAGtCywB,GAAUzwB,EAAoB,KAG9B8mB,GAAY9mB,EAAoB,KAGhC0wB,GAAa1wB,EAAoB,KASjC2wB,GAAiB,IAAIxO,IAAI,CAAC,QAAS,SAAU,MAAO,OAAQ,QAAS,SAAU,IAAK,MAEpFyO,GAAkB,SAAyBvjB,GAC7C,OAAOsjB,GAAejN,IAAIrW,IAOxBwjB,GAAsB,SAA6BvmB,EAAOwmB,GAG5DxmB,EAAM0E,IAAI8hB,GAAI,GACdxmB,EAAM0E,IAAI8hB,IAGRC,GAAgC,SAAuBpmB,GACzD,OAAOA,IAAM8lB,GAAwB,GAAK9lB,IAAM8N,GAAkB,IAKpE,SAAW4X,GACTA,EAA4B,MAAI,QAChCA,EAA6B,OAAI,SACjCA,EAA2B,KAAI,OAC/BA,EAA4B,MAAI,QAChCA,EAA0B,IAAI,MAC9BA,EAA6B,OAAI,SANnC,CAOGA,KAAyBA,GAAuB,KAEnD,IAAIW,GAAmB,SAA0BC,EAAQC,GACvD,OAAOjX,WAAWgX,EAAOE,MAAM,MAAMD,KAGnCE,GAAyB,SAAgCC,EAAMC,GACjE,OAAO,SAAUC,EAAOjsB,GACtB,IAAIwhB,EAAYxhB,EAAGwhB,UACnB,GAAkB,SAAdA,IAAyBA,EAAW,OAAO,EAC/C,IAAI0K,EAAW1K,EAAU9N,MAAM,sBAE/B,GAAIwY,EACF,OAAOR,GAAiBQ,EAAS,GAAIF,GAErC,IAAIL,EAASnK,EAAU9N,MAAM,oBAE7B,OAAIiY,EACKD,GAAiBC,EAAO,GAAII,GAE5B,IAMXI,GAAgB,IAAItP,IAAI,CAAC,IAAK,IAAK,MACnCuP,GAAgC5K,GAAkC,EAAE6K,QAAO,SAAUtkB,GACvF,OAAQokB,GAAc/N,IAAIrW,MAkB5B,IAAIukB,GAAmB,CAErBC,MAAO,SAAevsB,GACpB,IAAI9D,EAAI8D,EAAG9D,EACX,OAAOA,EAAE2H,IAAM3H,EAAE0H,KAEnB4oB,OAAQ,SAAgBxsB,GACtB,IAAI7D,EAAI6D,EAAG7D,EACX,OAAOA,EAAE0H,IAAM1H,EAAEyH,KAEnBqJ,IAAK,SAAagf,EAAOjsB,GACvB,IAAIiN,EAAMjN,EAAGiN,IACb,OAAO0H,WAAW1H,IAEpBC,KAAM,SAAc+e,EAAOjsB,GACzB,IAAIkN,EAAOlN,EAAGkN,KACd,OAAOyH,WAAWzH,IAEpBC,OAAQ,SAAgBnN,EAAI8H,GAC1B,IAAI3L,EAAI6D,EAAG7D,EACP8Q,EAAMnF,EAAGmF,IACb,OAAO0H,WAAW1H,IAAQ9Q,EAAE0H,IAAM1H,EAAEyH,MAEtCwJ,MAAO,SAAepN,EAAI8H,GACxB,IAAI5L,EAAI8D,EAAG9D,EACPgR,EAAOpF,EAAGoF,KACd,OAAOyH,WAAWzH,IAAShR,EAAE2H,IAAM3H,EAAE0H,MAGvC1H,EAAG4vB,GAAuB,EAAG,IAC7B3vB,EAAG2vB,GAAuB,EAAG,KAuC3BW,GAAmD,SAA0CxlB,EAAelK,EAAQuI,EAAQiX,QAC/G,IAAXjX,IACFA,EAAS,SAGW,IAAlBiX,IACFA,EAAgB,IAGlBxf,EAASO,OAAOzC,EAA4B,EAAnCyC,CAAsC,GAAIP,GACnDwf,EAAgBjf,OAAOzC,EAA4B,EAAnCyC,CAAsC,GAAIif,GAC1D,IAAImQ,EAAuBpvB,OAAO0S,KAAKjT,GAAQsvB,OAAOf,IAGlDqB,EAAyB,GACzBC,GAAsC,EACtCC,EAAuB,GAiE3B,GAhEAH,EAAqB9hB,SAAQ,SAAU7C,GACrC,IAAI/C,EAAQiC,EAAcuI,SAASzH,GACnC,GAAKd,EAAcwgB,SAAS1f,GAA5B,CACA,IAGI+kB,EAHAC,EAAOznB,EAAOyC,GACdyjB,EAAKzuB,EAAOgL,GACZilB,EAAW1vB,OAAO8tB,GAA2C,EAAlD9tB,CAAqDyvB,GAMpE,GAAIzvB,OAAOsd,GAA+C,EAAtDtd,CAAyDkuB,GAG3D,IAFA,IAAIyB,EAAezB,EAAG/pB,OAEba,EAAc,OAAVkpB,EAAG,GAAc,EAAI,EAAGlpB,EAAI2qB,EAAc3qB,IAChDwqB,EAIHxvB,OAAOpC,EAAiC,EAAxCoC,CAA2CA,OAAO8tB,GAA2C,EAAlD9tB,CAAqDkuB,EAAGlpB,MAAQwqB,EAAQ,2CAHnHA,EAASxvB,OAAO8tB,GAA2C,EAAlD9tB,CAAqDkuB,EAAGlpB,IACjEhF,OAAOpC,EAAiC,EAAxCoC,CAA2CwvB,IAAWE,GAAYvB,GAA8BuB,IAAavB,GAA8BqB,GAAS,sEAMxJA,EAASxvB,OAAO8tB,GAA2C,EAAlD9tB,CAAqDkuB,GAGhE,GAAIwB,IAAaF,EAGf,GAAIrB,GAA8BuB,IAAavB,GAA8BqB,GAAS,CACpF,IAAItvB,EAAUwH,EAAMuG,MAEG,kBAAZ/N,GACTwH,EAAM0E,IAAIiL,WAAWnX,IAGL,kBAAPguB,EACTzuB,EAAOgL,GAAO4M,WAAW6W,GAChB1Q,MAAMC,QAAQyQ,IAAOsB,IAAW3Z,GAAkB,IAC3DpW,EAAOgL,GAAOyjB,EAAG5P,IAAIjH,kBAEA,OAAbqY,QAAkC,IAAbA,OAAsB,EAASA,EAASxL,aAA0B,OAAXsL,QAA8B,IAAXA,OAAoB,EAASA,EAAOtL,aAAwB,IAATuL,GAAqB,IAAPvB,GAG7J,IAATuB,EACF/nB,EAAM0E,IAAIojB,EAAOtL,UAAUuL,IAE3BhwB,EAAOgL,GAAOilB,EAASxL,UAAUgK,IAK9BoB,IACHD,EA1JV,SAAyC1lB,GACvC,IAAIimB,EAAoB,GAWxB,OAVAd,GAA8BxhB,SAAQ,SAAU7C,GAC9C,IAAI/C,EAAQiC,EAAcuI,SAASzH,QAErBjE,IAAVkB,IACFkoB,EAAkB3yB,KAAK,CAACwN,EAAK/C,EAAMuG,QACnCvG,EAAM0E,IAAI3B,EAAIuL,WAAW,SAAW,EAAI,OAIxC4Z,EAAkBzrB,QAAQwF,EAAcgR,aACrCiV,EA8I0BC,CAAgClmB,GACzD2lB,GAAsC,GAGxCC,EAAqBtyB,KAAKwN,GAC1BwU,EAAcxU,QAA8BjE,IAAvByY,EAAcxU,GAAqBwU,EAAcxU,GAAOhL,EAAOgL,GACpFwjB,GAAoBvmB,EAAOwmB,QAK7BqB,EAAqBprB,OAAQ,CAC/B,IAAI2rB,EAtHuB,SAAkCrwB,EAAQkK,EAAeomB,GACtF,IAAIC,EAAarmB,EAAckE,qBAC3B5N,EAAU0J,EAAc2K,cACxB2b,EAAuBvZ,iBAAiBzW,GACxCiwB,EAAUD,EAAqBC,QAM/BC,EAAsB,CACxBxgB,IANQsgB,EAAqBtgB,IAO7BC,KANSqgB,EAAqBrgB,KAO9BC,OANWogB,EAAqBpgB,OAOhCC,MANUmgB,EAAqBngB,MAO/BoU,UANc+L,EAAqB/L,WAUrB,SAAZgM,GACFvmB,EAAcmgB,eAAe,UAAWrqB,EAAOywB,SAAW,SAI5DvmB,EAAcgR,aACd,IAAIyV,EAAazmB,EAAckE,qBAQ/B,OAPAkiB,EAAYziB,SAAQ,SAAU7C,GAG5B,IAAI/C,EAAQiC,EAAcuI,SAASzH,GACnCwjB,GAAoBvmB,EAAOsnB,GAAiBvkB,GAAKulB,EAAYG,IAC7D1wB,EAAOgL,GAAOukB,GAAiBvkB,GAAK2lB,EAAYH,MAE3CxwB,EAqFiB4wB,CAAyB5wB,EAAQkK,EAAe4lB,GActE,OAZIF,EAAuBlrB,QACzBkrB,EAAuB/hB,SAAQ,SAAU5K,GACvC,IAAI8H,EAAKxK,OAAOzC,EAA0B,EAAjCyC,CAAoC0C,EAAI,GAC7C+H,EAAMD,EAAG,GACT9C,EAAQ8C,EAAG,GAEfb,EAAcuI,SAASzH,GAAK2B,IAAI1E,MAKpCiC,EAAcgR,aACP,CACLlb,OAAQqwB,EACR7Q,cAAeA,GAGjB,MAAO,CACLxf,OAAQA,EACRwf,cAAeA,IAarB,SAASqR,GAAe3mB,EAAelK,EAAQuI,EAAQiX,GACrD,OAhQqB,SAA0Bxf,GAC/C,OAAOO,OAAO0S,KAAKjT,GAAQ8wB,KAAKvC,IA+PzBwC,CAAiB/wB,GAAU0vB,GAAiDxlB,EAAelK,EAAQuI,EAAQiX,GAAiB,CACjIxf,OAAQA,EACRwf,cAAeA,GAanB,IAAIwR,GAAoC,SAAyB9mB,EAAelK,EAAQuI,EAAQiX,GAC9F,IAAIxI,EA7lFN,SAA6B9M,EAAejH,EAAIuc,GAC9C,IAAIzU,EAEA/K,EAASO,OAAOzC,EAA0B,EAAjCyC,CAAoC0C,EAAI,IAEjDzC,EAAU0J,EAAc2K,cAC5B,KAAMrU,aAAmBywB,aAAc,MAAO,CAC5CjxB,OAAQA,EACRwf,cAAeA,GAiBjB,IAAK,IAAIxU,KAbLwU,IACFA,EAAgBjf,OAAOzC,EAA4B,EAAnCyC,CAAsC,GAAIif,IAI5DtV,EAAcihB,cAAa,SAAUljB,GACnC,IAAIxH,EAAUwH,EAAMuG,MACpB,GAAK8H,GAAc7V,GAAnB,CACA,IAAIuW,EAAWP,GAAiBhW,EAASD,GACrCwW,GAAU/O,EAAM0E,IAAIqK,OAIVhX,EAAQ,CACtB,IAAIS,EAAUT,EAAOgL,GACrB,GAAKsL,GAAc7V,GAAnB,CACA,IAAIuW,EAAWP,GAAiBhW,EAASD,GACpCwW,IAELhX,EAAOgL,GAAOgM,EAIVwI,IAA6C,QAA7BzU,EAAKyU,EAAcxU,UAAyB,IAAPD,IAAqByU,EAAcxU,GAAOvK,MAGrG,MAAO,CACLT,OAAQA,EACRwf,cAAeA,GAqjFF0R,CAAoBhnB,EAAelK,EAAQwf,GAG1D,OAAOqR,GAAe3mB,EAFtBlK,EAASgX,EAAShX,OAE2BuI,EAD7CiX,EAAgBxI,EAASwI,gBAMvB2R,GAAuBxzB,EAAoB,KAG3CyzB,GAAezzB,EAAoB,KAGnC0zB,GAAW1zB,EAAoB,KAoBnC,IAAI2zB,GAAa,CACfxL,SAAU,MACVO,sBAAuB,SAA+BkL,EAAYvmB,GAChE,GAAIzK,OAAOkkB,GAAmC,EAA1ClkB,CAA6CyK,GAAM,CACrD,IAAIwmB,EAAcjxB,OAAO8wB,GAAsC,EAA7C9wB,CAAgDyK,GAClE,OAAOwmB,GAAcA,EAAYC,SAAe,EAEhD,IAXmCjxB,EAW/BkxB,GAX+BlxB,EAWiB+wB,EAVjDhwB,OAAO0V,iBAAiBzW,IAW3B,OAAQD,OAAO4tB,GAAuC,EAA9C5tB,CAAiDyK,GAAO0mB,EAAcxa,iBAAiBlM,GAAO0mB,EAAc1mB,KAAS,GAGjI0b,iBAAkB,SAA0BxkB,EAAGC,GAM7C,OAAsC,EAA/BD,EAAEyvB,wBAAwBxvB,GAAS,GAAK,GAEjDuf,cAAe,SAAuBrV,EAAOrB,GAC3C,IAAI/H,EAEJ,OAA8B,QAAtBA,EAAKoJ,EAAMulB,aAA0B,IAAP3uB,OAAgB,EAASA,EAAG+H,IAEpEoD,mBAAoB,SAA4B5N,EAASyC,GAEvD,OAAO0E,EAAenH,EADGyC,EAAGE,qBAW9B2K,eAAgB,SAAwBtN,EAAS+wB,EAAYllB,GAC3D,IAAIwlB,EAAoBxlB,EAAMwlB,kBAC9BN,EAAWK,MAAMnN,UAAYoN,EAAoBA,EAAkB,GAAI,IAAM,OAE7ErxB,EAAQ+pB,kBAEVxc,iBAAkB,SAA0B+Y,EAAUgL,GACpDhL,EAAS8K,MAAMnN,UAAYqN,EAAaF,MAAMnN,WAEhD+B,2BAA4B,SAAoCxb,EAAK/H,GACnE,IAAI8uB,EAAO9uB,EAAG8uB,KACVH,EAAQ3uB,EAAG2uB,aACRG,EAAK/mB,UACL4mB,EAAM5mB,IAOfkb,qBAAsB,SAA8B1lB,EAASyC,EAAI8H,EAAI2e,GACnE,IAAIsI,EAAkBjnB,EAAGinB,qBAEP,IAAdtI,IACFA,GAAY,GAGd,IAAIpW,EAAarQ,EAAGqQ,WAChBkM,EAAgBvc,EAAGuc,cACnBxf,EAASO,OAAOzC,EAA0B,EAAjCyC,CAAoC0C,EAAI,CAAC,aAAc,kBAEhEsF,EAAShI,OAAO0tB,GAA2B,EAAlC1tB,CAAqCP,EAAQsT,GAAc,GAAI9S,GAW5E,GANIwxB,IACExS,IAAeA,EAAgBwS,EAAgBxS,IAC/Cxf,IAAQA,EAASgyB,EAAgBhyB,IACjCuI,IAAQA,EAASypB,EAAgBzpB,KAGnCmhB,EAAW,CACbnpB,OAAO0tB,GAAyC,EAAhD1tB,CAAmDC,EAASR,EAAQuI,GACpE,IAAI0pB,EAASjB,GAAkCxwB,EAASR,EAAQuI,EAAQiX,GACxEA,EAAgByS,EAAOzS,cACvBxf,EAASiyB,EAAOjyB,OAGlB,OAAOO,OAAOzC,EAA4B,EAAnCyC,CAAsC,CAC3C+S,WAAYA,EACZkM,cAAeA,GACdxf,IAEL2mB,4BAA6BwK,GAA0D,EACvFpL,MAAO,SAAevlB,EAAS4mB,EAAaD,EAAc7Y,EAAY+Z,EAAanoB,EAASmM,QAChEtF,IAAtBvG,EAAQipB,YACVrC,EAAYwK,MAAMtH,WAAa9pB,EAAQipB,UAAY,UAAY,UAGjE,IAAIyI,EAAuB5jB,EAAW4Z,WAAaG,EAAYlE,WAC/D5jB,OAAO2tB,GAAsC,EAA7C3tB,CAAgD6mB,EAAaD,EAAc7Y,EAAY+Z,EAAanoB,EAASmM,EAAMwlB,kBAAmBK,EAAuB3N,QAAiCxd,EAAWmrB,EAAuBpN,QAAuC/d,IAEzQ2H,OAAQ0iB,GAAiC,GAEvCe,GAAoBtM,GAAqByL,IAGzCc,GAA6Bz0B,EAAoB,KAGjD00B,GAAc10B,EAAoB,KAGlC20B,GAAgB30B,EAAoB,KAGpC40B,GAAmB50B,EAAoB,KAGvC60B,GAAmB70B,EAAoB,KAcvC80B,GAAmB5M,GAAqBtlB,OAAOzC,EAA4B,EAAnCyC,CAAsCA,OAAOzC,EAA4B,EAAnCyC,CAAsC,GAAI+wB,IAAa,CACvI5P,cAAe,SAAuBrV,EAAOrB,GAC3C,OAAOqB,EAAMrB,IAEfqb,sBAAuB,SAA+BkL,EAAYvmB,GAChE,IAAI/H,EAEJ,OAAI1C,OAAOkkB,GAAmC,EAA1ClkB,CAA6CyK,IACyB,QAA/D/H,EAAK1C,OAAO8wB,GAAsC,EAA7C9wB,CAAgDyK,UAAyB,IAAP/H,OAAgB,EAASA,EAAGwuB,UAAY,GAG1HzmB,EAAOunB,GAA8C,EAAElR,IAAIrW,GAA2DA,EAApDzK,OAAO+xB,GAAmC,EAA1C/xB,CAA6CyK,GACxGumB,EAAWmB,aAAa1nB,KAEjC2b,4BAA6ByL,GAAgE,EAC7FrM,MAAO,SAAe4M,EAAUvL,EAAaD,EAAc7Y,EAAY+Z,EAAanoB,EAASmM,GAC3F,IAAI6lB,EAAuB5jB,EAAW4Z,WAAaG,EAAYlE,WAC/D5jB,OAAO8xB,GAAmC,EAA1C9xB,CAA6C6mB,EAAaD,EAAc7Y,EAAY+Z,EAAanoB,EAASmM,EAAMwlB,kBAAmBK,EAAuB3N,QAAiCxd,EAAWmrB,EAAuBpN,QAAuC/d,IAEtQ2H,OAAQ8jB,GAAoC,KAI1CI,GAAmBj1B,EAAoB,KAyBvCk1B,GAAetyB,OAAOzC,EAA4B,EAAnCyC,CAAsCA,OAAOzC,EAA4B,EAAnCyC,CAAsC,CAC7FuyB,SAnBiD,SAAgCxV,EAAWpd,GAC5F,OAAOK,OAAOqyB,GAAyC,EAAhDryB,CAAmD+c,GAAamV,GAAiBvyB,EAAS,CAC/F6yB,4BAA4B,IACzBZ,GAAkBjyB,EAAS,CAC9B6yB,4BAA4B,MAgB7B5Q,IAAwBU,IAYvBhlB,GAAS0C,OAAOzC,EAA4B,EAAnCyC,CAAsCA,OAAOzC,EAA4B,EAAnCyC,CAAsCA,OAAOzC,EAA4B,EAAnCyC,CAAsC,GAAIsyB,IAAetd,IAAYgI"},"input":"(this[\"webpackJsonp@minimal/minimal-kit-react\"] = this[\"webpackJsonp@minimal/minimal-kit-react\"] || []).push([[165],{\n\n/***/ 2826:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"a\", function() { return /* binding */ domMax; });\n\n// EXTERNAL MODULE: ./node_modules/tslib/tslib.es6.js\nvar tslib_es6 = __webpack_require__(22);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(1);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/context/MotionConfigContext.js\nvar MotionConfigContext = __webpack_require__(429);\n\n// EXTERNAL MODULE: ./node_modules/hey-listen/dist/hey-listen.es.js\nvar hey_listen_es = __webpack_require__(106);\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/gestures/utils/event-type.js\nfunction isMouseEvent(event) {\n  // PointerEvent inherits from MouseEvent so we can't use a straight instanceof check.\n  if (typeof PointerEvent !== \"undefined\" && event instanceof PointerEvent) {\n    return !!(event.pointerType === \"mouse\");\n  }\n\n  return event instanceof MouseEvent;\n}\n\nfunction isTouchEvent(event) {\n  var hasTouches = !!event.touches;\n  return hasTouches;\n}\n\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/events/event-info.js\n\n/**\n * Filters out events not attached to the primary pointer (currently left mouse button)\n * @param eventHandler\n */\n\nfunction filterPrimaryPointer(eventHandler) {\n  return function (event) {\n    var isMouseEvent = event instanceof MouseEvent;\n    var isPrimaryPointer = !isMouseEvent || isMouseEvent && event.button === 0;\n\n    if (isPrimaryPointer) {\n      eventHandler(event);\n    }\n  };\n}\n\nvar defaultPagePoint = {\n  pageX: 0,\n  pageY: 0\n};\n\nfunction pointFromTouch(e, pointType) {\n  if (pointType === void 0) {\n    pointType = \"page\";\n  }\n\n  var primaryTouch = e.touches[0] || e.changedTouches[0];\n  var point = primaryTouch || defaultPagePoint;\n  return {\n    x: point[pointType + \"X\"],\n    y: point[pointType + \"Y\"]\n  };\n}\n\nfunction pointFromMouse(point, pointType) {\n  if (pointType === void 0) {\n    pointType = \"page\";\n  }\n\n  return {\n    x: point[pointType + \"X\"],\n    y: point[pointType + \"Y\"]\n  };\n}\n\nfunction extractEventInfo(event, pointType) {\n  if (pointType === void 0) {\n    pointType = \"page\";\n  }\n\n  return {\n    point: isTouchEvent(event) ? pointFromTouch(event, pointType) : pointFromMouse(event, pointType)\n  };\n}\n\nfunction getViewportPointFromEvent(event) {\n  return extractEventInfo(event, \"client\");\n}\n\nvar wrapHandler = function wrapHandler(handler, shouldFilterPrimaryPointer) {\n  if (shouldFilterPrimaryPointer === void 0) {\n    shouldFilterPrimaryPointer = false;\n  }\n\n  var listener = function listener(event) {\n    return handler(event, extractEventInfo(event));\n  };\n\n  return shouldFilterPrimaryPointer ? filterPrimaryPointer(listener) : listener;\n};\n\n\n// EXTERNAL MODULE: ./node_modules/framesync/dist/es/index.js + 2 modules\nvar es = __webpack_require__(155);\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/utils/time-conversion.js\nvar time_conversion = __webpack_require__(500);\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/events/use-dom-event.js\n\n\nfunction addDomEvent(target, eventName, handler, options) {\n  target.addEventListener(eventName, handler, options);\n  return function () {\n    return target.removeEventListener(eventName, handler, options);\n  };\n}\n/**\n * Attaches an event listener directly to the provided DOM element.\n *\n * Bypassing React's event system can be desirable, for instance when attaching non-passive\n * event handlers.\n *\n * ```jsx\n * const ref = useRef(null)\n *\n * useDomEvent(ref, 'wheel', onWheel, { passive: false })\n *\n * return <div ref={ref} />\n * ```\n *\n * @param ref - React.RefObject that's been provided to the element you want to bind the listener to.\n * @param eventName - Name of the event you want listen for.\n * @param handler - Function to fire when receiving the event.\n * @param options - Options to pass to `Event.addEventListener`.\n *\n * @public\n */\n\n\nfunction useDomEvent(ref, eventName, handler, options) {\n  Object(react[\"useEffect\"])(function () {\n    var element = ref.current;\n\n    if (handler && element) {\n      return addDomEvent(element, eventName, handler, options);\n    }\n  }, [ref, eventName, handler, options]);\n}\n\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/utils/is-browser.js\nvar is_browser = __webpack_require__(472);\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/events/utils.js\n // We check for event support via functions in case they've been mocked by a testing suite.\n\nvar utils_supportsPointerEvents = function supportsPointerEvents() {\n  return is_browser[\"a\" /* isBrowser */] && window.onpointerdown === null;\n};\n\nvar utils_supportsTouchEvents = function supportsTouchEvents() {\n  return is_browser[\"a\" /* isBrowser */] && window.ontouchstart === null;\n};\n\nvar utils_supportsMouseEvents = function supportsMouseEvents() {\n  return is_browser[\"a\" /* isBrowser */] && window.onmousedown === null;\n};\n\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/events/use-pointer-event.js\n\n\n\nvar mouseEventNames = {\n  pointerdown: \"mousedown\",\n  pointermove: \"mousemove\",\n  pointerup: \"mouseup\",\n  pointercancel: \"mousecancel\",\n  pointerover: \"mouseover\",\n  pointerout: \"mouseout\",\n  pointerenter: \"mouseenter\",\n  pointerleave: \"mouseleave\"\n};\nvar touchEventNames = {\n  pointerdown: \"touchstart\",\n  pointermove: \"touchmove\",\n  pointerup: \"touchend\",\n  pointercancel: \"touchcancel\"\n};\n\nfunction getPointerEventName(name) {\n  if (utils_supportsPointerEvents()) {\n    return name;\n  } else if (utils_supportsTouchEvents()) {\n    return touchEventNames[name];\n  } else if (utils_supportsMouseEvents()) {\n    return mouseEventNames[name];\n  }\n\n  return name;\n}\n\nfunction addPointerEvent(target, eventName, handler, options) {\n  return addDomEvent(target, getPointerEventName(eventName), wrapHandler(handler, eventName === \"pointerdown\"), options);\n}\n\nfunction usePointerEvent(ref, eventName, handler, options) {\n  return useDomEvent(ref, getPointerEventName(eventName), handler && wrapHandler(handler, eventName === \"pointerdown\"), options);\n}\n\n\n// CONCATENATED MODULE: ./node_modules/popmotion/dist/es/utils/is-point.js\nvar isPoint = function isPoint(point) {\n  return point.hasOwnProperty('x') && point.hasOwnProperty('y');\n};\n\n\n// CONCATENATED MODULE: ./node_modules/popmotion/dist/es/utils/is-point-3d.js\n\n\nvar is_point_3d_isPoint3D = function isPoint3D(point) {\n  return isPoint(point) && point.hasOwnProperty('z');\n};\n\n\n// EXTERNAL MODULE: ./node_modules/popmotion/dist/es/utils/inc.js\nvar inc = __webpack_require__(884);\n\n// CONCATENATED MODULE: ./node_modules/popmotion/dist/es/utils/distance.js\n\n\n\n\nvar distance1D = function distance1D(a, b) {\n  return Math.abs(a - b);\n};\n\nfunction distance(a, b) {\n  if (Object(inc[\"a\" /* isNum */])(a) && Object(inc[\"a\" /* isNum */])(b)) {\n    return distance1D(a, b);\n  } else if (isPoint(a) && isPoint(b)) {\n    var xDelta = distance1D(a.x, b.x);\n    var yDelta = distance1D(a.y, b.y);\n    var zDelta = is_point_3d_isPoint3D(a) && is_point_3d_isPoint3D(b) ? distance1D(a.z, b.z) : 0;\n    return Math.sqrt(Math.pow(xDelta, 2) + Math.pow(yDelta, 2) + Math.pow(zDelta, 2));\n  }\n}\n\n\n// EXTERNAL MODULE: ./node_modules/popmotion/dist/es/utils/pipe.js\nvar pipe = __webpack_require__(501);\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/gestures/PanSession.js\n\n\n\n\n\n\n\n/**\n * @internal\n */\n\nvar PanSession_PanSession =\n/** @class */\nfunction () {\n  function PanSession(event, handlers, _a) {\n    var _this = this;\n\n    var _b = _a === void 0 ? {} : _a,\n        transformPagePoint = _b.transformPagePoint;\n    /**\n     * @internal\n     */\n\n\n    this.startEvent = null;\n    /**\n     * @internal\n     */\n\n    this.lastMoveEvent = null;\n    /**\n     * @internal\n     */\n\n    this.lastMoveEventInfo = null;\n    /**\n     * @internal\n     */\n\n    this.handlers = {};\n\n    this.updatePoint = function () {\n      if (!(_this.lastMoveEvent && _this.lastMoveEventInfo)) return;\n      var info = getPanInfo(_this.lastMoveEventInfo, _this.history);\n      var isPanStarted = _this.startEvent !== null; // Only start panning if the offset is larger than 3 pixels. If we make it\n      // any larger than this we'll want to reset the pointer history\n      // on the first update to avoid visual snapping to the cursoe.\n\n      var isDistancePastThreshold = distance(info.offset, {\n        x: 0,\n        y: 0\n      }) >= 3;\n      if (!isPanStarted && !isDistancePastThreshold) return;\n      var point = info.point;\n      var timestamp = Object(es[\"d\" /* getFrameData */])().timestamp;\n\n      _this.history.push(Object(tslib_es6[\"a\" /* __assign */])(Object(tslib_es6[\"a\" /* __assign */])({}, point), {\n        timestamp: timestamp\n      }));\n\n      var _a = _this.handlers,\n          onStart = _a.onStart,\n          onMove = _a.onMove;\n\n      if (!isPanStarted) {\n        onStart && onStart(_this.lastMoveEvent, info);\n        _this.startEvent = _this.lastMoveEvent;\n      }\n\n      onMove && onMove(_this.lastMoveEvent, info);\n    };\n\n    this.handlePointerMove = function (event, info) {\n      _this.lastMoveEvent = event;\n      _this.lastMoveEventInfo = transformPoint(info, _this.transformPagePoint); // Because Safari doesn't trigger mouseup events when it's above a `<select>`\n\n      if (isMouseEvent(event) && event.buttons === 0) {\n        _this.handlePointerUp(event, info);\n\n        return;\n      } // Throttle mouse move event to once per frame\n\n\n      es[\"b\" /* default */].update(_this.updatePoint, true);\n    };\n\n    this.handlePointerUp = function (event, info) {\n      _this.end();\n\n      var _a = _this.handlers,\n          onEnd = _a.onEnd,\n          onSessionEnd = _a.onSessionEnd;\n      var panInfo = getPanInfo(transformPoint(info, _this.transformPagePoint), _this.history);\n\n      if (_this.startEvent && onEnd) {\n        onEnd(event, panInfo);\n      }\n\n      onSessionEnd && onSessionEnd(event, panInfo);\n    }; // If we have more than one touch, don't start detecting this gesture\n\n\n    if (isTouchEvent(event) && event.touches.length > 1) return;\n    this.handlers = handlers;\n    this.transformPagePoint = transformPagePoint;\n    var info = extractEventInfo(event);\n    var initialInfo = transformPoint(info, this.transformPagePoint);\n    var point = initialInfo.point;\n    var timestamp = Object(es[\"d\" /* getFrameData */])().timestamp;\n    this.history = [Object(tslib_es6[\"a\" /* __assign */])(Object(tslib_es6[\"a\" /* __assign */])({}, point), {\n      timestamp: timestamp\n    })];\n    var onSessionStart = handlers.onSessionStart;\n    onSessionStart && onSessionStart(event, getPanInfo(initialInfo, this.history));\n    this.removeListeners = Object(pipe[\"a\" /* pipe */])(addPointerEvent(window, \"pointermove\", this.handlePointerMove), addPointerEvent(window, \"pointerup\", this.handlePointerUp), addPointerEvent(window, \"pointercancel\", this.handlePointerUp));\n  }\n\n  PanSession.prototype.updateHandlers = function (handlers) {\n    this.handlers = handlers;\n  };\n\n  PanSession.prototype.end = function () {\n    this.removeListeners && this.removeListeners();\n    es[\"a\" /* cancelSync */].update(this.updatePoint);\n  };\n\n  return PanSession;\n}();\n\nfunction transformPoint(info, transformPagePoint) {\n  return transformPagePoint ? {\n    point: transformPagePoint(info.point)\n  } : info;\n}\n\nfunction subtractPoint(a, b) {\n  return {\n    x: a.x - b.x,\n    y: a.y - b.y\n  };\n}\n\nfunction getPanInfo(_a, history) {\n  var point = _a.point;\n  return {\n    point: point,\n    delta: subtractPoint(point, lastDevicePoint(history)),\n    offset: subtractPoint(point, startDevicePoint(history)),\n    velocity: getVelocity(history, 0.1)\n  };\n}\n\nfunction startDevicePoint(history) {\n  return history[0];\n}\n\nfunction lastDevicePoint(history) {\n  return history[history.length - 1];\n}\n\nfunction getVelocity(history, timeDelta) {\n  if (history.length < 2) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n\n  var i = history.length - 1;\n  var timestampedPoint = null;\n  var lastPoint = lastDevicePoint(history);\n\n  while (i >= 0) {\n    timestampedPoint = history[i];\n\n    if (lastPoint.timestamp - timestampedPoint.timestamp > Object(time_conversion[\"a\" /* secondsToMilliseconds */])(timeDelta)) {\n      break;\n    }\n\n    i--;\n  }\n\n  if (!timestampedPoint) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n\n  var time = (lastPoint.timestamp - timestampedPoint.timestamp) / 1000;\n\n  if (time === 0) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n\n  var currentVelocity = {\n    x: (lastPoint.x - timestampedPoint.x) / time,\n    y: (lastPoint.y - timestampedPoint.y) / time\n  };\n\n  if (currentVelocity.x === Infinity) {\n    currentVelocity.x = 0;\n  }\n\n  if (currentVelocity.y === Infinity) {\n    currentVelocity.y = 0;\n  }\n\n  return currentVelocity;\n}\n\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/gestures/drag/utils/lock.js\nfunction createLock(name) {\n  var lock = null;\n  return function () {\n    var openLock = function openLock() {\n      lock = null;\n    };\n\n    if (lock === null) {\n      lock = name;\n      return openLock;\n    }\n\n    return false;\n  };\n}\n\nvar globalHorizontalLock = createLock(\"dragHorizontal\");\nvar globalVerticalLock = createLock(\"dragVertical\");\n\nfunction getGlobalLock(drag) {\n  var lock = false;\n\n  if (drag === \"y\") {\n    lock = globalVerticalLock();\n  } else if (drag === \"x\") {\n    lock = globalHorizontalLock();\n  } else {\n    var openHorizontal_1 = globalHorizontalLock();\n    var openVertical_1 = globalVerticalLock();\n\n    if (openHorizontal_1 && openVertical_1) {\n      lock = function lock() {\n        openHorizontal_1();\n        openVertical_1();\n      };\n    } else {\n      // Release the locks because we don't use them\n      if (openHorizontal_1) openHorizontal_1();\n      if (openVertical_1) openVertical_1();\n    }\n  }\n\n  return lock;\n}\n\nfunction isDragActive() {\n  // Check the gesture lock - if we get it, it means no drag gesture is active\n  // and we can safely fire the tap gesture.\n  var openGestureLock = getGlobalLock(true);\n  if (!openGestureLock) return true;\n  openGestureLock();\n  return false;\n}\n\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/utils/is-ref-object.js\nvar is_ref_object = __webpack_require__(797);\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/utils/geometry/index.js + 1 modules\nvar geometry = __webpack_require__(684);\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/utils/each-axis.js\n// Call a handler once for each axis\nfunction eachAxis(handler) {\n  return [handler(\"x\"), handler(\"y\")];\n}\n\n\n// EXTERNAL MODULE: ./node_modules/popmotion/dist/es/utils/mix.js\nvar mix = __webpack_require__(290);\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/gestures/drag/utils/constraints.js\n\n\n/**\n * Apply constraints to a point. These constraints are both physical along an\n * axis, and an elastic factor that determines how much to constrain the point\n * by if it does lie outside the defined parameters.\n */\n\nfunction applyConstraints(point, _a, elastic) {\n  var min = _a.min,\n      max = _a.max;\n\n  if (min !== undefined && point < min) {\n    // If we have a min point defined, and this is outside of that, constrain\n    point = elastic ? Object(mix[\"a\" /* mix */])(min, point, elastic.min) : Math.max(point, min);\n  } else if (max !== undefined && point > max) {\n    // If we have a max point defined, and this is outside of that, constrain\n    point = elastic ? Object(mix[\"a\" /* mix */])(max, point, elastic.max) : Math.min(point, max);\n  }\n\n  return point;\n}\n/**\n * Calculates a min projection point based on a pointer, pointer progress\n * within the drag target, and constraints.\n *\n * For instance if an element was 100px width, we were dragging from 0.25\n * along this axis, the pointer is at 200px, and there were no constraints,\n * we would calculate a min projection point of 175px.\n */\n\n\nfunction calcConstrainedMinPoint(point, length, progress, constraints, elastic) {\n  // Calculate a min point for this axis and apply it to the current pointer\n  var min = point - length * progress;\n  return constraints ? applyConstraints(min, constraints, elastic) : min;\n}\n/**\n * Calculate constraints in terms of the viewport when defined relatively to the\n * measured axis. This is measured from the nearest edge, so a max constraint of 200\n * on an axis with a max value of 300 would return a constraint of 500 - axis length\n */\n\n\nfunction calcRelativeAxisConstraints(axis, min, max) {\n  return {\n    min: min !== undefined ? axis.min + min : undefined,\n    max: max !== undefined ? axis.max + max - (axis.max - axis.min) : undefined\n  };\n}\n/**\n * Calculate constraints in terms of the viewport when\n * defined relatively to the measured bounding box.\n */\n\n\nfunction calcRelativeConstraints(layoutBox, _a) {\n  var top = _a.top,\n      left = _a.left,\n      bottom = _a.bottom,\n      right = _a.right;\n  return {\n    x: calcRelativeAxisConstraints(layoutBox.x, left, right),\n    y: calcRelativeAxisConstraints(layoutBox.y, top, bottom)\n  };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative axis\n */\n\n\nfunction calcViewportAxisConstraints(layoutAxis, constraintsAxis) {\n  var _a;\n\n  var min = constraintsAxis.min - layoutAxis.min;\n  var max = constraintsAxis.max - layoutAxis.max; // If the constraints axis is actually smaller than the layout axis then we can\n  // flip the constraints\n\n  if (constraintsAxis.max - constraintsAxis.min < layoutAxis.max - layoutAxis.min) {\n    _a = Object(tslib_es6[\"e\" /* __read */])([max, min], 2), min = _a[0], max = _a[1];\n  }\n\n  return {\n    min: layoutAxis.min + min,\n    max: layoutAxis.min + max\n  };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative box\n */\n\n\nfunction calcViewportConstraints(layoutBox, constraintsBox) {\n  return {\n    x: calcViewportAxisConstraints(layoutBox.x, constraintsBox.x),\n    y: calcViewportAxisConstraints(layoutBox.y, constraintsBox.y)\n  };\n}\n/**\n * Calculate the an axis position based on two axes and a progress value.\n */\n\n\nfunction calcPositionFromProgress(axis, constraints, progress) {\n  var axisLength = axis.max - axis.min;\n  var min = Object(mix[\"a\" /* mix */])(constraints.min, constraints.max - axisLength, progress);\n  return {\n    min: min,\n    max: min + axisLength\n  };\n}\n/**\n * Rebase the calculated viewport constraints relative to the layout.min point.\n */\n\n\nfunction rebaseAxisConstraints(layout, constraints) {\n  var relativeConstraints = {};\n\n  if (constraints.min !== undefined) {\n    relativeConstraints.min = constraints.min - layout.min;\n  }\n\n  if (constraints.max !== undefined) {\n    relativeConstraints.max = constraints.max - layout.min;\n  }\n\n  return relativeConstraints;\n}\n\nvar defaultElastic = 0.35;\n/**\n * Accepts a dragElastic prop and returns resolved elastic values for each axis.\n */\n\nfunction resolveDragElastic(dragElastic) {\n  if (dragElastic === false) {\n    dragElastic = 0;\n  } else if (dragElastic === true) {\n    dragElastic = defaultElastic;\n  }\n\n  return {\n    x: resolveAxisElastic(dragElastic, \"left\", \"right\"),\n    y: resolveAxisElastic(dragElastic, \"top\", \"bottom\")\n  };\n}\n\nfunction resolveAxisElastic(dragElastic, minLabel, maxLabel) {\n  return {\n    min: resolvePointElastic(dragElastic, minLabel),\n    max: resolvePointElastic(dragElastic, maxLabel)\n  };\n}\n\nfunction resolvePointElastic(dragElastic, label) {\n  var _a;\n\n  return typeof dragElastic === \"number\" ? dragElastic : (_a = dragElastic[label]) !== null && _a !== void 0 ? _a : 0;\n}\n\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/render/dom/projection/measure.js\n\n/**\n * Measure and return the element bounding box.\n *\n * We convert the box into an AxisBox2D to make it easier to work with each axis\n * individually and programmatically.\n *\n * This function optionally accepts a transformPagePoint function which allows us to compensate\n * for, for instance, measuring the element within a scaled plane like a Framer devivce preview component.\n */\n\nfunction getBoundingBox(element, transformPagePoint) {\n  var box = element.getBoundingClientRect();\n  return Object(geometry[\"c\" /* convertBoundingBoxToAxisBox */])(Object(geometry[\"f\" /* transformBoundingBox */])(box, transformPagePoint));\n}\n\n\n// EXTERNAL MODULE: ./node_modules/popmotion/dist/es/utils/clamp.js\nvar clamp = __webpack_require__(390);\n\n// EXTERNAL MODULE: ./node_modules/popmotion/dist/es/utils/progress.js\nvar utils_progress = __webpack_require__(664);\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/utils/geometry/delta-calc.js\n\n\nvar delta_calc_clampProgress = function clampProgress(v) {\n  return Object(clamp[\"a\" /* clamp */])(0, 1, v);\n};\n/**\n * Returns true if the provided value is within maxDistance of the provided target\n */\n\n\nfunction isNear(value, target, maxDistance) {\n  if (target === void 0) {\n    target = 0;\n  }\n\n  if (maxDistance === void 0) {\n    maxDistance = 0.01;\n  }\n\n  return distance(value, target) < maxDistance;\n}\n\nfunction calcLength(axis) {\n  return axis.max - axis.min;\n}\n/**\n * Calculate a transform origin relative to the source axis, between 0-1, that results\n * in an asthetically pleasing scale/transform needed to project from source to target.\n */\n\n\nfunction calcOrigin(source, target) {\n  var origin = 0.5;\n  var sourceLength = calcLength(source);\n  var targetLength = calcLength(target);\n\n  if (targetLength > sourceLength) {\n    origin = Object(utils_progress[\"a\" /* progress */])(target.min, target.max - sourceLength, source.min);\n  } else if (sourceLength > targetLength) {\n    origin = Object(utils_progress[\"a\" /* progress */])(source.min, source.max - targetLength, target.min);\n  }\n\n  return delta_calc_clampProgress(origin);\n}\n/**\n * Update the AxisDelta with a transform that projects source into target.\n *\n * The transform `origin` is optional. If not provided, it'll be automatically\n * calculated based on the relative positions of the two bounding boxes.\n */\n\n\nfunction updateAxisDelta(delta, source, target, origin) {\n  if (origin === void 0) {\n    origin = 0.5;\n  }\n\n  delta.origin = origin;\n  delta.originPoint = Object(mix[\"a\" /* mix */])(source.min, source.max, delta.origin);\n  delta.scale = calcLength(target) / calcLength(source);\n  if (isNear(delta.scale, 1, 0.0001)) delta.scale = 1;\n  delta.translate = Object(mix[\"a\" /* mix */])(target.min, target.max, delta.origin) - delta.originPoint;\n  if (isNear(delta.translate)) delta.translate = 0;\n}\n/**\n * Update the BoxDelta with a transform that projects the source into the target.\n *\n * The transform `origin` is optional. If not provided, it'll be automatically\n * calculated based on the relative positions of the two bounding boxes.\n */\n\n\nfunction updateBoxDelta(delta, source, target, origin) {\n  updateAxisDelta(delta.x, source.x, target.x, defaultOrigin(origin.originX));\n  updateAxisDelta(delta.y, source.y, target.y, defaultOrigin(origin.originY));\n}\n/**\n * Currently this only accepts numerical origins, measured as 0-1, but could\n * accept pixel values by comparing to the target axis.\n */\n\n\nfunction defaultOrigin(origin) {\n  return typeof origin === \"number\" ? origin : 0.5;\n}\n\nfunction calcRelativeAxis(target, relative, parent) {\n  target.min = parent.min + relative.min;\n  target.max = target.min + calcLength(relative);\n}\n\nfunction calcRelativeBox(projection, parentProjection) {\n  calcRelativeAxis(projection.target.x, projection.relativeTarget.x, parentProjection.target.x);\n  calcRelativeAxis(projection.target.y, projection.relativeTarget.y, parentProjection.target.y);\n}\n\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/animation/utils/transitions.js + 17 modules\nvar transitions = __webpack_require__(725);\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/render/utils/types.js\nvar AnimationType;\n\n(function (AnimationType) {\n  AnimationType[\"Animate\"] = \"animate\";\n  AnimationType[\"Hover\"] = \"whileHover\";\n  AnimationType[\"Tap\"] = \"whileTap\";\n  AnimationType[\"Drag\"] = \"whileDrag\";\n  AnimationType[\"Focus\"] = \"whileFocus\";\n  AnimationType[\"Exit\"] = \"exit\";\n})(AnimationType || (AnimationType = {}));\n\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/render/dom/projection/utils.js\nvar utils = __webpack_require__(629);\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/motion/features/layout/utils.js\n\n\nfunction tweenAxis(target, prev, next, p) {\n  target.min = Object(mix[\"a\" /* mix */])(prev.min, next.min, p);\n  target.max = Object(mix[\"a\" /* mix */])(prev.max, next.max, p);\n}\n\nfunction calcRelativeOffsetAxis(parent, child) {\n  return {\n    min: child.min - parent.min,\n    max: child.max - parent.min\n  };\n}\n\nfunction calcRelativeOffset(parent, child) {\n  return {\n    x: calcRelativeOffsetAxis(parent.x, child.x),\n    y: calcRelativeOffsetAxis(parent.y, child.y)\n  };\n}\n\nfunction checkIfParentHasChanged(prev, next) {\n  var prevId = prev.getLayoutId();\n  var nextId = next.getLayoutId();\n  return prevId !== nextId || nextId === undefined && prev !== next;\n}\n\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/render/utils/is-draggable.js\nfunction isDraggable(visualElement) {\n  var _a = visualElement.getProps(),\n      drag = _a.drag,\n      _dragX = _a._dragX;\n\n  return drag && !_dragX;\n}\n\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/utils/geometry/delta-apply.js\n\n\n\n/**\n * Reset an axis to the provided origin box.\n *\n * This is a mutative operation.\n */\n\nfunction resetAxis(axis, originAxis) {\n  axis.min = originAxis.min;\n  axis.max = originAxis.max;\n}\n/**\n * Reset a box to the provided origin box.\n *\n * This is a mutative operation.\n */\n\n\nfunction resetBox(box, originBox) {\n  resetAxis(box.x, originBox.x);\n  resetAxis(box.y, originBox.y);\n}\n/**\n * Scales a point based on a factor and an originPoint\n */\n\n\nfunction scalePoint(point, scale, originPoint) {\n  var distanceFromOrigin = point - originPoint;\n  var scaled = scale * distanceFromOrigin;\n  return originPoint + scaled;\n}\n/**\n * Applies a translate/scale delta to a point\n */\n\n\nfunction applyPointDelta(point, translate, scale, originPoint, boxScale) {\n  if (boxScale !== undefined) {\n    point = scalePoint(point, boxScale, originPoint);\n  }\n\n  return scalePoint(point, scale, originPoint) + translate;\n}\n/**\n * Applies a translate/scale delta to an axis\n */\n\n\nfunction applyAxisDelta(axis, translate, scale, originPoint, boxScale) {\n  if (translate === void 0) {\n    translate = 0;\n  }\n\n  if (scale === void 0) {\n    scale = 1;\n  }\n\n  axis.min = applyPointDelta(axis.min, translate, scale, originPoint, boxScale);\n  axis.max = applyPointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Applies a translate/scale delta to a box\n */\n\n\nfunction applyBoxDelta(box, _a) {\n  var x = _a.x,\n      y = _a.y;\n  applyAxisDelta(box.x, x.translate, x.scale, x.originPoint);\n  applyAxisDelta(box.y, y.translate, y.scale, y.originPoint);\n}\n/**\n * Apply a transform to an axis from the latest resolved motion values.\n * This function basically acts as a bridge between a flat motion value map\n * and applyAxisDelta\n */\n\n\nfunction applyAxisTransforms(final, axis, transforms, _a) {\n  var _b = Object(tslib_es6[\"e\" /* __read */])(_a, 3),\n      key = _b[0],\n      scaleKey = _b[1],\n      originKey = _b[2]; // Copy the current axis to the final axis before mutation\n\n\n  final.min = axis.min;\n  final.max = axis.max;\n  var axisOrigin = transforms[originKey] !== undefined ? transforms[originKey] : 0.5;\n  var originPoint = Object(mix[\"a\" /* mix */])(axis.min, axis.max, axisOrigin); // Apply the axis delta to the final axis\n\n  applyAxisDelta(final, transforms[key], transforms[scaleKey], originPoint, transforms.scale);\n}\n/**\n * The names of the motion values we want to apply as translation, scale and origin.\n */\n\n\nvar xKeys = [\"x\", \"scaleX\", \"originX\"];\nvar yKeys = [\"y\", \"scaleY\", \"originY\"];\n/**\n * Apply a transform to a box from the latest resolved motion values.\n */\n\nfunction applyBoxTransforms(finalBox, box, transforms) {\n  applyAxisTransforms(finalBox.x, box.x, transforms, xKeys);\n  applyAxisTransforms(finalBox.y, box.y, transforms, yKeys);\n}\n/**\n * Remove a delta from a point. This is essentially the steps of applyPointDelta in reverse\n */\n\n\nfunction removePointDelta(point, translate, scale, originPoint, boxScale) {\n  point -= translate;\n  point = scalePoint(point, 1 / scale, originPoint);\n\n  if (boxScale !== undefined) {\n    point = scalePoint(point, 1 / boxScale, originPoint);\n  }\n\n  return point;\n}\n/**\n * Remove a delta from an axis. This is essentially the steps of applyAxisDelta in reverse\n */\n\n\nfunction removeAxisDelta(axis, translate, scale, origin, boxScale) {\n  if (translate === void 0) {\n    translate = 0;\n  }\n\n  if (scale === void 0) {\n    scale = 1;\n  }\n\n  if (origin === void 0) {\n    origin = 0.5;\n  }\n\n  var originPoint = Object(mix[\"a\" /* mix */])(axis.min, axis.max, origin) - translate;\n  axis.min = removePointDelta(axis.min, translate, scale, originPoint, boxScale);\n  axis.max = removePointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Remove a transforms from an axis. This is essentially the steps of applyAxisTransforms in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\n\n\nfunction removeAxisTransforms(axis, transforms, _a) {\n  var _b = Object(tslib_es6[\"e\" /* __read */])(_a, 3),\n      key = _b[0],\n      scaleKey = _b[1],\n      originKey = _b[2];\n\n  removeAxisDelta(axis, transforms[key], transforms[scaleKey], transforms[originKey], transforms.scale);\n}\n/**\n * Remove a transforms from an box. This is essentially the steps of applyAxisBox in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\n\n\nfunction removeBoxTransforms(box, transforms) {\n  removeAxisTransforms(box.x, transforms, xKeys);\n  removeAxisTransforms(box.y, transforms, yKeys);\n}\n/**\n * Apply a tree of deltas to a box. We do this to calculate the effect of all the transforms\n * in a tree upon our box before then calculating how to project it into our desired viewport-relative box\n *\n * This is the final nested loop within updateLayoutDelta for future refactoring\n */\n\n\nfunction applyTreeDeltas(box, treeScale, treePath) {\n  var treeLength = treePath.length;\n  if (!treeLength) return; // Reset the treeScale\n\n  treeScale.x = treeScale.y = 1;\n  var node;\n  var delta;\n\n  for (var i = 0; i < treeLength; i++) {\n    node = treePath[i];\n    delta = node.getLayoutState().delta; // Incoporate each ancestor's scale into a culmulative treeScale for this component\n\n    treeScale.x *= delta.x.scale;\n    treeScale.y *= delta.y.scale; // Apply each ancestor's calculated delta into this component's recorded layout box\n\n    applyBoxDelta(box, delta); // If this is a draggable ancestor, also incorporate the node's transform to the layout box\n\n    if (isDraggable(node)) {\n      applyBoxTransforms(box, box, node.getLatestValues());\n    }\n  }\n}\n\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/render/dom/projection/convert-to-relative.js\n\n\n\n/**\n * Returns a boolean stating whether or not we converted the projection\n * to relative projection.\n */\n\nfunction convertToRelativeProjection(visualElement, isLayoutDrag) {\n  if (isLayoutDrag === void 0) {\n    isLayoutDrag = true;\n  }\n\n  var projectionParent = visualElement.getProjectionParent();\n  if (!projectionParent) return false;\n  var offset;\n\n  if (isLayoutDrag) {\n    offset = calcRelativeOffset(projectionParent.projection.target, visualElement.projection.target);\n    removeBoxTransforms(offset, projectionParent.getLatestValues());\n  } else {\n    offset = calcRelativeOffset(projectionParent.getLayoutState().layout, visualElement.getLayoutState().layout);\n  }\n\n  eachAxis(function (axis) {\n    return visualElement.setProjectionTargetAxis(axis, offset[axis].min, offset[axis].max, true);\n  });\n  return true;\n}\n\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/render/dom/utils/batch-layout.js\nvar batch_layout = __webpack_require__(642);\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/gestures/drag/VisualElementDragControls.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar elementDragControls = new WeakMap();\n/**\n *\n */\n\nvar lastPointerEvent;\n\nvar VisualElementDragControls_VisualElementDragControls =\n/** @class */\nfunction () {\n  function VisualElementDragControls(_a) {\n    var visualElement = _a.visualElement;\n    /**\n     * Track whether we're currently dragging.\n     *\n     * @internal\n     */\n\n    this.isDragging = false;\n    /**\n     * The current direction of drag, or `null` if both.\n     *\n     * @internal\n     */\n\n    this.currentDirection = null;\n    /**\n     * The permitted boundaries of travel, in pixels.\n     *\n     * @internal\n     */\n\n    this.constraints = false;\n    /**\n     * The per-axis resolved elastic values.\n     *\n     * @internal\n     */\n\n    this.elastic = Object(geometry[\"a\" /* axisBox */])();\n    /**\n     * A reference to the host component's latest props.\n     *\n     * @internal\n     */\n\n    this.props = {};\n    /**\n     * @internal\n     */\n\n    this.hasMutatedConstraints = false;\n    /**\n     * Track the initial position of the cursor relative to the dragging element\n     * when dragging starts as a value of 0-1 on each axis. We then use this to calculate\n     * an ideal bounding box for the VisualElement renderer to project into every frame.\n     *\n     * @internal\n     */\n\n    this.cursorProgress = {\n      x: 0.5,\n      y: 0.5\n    }; // When updating _dragX, or _dragY instead of the VisualElement,\n    // persist their values between drag gestures.\n\n    this.originPoint = {}; // This is a reference to the global drag gesture lock, ensuring only one component\n    // can \"capture\" the drag of one or both axes.\n    // TODO: Look into moving this into pansession?\n\n    this.openGlobalLock = null;\n    /**\n     * @internal\n     */\n\n    this.panSession = null;\n    this.visualElement = visualElement;\n    this.visualElement.enableLayoutProjection();\n    elementDragControls.set(visualElement, this);\n  }\n  /**\n   * Instantiate a PanSession for the drag gesture\n   *\n   * @public\n   */\n\n\n  VisualElementDragControls.prototype.start = function (originEvent, _a) {\n    var _this = this;\n\n    var _b = _a === void 0 ? {} : _a,\n        _c = _b.snapToCursor,\n        snapToCursor = _c === void 0 ? false : _c,\n        cursorProgress = _b.cursorProgress;\n\n    var onSessionStart = function onSessionStart(event) {\n      var _a; // Stop any animations on both axis values immediately. This allows the user to throw and catch\n      // the component.\n\n\n      _this.stopMotion();\n      /**\n       * Save the initial point. We'll use this to calculate the pointer's position rather\n       * than the one we receive when the gesture actually starts. By then, the pointer will\n       * have already moved, and the perception will be of the pointer \"slipping\" across the element\n       */\n\n\n      var initialPoint = getViewportPointFromEvent(event).point;\n      (_a = _this.cancelLayout) === null || _a === void 0 ? void 0 : _a.call(_this);\n      _this.cancelLayout = Object(batch_layout[\"a\" /* batchLayout */])(function (read, write) {\n        var ancestors = Object(utils[\"a\" /* collectProjectingAncestors */])(_this.visualElement);\n        var children = Object(utils[\"b\" /* collectProjectingChildren */])(_this.visualElement);\n\n        var tree = Object(tslib_es6[\"h\" /* __spreadArray */])(Object(tslib_es6[\"h\" /* __spreadArray */])([], Object(tslib_es6[\"e\" /* __read */])(ancestors)), Object(tslib_es6[\"e\" /* __read */])(children));\n\n        var hasManuallySetCursorOrigin = false;\n        /**\n         * Apply a simple lock to the projection target. This ensures no animations\n         * can run on the projection box while this lock is active.\n         */\n\n        _this.isLayoutDrag() && _this.visualElement.lockProjectionTarget();\n        write(function () {\n          tree.forEach(function (element) {\n            return element.resetTransform();\n          });\n        });\n        read(function () {\n          Object(utils[\"d\" /* updateLayoutMeasurement */])(_this.visualElement);\n          children.forEach(utils[\"d\" /* updateLayoutMeasurement */]);\n        });\n        write(function () {\n          tree.forEach(function (element) {\n            return element.restoreTransform();\n          });\n\n          if (snapToCursor) {\n            hasManuallySetCursorOrigin = _this.snapToCursor(initialPoint);\n          }\n        });\n        read(function () {\n          var isRelativeDrag = Boolean(_this.getAxisMotionValue(\"x\") && !_this.isExternalDrag());\n\n          if (!isRelativeDrag) {\n            _this.visualElement.rebaseProjectionTarget(true, _this.visualElement.measureViewportBox(false));\n          }\n\n          _this.visualElement.scheduleUpdateLayoutProjection();\n          /**\n           * When dragging starts, we want to find where the cursor is relative to the bounding box\n           * of the element. Every frame, we calculate a new bounding box using this relative position\n           * and let the visualElement renderer figure out how to reproject the element into this bounding\n           * box.\n           *\n           * By doing it this way, rather than applying an x/y transform directly to the element,\n           * we can ensure the component always visually sticks to the cursor as we'd expect, even\n           * if the DOM element itself changes layout as a result of React updates the user might\n           * make based on the drag position.\n           */\n\n\n          var projection = _this.visualElement.projection;\n          eachAxis(function (axis) {\n            if (!hasManuallySetCursorOrigin) {\n              var _a = projection.target[axis],\n                  min = _a.min,\n                  max = _a.max;\n              _this.cursorProgress[axis] = cursorProgress ? cursorProgress[axis] : Object(utils_progress[\"a\" /* progress */])(min, max, initialPoint[axis]);\n            }\n            /**\n             * If we have external drag MotionValues, record their origin point. On pointermove\n             * we'll apply the pan gesture offset directly to this value.\n             */\n\n\n            var axisValue = _this.getAxisMotionValue(axis);\n\n            if (axisValue) {\n              _this.originPoint[axis] = axisValue.get();\n            }\n          });\n        });\n        write(function () {\n          es[\"c\" /* flushSync */].update();\n          es[\"c\" /* flushSync */].preRender();\n          es[\"c\" /* flushSync */].render();\n          es[\"c\" /* flushSync */].postRender();\n        });\n        read(function () {\n          return _this.resolveDragConstraints();\n        });\n      });\n    };\n\n    var onStart = function onStart(event, info) {\n      var _a, _b, _c; // Attempt to grab the global drag gesture lock - maybe make this part of PanSession\n\n\n      var _d = _this.props,\n          drag = _d.drag,\n          dragPropagation = _d.dragPropagation;\n\n      if (drag && !dragPropagation) {\n        if (_this.openGlobalLock) _this.openGlobalLock();\n        _this.openGlobalLock = getGlobalLock(drag); // If we don 't have the lock, don't start dragging\n\n        if (!_this.openGlobalLock) return;\n      }\n\n      Object(batch_layout[\"b\" /* flushLayout */])(); // Set current drag status\n\n      _this.isDragging = true;\n      _this.currentDirection = null; // Fire onDragStart event\n\n      (_b = (_a = _this.props).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, event, info);\n      (_c = _this.visualElement.animationState) === null || _c === void 0 ? void 0 : _c.setActive(AnimationType.Drag, true);\n    };\n\n    var onMove = function onMove(event, info) {\n      var _a, _b, _c, _d;\n\n      var _e = _this.props,\n          dragPropagation = _e.dragPropagation,\n          dragDirectionLock = _e.dragDirectionLock; // If we didn't successfully receive the gesture lock, early return.\n\n      if (!dragPropagation && !_this.openGlobalLock) return;\n      var offset = info.offset; // Attempt to detect drag direction if directionLock is true\n\n      if (dragDirectionLock && _this.currentDirection === null) {\n        _this.currentDirection = getCurrentDirection(offset); // If we've successfully set a direction, notify listener\n\n        if (_this.currentDirection !== null) {\n          (_b = (_a = _this.props).onDirectionLock) === null || _b === void 0 ? void 0 : _b.call(_a, _this.currentDirection);\n        }\n\n        return;\n      } // Update each point with the latest position\n\n\n      _this.updateAxis(\"x\", info.point, offset);\n\n      _this.updateAxis(\"y\", info.point, offset); // Fire onDrag event\n\n\n      (_d = (_c = _this.props).onDrag) === null || _d === void 0 ? void 0 : _d.call(_c, event, info); // Update the last pointer event\n\n      lastPointerEvent = event;\n    };\n\n    var onSessionEnd = function onSessionEnd(event, info) {\n      return _this.stop(event, info);\n    };\n\n    var transformPagePoint = this.props.transformPagePoint;\n    this.panSession = new PanSession_PanSession(originEvent, {\n      onSessionStart: onSessionStart,\n      onStart: onStart,\n      onMove: onMove,\n      onSessionEnd: onSessionEnd\n    }, {\n      transformPagePoint: transformPagePoint\n    });\n  };\n\n  VisualElementDragControls.prototype.resolveDragConstraints = function () {\n    var _this = this;\n\n    var _a = this.props,\n        dragConstraints = _a.dragConstraints,\n        dragElastic = _a.dragElastic;\n    var layout = this.visualElement.getLayoutState().layoutCorrected;\n\n    if (dragConstraints) {\n      this.constraints = Object(is_ref_object[\"a\" /* isRefObject */])(dragConstraints) ? this.resolveRefConstraints(layout, dragConstraints) : calcRelativeConstraints(layout, dragConstraints);\n    } else {\n      this.constraints = false;\n    }\n\n    this.elastic = resolveDragElastic(dragElastic);\n    /**\n     * If we're outputting to external MotionValues, we want to rebase the measured constraints\n     * from viewport-relative to component-relative.\n     */\n\n    if (this.constraints && !this.hasMutatedConstraints) {\n      eachAxis(function (axis) {\n        if (_this.getAxisMotionValue(axis)) {\n          _this.constraints[axis] = rebaseAxisConstraints(layout[axis], _this.constraints[axis]);\n        }\n      });\n    }\n  };\n\n  VisualElementDragControls.prototype.resolveRefConstraints = function (layoutBox, constraints) {\n    var _a = this.props,\n        onMeasureDragConstraints = _a.onMeasureDragConstraints,\n        transformPagePoint = _a.transformPagePoint;\n    var constraintsElement = constraints.current;\n    Object(hey_listen_es[\"a\" /* invariant */])(constraintsElement !== null, \"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.\");\n    this.constraintsBox = getBoundingBox(constraintsElement, transformPagePoint);\n    var measuredConstraints = calcViewportConstraints(layoutBox, this.constraintsBox);\n    /**\n     * If there's an onMeasureDragConstraints listener we call it and\n     * if different constraints are returned, set constraints to that\n     */\n\n    if (onMeasureDragConstraints) {\n      var userConstraints = onMeasureDragConstraints(Object(geometry[\"b\" /* convertAxisBoxToBoundingBox */])(measuredConstraints));\n      this.hasMutatedConstraints = !!userConstraints;\n\n      if (userConstraints) {\n        measuredConstraints = Object(geometry[\"c\" /* convertBoundingBoxToAxisBox */])(userConstraints);\n      }\n    }\n\n    return measuredConstraints;\n  };\n\n  VisualElementDragControls.prototype.cancelDrag = function () {\n    var _a, _b;\n\n    this.visualElement.unlockProjectionTarget();\n    (_a = this.cancelLayout) === null || _a === void 0 ? void 0 : _a.call(this);\n    this.isDragging = false;\n    this.panSession && this.panSession.end();\n    this.panSession = null;\n\n    if (!this.props.dragPropagation && this.openGlobalLock) {\n      this.openGlobalLock();\n      this.openGlobalLock = null;\n    }\n\n    (_b = this.visualElement.animationState) === null || _b === void 0 ? void 0 : _b.setActive(AnimationType.Drag, false);\n  };\n\n  VisualElementDragControls.prototype.stop = function (event, info) {\n    var _a, _b, _c;\n\n    (_a = this.panSession) === null || _a === void 0 ? void 0 : _a.end();\n    this.panSession = null;\n    var isDragging = this.isDragging;\n    this.cancelDrag();\n    if (!isDragging) return;\n    var velocity = info.velocity;\n    this.animateDragEnd(velocity);\n    (_c = (_b = this.props).onDragEnd) === null || _c === void 0 ? void 0 : _c.call(_b, event, info);\n  };\n\n  VisualElementDragControls.prototype.snapToCursor = function (point) {\n    var _this = this;\n\n    return eachAxis(function (axis) {\n      var drag = _this.props.drag; // If we're not dragging this axis, do an early return.\n\n      if (!shouldDrag(axis, drag, _this.currentDirection)) return;\n\n      var axisValue = _this.getAxisMotionValue(axis);\n\n      if (axisValue) {\n        var box = _this.visualElement.getLayoutState().layout;\n\n        var length_1 = box[axis].max - box[axis].min;\n        var center = box[axis].min + length_1 / 2;\n        var offset = point[axis] - center;\n        _this.originPoint[axis] = point[axis];\n        axisValue.set(offset);\n      } else {\n        _this.cursorProgress[axis] = 0.5;\n        return true;\n      }\n    }).includes(true);\n  };\n  /**\n   * Update the specified axis with the latest pointer information.\n   */\n\n\n  VisualElementDragControls.prototype.updateAxis = function (axis, point, offset) {\n    var drag = this.props.drag; // If we're not dragging this axis, do an early return.\n\n    if (!shouldDrag(axis, drag, this.currentDirection)) return;\n    return this.getAxisMotionValue(axis) ? this.updateAxisMotionValue(axis, offset) : this.updateVisualElementAxis(axis, point);\n  };\n\n  VisualElementDragControls.prototype.updateAxisMotionValue = function (axis, offset) {\n    var axisValue = this.getAxisMotionValue(axis);\n    if (!offset || !axisValue) return;\n    var nextValue = this.originPoint[axis] + offset[axis];\n    var update = this.constraints ? applyConstraints(nextValue, this.constraints[axis], this.elastic[axis]) : nextValue;\n    axisValue.set(update);\n  };\n\n  VisualElementDragControls.prototype.updateVisualElementAxis = function (axis, point) {\n    var _a; // Get the actual layout bounding box of the element\n\n\n    var axisLayout = this.visualElement.getLayoutState().layout[axis]; // Calculate its current length. In the future we might want to lerp this to animate\n    // between lengths if the layout changes as we change the DOM\n\n    var axisLength = axisLayout.max - axisLayout.min; // Get the initial progress that the pointer sat on this axis on gesture start.\n\n    var axisProgress = this.cursorProgress[axis]; // Calculate a new min point based on the latest pointer position, constraints and elastic\n\n    var min = calcConstrainedMinPoint(point[axis], axisLength, axisProgress, (_a = this.constraints) === null || _a === void 0 ? void 0 : _a[axis], this.elastic[axis]); // Update the axis viewport target with this new min and the length\n\n    this.visualElement.setProjectionTargetAxis(axis, min, min + axisLength);\n  };\n\n  VisualElementDragControls.prototype.setProps = function (_a) {\n    var _b = _a.drag,\n        drag = _b === void 0 ? false : _b,\n        _c = _a.dragDirectionLock,\n        dragDirectionLock = _c === void 0 ? false : _c,\n        _d = _a.dragPropagation,\n        dragPropagation = _d === void 0 ? false : _d,\n        _e = _a.dragConstraints,\n        dragConstraints = _e === void 0 ? false : _e,\n        _f = _a.dragElastic,\n        dragElastic = _f === void 0 ? defaultElastic : _f,\n        _g = _a.dragMomentum,\n        dragMomentum = _g === void 0 ? true : _g,\n        remainingProps = Object(tslib_es6[\"f\" /* __rest */])(_a, [\"drag\", \"dragDirectionLock\", \"dragPropagation\", \"dragConstraints\", \"dragElastic\", \"dragMomentum\"]);\n\n    this.props = Object(tslib_es6[\"a\" /* __assign */])({\n      drag: drag,\n      dragDirectionLock: dragDirectionLock,\n      dragPropagation: dragPropagation,\n      dragConstraints: dragConstraints,\n      dragElastic: dragElastic,\n      dragMomentum: dragMomentum\n    }, remainingProps);\n  };\n  /**\n   * Drag works differently depending on which props are provided.\n   *\n   * - If _dragX and _dragY are provided, we output the gesture delta directly to those motion values.\n   * - If the component will perform layout animations, we output the gesture to the component's\n   *      visual bounding box\n   * - Otherwise, we apply the delta to the x/y motion values.\n   */\n\n\n  VisualElementDragControls.prototype.getAxisMotionValue = function (axis) {\n    var _a = this.props,\n        layout = _a.layout,\n        layoutId = _a.layoutId;\n    var dragKey = \"_drag\" + axis.toUpperCase();\n\n    if (this.props[dragKey]) {\n      return this.props[dragKey];\n    } else if (!layout && layoutId === undefined) {\n      return this.visualElement.getValue(axis, 0);\n    }\n  };\n\n  VisualElementDragControls.prototype.isLayoutDrag = function () {\n    return !this.getAxisMotionValue(\"x\");\n  };\n\n  VisualElementDragControls.prototype.isExternalDrag = function () {\n    var _a = this.props,\n        _dragX = _a._dragX,\n        _dragY = _a._dragY;\n    return _dragX || _dragY;\n  };\n\n  VisualElementDragControls.prototype.animateDragEnd = function (velocity) {\n    var _this = this;\n\n    var _a = this.props,\n        drag = _a.drag,\n        dragMomentum = _a.dragMomentum,\n        dragElastic = _a.dragElastic,\n        dragTransition = _a.dragTransition;\n    /**\n     * Everything beyond the drag gesture should be performed with\n     * relative projection so children stay in sync with their parent element.\n     */\n\n    var isRelative = convertToRelativeProjection(this.visualElement, this.isLayoutDrag() && !this.isExternalDrag());\n    /**\n     * If we had previously resolved constraints relative to the viewport,\n     * we need to also convert those to a relative coordinate space for the animation\n     */\n\n    var constraints = this.constraints || {};\n\n    if (isRelative && Object.keys(constraints).length && this.isLayoutDrag()) {\n      var projectionParent = this.visualElement.getProjectionParent();\n\n      if (projectionParent) {\n        var relativeConstraints_1 = calcRelativeOffset(projectionParent.projection.targetFinal, constraints);\n        eachAxis(function (axis) {\n          var _a = relativeConstraints_1[axis],\n              min = _a.min,\n              max = _a.max;\n          constraints[axis] = {\n            min: isNaN(min) ? undefined : min,\n            max: isNaN(max) ? undefined : max\n          };\n        });\n      }\n    }\n\n    var momentumAnimations = eachAxis(function (axis) {\n      var _a;\n\n      if (!shouldDrag(axis, drag, _this.currentDirection)) {\n        return;\n      }\n\n      var transition = (_a = constraints === null || constraints === void 0 ? void 0 : constraints[axis]) !== null && _a !== void 0 ? _a : {};\n      /**\n       * Overdamp the boundary spring if `dragElastic` is disabled. There's still a frame\n       * of spring animations so we should look into adding a disable spring option to `inertia`.\n       * We could do something here where we affect the `bounceStiffness` and `bounceDamping`\n       * using the value of `dragElastic`.\n       */\n\n      var bounceStiffness = dragElastic ? 200 : 1000000;\n      var bounceDamping = dragElastic ? 40 : 10000000;\n\n      var inertia = Object(tslib_es6[\"a\" /* __assign */])(Object(tslib_es6[\"a\" /* __assign */])({\n        type: \"inertia\",\n        velocity: dragMomentum ? velocity[axis] : 0,\n        bounceStiffness: bounceStiffness,\n        bounceDamping: bounceDamping,\n        timeConstant: 750,\n        restDelta: 1,\n        restSpeed: 10\n      }, dragTransition), transition); // If we're not animating on an externally-provided `MotionValue` we can use the\n      // component's animation controls which will handle interactions with whileHover (etc),\n      // otherwise we just have to animate the `MotionValue` itself.\n\n\n      return _this.getAxisMotionValue(axis) ? _this.startAxisValueAnimation(axis, inertia) : _this.visualElement.startLayoutAnimation(axis, inertia, isRelative);\n    }); // Run all animations and then resolve the new drag constraints.\n\n    return Promise.all(momentumAnimations).then(function () {\n      var _a, _b;\n\n      (_b = (_a = _this.props).onDragTransitionEnd) === null || _b === void 0 ? void 0 : _b.call(_a);\n    });\n  };\n\n  VisualElementDragControls.prototype.stopMotion = function () {\n    var _this = this;\n\n    eachAxis(function (axis) {\n      var axisValue = _this.getAxisMotionValue(axis);\n\n      axisValue ? axisValue.stop() : _this.visualElement.stopLayoutAnimation();\n    });\n  };\n\n  VisualElementDragControls.prototype.startAxisValueAnimation = function (axis, transition) {\n    var axisValue = this.getAxisMotionValue(axis);\n    if (!axisValue) return;\n    var currentValue = axisValue.get();\n    axisValue.set(currentValue);\n    axisValue.set(currentValue); // Set twice to hard-reset velocity\n\n    return Object(transitions[\"b\" /* startAnimation */])(axis, axisValue, 0, transition);\n  };\n\n  VisualElementDragControls.prototype.scalePoint = function () {\n    var _this = this;\n\n    var _a = this.props,\n        drag = _a.drag,\n        dragConstraints = _a.dragConstraints;\n    if (!Object(is_ref_object[\"a\" /* isRefObject */])(dragConstraints) || !this.constraintsBox) return; // Stop any current animations as there can be some visual glitching if we resize mid animation\n\n    this.stopMotion(); // Record the relative progress of the targetBox relative to the constraintsBox\n\n    var boxProgress = {\n      x: 0,\n      y: 0\n    };\n    eachAxis(function (axis) {\n      boxProgress[axis] = calcOrigin(_this.visualElement.projection.target[axis], _this.constraintsBox[axis]);\n    });\n    /**\n     * For each axis, calculate the current progress of the layout axis within the constraints.\n     * Then, using the latest layout and constraints measurements, reposition the new layout axis\n     * proportionally within the constraints.\n     */\n\n    this.updateConstraints(function () {\n      eachAxis(function (axis) {\n        if (!shouldDrag(axis, drag, null)) return; // Calculate the position of the targetBox relative to the constraintsBox using the\n        // previously calculated progress\n\n        var _a = calcPositionFromProgress(_this.visualElement.projection.target[axis], _this.constraintsBox[axis], boxProgress[axis]),\n            min = _a.min,\n            max = _a.max;\n\n        _this.visualElement.setProjectionTargetAxis(axis, min, max);\n      });\n    });\n    /**\n     * If any other draggable components are queuing the same tasks synchronously\n     * this will wait until they've all been scheduled before flushing.\n     */\n\n    setTimeout(batch_layout[\"b\" /* flushLayout */], 1);\n  };\n\n  VisualElementDragControls.prototype.updateConstraints = function (onReady) {\n    var _this = this;\n\n    this.cancelLayout = Object(batch_layout[\"a\" /* batchLayout */])(function (read, write) {\n      var ancestors = Object(utils[\"a\" /* collectProjectingAncestors */])(_this.visualElement);\n      write(function () {\n        return ancestors.forEach(function (element) {\n          return element.resetTransform();\n        });\n      });\n      read(function () {\n        return Object(utils[\"d\" /* updateLayoutMeasurement */])(_this.visualElement);\n      });\n      write(function () {\n        return ancestors.forEach(function (element) {\n          return element.restoreTransform();\n        });\n      });\n      read(function () {\n        _this.resolveDragConstraints();\n      });\n      if (onReady) write(onReady);\n    });\n  };\n\n  VisualElementDragControls.prototype.mount = function (visualElement) {\n    var _this = this;\n\n    var element = visualElement.getInstance();\n    /**\n     * Attach a pointerdown event listener on this DOM element to initiate drag tracking.\n     */\n\n    var stopPointerListener = addPointerEvent(element, \"pointerdown\", function (event) {\n      var _a = _this.props,\n          drag = _a.drag,\n          _b = _a.dragListener,\n          dragListener = _b === void 0 ? true : _b;\n      drag && dragListener && _this.start(event);\n    });\n    /**\n     * Attach a window resize listener to scale the draggable target within its defined\n     * constraints as the window resizes.\n     */\n\n    var stopResizeListener = addDomEvent(window, \"resize\", function () {\n      _this.scalePoint();\n    });\n    /**\n     * Ensure drag constraints are resolved correctly relative to the dragging element\n     * whenever its layout changes.\n     */\n\n    var stopLayoutUpdateListener = visualElement.onLayoutUpdate(function () {\n      if (_this.isDragging) {\n        _this.resolveDragConstraints();\n      }\n    });\n    /**\n     * If the previous component with this same layoutId was dragging at the time\n     * it was unmounted, we want to continue the same gesture on this component.\n     */\n\n    var prevDragCursor = visualElement.prevDragCursor;\n\n    if (prevDragCursor) {\n      this.start(lastPointerEvent, {\n        cursorProgress: prevDragCursor\n      });\n    }\n    /**\n     * Return a function that will teardown the drag gesture\n     */\n\n\n    return function () {\n      stopPointerListener === null || stopPointerListener === void 0 ? void 0 : stopPointerListener();\n      stopResizeListener === null || stopResizeListener === void 0 ? void 0 : stopResizeListener();\n      stopLayoutUpdateListener === null || stopLayoutUpdateListener === void 0 ? void 0 : stopLayoutUpdateListener();\n\n      _this.cancelDrag();\n    };\n  };\n\n  return VisualElementDragControls;\n}();\n\nfunction shouldDrag(direction, drag, currentDirection) {\n  return (drag === true || drag === direction) && (currentDirection === null || currentDirection === direction);\n}\n/**\n * Based on an x/y offset determine the current drag direction. If both axis' offsets are lower\n * than the provided threshold, return `null`.\n *\n * @param offset - The x/y offset from origin.\n * @param lockThreshold - (Optional) - the minimum absolute offset before we can determine a drag direction.\n */\n\n\nfunction getCurrentDirection(offset, lockThreshold) {\n  if (lockThreshold === void 0) {\n    lockThreshold = 10;\n  }\n\n  var direction = null;\n\n  if (Math.abs(offset.y) > lockThreshold) {\n    direction = \"y\";\n  } else if (Math.abs(offset.x) > lockThreshold) {\n    direction = \"x\";\n  }\n\n  return direction;\n}\n\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/utils/use-constant.js\nvar use_constant = __webpack_require__(234);\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/gestures/drag/use-drag.js\n\n\n\n\n\n/**\n * A hook that allows an element to be dragged.\n *\n * @internal\n */\n\nfunction useDrag(props) {\n  var groupDragControls = props.dragControls,\n      visualElement = props.visualElement;\n  var transformPagePoint = Object(react[\"useContext\"])(MotionConfigContext[\"a\" /* MotionConfigContext */]).transformPagePoint;\n  var dragControls = Object(use_constant[\"a\" /* useConstant */])(function () {\n    return new VisualElementDragControls_VisualElementDragControls({\n      visualElement: visualElement\n    });\n  });\n  dragControls.setProps(Object(tslib_es6[\"a\" /* __assign */])(Object(tslib_es6[\"a\" /* __assign */])({}, props), {\n    transformPagePoint: transformPagePoint\n  })); // If we've been provided a DragControls for manual control over the drag gesture,\n  // subscribe this component to it on mount.\n\n  Object(react[\"useEffect\"])(function () {\n    return groupDragControls && groupDragControls.subscribe(dragControls);\n  }, [dragControls]); // Mount the drag controls with the visualElement\n\n  Object(react[\"useEffect\"])(function () {\n    return dragControls.mount(visualElement);\n  }, []);\n}\n\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/utils/use-unmount-effect.js\nvar use_unmount_effect = __webpack_require__(714);\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/gestures/use-pan-gesture.js\n\n\n\n\n\n/**\n *\n * @param handlers -\n * @param ref -\n *\n * @internalremarks\n * Currently this sets new pan gesture functions every render. The memo route has been explored\n * in the past but ultimately we're still creating new functions every render. An optimisation\n * to explore is creating the pan gestures and loading them into a `ref`.\n *\n * @internal\n */\n\nfunction usePanGesture(_a) {\n  var onPan = _a.onPan,\n      onPanStart = _a.onPanStart,\n      onPanEnd = _a.onPanEnd,\n      onPanSessionStart = _a.onPanSessionStart,\n      visualElement = _a.visualElement;\n  var hasPanEvents = onPan || onPanStart || onPanEnd || onPanSessionStart;\n  var panSession = Object(react[\"useRef\"])(null);\n  var transformPagePoint = Object(react[\"useContext\"])(MotionConfigContext[\"a\" /* MotionConfigContext */]).transformPagePoint;\n  var handlers = {\n    onSessionStart: onPanSessionStart,\n    onStart: onPanStart,\n    onMove: onPan,\n    onEnd: function onEnd(event, info) {\n      panSession.current = null;\n      onPanEnd && onPanEnd(event, info);\n    }\n  };\n  Object(react[\"useEffect\"])(function () {\n    if (panSession.current !== null) {\n      panSession.current.updateHandlers(handlers);\n    }\n  });\n\n  function onPointerDown(event) {\n    panSession.current = new PanSession_PanSession(event, handlers, {\n      transformPagePoint: transformPagePoint\n    });\n  }\n\n  usePointerEvent(visualElement, \"pointerdown\", hasPanEvents && onPointerDown);\n  Object(use_unmount_effect[\"a\" /* useUnmountEffect */])(function () {\n    return panSession.current && panSession.current.end();\n  });\n}\n\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/motion/utils/make-renderless-component.js\nvar makeRenderlessComponent = function makeRenderlessComponent(hook) {\n  return function (props) {\n    hook(props);\n    return null;\n  };\n};\n\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/motion/features/drag.js\n\n\n\nvar drag_drag = {\n  pan: makeRenderlessComponent(usePanGesture),\n  drag: makeRenderlessComponent(useDrag)\n};\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/components/AnimateSharedLayout/types.js\nvar types = __webpack_require__(715);\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/components/AnimatePresence/use-presence.js\nvar use_presence = __webpack_require__(702);\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/render/dom/projection/scale-correction.js\nvar scale_correction = __webpack_require__(332);\n\n// EXTERNAL MODULE: ./node_modules/style-value-types/dist/es/numbers/units.js\nvar units = __webpack_require__(659);\n\n// EXTERNAL MODULE: ./node_modules/style-value-types/dist/es/complex/index.js\nvar complex = __webpack_require__(662);\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/render/dom/utils/css-variables-conversion.js\n\n\n\nfunction isCSSVariable(value) {\n  return typeof value === \"string\" && value.startsWith(\"var(--\");\n}\n/**\n * Parse Framer's special CSS variable format into a CSS token and a fallback.\n *\n * ```\n * `var(--foo, #fff)` => [`--foo`, '#fff']\n * ```\n *\n * @param current\n */\n\n\nvar cssVariableRegex = /var\\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\\)/;\n\nfunction parseCSSVariable(current) {\n  var match = cssVariableRegex.exec(current);\n  if (!match) return [,];\n\n  var _a = Object(tslib_es6[\"e\" /* __read */])(match, 3),\n      token = _a[1],\n      fallback = _a[2];\n\n  return [token, fallback];\n}\n\nvar maxDepth = 4;\n\nfunction getVariableValue(current, element, depth) {\n  if (depth === void 0) {\n    depth = 1;\n  }\n\n  Object(hey_listen_es[\"a\" /* invariant */])(depth <= maxDepth, \"Max CSS variable fallback depth detected in property \\\"\" + current + \"\\\". This may indicate a circular fallback dependency.\");\n\n  var _a = Object(tslib_es6[\"e\" /* __read */])(parseCSSVariable(current), 2),\n      token = _a[0],\n      fallback = _a[1]; // No CSS variable detected\n\n\n  if (!token) return; // Attempt to read this CSS variable off the element\n\n  var resolved = window.getComputedStyle(element).getPropertyValue(token);\n\n  if (resolved) {\n    return resolved.trim();\n  } else if (isCSSVariable(fallback)) {\n    // The fallback might itself be a CSS variable, in which case we attempt to resolve it too.\n    return getVariableValue(fallback, element, depth + 1);\n  } else {\n    return fallback;\n  }\n}\n/**\n * Resolve CSS variables from\n *\n * @internal\n */\n\n\nfunction resolveCSSVariables(visualElement, _a, transitionEnd) {\n  var _b;\n\n  var target = Object(tslib_es6[\"f\" /* __rest */])(_a, []);\n\n  var element = visualElement.getInstance();\n  if (!(element instanceof HTMLElement)) return {\n    target: target,\n    transitionEnd: transitionEnd\n  }; // If `transitionEnd` isn't `undefined`, clone it. We could clone `target` and `transitionEnd`\n  // only if they change but I think this reads clearer and this isn't a performance-critical path.\n\n  if (transitionEnd) {\n    transitionEnd = Object(tslib_es6[\"a\" /* __assign */])({}, transitionEnd);\n  } // Go through existing `MotionValue`s and ensure any existing CSS variables are resolved\n\n\n  visualElement.forEachValue(function (value) {\n    var current = value.get();\n    if (!isCSSVariable(current)) return;\n    var resolved = getVariableValue(current, element);\n    if (resolved) value.set(resolved);\n  }); // Cycle through every target property and resolve CSS variables. Currently\n  // we only read single-var properties like `var(--foo)`, not `calc(var(--foo) + 20px)`\n\n  for (var key in target) {\n    var current = target[key];\n    if (!isCSSVariable(current)) continue;\n    var resolved = getVariableValue(current, element);\n    if (!resolved) continue; // Clone target if it hasn't already been\n\n    target[key] = resolved; // If the user hasn't already set this key on `transitionEnd`, set it to the unresolved\n    // CSS variable. This will ensure that after the animation the component will reflect\n    // changes in the value of the CSS variable.\n\n    if (transitionEnd) (_b = transitionEnd[key]) !== null && _b !== void 0 ? _b : transitionEnd[key] = current;\n  }\n\n  return {\n    target: target,\n    transitionEnd: transitionEnd\n  };\n}\n\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/render/dom/projection/default-scale-correctors.js\n\n\n\n\n\nfunction pixelsToPercent(pixels, axis) {\n  return pixels / (axis.max - axis.min) * 100;\n}\n/**\n * We always correct borderRadius as a percentage rather than pixels to reduce paints.\n * For example, if you are projecting a box that is 100px wide with a 10px borderRadius\n * into a box that is 200px wide with a 20px borderRadius, that is actually a 10%\n * borderRadius in both states. If we animate between the two in pixels that will trigger\n * a paint each time. If we animate between the two in percentage we'll avoid a paint.\n */\n\n\nfunction correctBorderRadius(latest, _layoutState, _a) {\n  var target = _a.target;\n  /**\n   * If latest is a string, if it's a percentage we can return immediately as it's\n   * going to be stretched appropriately. Otherwise, if it's a pixel, convert it to a number.\n   */\n\n  if (typeof latest === \"string\") {\n    if (units[\"d\" /* px */].test(latest)) {\n      latest = parseFloat(latest);\n    } else {\n      return latest;\n    }\n  }\n  /**\n   * If latest is a number, it's a pixel value. We use the current viewportBox to calculate that\n   * pixel value as a percentage of each axis\n   */\n\n\n  var x = pixelsToPercent(latest, target.x);\n  var y = pixelsToPercent(latest, target.y);\n  return x + \"% \" + y + \"%\";\n}\n\nvar varToken = \"_$css\";\n\nfunction correctBoxShadow(latest, _a) {\n  var delta = _a.delta,\n      treeScale = _a.treeScale;\n  var original = latest;\n  /**\n   * We need to first strip and store CSS variables from the string.\n   */\n\n  var containsCSSVariables = latest.includes(\"var(\");\n  var cssVariables = [];\n\n  if (containsCSSVariables) {\n    latest = latest.replace(cssVariableRegex, function (match) {\n      cssVariables.push(match);\n      return varToken;\n    });\n  }\n\n  var shadow = complex[\"a\" /* complex */].parse(latest); // TODO: Doesn't support multiple shadows\n\n  if (shadow.length > 5) return original;\n  var template = complex[\"a\" /* complex */].createTransformer(latest);\n  var offset = typeof shadow[0] !== \"number\" ? 1 : 0; // Calculate the overall context scale\n\n  var xScale = delta.x.scale * treeScale.x;\n  var yScale = delta.y.scale * treeScale.y;\n  shadow[0 + offset] /= xScale;\n  shadow[1 + offset] /= yScale;\n  /**\n   * Ideally we'd correct x and y scales individually, but because blur and\n   * spread apply to both we have to take a scale average and apply that instead.\n   * We could potentially improve the outcome of this by incorporating the ratio between\n   * the two scales.\n   */\n\n  var averageScale = Object(mix[\"a\" /* mix */])(xScale, yScale, 0.5); // Blur\n\n  if (typeof shadow[2 + offset] === \"number\") shadow[2 + offset] /= averageScale; // Spread\n\n  if (typeof shadow[3 + offset] === \"number\") shadow[3 + offset] /= averageScale;\n  var output = template(shadow);\n\n  if (containsCSSVariables) {\n    var i_1 = 0;\n    output = output.replace(varToken, function () {\n      var cssVariable = cssVariables[i_1];\n      i_1++;\n      return cssVariable;\n    });\n  }\n\n  return output;\n}\n\nvar borderCorrectionDefinition = {\n  process: correctBorderRadius\n};\nvar defaultScaleCorrectors = {\n  borderRadius: Object(tslib_es6[\"a\" /* __assign */])(Object(tslib_es6[\"a\" /* __assign */])({}, borderCorrectionDefinition), {\n    applyTo: [\"borderTopLeftRadius\", \"borderTopRightRadius\", \"borderBottomLeftRadius\", \"borderBottomRightRadius\"]\n  }),\n  borderTopLeftRadius: borderCorrectionDefinition,\n  borderTopRightRadius: borderCorrectionDefinition,\n  borderBottomLeftRadius: borderCorrectionDefinition,\n  borderBottomRightRadius: borderCorrectionDefinition,\n  boxShadow: {\n    process: correctBoxShadow\n  }\n};\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/motion/features/layout/Animate.js\n\n\n\n\n\n\n\n\n\n\nvar progressTarget = 1000;\n\nvar Animate_Animate =\n/** @class */\nfunction (_super) {\n  Object(tslib_es6[\"c\" /* __extends */])(Animate, _super);\n\n  function Animate() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    /**\n     * A mutable object that tracks the target viewport box\n     * for the current animation frame.\n     */\n\n\n    _this.frameTarget = Object(geometry[\"a\" /* axisBox */])();\n    /**\n     * The current animation target, we use this to check whether to start\n     * a new animation or continue the existing one.\n     */\n\n    _this.currentAnimationTarget = Object(geometry[\"a\" /* axisBox */])();\n    /**\n     * Track whether we're animating this axis.\n     */\n\n    _this.isAnimating = {\n      x: false,\n      y: false\n    };\n    _this.stopAxisAnimation = {\n      x: undefined,\n      y: undefined\n    };\n    _this.isAnimatingTree = false;\n\n    _this.animate = function (target, origin, _a) {\n      if (_a === void 0) {\n        _a = {};\n      }\n\n      var originBox = _a.originBox,\n          targetBox = _a.targetBox,\n          visibilityAction = _a.visibilityAction,\n          shouldStackAnimate = _a.shouldStackAnimate,\n          onComplete = _a.onComplete,\n          prevParent = _a.prevParent,\n          config = Object(tslib_es6[\"f\" /* __rest */])(_a, [\"originBox\", \"targetBox\", \"visibilityAction\", \"shouldStackAnimate\", \"onComplete\", \"prevParent\"]);\n\n      var _b = _this.props,\n          visualElement = _b.visualElement,\n          layout = _b.layout;\n      /**\n       * Early return if we've been instructed not to animate this render.\n       */\n\n      if (shouldStackAnimate === false) {\n        _this.isAnimatingTree = false;\n        return _this.safeToRemove();\n      }\n      /**\n       * Prioritise tree animations\n       */\n\n\n      if (_this.isAnimatingTree && shouldStackAnimate !== true) {\n        return;\n      } else if (shouldStackAnimate) {\n        _this.isAnimatingTree = true;\n      }\n      /**\n       * Allow the measured origin (prev bounding box) and target (actual layout) to be\n       * overridden by the provided config.\n       */\n\n\n      origin = originBox || origin;\n      target = targetBox || target;\n      /**\n       * If this element has a projecting parent, there's an opportunity to animate\n       * it relatively to that parent rather than relatively to the viewport. This\n       * allows us to add orchestrated animations.\n       */\n\n      var isRelative = false;\n      var projectionParent = visualElement.getProjectionParent();\n\n      if (projectionParent) {\n        var prevParentViewportBox = projectionParent.prevViewportBox;\n        var parentLayout = projectionParent.getLayoutState().layout;\n        /**\n         * If we're being provided a previous parent VisualElement by AnimateSharedLayout\n         */\n\n        if (prevParent) {\n          /**\n           * If we've been provided an explicit target box it means we're animating back\n           * to this previous parent. So we can make a relative box by comparing to the previous\n           * parent's layout\n           */\n          if (targetBox) {\n            parentLayout = prevParent.getLayoutState().layout;\n          }\n          /**\n           * Likewise if we've been provided an explicit origin box it means we're\n           * animating out from a different element. So we should figure out where that was\n           * on screen relative to the new parent element.\n           */\n\n\n          if (originBox && !checkIfParentHasChanged(prevParent, projectionParent) && prevParent.prevViewportBox) {\n            prevParentViewportBox = prevParent.prevViewportBox;\n          }\n        }\n\n        if (prevParentViewportBox && isProvidedCorrectDataForRelativeSharedLayout(prevParent, originBox, targetBox)) {\n          isRelative = true;\n          origin = calcRelativeOffset(prevParentViewportBox, origin);\n          target = calcRelativeOffset(parentLayout, target);\n        }\n      }\n\n      var boxHasMoved = hasMoved(origin, target);\n      var animations = eachAxis(function (axis) {\n        var _a, _b;\n        /**\n         * If layout is set to \"position\", we can resize the origin box based on the target\n         * box and only animate its position.\n         */\n\n\n        if (layout === \"position\") {\n          var targetLength = target[axis].max - target[axis].min;\n          origin[axis].max = origin[axis].min + targetLength;\n        }\n\n        if (visualElement.projection.isTargetLocked) {\n          return;\n        } else if (visibilityAction !== undefined) {\n          visualElement.setVisibility(visibilityAction === types[\"b\" /* VisibilityAction */].Show);\n        } else if (boxHasMoved) {\n          // If the box has moved, animate between it's current visual state and its\n          // final state\n          return _this.animateAxis(axis, target[axis], origin[axis], Object(tslib_es6[\"a\" /* __assign */])(Object(tslib_es6[\"a\" /* __assign */])({}, config), {\n            isRelative: isRelative\n          }));\n        } else {\n          (_b = (_a = _this.stopAxisAnimation)[axis]) === null || _b === void 0 ? void 0 : _b.call(_a); // If the box has remained in the same place, immediately set the axis target\n          // to the final desired state\n\n          return visualElement.setProjectionTargetAxis(axis, target[axis].min, target[axis].max, isRelative);\n        }\n      }); // Force a render to ensure there's no flash of uncorrected bounding box.\n\n      visualElement.syncRender();\n      /**\n       * If this visualElement isn't present (ie it's been removed from the tree by the user but\n       * kept in by the tree by AnimatePresence) then call safeToRemove when all axis animations\n       * have successfully finished.\n       */\n\n      return Promise.all(animations).then(function () {\n        _this.isAnimatingTree = false;\n        onComplete && onComplete();\n        visualElement.notifyLayoutAnimationComplete();\n      });\n    };\n\n    return _this;\n  }\n\n  Animate.prototype.componentDidMount = function () {\n    var _this = this;\n\n    var visualElement = this.props.visualElement;\n    visualElement.animateMotionValue = transitions[\"b\" /* startAnimation */];\n    visualElement.enableLayoutProjection();\n    this.unsubLayoutReady = visualElement.onLayoutUpdate(this.animate);\n\n    visualElement.layoutSafeToRemove = function () {\n      return _this.safeToRemove();\n    };\n\n    Object(scale_correction[\"a\" /* addScaleCorrection */])(defaultScaleCorrectors);\n  };\n\n  Animate.prototype.componentWillUnmount = function () {\n    var _this = this;\n\n    this.unsubLayoutReady();\n    eachAxis(function (axis) {\n      var _a, _b;\n\n      return (_b = (_a = _this.stopAxisAnimation)[axis]) === null || _b === void 0 ? void 0 : _b.call(_a);\n    });\n  };\n  /**\n   * TODO: This manually performs animations on the visualElement's layout progress\n   * values. It'd be preferable to amend the startLayoutAxisAnimation\n   * API to accept more custom animations like this.\n   */\n\n\n  Animate.prototype.animateAxis = function (axis, target, origin, _a) {\n    var _this = this;\n\n    var _b, _c;\n\n    var _d = _a === void 0 ? {} : _a,\n        transition = _d.transition,\n        isRelative = _d.isRelative;\n    /**\n     * If we're not animating to a new target, don't run this animation\n     */\n\n\n    if (this.isAnimating[axis] && axisIsEqual(target, this.currentAnimationTarget[axis])) {\n      return;\n    }\n\n    (_c = (_b = this.stopAxisAnimation)[axis]) === null || _c === void 0 ? void 0 : _c.call(_b);\n    this.isAnimating[axis] = true;\n    var visualElement = this.props.visualElement;\n    var frameTarget = this.frameTarget[axis];\n    var layoutProgress = visualElement.getProjectionAnimationProgress()[axis];\n    /**\n     * Set layout progress back to 0. We set it twice to hard-reset any velocity that might\n     * be re-incoporated into a subsequent spring animation.\n     */\n\n    layoutProgress.clearListeners();\n    layoutProgress.set(0);\n    layoutProgress.set(0);\n    /**\n     * Create an animation function to run once per frame. This will tween the visual bounding box from\n     * origin to target using the latest progress value.\n     */\n\n    var frame = function frame() {\n      // Convert the latest layoutProgress, which is a value from 0-1000, into a 0-1 progress\n      var p = layoutProgress.get() / progressTarget; // Tween the axis and update the visualElement with the latest values\n\n      tweenAxis(frameTarget, origin, target, p);\n      visualElement.setProjectionTargetAxis(axis, frameTarget.min, frameTarget.max, isRelative);\n    }; // Synchronously run a frame to ensure there's no flash of the uncorrected bounding box.\n\n\n    frame(); // Create a function to stop animation on this specific axis\n\n    var unsubscribeProgress = layoutProgress.onChange(frame);\n\n    this.stopAxisAnimation[axis] = function () {\n      _this.isAnimating[axis] = false;\n      layoutProgress.stop();\n      unsubscribeProgress();\n    };\n\n    this.currentAnimationTarget[axis] = target;\n    var layoutTransition = transition || visualElement.getDefaultTransition() || defaultLayoutTransition; // Start the animation on this axis\n\n    var animation = Object(transitions[\"b\" /* startAnimation */])(axis === \"x\" ? \"layoutX\" : \"layoutY\", layoutProgress, progressTarget, layoutTransition && Object(transitions[\"a\" /* getValueTransition */])(layoutTransition, \"layout\")).then(this.stopAxisAnimation[axis]);\n    return animation;\n  };\n\n  Animate.prototype.safeToRemove = function () {\n    var _a, _b;\n\n    (_b = (_a = this.props).safeToRemove) === null || _b === void 0 ? void 0 : _b.call(_a);\n  };\n\n  Animate.prototype.render = function () {\n    return null;\n  };\n\n  return Animate;\n}(react[\"Component\"]);\n\nfunction AnimateLayoutContextProvider(props) {\n  var _a = Object(tslib_es6[\"e\" /* __read */])(Object(use_presence[\"b\" /* usePresence */])(), 2),\n      safeToRemove = _a[1];\n\n  return react[\"createElement\"](Animate_Animate, Object(tslib_es6[\"a\" /* __assign */])({}, props, {\n    safeToRemove: safeToRemove\n  }));\n}\n\nfunction hasMoved(a, b) {\n  return !isZeroBox(a) && !isZeroBox(b) && (!axisIsEqual(a.x, b.x) || !axisIsEqual(a.y, b.y));\n}\n\nvar zeroAxis = {\n  min: 0,\n  max: 0\n};\n\nfunction isZeroBox(a) {\n  return axisIsEqual(a.x, zeroAxis) && axisIsEqual(a.y, zeroAxis);\n}\n\nfunction axisIsEqual(a, b) {\n  return a.min === b.min && a.max === b.max;\n}\n\nvar defaultLayoutTransition = {\n  duration: 0.45,\n  ease: [0.4, 0, 0.1, 1]\n};\n\nfunction isProvidedCorrectDataForRelativeSharedLayout(prevParent, originBox, targetBox) {\n  return prevParent || !prevParent && !(originBox || targetBox);\n}\n\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/context/SharedLayoutContext.js + 1 modules\nvar SharedLayoutContext = __webpack_require__(649);\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/motion/features/layout/Measure.js\n\n\n\n\n/**\n * This component is responsible for scheduling the measuring of the motion component\n */\n\nvar Measure_Measure =\n/** @class */\nfunction (_super) {\n  Object(tslib_es6[\"c\" /* __extends */])(Measure, _super);\n\n  function Measure() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * If this is a child of a SyncContext, register the VisualElement with it on mount.\n   */\n\n\n  Measure.prototype.componentDidMount = function () {\n    var _a = this.props,\n        syncLayout = _a.syncLayout,\n        framerSyncLayout = _a.framerSyncLayout,\n        visualElement = _a.visualElement;\n    Object(SharedLayoutContext[\"c\" /* isSharedLayout */])(syncLayout) && syncLayout.register(visualElement);\n    Object(SharedLayoutContext[\"c\" /* isSharedLayout */])(framerSyncLayout) && framerSyncLayout.register(visualElement);\n    visualElement.onUnmount(function () {\n      if (Object(SharedLayoutContext[\"c\" /* isSharedLayout */])(syncLayout)) {\n        syncLayout.remove(visualElement);\n      }\n\n      if (Object(SharedLayoutContext[\"c\" /* isSharedLayout */])(framerSyncLayout)) {\n        framerSyncLayout.remove(visualElement);\n      }\n    });\n  };\n  /**\n   * If this is a child of a SyncContext, notify it that it needs to re-render. It will then\n   * handle the snapshotting.\n   *\n   * If it is stand-alone component, add it to the batcher.\n   */\n\n\n  Measure.prototype.getSnapshotBeforeUpdate = function () {\n    var _a = this.props,\n        syncLayout = _a.syncLayout,\n        visualElement = _a.visualElement;\n\n    if (Object(SharedLayoutContext[\"c\" /* isSharedLayout */])(syncLayout)) {\n      syncLayout.syncUpdate();\n    } else {\n      Object(utils[\"c\" /* snapshotViewportBox */])(visualElement);\n      syncLayout.add(visualElement);\n    }\n\n    return null;\n  };\n\n  Measure.prototype.componentDidUpdate = function () {\n    var syncLayout = this.props.syncLayout;\n    if (!Object(SharedLayoutContext[\"c\" /* isSharedLayout */])(syncLayout)) syncLayout.flush();\n  };\n\n  Measure.prototype.render = function () {\n    return null;\n  };\n\n  return Measure;\n}(react_default.a.Component);\n\nfunction MeasureContextProvider(props) {\n  var syncLayout = Object(react[\"useContext\"])(SharedLayoutContext[\"b\" /* SharedLayoutContext */]);\n  var framerSyncLayout = Object(react[\"useContext\"])(SharedLayoutContext[\"a\" /* FramerTreeLayoutContext */]);\n  return react_default.a.createElement(Measure_Measure, Object(tslib_es6[\"a\" /* __assign */])({}, props, {\n    syncLayout: syncLayout,\n    framerSyncLayout: framerSyncLayout\n  }));\n}\n\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/motion/features/layout/index.js\n\n\nvar layoutAnimations = {\n  measureLayout: MeasureContextProvider,\n  layoutAnimation: AnimateLayoutContextProvider\n};\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/animation/utils/is-animation-controls.js\nvar is_animation_controls = __webpack_require__(703);\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/context/PresenceContext.js\nvar PresenceContext = __webpack_require__(233);\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/animation/utils/is-keyframes-target.js\nvar is_keyframes_target = __webpack_require__(430);\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/utils/shallow-compare.js\nfunction shallowCompare(next, prev) {\n  if (!Array.isArray(prev)) return false;\n  var prevLength = prev.length;\n  if (prevLength !== next.length) return false;\n\n  for (var i = 0; i < prevLength; i++) {\n    if (prev[i] !== next[i]) return false;\n  }\n\n  return true;\n}\n\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/render/utils/animation.js\nvar utils_animation = __webpack_require__(643);\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/render/utils/variants.js\nvar variants = __webpack_require__(175);\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/render/utils/animation-state.js\n\n\n\n\n\n\n\nvar variantPriorityOrder = [AnimationType.Animate, AnimationType.Hover, AnimationType.Tap, AnimationType.Drag, AnimationType.Focus, AnimationType.Exit];\n\nvar reversePriorityOrder = Object(tslib_es6[\"h\" /* __spreadArray */])([], Object(tslib_es6[\"e\" /* __read */])(variantPriorityOrder)).reverse();\n\nvar numAnimationTypes = variantPriorityOrder.length;\n\nfunction animateList(visualElement) {\n  return function (animations) {\n    return Promise.all(animations.map(function (_a) {\n      var animation = _a.animation,\n          options = _a.options;\n      return Object(utils_animation[\"a\" /* animateVisualElement */])(visualElement, animation, options);\n    }));\n  };\n}\n\nfunction createAnimationState(visualElement) {\n  var animate = animateList(visualElement);\n  var state = createState();\n  var allAnimatedKeys = {};\n  var isInitialRender = true;\n  /**\n   * This function will be used to reduce the animation definitions for\n   * each active animation type into an object of resolved values for it.\n   */\n\n  var buildResolvedTypeValues = function buildResolvedTypeValues(acc, definition) {\n    var resolved = Object(variants[\"e\" /* resolveVariant */])(visualElement, definition);\n\n    if (resolved) {\n      resolved.transition;\n\n      var transitionEnd = resolved.transitionEnd,\n          target = Object(tslib_es6[\"f\" /* __rest */])(resolved, [\"transition\", \"transitionEnd\"]);\n\n      acc = Object(tslib_es6[\"a\" /* __assign */])(Object(tslib_es6[\"a\" /* __assign */])(Object(tslib_es6[\"a\" /* __assign */])({}, acc), target), transitionEnd);\n    }\n\n    return acc;\n  };\n\n  function isAnimated(key) {\n    return allAnimatedKeys[key] !== undefined;\n  }\n  /**\n   * This just allows us to inject mocked animation functions\n   * @internal\n   */\n\n\n  function setAnimateFunction(makeAnimator) {\n    animate = makeAnimator(visualElement);\n  }\n  /**\n   * When we receive new props, we need to:\n   * 1. Create a list of protected keys for each type. This is a directory of\n   *    value keys that are currently being \"handled\" by types of a higher priority\n   *    so that whenever an animation is played of a given type, these values are\n   *    protected from being animated.\n   * 2. Determine if an animation type needs animating.\n   * 3. Determine if any values have been removed from a type and figure out\n   *    what to animate those to.\n   */\n\n\n  function animateChanges(options, changedActiveType) {\n    var _a;\n\n    var props = visualElement.getProps();\n    var context = visualElement.getVariantContext(true) || {};\n    /**\n     * A list of animations that we'll build into as we iterate through the animation\n     * types. This will get executed at the end of the function.\n     */\n\n    var animations = [];\n    /**\n     * Keep track of which values have been removed. Then, as we hit lower priority\n     * animation types, we can check if they contain removed values and animate to that.\n     */\n\n    var removedKeys = new Set();\n    /**\n     * A dictionary of all encountered keys. This is an object to let us build into and\n     * copy it without iteration. Each time we hit an animation type we set its protected\n     * keys - the keys its not allowed to animate - to the latest version of this object.\n     */\n\n    var encounteredKeys = {};\n    /**\n     * If a variant has been removed at a given index, and this component is controlling\n     * variant animations, we want to ensure lower-priority variants are forced to animate.\n     */\n\n    var removedVariantIndex = Infinity;\n\n    var _loop_1 = function _loop_1(i) {\n      var type = reversePriorityOrder[i];\n      var typeState = state[type];\n      var prop = (_a = props[type]) !== null && _a !== void 0 ? _a : context[type];\n      var propIsVariant = Object(variants[\"c\" /* isVariantLabel */])(prop);\n      /**\n       * If this type has *just* changed isActive status, set activeDelta\n       * to that status. Otherwise set to null.\n       */\n\n      var activeDelta = type === changedActiveType ? typeState.isActive : null;\n      if (activeDelta === false) removedVariantIndex = i;\n      /**\n       * If this prop is an inherited variant, rather than been set directly on the\n       * component itself, we want to make sure we allow the parent to trigger animations.\n       *\n       * TODO: Can probably change this to a !isControllingVariants check\n       */\n\n      var isInherited = prop === context[type] && prop !== props[type] && propIsVariant;\n      /**\n       *\n       */\n\n      if (isInherited && isInitialRender && visualElement.manuallyAnimateOnMount) {\n        isInherited = false;\n      }\n      /**\n       * Set all encountered keys so far as the protected keys for this type. This will\n       * be any key that has been animated or otherwise handled by active, higher-priortiy types.\n       */\n\n\n      typeState.protectedKeys = Object(tslib_es6[\"a\" /* __assign */])({}, encounteredKeys); // Check if we can skip analysing this prop early\n\n      if ( // If it isn't active and hasn't *just* been set as inactive\n      !typeState.isActive && activeDelta === null || // If we didn't and don't have any defined prop for this animation type\n      !prop && !typeState.prevProp || // Or if the prop doesn't define an animation\n      Object(is_animation_controls[\"a\" /* isAnimationControls */])(prop) || typeof prop === \"boolean\") {\n        return \"continue\";\n      }\n      /**\n       * As we go look through the values defined on this type, if we detect\n       * a changed value or a value that was removed in a higher priority, we set\n       * this to true and add this prop to the animation list.\n       */\n\n\n      var shouldAnimateType = variantsHaveChanged(typeState.prevProp, prop) || // If we're making this variant active, we want to always make it active\n      type === changedActiveType && typeState.isActive && !isInherited && propIsVariant || // If we removed a higher-priority variant (i is in reverse order)\n      i > removedVariantIndex && propIsVariant;\n      /**\n       * As animations can be set as variant lists, variants or target objects, we\n       * coerce everything to an array if it isn't one already\n       */\n\n      var definitionList = Array.isArray(prop) ? prop : [prop];\n      /**\n       * Build an object of all the resolved values. We'll use this in the subsequent\n       * animateChanges calls to determine whether a value has changed.\n       */\n\n      var resolvedValues = definitionList.reduce(buildResolvedTypeValues, {});\n      if (activeDelta === false) resolvedValues = {};\n      /**\n       * Now we need to loop through all the keys in the prev prop and this prop,\n       * and decide:\n       * 1. If the value has changed, and needs animating\n       * 2. If it has been removed, and needs adding to the removedKeys set\n       * 3. If it has been removed in a higher priority type and needs animating\n       * 4. If it hasn't been removed in a higher priority but hasn't changed, and\n       *    needs adding to the type's protectedKeys list.\n       */\n\n      var _b = typeState.prevResolvedValues,\n          prevResolvedValues = _b === void 0 ? {} : _b;\n\n      var allKeys = Object(tslib_es6[\"a\" /* __assign */])(Object(tslib_es6[\"a\" /* __assign */])({}, prevResolvedValues), resolvedValues);\n\n      var markToAnimate = function markToAnimate(key) {\n        shouldAnimateType = true;\n        removedKeys.delete(key);\n        typeState.needsAnimating[key] = true;\n      };\n\n      for (var key in allKeys) {\n        var next = resolvedValues[key];\n        var prev = prevResolvedValues[key]; // If we've already handled this we can just skip ahead\n\n        if (encounteredKeys.hasOwnProperty(key)) continue;\n        /**\n         * If the value has changed, we probably want to animate it.\n         */\n\n        if (next !== prev) {\n          /**\n           * If both values are keyframes, we need to shallow compare them to\n           * detect whether any value has changed. If it has, we animate it.\n           */\n          if (Object(is_keyframes_target[\"a\" /* isKeyframesTarget */])(next) && Object(is_keyframes_target[\"a\" /* isKeyframesTarget */])(prev)) {\n            if (!shallowCompare(next, prev)) {\n              markToAnimate(key);\n            } else {\n              /**\n               * If it hasn't changed, we want to ensure it doesn't animate by\n               * adding it to the list of protected keys.\n               */\n              typeState.protectedKeys[key] = true;\n            }\n          } else if (next !== undefined) {\n            // If next is defined and doesn't equal prev, it needs animating\n            markToAnimate(key);\n          } else {\n            // If it's undefined, it's been removed.\n            removedKeys.add(key);\n          }\n        } else if (next !== undefined && removedKeys.has(key)) {\n          /**\n           * If next hasn't changed and it isn't undefined, we want to check if it's\n           * been removed by a higher priority\n           */\n          markToAnimate(key);\n        } else {\n          /**\n           * If it hasn't changed, we add it to the list of protected values\n           * to ensure it doesn't get animated.\n           */\n          typeState.protectedKeys[key] = true;\n        }\n      }\n      /**\n       * Update the typeState so next time animateChanges is called we can compare the\n       * latest prop and resolvedValues to these.\n       */\n\n\n      typeState.prevProp = prop;\n      typeState.prevResolvedValues = resolvedValues;\n      /**\n       *\n       */\n\n      if (typeState.isActive) {\n        encounteredKeys = Object(tslib_es6[\"a\" /* __assign */])(Object(tslib_es6[\"a\" /* __assign */])({}, encounteredKeys), resolvedValues);\n      }\n\n      if (isInitialRender && visualElement.blockInitialAnimation) {\n        shouldAnimateType = false;\n      }\n      /**\n       * If this is an inherited prop we want to hard-block animations\n       * TODO: Test as this should probably still handle animations triggered\n       * by removed values?\n       */\n\n\n      if (shouldAnimateType && !isInherited) {\n        animations.push.apply(animations, Object(tslib_es6[\"h\" /* __spreadArray */])([], Object(tslib_es6[\"e\" /* __read */])(definitionList.map(function (animation) {\n          return {\n            animation: animation,\n            options: Object(tslib_es6[\"a\" /* __assign */])({\n              type: type\n            }, options)\n          };\n        }))));\n      }\n    };\n    /**\n     * Iterate through all animation types in reverse priority order. For each, we want to\n     * detect which values it's handling and whether or not they've changed (and therefore\n     * need to be animated). If any values have been removed, we want to detect those in\n     * lower priority props and flag for animation.\n     */\n\n\n    for (var i = 0; i < numAnimationTypes; i++) {\n      _loop_1(i);\n    }\n\n    allAnimatedKeys = Object(tslib_es6[\"a\" /* __assign */])({}, encounteredKeys);\n    /**\n     * If there are some removed value that haven't been dealt with,\n     * we need to create a new animation that falls back either to the value\n     * defined in the style prop, or the last read value.\n     */\n\n    if (removedKeys.size) {\n      var fallbackAnimation_1 = {};\n      removedKeys.forEach(function (key) {\n        var fallbackTarget = visualElement.getBaseTarget(key);\n\n        if (fallbackTarget !== undefined) {\n          fallbackAnimation_1[key] = fallbackTarget;\n        }\n      });\n      animations.push({\n        animation: fallbackAnimation_1\n      });\n    }\n\n    var shouldAnimate = Boolean(animations.length);\n\n    if (isInitialRender && props.initial === false && !visualElement.manuallyAnimateOnMount) {\n      shouldAnimate = false;\n    }\n\n    isInitialRender = false;\n    return shouldAnimate ? animate(animations) : Promise.resolve();\n  }\n  /**\n   * Change whether a certain animation type is active.\n   */\n\n\n  function setActive(type, isActive, options) {\n    var _a; // If the active state hasn't changed, we can safely do nothing here\n\n\n    if (state[type].isActive === isActive) return Promise.resolve(); // Propagate active change to children\n\n    (_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n      var _a;\n\n      return (_a = child.animationState) === null || _a === void 0 ? void 0 : _a.setActive(type, isActive);\n    });\n    state[type].isActive = isActive;\n    return animateChanges(options, type);\n  }\n\n  return {\n    isAnimated: isAnimated,\n    animateChanges: animateChanges,\n    setActive: setActive,\n    setAnimateFunction: setAnimateFunction,\n    getState: function getState() {\n      return state;\n    }\n  };\n}\n\nfunction variantsHaveChanged(prev, next) {\n  if (typeof next === \"string\") {\n    return next !== prev;\n  } else if (Object(variants[\"d\" /* isVariantLabels */])(next)) {\n    return !shallowCompare(next, prev);\n  }\n\n  return false;\n}\n\nfunction createTypeState(isActive) {\n  if (isActive === void 0) {\n    isActive = false;\n  }\n\n  return {\n    isActive: isActive,\n    protectedKeys: {},\n    needsAnimating: {},\n    prevResolvedValues: {}\n  };\n}\n\nfunction createState() {\n  var _a;\n\n  return _a = {}, _a[AnimationType.Animate] = createTypeState(true), _a[AnimationType.Hover] = createTypeState(), _a[AnimationType.Tap] = createTypeState(), _a[AnimationType.Drag] = createTypeState(), _a[AnimationType.Focus] = createTypeState(), _a[AnimationType.Exit] = createTypeState(), _a;\n}\n\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/motion/features/animations.js\n\n\n\n\n\n\n\n\nvar animations_animations = {\n  animation: makeRenderlessComponent(function (_a) {\n    var visualElement = _a.visualElement,\n        animate = _a.animate;\n    /**\n     * We dynamically generate the AnimationState manager as it contains a reference\n     * to the underlying animation library. We only want to load that if we load this,\n     * so people can optionally code split it out using the `m` component.\n     */\n\n    visualElement.animationState || (visualElement.animationState = createAnimationState(visualElement));\n    /**\n     * Subscribe any provided AnimationControls to the component's VisualElement\n     */\n\n    if (Object(is_animation_controls[\"a\" /* isAnimationControls */])(animate)) {\n      Object(react[\"useEffect\"])(function () {\n        return animate.subscribe(visualElement);\n      }, [animate]);\n    }\n  }),\n  exit: makeRenderlessComponent(function (props) {\n    var custom = props.custom,\n        visualElement = props.visualElement;\n\n    var _a = Object(tslib_es6[\"e\" /* __read */])(Object(use_presence[\"b\" /* usePresence */])(), 2),\n        isPresent = _a[0],\n        onExitComplete = _a[1];\n\n    var presenceContext = Object(react[\"useContext\"])(PresenceContext[\"a\" /* PresenceContext */]);\n    Object(react[\"useEffect\"])(function () {\n      var _a, _b;\n\n      var animation = (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Exit, !isPresent, {\n        custom: (_b = presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.custom) !== null && _b !== void 0 ? _b : custom\n      });\n      !isPresent && (animation === null || animation === void 0 ? void 0 : animation.then(onExitComplete));\n    }, [isPresent]);\n  })\n};\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/gestures/use-focus-gesture.js\n\n\n/**\n *\n * @param props\n * @param ref\n * @internal\n */\n\nfunction useFocusGesture(_a) {\n  var whileFocus = _a.whileFocus,\n      visualElement = _a.visualElement;\n\n  var onFocus = function onFocus() {\n    var _a;\n\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Focus, true);\n  };\n\n  var onBlur = function onBlur() {\n    var _a;\n\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Focus, false);\n  };\n\n  useDomEvent(visualElement, \"focus\", whileFocus ? onFocus : undefined);\n  useDomEvent(visualElement, \"blur\", whileFocus ? onBlur : undefined);\n}\n\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/gestures/use-hover-gesture.js\n\n\n\n\n\nfunction createHoverEvent(visualElement, isActive, callback) {\n  return function (event, info) {\n    var _a;\n\n    if (!isMouseEvent(event) || isDragActive()) return;\n    callback === null || callback === void 0 ? void 0 : callback(event, info);\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Hover, isActive);\n  };\n}\n\nfunction useHoverGesture(_a) {\n  var onHoverStart = _a.onHoverStart,\n      onHoverEnd = _a.onHoverEnd,\n      whileHover = _a.whileHover,\n      visualElement = _a.visualElement;\n  usePointerEvent(visualElement, \"pointerenter\", onHoverStart || whileHover ? createHoverEvent(visualElement, true, onHoverStart) : undefined);\n  usePointerEvent(visualElement, \"pointerleave\", onHoverEnd || whileHover ? createHoverEvent(visualElement, false, onHoverEnd) : undefined);\n}\n\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/gestures/utils/is-node-or-child.js\n/**\n * Recursively traverse up the tree to check whether the provided child node\n * is the parent or a descendant of it.\n *\n * @param parent - Element to find\n * @param child - Element to test against parent\n */\nvar isNodeOrChild = function isNodeOrChild(parent, child) {\n  if (!child) {\n    return false;\n  } else if (parent === child) {\n    return true;\n  } else {\n    return isNodeOrChild(parent, child.parentElement);\n  }\n};\n\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/gestures/use-tap-gesture.js\n\n\n\n\n\n\n\n/**\n * @param handlers -\n * @internal\n */\n\nfunction useTapGesture(_a) {\n  var onTap = _a.onTap,\n      onTapStart = _a.onTapStart,\n      onTapCancel = _a.onTapCancel,\n      whileTap = _a.whileTap,\n      visualElement = _a.visualElement;\n  var hasPressListeners = onTap || onTapStart || onTapCancel || whileTap;\n  var isPressing = Object(react[\"useRef\"])(false);\n  var cancelPointerEndListeners = Object(react[\"useRef\"])(null);\n\n  function removePointerEndListener() {\n    var _a;\n\n    (_a = cancelPointerEndListeners.current) === null || _a === void 0 ? void 0 : _a.call(cancelPointerEndListeners);\n    cancelPointerEndListeners.current = null;\n  }\n\n  function checkPointerEnd() {\n    var _a;\n\n    removePointerEndListener();\n    isPressing.current = false;\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Tap, false);\n    return !isDragActive();\n  }\n\n  function onPointerUp(event, info) {\n    if (!checkPointerEnd()) return;\n    /**\n     * We only count this as a tap gesture if the event.target is the same\n     * as, or a child of, this component's element\n     */\n\n    !isNodeOrChild(visualElement.getInstance(), event.target) ? onTapCancel === null || onTapCancel === void 0 ? void 0 : onTapCancel(event, info) : onTap === null || onTap === void 0 ? void 0 : onTap(event, info);\n  }\n\n  function onPointerCancel(event, info) {\n    if (!checkPointerEnd()) return;\n    onTapCancel === null || onTapCancel === void 0 ? void 0 : onTapCancel(event, info);\n  }\n\n  function onPointerDown(event, info) {\n    var _a;\n\n    removePointerEndListener();\n    if (isPressing.current) return;\n    isPressing.current = true;\n    cancelPointerEndListeners.current = Object(pipe[\"a\" /* pipe */])(addPointerEvent(window, \"pointerup\", onPointerUp), addPointerEvent(window, \"pointercancel\", onPointerCancel));\n    onTapStart === null || onTapStart === void 0 ? void 0 : onTapStart(event, info);\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Tap, true);\n  }\n\n  usePointerEvent(visualElement, \"pointerdown\", hasPressListeners ? onPointerDown : undefined);\n  Object(use_unmount_effect[\"a\" /* useUnmountEffect */])(removePointerEndListener);\n}\n\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/motion/features/gestures.js\n\n\n\n\nvar gestureAnimations = {\n  tap: makeRenderlessComponent(useTapGesture),\n  focus: makeRenderlessComponent(useFocusGesture),\n  hover: makeRenderlessComponent(useHoverGesture)\n};\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/value/index.js\nvar es_value = __webpack_require__(630);\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/value/utils/is-motion-value.js\nvar is_motion_value = __webpack_require__(251);\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/render/utils/state.js\n\n\nvar state_createProjectionState = function createProjectionState() {\n  return {\n    isEnabled: false,\n    isHydrated: false,\n    isTargetLocked: false,\n    target: Object(geometry[\"a\" /* axisBox */])(),\n    targetFinal: Object(geometry[\"a\" /* axisBox */])()\n  };\n};\n\nfunction createLayoutState() {\n  return {\n    isHydrated: false,\n    layout: Object(geometry[\"a\" /* axisBox */])(),\n    layoutCorrected: Object(geometry[\"a\" /* axisBox */])(),\n    treeScale: {\n      x: 1,\n      y: 1\n    },\n    delta: Object(geometry[\"e\" /* delta */])(),\n    deltaFinal: Object(geometry[\"e\" /* delta */])(),\n    deltaTransform: \"\"\n  };\n}\n\nvar zeroLayout = createLayoutState();\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/render/html/utils/build-projection-transform.js\n\n/**\n * Build a transform style that takes a calculated delta between the element's current\n * space on screen and projects it into the desired space.\n */\n\nfunction buildLayoutProjectionTransform(_a, treeScale, latestTransform) {\n  var x = _a.x,\n      y = _a.y;\n  /**\n   * The translations we use to calculate are always relative to the viewport coordinate space.\n   * But when we apply scales, we also scale the coordinate space of an element and its children.\n   * For instance if we have a treeScale (the culmination of all parent scales) of 0.5 and we need\n   * to move an element 100 pixels, we actually need to move it 200 in within that scaled space.\n   */\n\n  var xTranslate = x.translate / treeScale.x;\n  var yTranslate = y.translate / treeScale.y;\n  var transform = \"translate3d(\" + xTranslate + \"px, \" + yTranslate + \"px, 0) \";\n\n  if (latestTransform) {\n    var rotate = latestTransform.rotate,\n        rotateX = latestTransform.rotateX,\n        rotateY = latestTransform.rotateY;\n    if (rotate) transform += \"rotate(\" + rotate + \") \";\n    if (rotateX) transform += \"rotateX(\" + rotateX + \") \";\n    if (rotateY) transform += \"rotateY(\" + rotateY + \") \";\n  }\n\n  transform += \"scale(\" + x.scale + \", \" + y.scale + \")\";\n  return !latestTransform && transform === identityProjection ? \"\" : transform;\n}\n/**\n * Take the calculated delta origin and apply it as a transform string.\n */\n\n\nfunction buildLayoutProjectionTransformOrigin(_a) {\n  var deltaFinal = _a.deltaFinal;\n  return deltaFinal.x.origin * 100 + \"% \" + deltaFinal.y.origin * 100 + \"% 0\";\n}\n\nvar identityProjection = buildLayoutProjectionTransform(zeroLayout.delta, zeroLayout.treeScale, {\n  x: 1,\n  y: 1\n});\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/utils/subscription-manager.js\nvar subscription_manager = __webpack_require__(502);\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/render/utils/lifecycles.js\n\n\nvar names = [\"LayoutMeasure\", \"BeforeLayoutMeasure\", \"LayoutUpdate\", \"ViewportBoxUpdate\", \"Update\", \"Render\", \"AnimationComplete\", \"LayoutAnimationComplete\", \"AnimationStart\", \"SetAxisTarget\", \"Unmount\"];\n\nfunction createLifecycles() {\n  var managers = names.map(function () {\n    return new subscription_manager[\"a\" /* SubscriptionManager */]();\n  });\n  var propSubscriptions = {};\n  var lifecycles = {\n    clearAllListeners: function clearAllListeners() {\n      return managers.forEach(function (manager) {\n        return manager.clear();\n      });\n    },\n    updatePropListeners: function updatePropListeners(props) {\n      return names.forEach(function (name) {\n        var _a;\n\n        (_a = propSubscriptions[name]) === null || _a === void 0 ? void 0 : _a.call(propSubscriptions);\n        var on = \"on\" + name;\n        var propListener = props[on];\n\n        if (propListener) {\n          propSubscriptions[name] = lifecycles[on](propListener);\n        }\n      });\n    }\n  };\n  managers.forEach(function (manager, i) {\n    lifecycles[\"on\" + names[i]] = function (handler) {\n      return manager.add(handler);\n    };\n\n    lifecycles[\"notify\" + names[i]] = function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      return manager.notify.apply(manager, Object(tslib_es6[\"h\" /* __spreadArray */])([], Object(tslib_es6[\"e\" /* __read */])(args)));\n    };\n  });\n  return lifecycles;\n}\n\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/render/utils/motion-values.js\n\n\n\nfunction updateMotionValuesFromProps(element, next, prev) {\n  var _a;\n\n  for (var key in next) {\n    var nextValue = next[key];\n    var prevValue = prev[key];\n\n    if (Object(is_motion_value[\"a\" /* isMotionValue */])(nextValue)) {\n      /**\n       * If this is a motion value found in props or style, we want to add it\n       * to our visual element's motion value map.\n       */\n      element.addValue(key, nextValue);\n    } else if (Object(is_motion_value[\"a\" /* isMotionValue */])(prevValue)) {\n      /**\n       * If we're swapping to a new motion value, create a new motion value\n       * from that\n       */\n      element.addValue(key, Object(es_value[\"a\" /* motionValue */])(nextValue));\n    } else if (prevValue !== nextValue) {\n      /**\n       * If this is a flat value that has changed, update the motion value\n       * or create one if it doesn't exist. We only want to do this if we're\n       * not handling the value with our animation state.\n       */\n      if (element.hasValue(key)) {\n        var existingValue = element.getValue(key); // TODO: Only update values that aren't being animated or even looked at\n\n        !existingValue.hasAnimated && existingValue.set(nextValue);\n      } else {\n        element.addValue(key, Object(es_value[\"a\" /* motionValue */])((_a = element.getStaticValue(key)) !== null && _a !== void 0 ? _a : nextValue));\n      }\n    }\n  } // Handle removed values\n\n\n  for (var key in prev) {\n    if (next[key] === undefined) element.removeValue(key);\n  }\n\n  return next;\n}\n\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/render/utils/projection.js\n\n\n\nfunction updateLayoutDeltas(_a, _b, treePath, transformOrigin) {\n  var delta = _a.delta,\n      layout = _a.layout,\n      layoutCorrected = _a.layoutCorrected,\n      treeScale = _a.treeScale;\n  var target = _b.target;\n  /**\n   * Reset the corrected box with the latest values from box, as we're then going\n   * to perform mutative operations on it.\n   */\n\n  resetBox(layoutCorrected, layout);\n  /**\n   * Apply all the parent deltas to this box to produce the corrected box. This\n   * is the layout box, as it will appear on screen as a result of the transforms of its parents.\n   */\n\n  applyTreeDeltas(layoutCorrected, treeScale, treePath);\n  /**\n   * Update the delta between the corrected box and the target box before user-set transforms were applied.\n   * This will allow us to calculate the corrected borderRadius and boxShadow to compensate\n   * for our layout reprojection, but still allow them to be scaled correctly by the user.\n   * It might be that to simplify this we may want to accept that user-set scale is also corrected\n   * and we wouldn't have to keep and calc both deltas, OR we could support a user setting\n   * to allow people to choose whether these styles are corrected based on just the\n   * layout reprojection or the final bounding box.\n   */\n\n  updateBoxDelta(delta, layoutCorrected, target, transformOrigin);\n}\n\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/utils/array.js\nvar array = __webpack_require__(644);\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/render/utils/compare-by-depth.js\nvar compare_by_depth = __webpack_require__(475);\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/render/utils/flat-tree.js\n\n\n\nvar flat_tree_FlatTree =\n/** @class */\nfunction () {\n  function FlatTree() {\n    this.children = [];\n    this.isDirty = false;\n  }\n\n  FlatTree.prototype.add = function (child) {\n    Object(array[\"a\" /* addUniqueItem */])(this.children, child);\n    this.isDirty = true;\n  };\n\n  FlatTree.prototype.remove = function (child) {\n    Object(array[\"b\" /* removeItem */])(this.children, child);\n    this.isDirty = true;\n  };\n\n  FlatTree.prototype.forEach = function (callback) {\n    this.isDirty && this.children.sort(compare_by_depth[\"a\" /* compareByDepth */]);\n    this.isDirty = false;\n    this.children.forEach(callback);\n  };\n\n  return FlatTree;\n}();\n\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/render/dom/projection/relative-set.js\n\n\n\nfunction setCurrentViewportBox(visualElement) {\n  var projectionParent = visualElement.getProjectionParent();\n\n  if (!projectionParent) {\n    visualElement.rebaseProjectionTarget();\n    return;\n  }\n\n  var relativeOffset = calcRelativeOffset(projectionParent.getLayoutState().layout, visualElement.getLayoutState().layout);\n  eachAxis(function (axis) {\n    visualElement.setProjectionTargetAxis(axis, relativeOffset[axis].min, relativeOffset[axis].max, true);\n  });\n}\n\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/render/index.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar render_visualElement = function visualElement(_a) {\n  var _b = _a.treeType,\n      treeType = _b === void 0 ? \"\" : _b,\n      build = _a.build,\n      _getBaseTarget = _a.getBaseTarget,\n      _makeTargetAnimatable = _a.makeTargetAnimatable,\n      _measureViewportBox = _a.measureViewportBox,\n      renderInstance = _a.render,\n      readValueFromInstance = _a.readValueFromInstance,\n      _resetTransform = _a.resetTransform,\n      _restoreTransform = _a.restoreTransform,\n      removeValueFromRenderState = _a.removeValueFromRenderState,\n      _sortNodePosition = _a.sortNodePosition,\n      scrapeMotionValuesFromProps = _a.scrapeMotionValuesFromProps;\n  return function (_a, options) {\n    var parent = _a.parent,\n        props = _a.props,\n        presenceId = _a.presenceId,\n        blockInitialAnimation = _a.blockInitialAnimation,\n        visualState = _a.visualState;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    var latestValues = visualState.latestValues,\n        renderState = visualState.renderState;\n    /**\n     * The instance of the render-specific node that will be hydrated by the\n     * exposed React ref. So for example, this visual element can host a\n     * HTMLElement, plain object, or Three.js object. The functions provided\n     * in VisualElementConfig allow us to interface with this instance.\n     */\n\n    var instance;\n    /**\n     * Manages the subscriptions for a visual element's lifecycle, for instance\n     * onRender and onViewportBoxUpdate.\n     */\n\n    var lifecycles = createLifecycles();\n    /**\n     *\n     */\n\n    var projection = state_createProjectionState();\n    /**\n     * A reference to the nearest projecting parent. This is either\n     * undefined if we haven't looked for the nearest projecting parent,\n     * false if there is no parent performing layout projection, or a reference\n     * to the projecting parent.\n     */\n\n    var projectionParent;\n    /**\n     * This is a reference to the visual state of the \"lead\" visual element.\n     * Usually, this will be this visual element. But if it shares a layoutId\n     * with other visual elements, only one of them will be designated lead by\n     * AnimateSharedLayout. All the other visual elements will take on the visual\n     * appearance of the lead while they crossfade to it.\n     */\n\n    var leadProjection = projection;\n    var leadLatestValues = latestValues;\n    var unsubscribeFromLeadVisualElement;\n    /**\n     * The latest layout measurements and calculated projections. This\n     * is seperate from the target projection data in visualState as\n     * many visual elements might point to the same piece of visualState as\n     * a target, whereas they might each have different layouts and thus\n     * projection calculations needed to project into the same viewport box.\n     */\n\n    var layoutState = createLayoutState();\n    /**\n     *\n     */\n\n    var crossfader;\n    /**\n     * Keep track of whether the viewport box has been updated since the\n     * last time the layout projection was re-calculated.\n     */\n\n    var hasViewportBoxUpdated = false;\n    /**\n     * A map of all motion values attached to this visual element. Motion\n     * values are source of truth for any given animated value. A motion\n     * value might be provided externally by the component via props.\n     */\n\n    var values = new Map();\n    /**\n     * A map of every subscription that binds the provided or generated\n     * motion values onChange listeners to this visual element.\n     */\n\n    var valueSubscriptions = new Map();\n    /**\n     * A reference to the previously-provided motion values as returned\n     * from scrapeMotionValuesFromProps. We use the keys in here to determine\n     * if any motion values need to be removed after props are updated.\n     */\n\n    var prevMotionValues = {};\n    /**\n     * x/y motion values that track the progress of initiated layout\n     * animations.\n     *\n     * TODO: Target for removal\n     */\n\n    var projectionTargetProgress;\n    /**\n     * When values are removed from all animation props we need to search\n     * for a fallback value to animate to. These values are tracked in baseTarget.\n     */\n\n    var baseTarget = Object(tslib_es6[\"a\" /* __assign */])({}, latestValues); // Internal methods ========================\n\n    /**\n     * On mount, this will be hydrated with a callback to disconnect\n     * this visual element from its parent on unmount.\n     */\n\n\n    var removeFromVariantTree;\n    /**\n     *\n     */\n\n    function render() {\n      if (!instance) return;\n\n      if (element.isProjectionReady()) {\n        /**\n         * Apply the latest user-set transforms to the targetBox to produce the targetBoxFinal.\n         * This is the final box that we will then project into by calculating a transform delta and\n         * applying it to the corrected box.\n         */\n        applyBoxTransforms(leadProjection.targetFinal, leadProjection.target, leadLatestValues);\n        /**\n         * Update the delta between the corrected box and the final target box, after\n         * user-set transforms are applied to it. This will be used by the renderer to\n         * create a transform style that will reproject the element from its actual layout\n         * into the desired bounding box.\n         */\n\n        updateBoxDelta(layoutState.deltaFinal, layoutState.layoutCorrected, leadProjection.targetFinal, latestValues);\n      }\n\n      triggerBuild();\n      renderInstance(instance, renderState);\n    }\n\n    function triggerBuild() {\n      var valuesToRender = latestValues;\n\n      if (crossfader && crossfader.isActive()) {\n        var crossfadedValues = crossfader.getCrossfadeState(element);\n        if (crossfadedValues) valuesToRender = crossfadedValues;\n      }\n\n      build(element, renderState, valuesToRender, leadProjection, layoutState, options, props);\n    }\n\n    function update() {\n      lifecycles.notifyUpdate(latestValues);\n    }\n\n    function updateLayoutProjection() {\n      if (!element.isProjectionReady()) return;\n      var delta = layoutState.delta,\n          treeScale = layoutState.treeScale;\n      var prevTreeScaleX = treeScale.x;\n      var prevTreeScaleY = treeScale.y;\n      var prevDeltaTransform = layoutState.deltaTransform;\n      updateLayoutDeltas(layoutState, leadProjection, element.path, latestValues);\n      hasViewportBoxUpdated && element.notifyViewportBoxUpdate(leadProjection.target, delta);\n      hasViewportBoxUpdated = false;\n      var deltaTransform = buildLayoutProjectionTransform(delta, treeScale);\n\n      if (deltaTransform !== prevDeltaTransform || // Also compare calculated treeScale, for values that rely on this only for scale correction\n      prevTreeScaleX !== treeScale.x || prevTreeScaleY !== treeScale.y) {\n        element.scheduleRender();\n      }\n\n      layoutState.deltaTransform = deltaTransform;\n    }\n\n    function _updateTreeLayoutProjection() {\n      element.layoutTree.forEach(fireUpdateLayoutProjection);\n    }\n    /**\n     *\n     */\n\n\n    function bindToMotionValue(key, value) {\n      var removeOnChange = value.onChange(function (latestValue) {\n        latestValues[key] = latestValue;\n        props.onUpdate && es[\"b\" /* default */].update(update, false, true);\n      });\n      var removeOnRenderRequest = value.onRenderRequest(element.scheduleRender);\n      valueSubscriptions.set(key, function () {\n        removeOnChange();\n        removeOnRenderRequest();\n      });\n    }\n    /**\n     * Any motion values that are provided to the element when created\n     * aren't yet bound to the element, as this would technically be impure.\n     * However, we iterate through the motion values and set them to the\n     * initial values for this component.\n     *\n     * TODO: This is impure and we should look at changing this to run on mount.\n     * Doing so will break some tests but this isn't neccessarily a breaking change,\n     * more a reflection of the test.\n     */\n\n\n    var initialMotionValues = scrapeMotionValuesFromProps(props);\n\n    for (var key in initialMotionValues) {\n      var value = initialMotionValues[key];\n\n      if (latestValues[key] !== undefined && Object(is_motion_value[\"a\" /* isMotionValue */])(value)) {\n        value.set(latestValues[key], false);\n      }\n    }\n    /**\n     * Determine what role this visual element should take in the variant tree.\n     */\n\n\n    var isControllingVariants = Object(variants[\"a\" /* checkIfControllingVariants */])(props);\n    var isVariantNode = Object(variants[\"b\" /* checkIfVariantNode */])(props);\n\n    var element = Object(tslib_es6[\"a\" /* __assign */])(Object(tslib_es6[\"a\" /* __assign */])({\n      treeType: treeType,\n\n      /**\n       * This is a mirror of the internal instance prop, which keeps\n       * VisualElement type-compatible with React's RefObject.\n       */\n      current: null,\n\n      /**\n       * The depth of this visual element within the visual element tree.\n       */\n      depth: parent ? parent.depth + 1 : 0,\n      parent: parent,\n      children: new Set(),\n\n      /**\n       * An ancestor path back to the root visual element. This is used\n       * by layout projection to quickly recurse back up the tree.\n       */\n      path: parent ? Object(tslib_es6[\"h\" /* __spreadArray */])(Object(tslib_es6[\"h\" /* __spreadArray */])([], Object(tslib_es6[\"e\" /* __read */])(parent.path)), [parent]) : [],\n      layoutTree: parent ? parent.layoutTree : new flat_tree_FlatTree(),\n\n      /**\n       *\n       */\n      presenceId: presenceId,\n      projection: projection,\n\n      /**\n       * If this component is part of the variant tree, it should track\n       * any children that are also part of the tree. This is essentially\n       * a shadow tree to simplify logic around how to stagger over children.\n       */\n      variantChildren: isVariantNode ? new Set() : undefined,\n\n      /**\n       * Whether this instance is visible. This can be changed imperatively\n       * by AnimateSharedLayout, is analogous to CSS's visibility in that\n       * hidden elements should take up layout, and needs enacting by the configured\n       * render function.\n       */\n      isVisible: undefined,\n\n      /**\n       * Normally, if a component is controlled by a parent's variants, it can\n       * rely on that ancestor to trigger animations further down the tree.\n       * However, if a component is created after its parent is mounted, the parent\n       * won't trigger that mount animation so the child needs to.\n       *\n       * TODO: This might be better replaced with a method isParentMounted\n       */\n      manuallyAnimateOnMount: Boolean(parent === null || parent === void 0 ? void 0 : parent.isMounted()),\n\n      /**\n       * This can be set by AnimatePresence to force components that mount\n       * at the same time as it to mount as if they have initial={false} set.\n       */\n      blockInitialAnimation: blockInitialAnimation,\n\n      /**\n       * Determine whether this component has mounted yet. This is mostly used\n       * by variant children to determine whether they need to trigger their\n       * own animations on mount.\n       */\n      isMounted: function isMounted() {\n        return Boolean(instance);\n      },\n      mount: function mount(newInstance) {\n        instance = element.current = newInstance;\n        element.pointTo(element);\n\n        if (isVariantNode && parent && !isControllingVariants) {\n          removeFromVariantTree = parent === null || parent === void 0 ? void 0 : parent.addVariantChild(element);\n        }\n\n        parent === null || parent === void 0 ? void 0 : parent.children.add(element);\n      },\n\n      /**\n       *\n       */\n      unmount: function unmount() {\n        es[\"a\" /* cancelSync */].update(update);\n        es[\"a\" /* cancelSync */].render(render);\n        es[\"a\" /* cancelSync */].preRender(element.updateLayoutProjection);\n        valueSubscriptions.forEach(function (remove) {\n          return remove();\n        });\n        element.stopLayoutAnimation();\n        element.layoutTree.remove(element);\n        removeFromVariantTree === null || removeFromVariantTree === void 0 ? void 0 : removeFromVariantTree();\n        parent === null || parent === void 0 ? void 0 : parent.children.delete(element);\n        unsubscribeFromLeadVisualElement === null || unsubscribeFromLeadVisualElement === void 0 ? void 0 : unsubscribeFromLeadVisualElement();\n        lifecycles.clearAllListeners();\n      },\n\n      /**\n       * Add a child visual element to our set of children.\n       */\n      addVariantChild: function addVariantChild(child) {\n        var _a;\n\n        var closestVariantNode = element.getClosestVariantNode();\n\n        if (closestVariantNode) {\n          (_a = closestVariantNode.variantChildren) === null || _a === void 0 ? void 0 : _a.add(child);\n          return function () {\n            return closestVariantNode.variantChildren.delete(child);\n          };\n        }\n      },\n      sortNodePosition: function sortNodePosition(other) {\n        /**\n         * If these nodes aren't even of the same type we can't compare their depth.\n         */\n        if (!_sortNodePosition || treeType !== other.treeType) return 0;\n        return _sortNodePosition(element.getInstance(), other.getInstance());\n      },\n\n      /**\n       * Returns the closest variant node in the tree starting from\n       * this visual element.\n       */\n      getClosestVariantNode: function getClosestVariantNode() {\n        return isVariantNode ? element : parent === null || parent === void 0 ? void 0 : parent.getClosestVariantNode();\n      },\n\n      /**\n       * A method that schedules an update to layout projections throughout\n       * the tree. We inherit from the parent so there's only ever one\n       * job scheduled on the next frame - that of the root visual element.\n       */\n      scheduleUpdateLayoutProjection: parent ? parent.scheduleUpdateLayoutProjection : function () {\n        return es[\"b\" /* default */].preRender(element.updateTreeLayoutProjection, false, true);\n      },\n\n      /**\n       * Expose the latest layoutId prop.\n       */\n      getLayoutId: function getLayoutId() {\n        return props.layoutId;\n      },\n\n      /**\n       * Returns the current instance.\n       */\n      getInstance: function getInstance() {\n        return instance;\n      },\n\n      /**\n       * Get/set the latest static values.\n       */\n      getStaticValue: function getStaticValue(key) {\n        return latestValues[key];\n      },\n      setStaticValue: function setStaticValue(key, value) {\n        return latestValues[key] = value;\n      },\n\n      /**\n       * Returns the latest motion value state. Currently only used to take\n       * a snapshot of the visual element - perhaps this can return the whole\n       * visual state\n       */\n      getLatestValues: function getLatestValues() {\n        return latestValues;\n      },\n\n      /**\n       * Set the visiblity of the visual element. If it's changed, schedule\n       * a render to reflect these changes.\n       */\n      setVisibility: function setVisibility(visibility) {\n        if (element.isVisible === visibility) return;\n        element.isVisible = visibility;\n        element.scheduleRender();\n      },\n\n      /**\n       * Make a target animatable by Popmotion. For instance, if we're\n       * trying to animate width from 100px to 100vw we need to measure 100vw\n       * in pixels to determine what we really need to animate to. This is also\n       * pluggable to support Framer's custom value types like Color,\n       * and CSS variables.\n       */\n      makeTargetAnimatable: function makeTargetAnimatable(target, canMutate) {\n        if (canMutate === void 0) {\n          canMutate = true;\n        }\n\n        return _makeTargetAnimatable(element, target, props, canMutate);\n      },\n      // Motion values ========================\n\n      /**\n       * Add a motion value and bind it to this visual element.\n       */\n      addValue: function addValue(key, value) {\n        // Remove existing value if it exists\n        if (element.hasValue(key)) element.removeValue(key);\n        values.set(key, value);\n        latestValues[key] = value.get();\n        bindToMotionValue(key, value);\n      },\n\n      /**\n       * Remove a motion value and unbind any active subscriptions.\n       */\n      removeValue: function removeValue(key) {\n        var _a;\n\n        values.delete(key);\n        (_a = valueSubscriptions.get(key)) === null || _a === void 0 ? void 0 : _a();\n        valueSubscriptions.delete(key);\n        delete latestValues[key];\n        removeValueFromRenderState(key, renderState);\n      },\n\n      /**\n       * Check whether we have a motion value for this key\n       */\n      hasValue: function hasValue(key) {\n        return values.has(key);\n      },\n\n      /**\n       * Get a motion value for this key. If called with a default\n       * value, we'll create one if none exists.\n       */\n      getValue: function getValue(key, defaultValue) {\n        var value = values.get(key);\n\n        if (value === undefined && defaultValue !== undefined) {\n          value = Object(es_value[\"a\" /* motionValue */])(defaultValue);\n          element.addValue(key, value);\n        }\n\n        return value;\n      },\n\n      /**\n       * Iterate over our motion values.\n       */\n      forEachValue: function forEachValue(callback) {\n        return values.forEach(callback);\n      },\n\n      /**\n       * If we're trying to animate to a previously unencountered value,\n       * we need to check for it in our state and as a last resort read it\n       * directly from the instance (which might have performance implications).\n       */\n      readValue: function readValue(key) {\n        var _a;\n\n        return (_a = latestValues[key]) !== null && _a !== void 0 ? _a : readValueFromInstance(instance, key, options);\n      },\n\n      /**\n       * Set the base target to later animate back to. This is currently\n       * only hydrated on creation and when we first read a value.\n       */\n      setBaseTarget: function setBaseTarget(key, value) {\n        baseTarget[key] = value;\n      },\n\n      /**\n       * Find the base target for a value thats been removed from all animation\n       * props.\n       */\n      getBaseTarget: function getBaseTarget(key) {\n        if (_getBaseTarget) {\n          var target = _getBaseTarget(props, key);\n\n          if (target !== undefined && !Object(is_motion_value[\"a\" /* isMotionValue */])(target)) return target;\n        }\n\n        return baseTarget[key];\n      }\n    }, lifecycles), {\n      /**\n       * Build the renderer state based on the latest visual state.\n       */\n      build: function build() {\n        triggerBuild();\n        return renderState;\n      },\n\n      /**\n       * Schedule a render on the next animation frame.\n       */\n      scheduleRender: function scheduleRender() {\n        es[\"b\" /* default */].render(render, false, true);\n      },\n\n      /**\n       * Synchronously fire render. It's prefered that we batch renders but\n       * in many circumstances, like layout measurement, we need to run this\n       * synchronously. However in those instances other measures should be taken\n       * to batch reads/writes.\n       */\n      syncRender: render,\n\n      /**\n       * Update the provided props. Ensure any newly-added motion values are\n       * added to our map, old ones removed, and listeners updated.\n       */\n      setProps: function setProps(newProps) {\n        props = newProps;\n        lifecycles.updatePropListeners(newProps);\n        prevMotionValues = updateMotionValuesFromProps(element, scrapeMotionValuesFromProps(props), prevMotionValues);\n      },\n      getProps: function getProps() {\n        return props;\n      },\n      // Variants ==============================\n\n      /**\n       * Returns the variant definition with a given name.\n       */\n      getVariant: function getVariant(name) {\n        var _a;\n\n        return (_a = props.variants) === null || _a === void 0 ? void 0 : _a[name];\n      },\n\n      /**\n       * Returns the defined default transition on this component.\n       */\n      getDefaultTransition: function getDefaultTransition() {\n        return props.transition;\n      },\n\n      /**\n       * Used by child variant nodes to get the closest ancestor variant props.\n       */\n      getVariantContext: function getVariantContext(startAtParent) {\n        if (startAtParent === void 0) {\n          startAtParent = false;\n        }\n\n        if (startAtParent) return parent === null || parent === void 0 ? void 0 : parent.getVariantContext();\n\n        if (!isControllingVariants) {\n          var context_1 = (parent === null || parent === void 0 ? void 0 : parent.getVariantContext()) || {};\n\n          if (props.initial !== undefined) {\n            context_1.initial = props.initial;\n          }\n\n          return context_1;\n        }\n\n        var context = {};\n\n        for (var i = 0; i < numVariantProps; i++) {\n          var name_1 = variantProps[i];\n          var prop = props[name_1];\n\n          if (Object(variants[\"c\" /* isVariantLabel */])(prop) || prop === false) {\n            context[name_1] = prop;\n          }\n        }\n\n        return context;\n      },\n      // Layout projection ==============================\n\n      /**\n       * Enable layout projection for this visual element. Won't actually\n       * occur until we also have hydrated layout measurements.\n       */\n      enableLayoutProjection: function enableLayoutProjection() {\n        projection.isEnabled = true;\n        element.layoutTree.add(element);\n      },\n\n      /**\n       * Lock the projection target, for instance when dragging, so\n       * nothing else can try and animate it.\n       */\n      lockProjectionTarget: function lockProjectionTarget() {\n        projection.isTargetLocked = true;\n      },\n      unlockProjectionTarget: function unlockProjectionTarget() {\n        element.stopLayoutAnimation();\n        projection.isTargetLocked = false;\n      },\n      getLayoutState: function getLayoutState() {\n        return layoutState;\n      },\n      setCrossfader: function setCrossfader(newCrossfader) {\n        crossfader = newCrossfader;\n      },\n      isProjectionReady: function isProjectionReady() {\n        return projection.isEnabled && projection.isHydrated && layoutState.isHydrated;\n      },\n\n      /**\n       * Start a layout animation on a given axis.\n       */\n      startLayoutAnimation: function startLayoutAnimation(axis, transition, isRelative) {\n        if (isRelative === void 0) {\n          isRelative = false;\n        }\n\n        var progress = element.getProjectionAnimationProgress()[axis];\n\n        var _a = isRelative ? projection.relativeTarget[axis] : projection.target[axis],\n            min = _a.min,\n            max = _a.max;\n\n        var length = max - min;\n        progress.clearListeners();\n        progress.set(min);\n        progress.set(min); // Set twice to hard-reset velocity\n\n        progress.onChange(function (v) {\n          element.setProjectionTargetAxis(axis, v, v + length, isRelative);\n        });\n        return element.animateMotionValue(axis, progress, 0, transition);\n      },\n\n      /**\n       * Stop layout animations.\n       */\n      stopLayoutAnimation: function stopLayoutAnimation() {\n        eachAxis(function (axis) {\n          return element.getProjectionAnimationProgress()[axis].stop();\n        });\n      },\n\n      /**\n       * Measure the current viewport box with or without transforms.\n       * Only measures axis-aligned boxes, rotate and skew must be manually\n       * removed with a re-render to work.\n       */\n      measureViewportBox: function measureViewportBox(withTransform) {\n        if (withTransform === void 0) {\n          withTransform = true;\n        }\n\n        var viewportBox = _measureViewportBox(instance, options);\n\n        if (!withTransform) removeBoxTransforms(viewportBox, latestValues);\n        return viewportBox;\n      },\n\n      /**\n       * Get the motion values tracking the layout animations on each\n       * axis. Lazy init if not already created.\n       */\n      getProjectionAnimationProgress: function getProjectionAnimationProgress() {\n        projectionTargetProgress || (projectionTargetProgress = {\n          x: Object(es_value[\"a\" /* motionValue */])(0),\n          y: Object(es_value[\"a\" /* motionValue */])(0)\n        });\n        return projectionTargetProgress;\n      },\n\n      /**\n       * Update the projection of a single axis. Schedule an update to\n       * the tree layout projection.\n       */\n      setProjectionTargetAxis: function setProjectionTargetAxis(axis, min, max, isRelative) {\n        if (isRelative === void 0) {\n          isRelative = false;\n        }\n\n        var target;\n\n        if (isRelative) {\n          if (!projection.relativeTarget) {\n            projection.relativeTarget = Object(geometry[\"a\" /* axisBox */])();\n          }\n\n          target = projection.relativeTarget[axis];\n        } else {\n          projection.relativeTarget = undefined;\n          target = projection.target[axis];\n        }\n\n        projection.isHydrated = true;\n        target.min = min;\n        target.max = max; // Flag that we want to fire the onViewportBoxUpdate event handler\n\n        hasViewportBoxUpdated = true;\n        lifecycles.notifySetAxisTarget();\n      },\n\n      /**\n       * Rebase the projection target on top of the provided viewport box\n       * or the measured layout. This ensures that non-animating elements\n       * don't fall out of sync differences in measurements vs projections\n       * after a page scroll or other relayout.\n       */\n      rebaseProjectionTarget: function rebaseProjectionTarget(force, box) {\n        if (box === void 0) {\n          box = layoutState.layout;\n        }\n\n        var _a = element.getProjectionAnimationProgress(),\n            x = _a.x,\n            y = _a.y;\n\n        var shouldRebase = !projection.relativeTarget && !projection.isTargetLocked && !x.isAnimating() && !y.isAnimating();\n\n        if (force || shouldRebase) {\n          eachAxis(function (axis) {\n            var _a = box[axis],\n                min = _a.min,\n                max = _a.max;\n            element.setProjectionTargetAxis(axis, min, max);\n          });\n        }\n      },\n\n      /**\n       * Notify the visual element that its layout is up-to-date.\n       * Currently Animate.tsx uses this to check whether a layout animation\n       * needs to be performed.\n       */\n      notifyLayoutReady: function notifyLayoutReady(config) {\n        setCurrentViewportBox(element);\n        element.notifyLayoutUpdate(layoutState.layout, element.prevViewportBox || layoutState.layout, config);\n      },\n\n      /**\n       * Temporarily reset the transform of the instance.\n       */\n      resetTransform: function resetTransform() {\n        return _resetTransform(element, instance, props);\n      },\n      restoreTransform: function restoreTransform() {\n        return _restoreTransform(instance, renderState);\n      },\n      updateLayoutProjection: updateLayoutProjection,\n      updateTreeLayoutProjection: function updateTreeLayoutProjection() {\n        element.layoutTree.forEach(fireResolveRelativeTargetBox);\n        /**\n         * Schedule the projection updates at the end of the current preRender\n         * step. This will ensure that all layout trees will first resolve\n         * relative projection boxes into viewport boxes, and *then*\n         * update projections.\n         */\n\n        es[\"b\" /* default */].preRender(_updateTreeLayoutProjection, false, true); // sync.postRender(() => element.scheduleUpdateLayoutProjection())\n      },\n      getProjectionParent: function getProjectionParent() {\n        if (projectionParent === undefined) {\n          var foundParent = false; // Search backwards through the tree path\n\n          for (var i = element.path.length - 1; i >= 0; i--) {\n            var ancestor = element.path[i];\n\n            if (ancestor.projection.isEnabled) {\n              foundParent = ancestor;\n              break;\n            }\n          }\n\n          projectionParent = foundParent;\n        }\n\n        return projectionParent;\n      },\n      resolveRelativeTargetBox: function resolveRelativeTargetBox() {\n        var relativeParent = element.getProjectionParent();\n        if (!projection.relativeTarget || !relativeParent) return;\n        calcRelativeBox(projection, relativeParent.projection);\n\n        if (isDraggable(relativeParent)) {\n          var target = projection.target;\n          applyBoxTransforms(target, target, relativeParent.getLatestValues());\n        }\n      },\n      shouldResetTransform: function shouldResetTransform() {\n        return Boolean(props._layoutResetTransform);\n      },\n\n      /**\n       *\n       */\n      pointTo: function pointTo(newLead) {\n        leadProjection = newLead.projection;\n        leadLatestValues = newLead.getLatestValues();\n        /**\n         * Subscribe to lead component's layout animations\n         */\n\n        unsubscribeFromLeadVisualElement === null || unsubscribeFromLeadVisualElement === void 0 ? void 0 : unsubscribeFromLeadVisualElement();\n        unsubscribeFromLeadVisualElement = Object(pipe[\"a\" /* pipe */])(newLead.onSetAxisTarget(element.scheduleUpdateLayoutProjection), newLead.onLayoutAnimationComplete(function () {\n          var _a;\n\n          if (element.isPresent) {\n            element.presence = types[\"a\" /* Presence */].Present;\n          } else {\n            (_a = element.layoutSafeToRemove) === null || _a === void 0 ? void 0 : _a.call(element);\n          }\n        }));\n      },\n      // TODO: Clean this up\n      isPresent: true,\n      presence: types[\"a\" /* Presence */].Entering\n    });\n\n    return element;\n  };\n};\n\nfunction fireResolveRelativeTargetBox(child) {\n  child.resolveRelativeTargetBox();\n}\n\nfunction fireUpdateLayoutProjection(child) {\n  child.updateLayoutProjection();\n}\n\nvar variantProps = Object(tslib_es6[\"h\" /* __spreadArray */])([\"initial\"], Object(tslib_es6[\"e\" /* __read */])(variantPriorityOrder));\n\nvar numVariantProps = variantProps.length;\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/render/utils/setters.js + 2 modules\nvar setters = __webpack_require__(483);\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/render/html/utils/build-styles.js + 2 modules\nvar build_styles = __webpack_require__(485);\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/render/dom/utils/is-css-variable.js\nvar is_css_variable = __webpack_require__(799);\n\n// EXTERNAL MODULE: ./node_modules/style-value-types/dist/es/numbers/index.js\nvar numbers = __webpack_require__(289);\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/render/html/utils/transform.js\nvar transform = __webpack_require__(252);\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/render/dom/value-types/dimensions.js + 1 modules\nvar dimensions = __webpack_require__(934);\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/render/dom/utils/unit-conversion.js\n\n\n\n\n\n\nvar positionalKeys = new Set([\"width\", \"height\", \"top\", \"left\", \"right\", \"bottom\", \"x\", \"y\"]);\n\nvar isPositionalKey = function isPositionalKey(key) {\n  return positionalKeys.has(key);\n};\n\nvar hasPositionalKey = function hasPositionalKey(target) {\n  return Object.keys(target).some(isPositionalKey);\n};\n\nvar setAndResetVelocity = function setAndResetVelocity(value, to) {\n  // Looks odd but setting it twice doesn't render, it'll just\n  // set both prev and current to the latest value\n  value.set(to, false);\n  value.set(to);\n};\n\nvar unit_conversion_isNumOrPxType = function isNumOrPxType(v) {\n  return v === numbers[\"b\" /* number */] || v === units[\"d\" /* px */];\n};\n\nvar BoundingBoxDimension;\n\n(function (BoundingBoxDimension) {\n  BoundingBoxDimension[\"width\"] = \"width\";\n  BoundingBoxDimension[\"height\"] = \"height\";\n  BoundingBoxDimension[\"left\"] = \"left\";\n  BoundingBoxDimension[\"right\"] = \"right\";\n  BoundingBoxDimension[\"top\"] = \"top\";\n  BoundingBoxDimension[\"bottom\"] = \"bottom\";\n})(BoundingBoxDimension || (BoundingBoxDimension = {}));\n\nvar getPosFromMatrix = function getPosFromMatrix(matrix, pos) {\n  return parseFloat(matrix.split(\", \")[pos]);\n};\n\nvar getTranslateFromMatrix = function getTranslateFromMatrix(pos2, pos3) {\n  return function (_bbox, _a) {\n    var transform = _a.transform;\n    if (transform === \"none\" || !transform) return 0;\n    var matrix3d = transform.match(/^matrix3d\\((.+)\\)$/);\n\n    if (matrix3d) {\n      return getPosFromMatrix(matrix3d[1], pos3);\n    } else {\n      var matrix = transform.match(/^matrix\\((.+)\\)$/);\n\n      if (matrix) {\n        return getPosFromMatrix(matrix[1], pos2);\n      } else {\n        return 0;\n      }\n    }\n  };\n};\n\nvar transformKeys = new Set([\"x\", \"y\", \"z\"]);\nvar nonTranslationalTransformKeys = transform[\"d\" /* transformProps */].filter(function (key) {\n  return !transformKeys.has(key);\n});\n\nfunction removeNonTranslationalTransform(visualElement) {\n  var removedTransforms = [];\n  nonTranslationalTransformKeys.forEach(function (key) {\n    var value = visualElement.getValue(key);\n\n    if (value !== undefined) {\n      removedTransforms.push([key, value.get()]);\n      value.set(key.startsWith(\"scale\") ? 1 : 0);\n    }\n  }); // Apply changes to element before measurement\n\n  if (removedTransforms.length) visualElement.syncRender();\n  return removedTransforms;\n}\n\nvar positionalValues = {\n  // Dimensions\n  width: function width(_a) {\n    var x = _a.x;\n    return x.max - x.min;\n  },\n  height: function height(_a) {\n    var y = _a.y;\n    return y.max - y.min;\n  },\n  top: function top(_bbox, _a) {\n    var top = _a.top;\n    return parseFloat(top);\n  },\n  left: function left(_bbox, _a) {\n    var left = _a.left;\n    return parseFloat(left);\n  },\n  bottom: function bottom(_a, _b) {\n    var y = _a.y;\n    var top = _b.top;\n    return parseFloat(top) + (y.max - y.min);\n  },\n  right: function right(_a, _b) {\n    var x = _a.x;\n    var left = _b.left;\n    return parseFloat(left) + (x.max - x.min);\n  },\n  // Transform\n  x: getTranslateFromMatrix(4, 13),\n  y: getTranslateFromMatrix(5, 14)\n};\n\nvar convertChangedValueTypes = function convertChangedValueTypes(target, visualElement, changedKeys) {\n  var originBbox = visualElement.measureViewportBox();\n  var element = visualElement.getInstance();\n  var elementComputedStyle = getComputedStyle(element);\n  var display = elementComputedStyle.display,\n      top = elementComputedStyle.top,\n      left = elementComputedStyle.left,\n      bottom = elementComputedStyle.bottom,\n      right = elementComputedStyle.right,\n      transform = elementComputedStyle.transform;\n  var originComputedStyle = {\n    top: top,\n    left: left,\n    bottom: bottom,\n    right: right,\n    transform: transform\n  }; // If the element is currently set to display: \"none\", make it visible before\n  // measuring the target bounding box\n\n  if (display === \"none\") {\n    visualElement.setStaticValue(\"display\", target.display || \"block\");\n  } // Apply the latest values (as set in checkAndConvertChangedValueTypes)\n\n\n  visualElement.syncRender();\n  var targetBbox = visualElement.measureViewportBox();\n  changedKeys.forEach(function (key) {\n    // Restore styles to their **calculated computed style**, not their actual\n    // originally set style. This allows us to animate between equivalent pixel units.\n    var value = visualElement.getValue(key);\n    setAndResetVelocity(value, positionalValues[key](originBbox, originComputedStyle));\n    target[key] = positionalValues[key](targetBbox, elementComputedStyle);\n  });\n  return target;\n};\n\nvar unit_conversion_checkAndConvertChangedValueTypes = function checkAndConvertChangedValueTypes(visualElement, target, origin, transitionEnd) {\n  if (origin === void 0) {\n    origin = {};\n  }\n\n  if (transitionEnd === void 0) {\n    transitionEnd = {};\n  }\n\n  target = Object(tslib_es6[\"a\" /* __assign */])({}, target);\n  transitionEnd = Object(tslib_es6[\"a\" /* __assign */])({}, transitionEnd);\n  var targetPositionalKeys = Object.keys(target).filter(isPositionalKey); // We want to remove any transform values that could affect the element's bounding box before\n  // it's measured. We'll reapply these later.\n\n  var removedTransformValues = [];\n  var hasAttemptedToRemoveTransformValues = false;\n  var changedValueTypeKeys = [];\n  targetPositionalKeys.forEach(function (key) {\n    var value = visualElement.getValue(key);\n    if (!visualElement.hasValue(key)) return;\n    var from = origin[key];\n    var to = target[key];\n    var fromType = Object(dimensions[\"b\" /* findDimensionValueType */])(from);\n    var toType; // TODO: The current implementation of this basically throws an error\n    // if you try and do value conversion via keyframes. There's probably\n    // a way of doing this but the performance implications would need greater scrutiny,\n    // as it'd be doing multiple resize-remeasure operations.\n\n    if (Object(is_keyframes_target[\"a\" /* isKeyframesTarget */])(to)) {\n      var numKeyframes = to.length;\n\n      for (var i = to[0] === null ? 1 : 0; i < numKeyframes; i++) {\n        if (!toType) {\n          toType = Object(dimensions[\"b\" /* findDimensionValueType */])(to[i]);\n          Object(hey_listen_es[\"a\" /* invariant */])(toType === fromType || unit_conversion_isNumOrPxType(fromType) && unit_conversion_isNumOrPxType(toType), \"Keyframes must be of the same dimension as the current value\");\n        } else {\n          Object(hey_listen_es[\"a\" /* invariant */])(Object(dimensions[\"b\" /* findDimensionValueType */])(to[i]) === toType, \"All keyframes must be of the same type\");\n        }\n      }\n    } else {\n      toType = Object(dimensions[\"b\" /* findDimensionValueType */])(to);\n    }\n\n    if (fromType !== toType) {\n      // If they're both just number or px, convert them both to numbers rather than\n      // relying on resize/remeasure to convert (which is wasteful in this situation)\n      if (unit_conversion_isNumOrPxType(fromType) && unit_conversion_isNumOrPxType(toType)) {\n        var current = value.get();\n\n        if (typeof current === \"string\") {\n          value.set(parseFloat(current));\n        }\n\n        if (typeof to === \"string\") {\n          target[key] = parseFloat(to);\n        } else if (Array.isArray(to) && toType === units[\"d\" /* px */]) {\n          target[key] = to.map(parseFloat);\n        }\n      } else if ((fromType === null || fromType === void 0 ? void 0 : fromType.transform) && (toType === null || toType === void 0 ? void 0 : toType.transform) && (from === 0 || to === 0)) {\n        // If one or the other value is 0, it's safe to coerce it to the\n        // type of the other without measurement\n        if (from === 0) {\n          value.set(toType.transform(from));\n        } else {\n          target[key] = fromType.transform(to);\n        }\n      } else {\n        // If we're going to do value conversion via DOM measurements, we first\n        // need to remove non-positional transform values that could affect the bbox measurements.\n        if (!hasAttemptedToRemoveTransformValues) {\n          removedTransformValues = removeNonTranslationalTransform(visualElement);\n          hasAttemptedToRemoveTransformValues = true;\n        }\n\n        changedValueTypeKeys.push(key);\n        transitionEnd[key] = transitionEnd[key] !== undefined ? transitionEnd[key] : target[key];\n        setAndResetVelocity(value, to);\n      }\n    }\n  });\n\n  if (changedValueTypeKeys.length) {\n    var convertedTarget = convertChangedValueTypes(target, visualElement, changedValueTypeKeys); // If we removed transform values, reapply them before the next render\n\n    if (removedTransformValues.length) {\n      removedTransformValues.forEach(function (_a) {\n        var _b = Object(tslib_es6[\"e\" /* __read */])(_a, 2),\n            key = _b[0],\n            value = _b[1];\n\n        visualElement.getValue(key).set(value);\n      });\n    } // Reapply original values\n\n\n    visualElement.syncRender();\n    return {\n      target: convertedTarget,\n      transitionEnd: transitionEnd\n    };\n  } else {\n    return {\n      target: target,\n      transitionEnd: transitionEnd\n    };\n  }\n};\n/**\n * Convert value types for x/y/width/height/top/left/bottom/right\n *\n * Allows animation between `'auto'` -> `'100%'` or `0` -> `'calc(50% - 10vw)'`\n *\n * @internal\n */\n\n\nfunction unitConversion(visualElement, target, origin, transitionEnd) {\n  return hasPositionalKey(target) ? unit_conversion_checkAndConvertChangedValueTypes(visualElement, target, origin, transitionEnd) : {\n    target: target,\n    transitionEnd: transitionEnd\n  };\n}\n\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/render/dom/utils/parse-dom-variant.js\n\n\n/**\n * Parse a DOM variant to make it animatable. This involves resolving CSS variables\n * and ensuring animations like \"20%\" => \"calc(50vw)\" are performed in pixels.\n */\n\nvar parse_dom_variant_parseDomVariant = function parseDomVariant(visualElement, target, origin, transitionEnd) {\n  var resolved = resolveCSSVariables(visualElement, target, transitionEnd);\n  target = resolved.target;\n  transitionEnd = resolved.transitionEnd;\n  return unitConversion(visualElement, target, origin, transitionEnd);\n};\n\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/render/html/utils/scrape-motion-values.js\nvar scrape_motion_values = __webpack_require__(473);\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/render/html/utils/render.js\nvar utils_render = __webpack_require__(801);\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/render/dom/value-types/defaults.js\nvar defaults = __webpack_require__(716);\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/render/html/visual-element.js\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction visual_element_getComputedStyle(element) {\n  return window.getComputedStyle(element);\n}\n\nvar htmlConfig = {\n  treeType: \"dom\",\n  readValueFromInstance: function readValueFromInstance(domElement, key) {\n    if (Object(transform[\"b\" /* isTransformProp */])(key)) {\n      var defaultType = Object(defaults[\"a\" /* getDefaultValueType */])(key);\n      return defaultType ? defaultType.default || 0 : 0;\n    } else {\n      var computedStyle = visual_element_getComputedStyle(domElement);\n      return (Object(is_css_variable[\"a\" /* isCSSVariable */])(key) ? computedStyle.getPropertyValue(key) : computedStyle[key]) || 0;\n    }\n  },\n  sortNodePosition: function sortNodePosition(a, b) {\n    /**\n     * compareDocumentPosition returns a bitmask, by using the bitwise &\n     * we're returning true if 2 in that bitmask is set to true. 2 is set\n     * to true if b preceeds a.\n     */\n    return a.compareDocumentPosition(b) & 2 ? 1 : -1;\n  },\n  getBaseTarget: function getBaseTarget(props, key) {\n    var _a;\n\n    return (_a = props.style) === null || _a === void 0 ? void 0 : _a[key];\n  },\n  measureViewportBox: function measureViewportBox(element, _a) {\n    var transformPagePoint = _a.transformPagePoint;\n    return getBoundingBox(element, transformPagePoint);\n  },\n\n  /**\n   * Reset the transform on the current Element. This is called as part\n   * of a batched process across the entire layout tree. To remove this write\n   * cycle it'd be interesting to see if it's possible to \"undo\" all the current\n   * layout transforms up the tree in the same way this.getBoundingBoxWithoutTransforms\n   * works\n   */\n  resetTransform: function resetTransform(element, domElement, props) {\n    var transformTemplate = props.transformTemplate;\n    domElement.style.transform = transformTemplate ? transformTemplate({}, \"\") : \"none\"; // Ensure that whatever happens next, we restore our transform on the next frame\n\n    element.scheduleRender();\n  },\n  restoreTransform: function restoreTransform(instance, mutableState) {\n    instance.style.transform = mutableState.style.transform;\n  },\n  removeValueFromRenderState: function removeValueFromRenderState(key, _a) {\n    var vars = _a.vars,\n        style = _a.style;\n    delete vars[key];\n    delete style[key];\n  },\n\n  /**\n   * Ensure that HTML and Framer-specific value types like `px`->`%` and `Color`\n   * can be animated by Motion.\n   */\n  makeTargetAnimatable: function makeTargetAnimatable(element, _a, _b, isMounted) {\n    var transformValues = _b.transformValues;\n\n    if (isMounted === void 0) {\n      isMounted = true;\n    }\n\n    var transition = _a.transition,\n        transitionEnd = _a.transitionEnd,\n        target = Object(tslib_es6[\"f\" /* __rest */])(_a, [\"transition\", \"transitionEnd\"]);\n\n    var origin = Object(setters[\"b\" /* getOrigin */])(target, transition || {}, element);\n    /**\n     * If Framer has provided a function to convert `Color` etc value types, convert them\n     */\n\n    if (transformValues) {\n      if (transitionEnd) transitionEnd = transformValues(transitionEnd);\n      if (target) target = transformValues(target);\n      if (origin) origin = transformValues(origin);\n    }\n\n    if (isMounted) {\n      Object(setters[\"a\" /* checkTargetForNewValues */])(element, target, origin);\n      var parsed = parse_dom_variant_parseDomVariant(element, target, origin, transitionEnd);\n      transitionEnd = parsed.transitionEnd;\n      target = parsed.target;\n    }\n\n    return Object(tslib_es6[\"a\" /* __assign */])({\n      transition: transition,\n      transitionEnd: transitionEnd\n    }, target);\n  },\n  scrapeMotionValuesFromProps: scrape_motion_values[\"a\" /* scrapeMotionValuesFromProps */],\n  build: function build(element, renderState, latestValues, projection, layoutState, options, props) {\n    if (element.isVisible !== undefined) {\n      renderState.style.visibility = element.isVisible ? \"visible\" : \"hidden\";\n    }\n\n    var isProjectionTranform = projection.isEnabled && layoutState.isHydrated;\n    Object(build_styles[\"a\" /* buildHTMLStyles */])(renderState, latestValues, projection, layoutState, options, props.transformTemplate, isProjectionTranform ? buildLayoutProjectionTransform : undefined, isProjectionTranform ? buildLayoutProjectionTransformOrigin : undefined);\n  },\n  render: utils_render[\"a\" /* renderHTML */]\n};\nvar htmlVisualElement = render_visualElement(htmlConfig);\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/render/svg/utils/scrape-motion-values.js\nvar utils_scrape_motion_values = __webpack_require__(798);\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/render/svg/utils/build-attrs.js + 2 modules\nvar build_attrs = __webpack_require__(484);\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/render/dom/utils/camel-to-dash.js\nvar camel_to_dash = __webpack_require__(803);\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/render/svg/utils/camel-case-attrs.js\nvar camel_case_attrs = __webpack_require__(802);\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/render/svg/utils/render.js\nvar svg_utils_render = __webpack_require__(800);\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/render/svg/visual-element.js\n\n\n\n\n\n\n\n\n\n\n\nvar svgVisualElement = render_visualElement(Object(tslib_es6[\"a\" /* __assign */])(Object(tslib_es6[\"a\" /* __assign */])({}, htmlConfig), {\n  getBaseTarget: function getBaseTarget(props, key) {\n    return props[key];\n  },\n  readValueFromInstance: function readValueFromInstance(domElement, key) {\n    var _a;\n\n    if (Object(transform[\"b\" /* isTransformProp */])(key)) {\n      return ((_a = Object(defaults[\"a\" /* getDefaultValueType */])(key)) === null || _a === void 0 ? void 0 : _a.default) || 0;\n    }\n\n    key = !camel_case_attrs[\"a\" /* camelCaseAttributes */].has(key) ? Object(camel_to_dash[\"a\" /* camelToDash */])(key) : key;\n    return domElement.getAttribute(key);\n  },\n  scrapeMotionValuesFromProps: utils_scrape_motion_values[\"a\" /* scrapeMotionValuesFromProps */],\n  build: function build(_element, renderState, latestValues, projection, layoutState, options, props) {\n    var isProjectionTranform = projection.isEnabled && layoutState.isHydrated;\n    Object(build_attrs[\"a\" /* buildSVGAttrs */])(renderState, latestValues, projection, layoutState, options, props.transformTemplate, isProjectionTranform ? buildLayoutProjectionTransform : undefined, isProjectionTranform ? buildLayoutProjectionTransformOrigin : undefined);\n  },\n  render: svg_utils_render[\"a\" /* renderSVG */]\n}));\n\n// EXTERNAL MODULE: ./node_modules/framer-motion/dist/es/render/dom/utils/is-svg-component.js + 1 modules\nvar is_svg_component = __webpack_require__(486);\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/render/dom/create-visual-element.js\n\n\n\n\nvar create_visual_element_createDomVisualElement = function createDomVisualElement(Component, options) {\n  return Object(is_svg_component[\"a\" /* isSVGComponent */])(Component) ? svgVisualElement(options, {\n    enableHardwareAcceleration: false\n  }) : htmlVisualElement(options, {\n    enableHardwareAcceleration: true\n  });\n};\n\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/render/dom/features-animation.js\n\n\n\n\n/**\n * @public\n */\n\nvar domAnimation = Object(tslib_es6[\"a\" /* __assign */])(Object(tslib_es6[\"a\" /* __assign */])({\n  renderer: create_visual_element_createDomVisualElement\n}, animations_animations), gestureAnimations);\n\n\n// CONCATENATED MODULE: ./node_modules/framer-motion/dist/es/render/dom/features-max.js\n\n\n\n\n/**\n * @public\n */\n\nvar domMax = Object(tslib_es6[\"a\" /* __assign */])(Object(tslib_es6[\"a\" /* __assign */])(Object(tslib_es6[\"a\" /* __assign */])({}, domAnimation), drag_drag), layoutAnimations);\n\n\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/gestures/utils/event-type.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/events/event-info.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/events/use-dom-event.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/events/utils.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/events/use-pointer-event.js","D:/Projects/Cdss apps/Final version/admin/node_modules/popmotion/dist/es/utils/is-point.js","D:/Projects/Cdss apps/Final version/admin/node_modules/popmotion/dist/es/utils/is-point-3d.js","D:/Projects/Cdss apps/Final version/admin/node_modules/popmotion/dist/es/utils/distance.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/gestures/PanSession.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/gestures/drag/utils/lock.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/utils/each-axis.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/gestures/drag/utils/constraints.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/render/dom/projection/measure.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/utils/geometry/delta-calc.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/render/utils/types.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/motion/features/layout/utils.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/render/utils/is-draggable.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/utils/geometry/delta-apply.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/render/dom/projection/convert-to-relative.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/gestures/drag/VisualElementDragControls.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/gestures/drag/use-drag.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/gestures/use-pan-gesture.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/motion/utils/make-renderless-component.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/motion/features/drag.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/render/dom/utils/css-variables-conversion.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/render/dom/projection/default-scale-correctors.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/motion/features/layout/Animate.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/motion/features/layout/Measure.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/motion/features/layout/index.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/utils/shallow-compare.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/render/utils/animation-state.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/motion/features/animations.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/gestures/use-focus-gesture.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/gestures/use-hover-gesture.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/gestures/utils/is-node-or-child.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/gestures/use-tap-gesture.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/motion/features/gestures.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/render/utils/state.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/render/html/utils/build-projection-transform.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/render/utils/lifecycles.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/render/utils/motion-values.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/render/utils/projection.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/render/utils/flat-tree.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/render/dom/projection/relative-set.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/render/index.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/render/dom/utils/unit-conversion.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/render/dom/utils/parse-dom-variant.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/render/html/visual-element.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/render/svg/visual-element.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/render/dom/create-visual-element.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/render/dom/features-animation.js","D:/Projects/Cdss apps/Final version/admin/node_modules/framer-motion/dist/es/render/dom/features-max.js"],"names":["isMouseEvent","event","PointerEvent","pointerType","MouseEvent","isTouchEvent","hasTouches","touches","filterPrimaryPointer","eventHandler","isPrimaryPointer","button","defaultPagePoint","pageX","pageY","pointFromTouch","e","pointType","primaryTouch","changedTouches","point","x","y","pointFromMouse","extractEventInfo","getViewportPointFromEvent","wrapHandler","handler","shouldFilterPrimaryPointer","listener","addDomEvent","target","eventName","options","addEventListener","removeEventListener","useDomEvent","ref","useEffect","element","current","supportsPointerEvents","isBrowser","window","onpointerdown","supportsTouchEvents","ontouchstart","supportsMouseEvents","onmousedown","mouseEventNames","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","pointerenter","pointerleave","touchEventNames","getPointerEventName","name","addPointerEvent","usePointerEvent","isPoint","hasOwnProperty","isPoint3D","distance1D","a","b","Math","abs","distance","isNum","xDelta","yDelta","zDelta","z","sqrt","pow","PanSession","handlers","_a","_this","_b","transformPagePoint","startEvent","lastMoveEvent","lastMoveEventInfo","updatePoint","info","getPanInfo","history","isPanStarted","isDistancePastThreshold","offset","timestamp","getFrameData","push","__assign","onStart","onMove","handlePointerMove","transformPoint","buttons","handlePointerUp","sync","update","end","onEnd","onSessionEnd","panInfo","length","initialInfo","onSessionStart","removeListeners","pipe","prototype","updateHandlers","cancelSync","subtractPoint","delta","lastDevicePoint","startDevicePoint","velocity","getVelocity","timeDelta","i","timestampedPoint","lastPoint","secondsToMilliseconds","time","currentVelocity","Infinity","createLock","lock","openLock","globalHorizontalLock","globalVerticalLock","getGlobalLock","drag","openHorizontal_1","openVertical_1","isDragActive","openGestureLock","eachAxis","applyConstraints","elastic","min","max","undefined","mix","calcConstrainedMinPoint","progress","constraints","calcRelativeAxisConstraints","axis","calcRelativeConstraints","layoutBox","top","left","bottom","right","calcViewportAxisConstraints","layoutAxis","constraintsAxis","__read","calcViewportConstraints","constraintsBox","calcPositionFromProgress","axisLength","rebaseAxisConstraints","layout","relativeConstraints","defaultElastic","resolveDragElastic","dragElastic","resolveAxisElastic","minLabel","maxLabel","resolvePointElastic","label","getBoundingBox","box","getBoundingClientRect","convertBoundingBoxToAxisBox","transformBoundingBox","clampProgress","v","clamp","isNear","value","maxDistance","calcLength","calcOrigin","source","origin","sourceLength","targetLength","updateAxisDelta","originPoint","scale","translate","updateBoxDelta","defaultOrigin","originX","originY","calcRelativeAxis","relative","parent","calcRelativeBox","projection","parentProjection","relativeTarget","AnimationType","tweenAxis","prev","next","p","calcRelativeOffsetAxis","child","calcRelativeOffset","checkIfParentHasChanged","prevId","getLayoutId","nextId","isDraggable","visualElement","getProps","_dragX","resetAxis","originAxis","resetBox","originBox","scalePoint","distanceFromOrigin","scaled","applyPointDelta","boxScale","applyAxisDelta","applyBoxDelta","applyAxisTransforms","final","transforms","key","scaleKey","originKey","axisOrigin","xKeys","yKeys","applyBoxTransforms","finalBox","removePointDelta","removeAxisDelta","removeAxisTransforms","removeBoxTransforms","applyTreeDeltas","treeScale","treePath","treeLength","node","getLayoutState","getLatestValues","convertToRelativeProjection","isLayoutDrag","projectionParent","getProjectionParent","setProjectionTargetAxis","elementDragControls","WeakMap","lastPointerEvent","VisualElementDragControls","isDragging","currentDirection","axisBox","props","hasMutatedConstraints","cursorProgress","openGlobalLock","panSession","enableLayoutProjection","set","start","originEvent","_c","snapToCursor","stopMotion","initialPoint","cancelLayout","call","batchLayout","read","write","ancestors","collectProjectingAncestors","children","collectProjectingChildren","tree","__spreadArray","hasManuallySetCursorOrigin","lockProjectionTarget","forEach","resetTransform","updateLayoutMeasurement","restoreTransform","isRelativeDrag","Boolean","getAxisMotionValue","isExternalDrag","rebaseProjectionTarget","measureViewportBox","scheduleUpdateLayoutProjection","axisValue","get","flushSync","preRender","render","postRender","resolveDragConstraints","_d","dragPropagation","flushLayout","onDragStart","animationState","setActive","Drag","_e","dragDirectionLock","getCurrentDirection","onDirectionLock","updateAxis","onDrag","stop","dragConstraints","layoutCorrected","isRefObject","resolveRefConstraints","onMeasureDragConstraints","constraintsElement","invariant","measuredConstraints","userConstraints","convertAxisBoxToBoundingBox","cancelDrag","unlockProjectionTarget","animateDragEnd","onDragEnd","shouldDrag","length_1","center","includes","updateAxisMotionValue","updateVisualElementAxis","nextValue","axisLayout","axisProgress","setProps","_f","_g","dragMomentum","remainingProps","__rest","layoutId","dragKey","toUpperCase","getValue","_dragY","dragTransition","isRelative","Object","keys","relativeConstraints_1","targetFinal","isNaN","momentumAnimations","transition","bounceStiffness","bounceDamping","inertia","type","timeConstant","restDelta","restSpeed","startAxisValueAnimation","startLayoutAnimation","Promise","all","then","onDragTransitionEnd","stopLayoutAnimation","currentValue","startAnimation","boxProgress","updateConstraints","setTimeout","onReady","mount","getInstance","stopPointerListener","dragListener","stopResizeListener","stopLayoutUpdateListener","onLayoutUpdate","prevDragCursor","direction","lockThreshold","useDrag","groupDragControls","dragControls","useContext","MotionConfigContext","useConstant","subscribe","usePanGesture","onPan","onPanStart","onPanEnd","onPanSessionStart","hasPanEvents","useRef","onPointerDown","useUnmountEffect","makeRenderlessComponent","hook","pan","isCSSVariable","startsWith","cssVariableRegex","parseCSSVariable","match","exec","token","fallback","maxDepth","getVariableValue","depth","resolved","getComputedStyle","getPropertyValue","trim","resolveCSSVariables","transitionEnd","HTMLElement","forEachValue","pixelsToPercent","pixels","correctBorderRadius","latest","_layoutState","px","test","parseFloat","varToken","correctBoxShadow","original","containsCSSVariables","cssVariables","replace","shadow","complex","parse","template","createTransformer","xScale","yScale","averageScale","output","i_1","cssVariable","borderCorrectionDefinition","process","defaultScaleCorrectors","borderRadius","applyTo","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","boxShadow","progressTarget","Animate","_super","__extends","apply","arguments","frameTarget","currentAnimationTarget","isAnimating","stopAxisAnimation","isAnimatingTree","animate","targetBox","visibilityAction","shouldStackAnimate","onComplete","prevParent","config","safeToRemove","prevParentViewportBox","prevViewportBox","parentLayout","isProvidedCorrectDataForRelativeSharedLayout","boxHasMoved","hasMoved","animations","isTargetLocked","setVisibility","VisibilityAction","Show","animateAxis","syncRender","notifyLayoutAnimationComplete","componentDidMount","animateMotionValue","unsubLayoutReady","layoutSafeToRemove","addScaleCorrection","componentWillUnmount","axisIsEqual","layoutProgress","getProjectionAnimationProgress","clearListeners","frame","unsubscribeProgress","onChange","layoutTransition","getDefaultTransition","defaultLayoutTransition","animation","getValueTransition","React","AnimateLayoutContextProvider","usePresence","isZeroBox","zeroAxis","duration","ease","Measure","syncLayout","framerSyncLayout","isSharedLayout","register","onUnmount","remove","getSnapshotBeforeUpdate","syncUpdate","snapshotViewportBox","add","componentDidUpdate","flush","React__default","Component","MeasureContextProvider","SharedLayoutContext","FramerTreeLayoutContext","createElement","layoutAnimations","measureLayout","layoutAnimation","shallowCompare","Array","isArray","prevLength","variantPriorityOrder","Hover","Tap","Focus","Exit","reversePriorityOrder","reverse","numAnimationTypes","animateList","map","animateVisualElement","createAnimationState","state","createState","allAnimatedKeys","isInitialRender","buildResolvedTypeValues","acc","definition","resolveVariant","isAnimated","setAnimateFunction","makeAnimator","animateChanges","changedActiveType","context","getVariantContext","removedKeys","Set","encounteredKeys","removedVariantIndex","_loop_1","typeState","prop","propIsVariant","isVariantLabel","activeDelta","isActive","isInherited","manuallyAnimateOnMount","protectedKeys","prevProp","isAnimationControls","shouldAnimateType","variantsHaveChanged","definitionList","resolvedValues","reduce","prevResolvedValues","allKeys","markToAnimate","delete","needsAnimating","isKeyframesTarget","has","blockInitialAnimation","size","fallbackAnimation_1","fallbackTarget","getBaseTarget","shouldAnimate","initial","resolve","variantChildren","getState","isVariantLabels","createTypeState","exit","custom","isPresent","onExitComplete","presenceContext","PresenceContext","useFocusGesture","whileFocus","onFocus","onBlur","createHoverEvent","callback","useHoverGesture","onHoverStart","onHoverEnd","whileHover","isNodeOrChild","parentElement","useTapGesture","onTap","onTapStart","onTapCancel","whileTap","hasPressListeners","isPressing","cancelPointerEndListeners","removePointerEndListener","checkPointerEnd","onPointerUp","onPointerCancel","gestureAnimations","tap","focus","hover","createProjectionState","isEnabled","isHydrated","createLayoutState","deltaFinal","deltaTransform","zeroLayout","buildLayoutProjectionTransform","latestTransform","xTranslate","yTranslate","transform","rotate","rotateX","rotateY","identityProjection","buildLayoutProjectionTransformOrigin","names","createLifecycles","managers","SubscriptionManager","propSubscriptions","lifecycles","clearAllListeners","manager","clear","updatePropListeners","on","propListener","args","_i","notify","updateMotionValuesFromProps","prevValue","isMotionValue","addValue","motionValue","hasValue","existingValue","hasAnimated","getStaticValue","removeValue","updateLayoutDeltas","transformOrigin","FlatTree","isDirty","addUniqueItem","removeItem","sort","compareByDepth","setCurrentViewportBox","relativeOffset","treeType","build","makeTargetAnimatable","renderInstance","readValueFromInstance","removeValueFromRenderState","sortNodePosition","scrapeMotionValuesFromProps","presenceId","visualState","latestValues","renderState","instance","leadProjection","leadLatestValues","unsubscribeFromLeadVisualElement","layoutState","crossfader","hasViewportBoxUpdated","values","Map","valueSubscriptions","prevMotionValues","projectionTargetProgress","baseTarget","removeFromVariantTree","isProjectionReady","triggerBuild","valuesToRender","crossfadedValues","getCrossfadeState","notifyUpdate","updateLayoutProjection","prevTreeScaleX","prevTreeScaleY","prevDeltaTransform","path","notifyViewportBoxUpdate","scheduleRender","updateTreeLayoutProjection","layoutTree","fireUpdateLayoutProjection","bindToMotionValue","removeOnChange","latestValue","onUpdate","removeOnRenderRequest","onRenderRequest","initialMotionValues","isControllingVariants","checkIfControllingVariants","isVariantNode","checkIfVariantNode","isVisible","isMounted","newInstance","pointTo","addVariantChild","unmount","closestVariantNode","getClosestVariantNode","other","setStaticValue","visibility","canMutate","defaultValue","readValue","setBaseTarget","newProps","getVariant","variants","startAtParent","context_1","numVariantProps","name_1","variantProps","setCrossfader","newCrossfader","withTransform","viewportBox","notifySetAxisTarget","force","shouldRebase","notifyLayoutReady","notifyLayoutUpdate","fireResolveRelativeTargetBox","foundParent","ancestor","resolveRelativeTargetBox","relativeParent","shouldResetTransform","_layoutResetTransform","newLead","onSetAxisTarget","onLayoutAnimationComplete","presence","Presence","Present","Entering","positionalKeys","isPositionalKey","hasPositionalKey","some","setAndResetVelocity","to","isNumOrPxType","number","BoundingBoxDimension","getPosFromMatrix","matrix","pos","split","getTranslateFromMatrix","pos2","pos3","_bbox","matrix3d","transformKeys","nonTranslationalTransformKeys","transformProps","filter","removeNonTranslationalTransform","removedTransforms","positionalValues","width","height","convertChangedValueTypes","changedKeys","originBbox","elementComputedStyle","display","originComputedStyle","targetBbox","checkAndConvertChangedValueTypes","targetPositionalKeys","removedTransformValues","hasAttemptedToRemoveTransformValues","changedValueTypeKeys","from","fromType","findDimensionValueType","toType","numKeyframes","convertedTarget","unitConversion","parseDomVariant","htmlConfig","domElement","isTransformProp","defaultType","getDefaultValueType","default","computedStyle","compareDocumentPosition","style","transformTemplate","mutableState","vars","transformValues","getOrigin","checkTargetForNewValues","parsed","isProjectionTranform","buildHTMLStyles","renderHTML","htmlVisualElement","svgVisualElement","camelCaseAttributes","camelToDash","getAttribute","_element","buildSVGAttrs","renderSVG","createDomVisualElement","isSVGComponent","enableHardwareAcceleration","domAnimation","renderer","domMax"],"mappings":"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","file":"x","sourcesContent":["function isMouseEvent(event) {\n    // PointerEvent inherits from MouseEvent so we can't use a straight instanceof check.\n    if (typeof PointerEvent !== \"undefined\" && event instanceof PointerEvent) {\n        return !!(event.pointerType === \"mouse\");\n    }\n    return event instanceof MouseEvent;\n}\nfunction isTouchEvent(event) {\n    var hasTouches = !!event.touches;\n    return hasTouches;\n}\n\nexport { isMouseEvent, isTouchEvent };\n","import { isTouchEvent } from '../gestures/utils/event-type.js';\n\n/**\n * Filters out events not attached to the primary pointer (currently left mouse button)\n * @param eventHandler\n */\nfunction filterPrimaryPointer(eventHandler) {\n    return function (event) {\n        var isMouseEvent = event instanceof MouseEvent;\n        var isPrimaryPointer = !isMouseEvent ||\n            (isMouseEvent && event.button === 0);\n        if (isPrimaryPointer) {\n            eventHandler(event);\n        }\n    };\n}\nvar defaultPagePoint = { pageX: 0, pageY: 0 };\nfunction pointFromTouch(e, pointType) {\n    if (pointType === void 0) { pointType = \"page\"; }\n    var primaryTouch = e.touches[0] || e.changedTouches[0];\n    var point = primaryTouch || defaultPagePoint;\n    return {\n        x: point[pointType + \"X\"],\n        y: point[pointType + \"Y\"],\n    };\n}\nfunction pointFromMouse(point, pointType) {\n    if (pointType === void 0) { pointType = \"page\"; }\n    return {\n        x: point[pointType + \"X\"],\n        y: point[pointType + \"Y\"],\n    };\n}\nfunction extractEventInfo(event, pointType) {\n    if (pointType === void 0) { pointType = \"page\"; }\n    return {\n        point: isTouchEvent(event)\n            ? pointFromTouch(event, pointType)\n            : pointFromMouse(event, pointType),\n    };\n}\nfunction getViewportPointFromEvent(event) {\n    return extractEventInfo(event, \"client\");\n}\nvar wrapHandler = function (handler, shouldFilterPrimaryPointer) {\n    if (shouldFilterPrimaryPointer === void 0) { shouldFilterPrimaryPointer = false; }\n    var listener = function (event) {\n        return handler(event, extractEventInfo(event));\n    };\n    return shouldFilterPrimaryPointer\n        ? filterPrimaryPointer(listener)\n        : listener;\n};\n\nexport { extractEventInfo, getViewportPointFromEvent, wrapHandler };\n","import { useEffect } from 'react';\n\nfunction addDomEvent(target, eventName, handler, options) {\n    target.addEventListener(eventName, handler, options);\n    return function () { return target.removeEventListener(eventName, handler, options); };\n}\n/**\n * Attaches an event listener directly to the provided DOM element.\n *\n * Bypassing React's event system can be desirable, for instance when attaching non-passive\n * event handlers.\n *\n * ```jsx\n * const ref = useRef(null)\n *\n * useDomEvent(ref, 'wheel', onWheel, { passive: false })\n *\n * return <div ref={ref} />\n * ```\n *\n * @param ref - React.RefObject that's been provided to the element you want to bind the listener to.\n * @param eventName - Name of the event you want listen for.\n * @param handler - Function to fire when receiving the event.\n * @param options - Options to pass to `Event.addEventListener`.\n *\n * @public\n */\nfunction useDomEvent(ref, eventName, handler, options) {\n    useEffect(function () {\n        var element = ref.current;\n        if (handler && element) {\n            return addDomEvent(element, eventName, handler, options);\n        }\n    }, [ref, eventName, handler, options]);\n}\n\nexport { addDomEvent, useDomEvent };\n","import { isBrowser } from '../utils/is-browser.js';\n\n// We check for event support via functions in case they've been mocked by a testing suite.\nvar supportsPointerEvents = function () {\n    return isBrowser && window.onpointerdown === null;\n};\nvar supportsTouchEvents = function () {\n    return isBrowser && window.ontouchstart === null;\n};\nvar supportsMouseEvents = function () {\n    return isBrowser && window.onmousedown === null;\n};\n\nexport { supportsMouseEvents, supportsPointerEvents, supportsTouchEvents };\n","import { useDomEvent, addDomEvent } from './use-dom-event.js';\nimport { wrapHandler } from './event-info.js';\nimport { supportsPointerEvents, supportsTouchEvents, supportsMouseEvents } from './utils.js';\n\nvar mouseEventNames = {\n    pointerdown: \"mousedown\",\n    pointermove: \"mousemove\",\n    pointerup: \"mouseup\",\n    pointercancel: \"mousecancel\",\n    pointerover: \"mouseover\",\n    pointerout: \"mouseout\",\n    pointerenter: \"mouseenter\",\n    pointerleave: \"mouseleave\",\n};\nvar touchEventNames = {\n    pointerdown: \"touchstart\",\n    pointermove: \"touchmove\",\n    pointerup: \"touchend\",\n    pointercancel: \"touchcancel\",\n};\nfunction getPointerEventName(name) {\n    if (supportsPointerEvents()) {\n        return name;\n    }\n    else if (supportsTouchEvents()) {\n        return touchEventNames[name];\n    }\n    else if (supportsMouseEvents()) {\n        return mouseEventNames[name];\n    }\n    return name;\n}\nfunction addPointerEvent(target, eventName, handler, options) {\n    return addDomEvent(target, getPointerEventName(eventName), wrapHandler(handler, eventName === \"pointerdown\"), options);\n}\nfunction usePointerEvent(ref, eventName, handler, options) {\n    return useDomEvent(ref, getPointerEventName(eventName), handler && wrapHandler(handler, eventName === \"pointerdown\"), options);\n}\n\nexport { addPointerEvent, usePointerEvent };\n","var isPoint = function (point) {\n    return point.hasOwnProperty('x') && point.hasOwnProperty('y');\n};\n\nexport { isPoint };\n","import { isPoint } from './is-point.js';\n\nvar isPoint3D = function (point) {\n    return isPoint(point) && point.hasOwnProperty('z');\n};\n\nexport { isPoint3D };\n","import { isPoint } from './is-point.js';\nimport { isPoint3D } from './is-point-3d.js';\nimport { isNum } from './inc.js';\n\nvar distance1D = function (a, b) { return Math.abs(a - b); };\nfunction distance(a, b) {\n    if (isNum(a) && isNum(b)) {\n        return distance1D(a, b);\n    }\n    else if (isPoint(a) && isPoint(b)) {\n        var xDelta = distance1D(a.x, b.x);\n        var yDelta = distance1D(a.y, b.y);\n        var zDelta = isPoint3D(a) && isPoint3D(b) ? distance1D(a.z, b.z) : 0;\n        return Math.sqrt(Math.pow(xDelta, 2) + Math.pow(yDelta, 2) + Math.pow(zDelta, 2));\n    }\n}\n\nexport { distance };\n","import { __assign } from 'tslib';\nimport { isMouseEvent, isTouchEvent } from './utils/event-type.js';\nimport { extractEventInfo } from '../events/event-info.js';\nimport sync, { getFrameData, cancelSync } from 'framesync';\nimport { secondsToMilliseconds } from '../utils/time-conversion.js';\nimport { addPointerEvent } from '../events/use-pointer-event.js';\nimport { distance, pipe } from 'popmotion';\n\n/**\n * @internal\n */\nvar PanSession = /** @class */ (function () {\n    function PanSession(event, handlers, _a) {\n        var _this = this;\n        var _b = _a === void 0 ? {} : _a, transformPagePoint = _b.transformPagePoint;\n        /**\n         * @internal\n         */\n        this.startEvent = null;\n        /**\n         * @internal\n         */\n        this.lastMoveEvent = null;\n        /**\n         * @internal\n         */\n        this.lastMoveEventInfo = null;\n        /**\n         * @internal\n         */\n        this.handlers = {};\n        this.updatePoint = function () {\n            if (!(_this.lastMoveEvent && _this.lastMoveEventInfo))\n                return;\n            var info = getPanInfo(_this.lastMoveEventInfo, _this.history);\n            var isPanStarted = _this.startEvent !== null;\n            // Only start panning if the offset is larger than 3 pixels. If we make it\n            // any larger than this we'll want to reset the pointer history\n            // on the first update to avoid visual snapping to the cursoe.\n            var isDistancePastThreshold = distance(info.offset, { x: 0, y: 0 }) >= 3;\n            if (!isPanStarted && !isDistancePastThreshold)\n                return;\n            var point = info.point;\n            var timestamp = getFrameData().timestamp;\n            _this.history.push(__assign(__assign({}, point), { timestamp: timestamp }));\n            var _a = _this.handlers, onStart = _a.onStart, onMove = _a.onMove;\n            if (!isPanStarted) {\n                onStart && onStart(_this.lastMoveEvent, info);\n                _this.startEvent = _this.lastMoveEvent;\n            }\n            onMove && onMove(_this.lastMoveEvent, info);\n        };\n        this.handlePointerMove = function (event, info) {\n            _this.lastMoveEvent = event;\n            _this.lastMoveEventInfo = transformPoint(info, _this.transformPagePoint);\n            // Because Safari doesn't trigger mouseup events when it's above a `<select>`\n            if (isMouseEvent(event) && event.buttons === 0) {\n                _this.handlePointerUp(event, info);\n                return;\n            }\n            // Throttle mouse move event to once per frame\n            sync.update(_this.updatePoint, true);\n        };\n        this.handlePointerUp = function (event, info) {\n            _this.end();\n            var _a = _this.handlers, onEnd = _a.onEnd, onSessionEnd = _a.onSessionEnd;\n            var panInfo = getPanInfo(transformPoint(info, _this.transformPagePoint), _this.history);\n            if (_this.startEvent && onEnd) {\n                onEnd(event, panInfo);\n            }\n            onSessionEnd && onSessionEnd(event, panInfo);\n        };\n        // If we have more than one touch, don't start detecting this gesture\n        if (isTouchEvent(event) && event.touches.length > 1)\n            return;\n        this.handlers = handlers;\n        this.transformPagePoint = transformPagePoint;\n        var info = extractEventInfo(event);\n        var initialInfo = transformPoint(info, this.transformPagePoint);\n        var point = initialInfo.point;\n        var timestamp = getFrameData().timestamp;\n        this.history = [__assign(__assign({}, point), { timestamp: timestamp })];\n        var onSessionStart = handlers.onSessionStart;\n        onSessionStart &&\n            onSessionStart(event, getPanInfo(initialInfo, this.history));\n        this.removeListeners = pipe(addPointerEvent(window, \"pointermove\", this.handlePointerMove), addPointerEvent(window, \"pointerup\", this.handlePointerUp), addPointerEvent(window, \"pointercancel\", this.handlePointerUp));\n    }\n    PanSession.prototype.updateHandlers = function (handlers) {\n        this.handlers = handlers;\n    };\n    PanSession.prototype.end = function () {\n        this.removeListeners && this.removeListeners();\n        cancelSync.update(this.updatePoint);\n    };\n    return PanSession;\n}());\nfunction transformPoint(info, transformPagePoint) {\n    return transformPagePoint ? { point: transformPagePoint(info.point) } : info;\n}\nfunction subtractPoint(a, b) {\n    return { x: a.x - b.x, y: a.y - b.y };\n}\nfunction getPanInfo(_a, history) {\n    var point = _a.point;\n    return {\n        point: point,\n        delta: subtractPoint(point, lastDevicePoint(history)),\n        offset: subtractPoint(point, startDevicePoint(history)),\n        velocity: getVelocity(history, 0.1),\n    };\n}\nfunction startDevicePoint(history) {\n    return history[0];\n}\nfunction lastDevicePoint(history) {\n    return history[history.length - 1];\n}\nfunction getVelocity(history, timeDelta) {\n    if (history.length < 2) {\n        return { x: 0, y: 0 };\n    }\n    var i = history.length - 1;\n    var timestampedPoint = null;\n    var lastPoint = lastDevicePoint(history);\n    while (i >= 0) {\n        timestampedPoint = history[i];\n        if (lastPoint.timestamp - timestampedPoint.timestamp >\n            secondsToMilliseconds(timeDelta)) {\n            break;\n        }\n        i--;\n    }\n    if (!timestampedPoint) {\n        return { x: 0, y: 0 };\n    }\n    var time = (lastPoint.timestamp - timestampedPoint.timestamp) / 1000;\n    if (time === 0) {\n        return { x: 0, y: 0 };\n    }\n    var currentVelocity = {\n        x: (lastPoint.x - timestampedPoint.x) / time,\n        y: (lastPoint.y - timestampedPoint.y) / time,\n    };\n    if (currentVelocity.x === Infinity) {\n        currentVelocity.x = 0;\n    }\n    if (currentVelocity.y === Infinity) {\n        currentVelocity.y = 0;\n    }\n    return currentVelocity;\n}\n\nexport { PanSession };\n","function createLock(name) {\n    var lock = null;\n    return function () {\n        var openLock = function () {\n            lock = null;\n        };\n        if (lock === null) {\n            lock = name;\n            return openLock;\n        }\n        return false;\n    };\n}\nvar globalHorizontalLock = createLock(\"dragHorizontal\");\nvar globalVerticalLock = createLock(\"dragVertical\");\nfunction getGlobalLock(drag) {\n    var lock = false;\n    if (drag === \"y\") {\n        lock = globalVerticalLock();\n    }\n    else if (drag === \"x\") {\n        lock = globalHorizontalLock();\n    }\n    else {\n        var openHorizontal_1 = globalHorizontalLock();\n        var openVertical_1 = globalVerticalLock();\n        if (openHorizontal_1 && openVertical_1) {\n            lock = function () {\n                openHorizontal_1();\n                openVertical_1();\n            };\n        }\n        else {\n            // Release the locks because we don't use them\n            if (openHorizontal_1)\n                openHorizontal_1();\n            if (openVertical_1)\n                openVertical_1();\n        }\n    }\n    return lock;\n}\nfunction isDragActive() {\n    // Check the gesture lock - if we get it, it means no drag gesture is active\n    // and we can safely fire the tap gesture.\n    var openGestureLock = getGlobalLock(true);\n    if (!openGestureLock)\n        return true;\n    openGestureLock();\n    return false;\n}\n\nexport { createLock, getGlobalLock, isDragActive };\n","// Call a handler once for each axis\nfunction eachAxis(handler) {\n    return [handler(\"x\"), handler(\"y\")];\n}\n\nexport { eachAxis };\n","import { __read } from 'tslib';\nimport { mix } from 'popmotion';\n\n/**\n * Apply constraints to a point. These constraints are both physical along an\n * axis, and an elastic factor that determines how much to constrain the point\n * by if it does lie outside the defined parameters.\n */\nfunction applyConstraints(point, _a, elastic) {\n    var min = _a.min, max = _a.max;\n    if (min !== undefined && point < min) {\n        // If we have a min point defined, and this is outside of that, constrain\n        point = elastic ? mix(min, point, elastic.min) : Math.max(point, min);\n    }\n    else if (max !== undefined && point > max) {\n        // If we have a max point defined, and this is outside of that, constrain\n        point = elastic ? mix(max, point, elastic.max) : Math.min(point, max);\n    }\n    return point;\n}\n/**\n * Calculates a min projection point based on a pointer, pointer progress\n * within the drag target, and constraints.\n *\n * For instance if an element was 100px width, we were dragging from 0.25\n * along this axis, the pointer is at 200px, and there were no constraints,\n * we would calculate a min projection point of 175px.\n */\nfunction calcConstrainedMinPoint(point, length, progress, constraints, elastic) {\n    // Calculate a min point for this axis and apply it to the current pointer\n    var min = point - length * progress;\n    return constraints ? applyConstraints(min, constraints, elastic) : min;\n}\n/**\n * Calculate constraints in terms of the viewport when defined relatively to the\n * measured axis. This is measured from the nearest edge, so a max constraint of 200\n * on an axis with a max value of 300 would return a constraint of 500 - axis length\n */\nfunction calcRelativeAxisConstraints(axis, min, max) {\n    return {\n        min: min !== undefined ? axis.min + min : undefined,\n        max: max !== undefined\n            ? axis.max + max - (axis.max - axis.min)\n            : undefined,\n    };\n}\n/**\n * Calculate constraints in terms of the viewport when\n * defined relatively to the measured bounding box.\n */\nfunction calcRelativeConstraints(layoutBox, _a) {\n    var top = _a.top, left = _a.left, bottom = _a.bottom, right = _a.right;\n    return {\n        x: calcRelativeAxisConstraints(layoutBox.x, left, right),\n        y: calcRelativeAxisConstraints(layoutBox.y, top, bottom),\n    };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative axis\n */\nfunction calcViewportAxisConstraints(layoutAxis, constraintsAxis) {\n    var _a;\n    var min = constraintsAxis.min - layoutAxis.min;\n    var max = constraintsAxis.max - layoutAxis.max;\n    // If the constraints axis is actually smaller than the layout axis then we can\n    // flip the constraints\n    if (constraintsAxis.max - constraintsAxis.min <\n        layoutAxis.max - layoutAxis.min) {\n        _a = __read([max, min], 2), min = _a[0], max = _a[1];\n    }\n    return {\n        min: layoutAxis.min + min,\n        max: layoutAxis.min + max,\n    };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative box\n */\nfunction calcViewportConstraints(layoutBox, constraintsBox) {\n    return {\n        x: calcViewportAxisConstraints(layoutBox.x, constraintsBox.x),\n        y: calcViewportAxisConstraints(layoutBox.y, constraintsBox.y),\n    };\n}\n/**\n * Calculate the an axis position based on two axes and a progress value.\n */\nfunction calcPositionFromProgress(axis, constraints, progress) {\n    var axisLength = axis.max - axis.min;\n    var min = mix(constraints.min, constraints.max - axisLength, progress);\n    return { min: min, max: min + axisLength };\n}\n/**\n * Rebase the calculated viewport constraints relative to the layout.min point.\n */\nfunction rebaseAxisConstraints(layout, constraints) {\n    var relativeConstraints = {};\n    if (constraints.min !== undefined) {\n        relativeConstraints.min = constraints.min - layout.min;\n    }\n    if (constraints.max !== undefined) {\n        relativeConstraints.max = constraints.max - layout.min;\n    }\n    return relativeConstraints;\n}\nvar defaultElastic = 0.35;\n/**\n * Accepts a dragElastic prop and returns resolved elastic values for each axis.\n */\nfunction resolveDragElastic(dragElastic) {\n    if (dragElastic === false) {\n        dragElastic = 0;\n    }\n    else if (dragElastic === true) {\n        dragElastic = defaultElastic;\n    }\n    return {\n        x: resolveAxisElastic(dragElastic, \"left\", \"right\"),\n        y: resolveAxisElastic(dragElastic, \"top\", \"bottom\"),\n    };\n}\nfunction resolveAxisElastic(dragElastic, minLabel, maxLabel) {\n    return {\n        min: resolvePointElastic(dragElastic, minLabel),\n        max: resolvePointElastic(dragElastic, maxLabel),\n    };\n}\nfunction resolvePointElastic(dragElastic, label) {\n    var _a;\n    return typeof dragElastic === \"number\"\n        ? dragElastic\n        : (_a = dragElastic[label]) !== null && _a !== void 0 ? _a : 0;\n}\n\nexport { applyConstraints, calcConstrainedMinPoint, calcPositionFromProgress, calcRelativeAxisConstraints, calcRelativeConstraints, calcViewportAxisConstraints, calcViewportConstraints, defaultElastic, rebaseAxisConstraints, resolveAxisElastic, resolveDragElastic, resolvePointElastic };\n","import { convertBoundingBoxToAxisBox, transformBoundingBox } from '../../../utils/geometry/index.js';\n\n/**\n * Measure and return the element bounding box.\n *\n * We convert the box into an AxisBox2D to make it easier to work with each axis\n * individually and programmatically.\n *\n * This function optionally accepts a transformPagePoint function which allows us to compensate\n * for, for instance, measuring the element within a scaled plane like a Framer devivce preview component.\n */\nfunction getBoundingBox(element, transformPagePoint) {\n    var box = element.getBoundingClientRect();\n    return convertBoundingBoxToAxisBox(transformBoundingBox(box, transformPagePoint));\n}\n\nexport { getBoundingBox };\n","import { mix, distance, clamp, progress } from 'popmotion';\n\nvar clampProgress = function (v) { return clamp(0, 1, v); };\n/**\n * Returns true if the provided value is within maxDistance of the provided target\n */\nfunction isNear(value, target, maxDistance) {\n    if (target === void 0) { target = 0; }\n    if (maxDistance === void 0) { maxDistance = 0.01; }\n    return distance(value, target) < maxDistance;\n}\nfunction calcLength(axis) {\n    return axis.max - axis.min;\n}\n/**\n * Calculate a transform origin relative to the source axis, between 0-1, that results\n * in an asthetically pleasing scale/transform needed to project from source to target.\n */\nfunction calcOrigin(source, target) {\n    var origin = 0.5;\n    var sourceLength = calcLength(source);\n    var targetLength = calcLength(target);\n    if (targetLength > sourceLength) {\n        origin = progress(target.min, target.max - sourceLength, source.min);\n    }\n    else if (sourceLength > targetLength) {\n        origin = progress(source.min, source.max - targetLength, target.min);\n    }\n    return clampProgress(origin);\n}\n/**\n * Update the AxisDelta with a transform that projects source into target.\n *\n * The transform `origin` is optional. If not provided, it'll be automatically\n * calculated based on the relative positions of the two bounding boxes.\n */\nfunction updateAxisDelta(delta, source, target, origin) {\n    if (origin === void 0) { origin = 0.5; }\n    delta.origin = origin;\n    delta.originPoint = mix(source.min, source.max, delta.origin);\n    delta.scale = calcLength(target) / calcLength(source);\n    if (isNear(delta.scale, 1, 0.0001))\n        delta.scale = 1;\n    delta.translate =\n        mix(target.min, target.max, delta.origin) - delta.originPoint;\n    if (isNear(delta.translate))\n        delta.translate = 0;\n}\n/**\n * Update the BoxDelta with a transform that projects the source into the target.\n *\n * The transform `origin` is optional. If not provided, it'll be automatically\n * calculated based on the relative positions of the two bounding boxes.\n */\nfunction updateBoxDelta(delta, source, target, origin) {\n    updateAxisDelta(delta.x, source.x, target.x, defaultOrigin(origin.originX));\n    updateAxisDelta(delta.y, source.y, target.y, defaultOrigin(origin.originY));\n}\n/**\n * Currently this only accepts numerical origins, measured as 0-1, but could\n * accept pixel values by comparing to the target axis.\n */\nfunction defaultOrigin(origin) {\n    return typeof origin === \"number\" ? origin : 0.5;\n}\nfunction calcRelativeAxis(target, relative, parent) {\n    target.min = parent.min + relative.min;\n    target.max = target.min + calcLength(relative);\n}\nfunction calcRelativeBox(projection, parentProjection) {\n    calcRelativeAxis(projection.target.x, projection.relativeTarget.x, parentProjection.target.x);\n    calcRelativeAxis(projection.target.y, projection.relativeTarget.y, parentProjection.target.y);\n}\n\nexport { calcOrigin, calcRelativeAxis, calcRelativeBox, isNear, updateAxisDelta, updateBoxDelta };\n","var AnimationType;\n(function (AnimationType) {\n    AnimationType[\"Animate\"] = \"animate\";\n    AnimationType[\"Hover\"] = \"whileHover\";\n    AnimationType[\"Tap\"] = \"whileTap\";\n    AnimationType[\"Drag\"] = \"whileDrag\";\n    AnimationType[\"Focus\"] = \"whileFocus\";\n    AnimationType[\"Exit\"] = \"exit\";\n})(AnimationType || (AnimationType = {}));\n\nexport { AnimationType };\n","import { mix } from 'popmotion';\n\nfunction tweenAxis(target, prev, next, p) {\n    target.min = mix(prev.min, next.min, p);\n    target.max = mix(prev.max, next.max, p);\n}\nfunction calcRelativeOffsetAxis(parent, child) {\n    return {\n        min: child.min - parent.min,\n        max: child.max - parent.min,\n    };\n}\nfunction calcRelativeOffset(parent, child) {\n    return {\n        x: calcRelativeOffsetAxis(parent.x, child.x),\n        y: calcRelativeOffsetAxis(parent.y, child.y),\n    };\n}\nfunction checkIfParentHasChanged(prev, next) {\n    var prevId = prev.getLayoutId();\n    var nextId = next.getLayoutId();\n    return prevId !== nextId || (nextId === undefined && prev !== next);\n}\n\nexport { calcRelativeOffset, calcRelativeOffsetAxis, checkIfParentHasChanged, tweenAxis };\n","function isDraggable(visualElement) {\n    var _a = visualElement.getProps(), drag = _a.drag, _dragX = _a._dragX;\n    return drag && !_dragX;\n}\n\nexport { isDraggable };\n","import { __read } from 'tslib';\nimport { mix } from 'popmotion';\nimport { isDraggable } from '../../render/utils/is-draggable.js';\n\n/**\n * Reset an axis to the provided origin box.\n *\n * This is a mutative operation.\n */\nfunction resetAxis(axis, originAxis) {\n    axis.min = originAxis.min;\n    axis.max = originAxis.max;\n}\n/**\n * Reset a box to the provided origin box.\n *\n * This is a mutative operation.\n */\nfunction resetBox(box, originBox) {\n    resetAxis(box.x, originBox.x);\n    resetAxis(box.y, originBox.y);\n}\n/**\n * Scales a point based on a factor and an originPoint\n */\nfunction scalePoint(point, scale, originPoint) {\n    var distanceFromOrigin = point - originPoint;\n    var scaled = scale * distanceFromOrigin;\n    return originPoint + scaled;\n}\n/**\n * Applies a translate/scale delta to a point\n */\nfunction applyPointDelta(point, translate, scale, originPoint, boxScale) {\n    if (boxScale !== undefined) {\n        point = scalePoint(point, boxScale, originPoint);\n    }\n    return scalePoint(point, scale, originPoint) + translate;\n}\n/**\n * Applies a translate/scale delta to an axis\n */\nfunction applyAxisDelta(axis, translate, scale, originPoint, boxScale) {\n    if (translate === void 0) { translate = 0; }\n    if (scale === void 0) { scale = 1; }\n    axis.min = applyPointDelta(axis.min, translate, scale, originPoint, boxScale);\n    axis.max = applyPointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Applies a translate/scale delta to a box\n */\nfunction applyBoxDelta(box, _a) {\n    var x = _a.x, y = _a.y;\n    applyAxisDelta(box.x, x.translate, x.scale, x.originPoint);\n    applyAxisDelta(box.y, y.translate, y.scale, y.originPoint);\n}\n/**\n * Apply a transform to an axis from the latest resolved motion values.\n * This function basically acts as a bridge between a flat motion value map\n * and applyAxisDelta\n */\nfunction applyAxisTransforms(final, axis, transforms, _a) {\n    var _b = __read(_a, 3), key = _b[0], scaleKey = _b[1], originKey = _b[2];\n    // Copy the current axis to the final axis before mutation\n    final.min = axis.min;\n    final.max = axis.max;\n    var axisOrigin = transforms[originKey] !== undefined ? transforms[originKey] : 0.5;\n    var originPoint = mix(axis.min, axis.max, axisOrigin);\n    // Apply the axis delta to the final axis\n    applyAxisDelta(final, transforms[key], transforms[scaleKey], originPoint, transforms.scale);\n}\n/**\n * The names of the motion values we want to apply as translation, scale and origin.\n */\nvar xKeys = [\"x\", \"scaleX\", \"originX\"];\nvar yKeys = [\"y\", \"scaleY\", \"originY\"];\n/**\n * Apply a transform to a box from the latest resolved motion values.\n */\nfunction applyBoxTransforms(finalBox, box, transforms) {\n    applyAxisTransforms(finalBox.x, box.x, transforms, xKeys);\n    applyAxisTransforms(finalBox.y, box.y, transforms, yKeys);\n}\n/**\n * Remove a delta from a point. This is essentially the steps of applyPointDelta in reverse\n */\nfunction removePointDelta(point, translate, scale, originPoint, boxScale) {\n    point -= translate;\n    point = scalePoint(point, 1 / scale, originPoint);\n    if (boxScale !== undefined) {\n        point = scalePoint(point, 1 / boxScale, originPoint);\n    }\n    return point;\n}\n/**\n * Remove a delta from an axis. This is essentially the steps of applyAxisDelta in reverse\n */\nfunction removeAxisDelta(axis, translate, scale, origin, boxScale) {\n    if (translate === void 0) { translate = 0; }\n    if (scale === void 0) { scale = 1; }\n    if (origin === void 0) { origin = 0.5; }\n    var originPoint = mix(axis.min, axis.max, origin) - translate;\n    axis.min = removePointDelta(axis.min, translate, scale, originPoint, boxScale);\n    axis.max = removePointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Remove a transforms from an axis. This is essentially the steps of applyAxisTransforms in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\nfunction removeAxisTransforms(axis, transforms, _a) {\n    var _b = __read(_a, 3), key = _b[0], scaleKey = _b[1], originKey = _b[2];\n    removeAxisDelta(axis, transforms[key], transforms[scaleKey], transforms[originKey], transforms.scale);\n}\n/**\n * Remove a transforms from an box. This is essentially the steps of applyAxisBox in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\nfunction removeBoxTransforms(box, transforms) {\n    removeAxisTransforms(box.x, transforms, xKeys);\n    removeAxisTransforms(box.y, transforms, yKeys);\n}\n/**\n * Apply a tree of deltas to a box. We do this to calculate the effect of all the transforms\n * in a tree upon our box before then calculating how to project it into our desired viewport-relative box\n *\n * This is the final nested loop within updateLayoutDelta for future refactoring\n */\nfunction applyTreeDeltas(box, treeScale, treePath) {\n    var treeLength = treePath.length;\n    if (!treeLength)\n        return;\n    // Reset the treeScale\n    treeScale.x = treeScale.y = 1;\n    var node;\n    var delta;\n    for (var i = 0; i < treeLength; i++) {\n        node = treePath[i];\n        delta = node.getLayoutState().delta;\n        // Incoporate each ancestor's scale into a culmulative treeScale for this component\n        treeScale.x *= delta.x.scale;\n        treeScale.y *= delta.y.scale;\n        // Apply each ancestor's calculated delta into this component's recorded layout box\n        applyBoxDelta(box, delta);\n        // If this is a draggable ancestor, also incorporate the node's transform to the layout box\n        if (isDraggable(node)) {\n            applyBoxTransforms(box, box, node.getLatestValues());\n        }\n    }\n}\n\nexport { applyAxisDelta, applyAxisTransforms, applyBoxDelta, applyBoxTransforms, applyPointDelta, applyTreeDeltas, removeAxisDelta, removeAxisTransforms, removeBoxTransforms, removePointDelta, resetAxis, resetBox, scalePoint };\n","import { calcRelativeOffset } from '../../../motion/features/layout/utils.js';\nimport { eachAxis } from '../../../utils/each-axis.js';\nimport { removeBoxTransforms } from '../../../utils/geometry/delta-apply.js';\n\n/**\n * Returns a boolean stating whether or not we converted the projection\n * to relative projection.\n */\nfunction convertToRelativeProjection(visualElement, isLayoutDrag) {\n    if (isLayoutDrag === void 0) { isLayoutDrag = true; }\n    var projectionParent = visualElement.getProjectionParent();\n    if (!projectionParent)\n        return false;\n    var offset;\n    if (isLayoutDrag) {\n        offset = calcRelativeOffset(projectionParent.projection.target, visualElement.projection.target);\n        removeBoxTransforms(offset, projectionParent.getLatestValues());\n    }\n    else {\n        offset = calcRelativeOffset(projectionParent.getLayoutState().layout, visualElement.getLayoutState().layout);\n    }\n    eachAxis(function (axis) {\n        return visualElement.setProjectionTargetAxis(axis, offset[axis].min, offset[axis].max, true);\n    });\n    return true;\n}\n\nexport { convertToRelativeProjection };\n","import { __rest, __assign, __spreadArray, __read } from 'tslib';\nimport { invariant } from 'hey-listen';\nimport { PanSession } from '../PanSession.js';\nimport { getGlobalLock } from './utils/lock.js';\nimport { isRefObject } from '../../utils/is-ref-object.js';\nimport { addPointerEvent } from '../../events/use-pointer-event.js';\nimport { addDomEvent } from '../../events/use-dom-event.js';\nimport { getViewportPointFromEvent } from '../../events/event-info.js';\nimport { axisBox, convertAxisBoxToBoundingBox, convertBoundingBoxToAxisBox } from '../../utils/geometry/index.js';\nimport { eachAxis } from '../../utils/each-axis.js';\nimport { calcRelativeConstraints, resolveDragElastic, rebaseAxisConstraints, calcViewportConstraints, applyConstraints, calcConstrainedMinPoint, calcPositionFromProgress, defaultElastic } from './utils/constraints.js';\nimport { getBoundingBox } from '../../render/dom/projection/measure.js';\nimport { calcOrigin } from '../../utils/geometry/delta-calc.js';\nimport { startAnimation } from '../../animation/utils/transitions.js';\nimport { AnimationType } from '../../render/utils/types.js';\nimport { collectProjectingAncestors, updateLayoutMeasurement, collectProjectingChildren } from '../../render/dom/projection/utils.js';\nimport { progress } from 'popmotion';\nimport { convertToRelativeProjection } from '../../render/dom/projection/convert-to-relative.js';\nimport { calcRelativeOffset } from '../../motion/features/layout/utils.js';\nimport { flushLayout, batchLayout } from '../../render/dom/utils/batch-layout.js';\nimport { flushSync } from 'framesync';\n\nvar elementDragControls = new WeakMap();\n/**\n *\n */\nvar lastPointerEvent;\nvar VisualElementDragControls = /** @class */ (function () {\n    function VisualElementDragControls(_a) {\n        var visualElement = _a.visualElement;\n        /**\n         * Track whether we're currently dragging.\n         *\n         * @internal\n         */\n        this.isDragging = false;\n        /**\n         * The current direction of drag, or `null` if both.\n         *\n         * @internal\n         */\n        this.currentDirection = null;\n        /**\n         * The permitted boundaries of travel, in pixels.\n         *\n         * @internal\n         */\n        this.constraints = false;\n        /**\n         * The per-axis resolved elastic values.\n         *\n         * @internal\n         */\n        this.elastic = axisBox();\n        /**\n         * A reference to the host component's latest props.\n         *\n         * @internal\n         */\n        this.props = {};\n        /**\n         * @internal\n         */\n        this.hasMutatedConstraints = false;\n        /**\n         * Track the initial position of the cursor relative to the dragging element\n         * when dragging starts as a value of 0-1 on each axis. We then use this to calculate\n         * an ideal bounding box for the VisualElement renderer to project into every frame.\n         *\n         * @internal\n         */\n        this.cursorProgress = {\n            x: 0.5,\n            y: 0.5,\n        };\n        // When updating _dragX, or _dragY instead of the VisualElement,\n        // persist their values between drag gestures.\n        this.originPoint = {};\n        // This is a reference to the global drag gesture lock, ensuring only one component\n        // can \"capture\" the drag of one or both axes.\n        // TODO: Look into moving this into pansession?\n        this.openGlobalLock = null;\n        /**\n         * @internal\n         */\n        this.panSession = null;\n        this.visualElement = visualElement;\n        this.visualElement.enableLayoutProjection();\n        elementDragControls.set(visualElement, this);\n    }\n    /**\n     * Instantiate a PanSession for the drag gesture\n     *\n     * @public\n     */\n    VisualElementDragControls.prototype.start = function (originEvent, _a) {\n        var _this = this;\n        var _b = _a === void 0 ? {} : _a, _c = _b.snapToCursor, snapToCursor = _c === void 0 ? false : _c, cursorProgress = _b.cursorProgress;\n        var onSessionStart = function (event) {\n            var _a;\n            // Stop any animations on both axis values immediately. This allows the user to throw and catch\n            // the component.\n            _this.stopMotion();\n            /**\n             * Save the initial point. We'll use this to calculate the pointer's position rather\n             * than the one we receive when the gesture actually starts. By then, the pointer will\n             * have already moved, and the perception will be of the pointer \"slipping\" across the element\n             */\n            var initialPoint = getViewportPointFromEvent(event).point;\n            (_a = _this.cancelLayout) === null || _a === void 0 ? void 0 : _a.call(_this);\n            _this.cancelLayout = batchLayout(function (read, write) {\n                var ancestors = collectProjectingAncestors(_this.visualElement);\n                var children = collectProjectingChildren(_this.visualElement);\n                var tree = __spreadArray(__spreadArray([], __read(ancestors)), __read(children));\n                var hasManuallySetCursorOrigin = false;\n                /**\n                 * Apply a simple lock to the projection target. This ensures no animations\n                 * can run on the projection box while this lock is active.\n                 */\n                _this.isLayoutDrag() && _this.visualElement.lockProjectionTarget();\n                write(function () {\n                    tree.forEach(function (element) { return element.resetTransform(); });\n                });\n                read(function () {\n                    updateLayoutMeasurement(_this.visualElement);\n                    children.forEach(updateLayoutMeasurement);\n                });\n                write(function () {\n                    tree.forEach(function (element) { return element.restoreTransform(); });\n                    if (snapToCursor) {\n                        hasManuallySetCursorOrigin = _this.snapToCursor(initialPoint);\n                    }\n                });\n                read(function () {\n                    var isRelativeDrag = Boolean(_this.getAxisMotionValue(\"x\") && !_this.isExternalDrag());\n                    if (!isRelativeDrag) {\n                        _this.visualElement.rebaseProjectionTarget(true, _this.visualElement.measureViewportBox(false));\n                    }\n                    _this.visualElement.scheduleUpdateLayoutProjection();\n                    /**\n                     * When dragging starts, we want to find where the cursor is relative to the bounding box\n                     * of the element. Every frame, we calculate a new bounding box using this relative position\n                     * and let the visualElement renderer figure out how to reproject the element into this bounding\n                     * box.\n                     *\n                     * By doing it this way, rather than applying an x/y transform directly to the element,\n                     * we can ensure the component always visually sticks to the cursor as we'd expect, even\n                     * if the DOM element itself changes layout as a result of React updates the user might\n                     * make based on the drag position.\n                     */\n                    var projection = _this.visualElement.projection;\n                    eachAxis(function (axis) {\n                        if (!hasManuallySetCursorOrigin) {\n                            var _a = projection.target[axis], min = _a.min, max = _a.max;\n                            _this.cursorProgress[axis] = cursorProgress\n                                ? cursorProgress[axis]\n                                : progress(min, max, initialPoint[axis]);\n                        }\n                        /**\n                         * If we have external drag MotionValues, record their origin point. On pointermove\n                         * we'll apply the pan gesture offset directly to this value.\n                         */\n                        var axisValue = _this.getAxisMotionValue(axis);\n                        if (axisValue) {\n                            _this.originPoint[axis] = axisValue.get();\n                        }\n                    });\n                });\n                write(function () {\n                    flushSync.update();\n                    flushSync.preRender();\n                    flushSync.render();\n                    flushSync.postRender();\n                });\n                read(function () { return _this.resolveDragConstraints(); });\n            });\n        };\n        var onStart = function (event, info) {\n            var _a, _b, _c;\n            // Attempt to grab the global drag gesture lock - maybe make this part of PanSession\n            var _d = _this.props, drag = _d.drag, dragPropagation = _d.dragPropagation;\n            if (drag && !dragPropagation) {\n                if (_this.openGlobalLock)\n                    _this.openGlobalLock();\n                _this.openGlobalLock = getGlobalLock(drag);\n                // If we don 't have the lock, don't start dragging\n                if (!_this.openGlobalLock)\n                    return;\n            }\n            flushLayout();\n            // Set current drag status\n            _this.isDragging = true;\n            _this.currentDirection = null;\n            // Fire onDragStart event\n            (_b = (_a = _this.props).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, event, info);\n            (_c = _this.visualElement.animationState) === null || _c === void 0 ? void 0 : _c.setActive(AnimationType.Drag, true);\n        };\n        var onMove = function (event, info) {\n            var _a, _b, _c, _d;\n            var _e = _this.props, dragPropagation = _e.dragPropagation, dragDirectionLock = _e.dragDirectionLock;\n            // If we didn't successfully receive the gesture lock, early return.\n            if (!dragPropagation && !_this.openGlobalLock)\n                return;\n            var offset = info.offset;\n            // Attempt to detect drag direction if directionLock is true\n            if (dragDirectionLock && _this.currentDirection === null) {\n                _this.currentDirection = getCurrentDirection(offset);\n                // If we've successfully set a direction, notify listener\n                if (_this.currentDirection !== null) {\n                    (_b = (_a = _this.props).onDirectionLock) === null || _b === void 0 ? void 0 : _b.call(_a, _this.currentDirection);\n                }\n                return;\n            }\n            // Update each point with the latest position\n            _this.updateAxis(\"x\", info.point, offset);\n            _this.updateAxis(\"y\", info.point, offset);\n            // Fire onDrag event\n            (_d = (_c = _this.props).onDrag) === null || _d === void 0 ? void 0 : _d.call(_c, event, info);\n            // Update the last pointer event\n            lastPointerEvent = event;\n        };\n        var onSessionEnd = function (event, info) {\n            return _this.stop(event, info);\n        };\n        var transformPagePoint = this.props.transformPagePoint;\n        this.panSession = new PanSession(originEvent, {\n            onSessionStart: onSessionStart,\n            onStart: onStart,\n            onMove: onMove,\n            onSessionEnd: onSessionEnd,\n        }, { transformPagePoint: transformPagePoint });\n    };\n    VisualElementDragControls.prototype.resolveDragConstraints = function () {\n        var _this = this;\n        var _a = this.props, dragConstraints = _a.dragConstraints, dragElastic = _a.dragElastic;\n        var layout = this.visualElement.getLayoutState().layoutCorrected;\n        if (dragConstraints) {\n            this.constraints = isRefObject(dragConstraints)\n                ? this.resolveRefConstraints(layout, dragConstraints)\n                : calcRelativeConstraints(layout, dragConstraints);\n        }\n        else {\n            this.constraints = false;\n        }\n        this.elastic = resolveDragElastic(dragElastic);\n        /**\n         * If we're outputting to external MotionValues, we want to rebase the measured constraints\n         * from viewport-relative to component-relative.\n         */\n        if (this.constraints && !this.hasMutatedConstraints) {\n            eachAxis(function (axis) {\n                if (_this.getAxisMotionValue(axis)) {\n                    _this.constraints[axis] = rebaseAxisConstraints(layout[axis], _this.constraints[axis]);\n                }\n            });\n        }\n    };\n    VisualElementDragControls.prototype.resolveRefConstraints = function (layoutBox, constraints) {\n        var _a = this.props, onMeasureDragConstraints = _a.onMeasureDragConstraints, transformPagePoint = _a.transformPagePoint;\n        var constraintsElement = constraints.current;\n        invariant(constraintsElement !== null, \"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.\");\n        this.constraintsBox = getBoundingBox(constraintsElement, transformPagePoint);\n        var measuredConstraints = calcViewportConstraints(layoutBox, this.constraintsBox);\n        /**\n         * If there's an onMeasureDragConstraints listener we call it and\n         * if different constraints are returned, set constraints to that\n         */\n        if (onMeasureDragConstraints) {\n            var userConstraints = onMeasureDragConstraints(convertAxisBoxToBoundingBox(measuredConstraints));\n            this.hasMutatedConstraints = !!userConstraints;\n            if (userConstraints) {\n                measuredConstraints = convertBoundingBoxToAxisBox(userConstraints);\n            }\n        }\n        return measuredConstraints;\n    };\n    VisualElementDragControls.prototype.cancelDrag = function () {\n        var _a, _b;\n        this.visualElement.unlockProjectionTarget();\n        (_a = this.cancelLayout) === null || _a === void 0 ? void 0 : _a.call(this);\n        this.isDragging = false;\n        this.panSession && this.panSession.end();\n        this.panSession = null;\n        if (!this.props.dragPropagation && this.openGlobalLock) {\n            this.openGlobalLock();\n            this.openGlobalLock = null;\n        }\n        (_b = this.visualElement.animationState) === null || _b === void 0 ? void 0 : _b.setActive(AnimationType.Drag, false);\n    };\n    VisualElementDragControls.prototype.stop = function (event, info) {\n        var _a, _b, _c;\n        (_a = this.panSession) === null || _a === void 0 ? void 0 : _a.end();\n        this.panSession = null;\n        var isDragging = this.isDragging;\n        this.cancelDrag();\n        if (!isDragging)\n            return;\n        var velocity = info.velocity;\n        this.animateDragEnd(velocity);\n        (_c = (_b = this.props).onDragEnd) === null || _c === void 0 ? void 0 : _c.call(_b, event, info);\n    };\n    VisualElementDragControls.prototype.snapToCursor = function (point) {\n        var _this = this;\n        return eachAxis(function (axis) {\n            var drag = _this.props.drag;\n            // If we're not dragging this axis, do an early return.\n            if (!shouldDrag(axis, drag, _this.currentDirection))\n                return;\n            var axisValue = _this.getAxisMotionValue(axis);\n            if (axisValue) {\n                var box = _this.visualElement.getLayoutState().layout;\n                var length_1 = box[axis].max - box[axis].min;\n                var center = box[axis].min + length_1 / 2;\n                var offset = point[axis] - center;\n                _this.originPoint[axis] = point[axis];\n                axisValue.set(offset);\n            }\n            else {\n                _this.cursorProgress[axis] = 0.5;\n                return true;\n            }\n        }).includes(true);\n    };\n    /**\n     * Update the specified axis with the latest pointer information.\n     */\n    VisualElementDragControls.prototype.updateAxis = function (axis, point, offset) {\n        var drag = this.props.drag;\n        // If we're not dragging this axis, do an early return.\n        if (!shouldDrag(axis, drag, this.currentDirection))\n            return;\n        return this.getAxisMotionValue(axis)\n            ? this.updateAxisMotionValue(axis, offset)\n            : this.updateVisualElementAxis(axis, point);\n    };\n    VisualElementDragControls.prototype.updateAxisMotionValue = function (axis, offset) {\n        var axisValue = this.getAxisMotionValue(axis);\n        if (!offset || !axisValue)\n            return;\n        var nextValue = this.originPoint[axis] + offset[axis];\n        var update = this.constraints\n            ? applyConstraints(nextValue, this.constraints[axis], this.elastic[axis])\n            : nextValue;\n        axisValue.set(update);\n    };\n    VisualElementDragControls.prototype.updateVisualElementAxis = function (axis, point) {\n        var _a;\n        // Get the actual layout bounding box of the element\n        var axisLayout = this.visualElement.getLayoutState().layout[axis];\n        // Calculate its current length. In the future we might want to lerp this to animate\n        // between lengths if the layout changes as we change the DOM\n        var axisLength = axisLayout.max - axisLayout.min;\n        // Get the initial progress that the pointer sat on this axis on gesture start.\n        var axisProgress = this.cursorProgress[axis];\n        // Calculate a new min point based on the latest pointer position, constraints and elastic\n        var min = calcConstrainedMinPoint(point[axis], axisLength, axisProgress, (_a = this.constraints) === null || _a === void 0 ? void 0 : _a[axis], this.elastic[axis]);\n        // Update the axis viewport target with this new min and the length\n        this.visualElement.setProjectionTargetAxis(axis, min, min + axisLength);\n    };\n    VisualElementDragControls.prototype.setProps = function (_a) {\n        var _b = _a.drag, drag = _b === void 0 ? false : _b, _c = _a.dragDirectionLock, dragDirectionLock = _c === void 0 ? false : _c, _d = _a.dragPropagation, dragPropagation = _d === void 0 ? false : _d, _e = _a.dragConstraints, dragConstraints = _e === void 0 ? false : _e, _f = _a.dragElastic, dragElastic = _f === void 0 ? defaultElastic : _f, _g = _a.dragMomentum, dragMomentum = _g === void 0 ? true : _g, remainingProps = __rest(_a, [\"drag\", \"dragDirectionLock\", \"dragPropagation\", \"dragConstraints\", \"dragElastic\", \"dragMomentum\"]);\n        this.props = __assign({ drag: drag,\n            dragDirectionLock: dragDirectionLock,\n            dragPropagation: dragPropagation,\n            dragConstraints: dragConstraints,\n            dragElastic: dragElastic,\n            dragMomentum: dragMomentum }, remainingProps);\n    };\n    /**\n     * Drag works differently depending on which props are provided.\n     *\n     * - If _dragX and _dragY are provided, we output the gesture delta directly to those motion values.\n     * - If the component will perform layout animations, we output the gesture to the component's\n     *      visual bounding box\n     * - Otherwise, we apply the delta to the x/y motion values.\n     */\n    VisualElementDragControls.prototype.getAxisMotionValue = function (axis) {\n        var _a = this.props, layout = _a.layout, layoutId = _a.layoutId;\n        var dragKey = \"_drag\" + axis.toUpperCase();\n        if (this.props[dragKey]) {\n            return this.props[dragKey];\n        }\n        else if (!layout && layoutId === undefined) {\n            return this.visualElement.getValue(axis, 0);\n        }\n    };\n    VisualElementDragControls.prototype.isLayoutDrag = function () {\n        return !this.getAxisMotionValue(\"x\");\n    };\n    VisualElementDragControls.prototype.isExternalDrag = function () {\n        var _a = this.props, _dragX = _a._dragX, _dragY = _a._dragY;\n        return _dragX || _dragY;\n    };\n    VisualElementDragControls.prototype.animateDragEnd = function (velocity) {\n        var _this = this;\n        var _a = this.props, drag = _a.drag, dragMomentum = _a.dragMomentum, dragElastic = _a.dragElastic, dragTransition = _a.dragTransition;\n        /**\n         * Everything beyond the drag gesture should be performed with\n         * relative projection so children stay in sync with their parent element.\n         */\n        var isRelative = convertToRelativeProjection(this.visualElement, this.isLayoutDrag() && !this.isExternalDrag());\n        /**\n         * If we had previously resolved constraints relative to the viewport,\n         * we need to also convert those to a relative coordinate space for the animation\n         */\n        var constraints = this.constraints || {};\n        if (isRelative &&\n            Object.keys(constraints).length &&\n            this.isLayoutDrag()) {\n            var projectionParent = this.visualElement.getProjectionParent();\n            if (projectionParent) {\n                var relativeConstraints_1 = calcRelativeOffset(projectionParent.projection.targetFinal, constraints);\n                eachAxis(function (axis) {\n                    var _a = relativeConstraints_1[axis], min = _a.min, max = _a.max;\n                    constraints[axis] = {\n                        min: isNaN(min) ? undefined : min,\n                        max: isNaN(max) ? undefined : max,\n                    };\n                });\n            }\n        }\n        var momentumAnimations = eachAxis(function (axis) {\n            var _a;\n            if (!shouldDrag(axis, drag, _this.currentDirection)) {\n                return;\n            }\n            var transition = (_a = constraints === null || constraints === void 0 ? void 0 : constraints[axis]) !== null && _a !== void 0 ? _a : {};\n            /**\n             * Overdamp the boundary spring if `dragElastic` is disabled. There's still a frame\n             * of spring animations so we should look into adding a disable spring option to `inertia`.\n             * We could do something here where we affect the `bounceStiffness` and `bounceDamping`\n             * using the value of `dragElastic`.\n             */\n            var bounceStiffness = dragElastic ? 200 : 1000000;\n            var bounceDamping = dragElastic ? 40 : 10000000;\n            var inertia = __assign(__assign({ type: \"inertia\", velocity: dragMomentum ? velocity[axis] : 0, bounceStiffness: bounceStiffness,\n                bounceDamping: bounceDamping, timeConstant: 750, restDelta: 1, restSpeed: 10 }, dragTransition), transition);\n            // If we're not animating on an externally-provided `MotionValue` we can use the\n            // component's animation controls which will handle interactions with whileHover (etc),\n            // otherwise we just have to animate the `MotionValue` itself.\n            return _this.getAxisMotionValue(axis)\n                ? _this.startAxisValueAnimation(axis, inertia)\n                : _this.visualElement.startLayoutAnimation(axis, inertia, isRelative);\n        });\n        // Run all animations and then resolve the new drag constraints.\n        return Promise.all(momentumAnimations).then(function () {\n            var _a, _b;\n            (_b = (_a = _this.props).onDragTransitionEnd) === null || _b === void 0 ? void 0 : _b.call(_a);\n        });\n    };\n    VisualElementDragControls.prototype.stopMotion = function () {\n        var _this = this;\n        eachAxis(function (axis) {\n            var axisValue = _this.getAxisMotionValue(axis);\n            axisValue\n                ? axisValue.stop()\n                : _this.visualElement.stopLayoutAnimation();\n        });\n    };\n    VisualElementDragControls.prototype.startAxisValueAnimation = function (axis, transition) {\n        var axisValue = this.getAxisMotionValue(axis);\n        if (!axisValue)\n            return;\n        var currentValue = axisValue.get();\n        axisValue.set(currentValue);\n        axisValue.set(currentValue); // Set twice to hard-reset velocity\n        return startAnimation(axis, axisValue, 0, transition);\n    };\n    VisualElementDragControls.prototype.scalePoint = function () {\n        var _this = this;\n        var _a = this.props, drag = _a.drag, dragConstraints = _a.dragConstraints;\n        if (!isRefObject(dragConstraints) || !this.constraintsBox)\n            return;\n        // Stop any current animations as there can be some visual glitching if we resize mid animation\n        this.stopMotion();\n        // Record the relative progress of the targetBox relative to the constraintsBox\n        var boxProgress = { x: 0, y: 0 };\n        eachAxis(function (axis) {\n            boxProgress[axis] = calcOrigin(_this.visualElement.projection.target[axis], _this.constraintsBox[axis]);\n        });\n        /**\n         * For each axis, calculate the current progress of the layout axis within the constraints.\n         * Then, using the latest layout and constraints measurements, reposition the new layout axis\n         * proportionally within the constraints.\n         */\n        this.updateConstraints(function () {\n            eachAxis(function (axis) {\n                if (!shouldDrag(axis, drag, null))\n                    return;\n                // Calculate the position of the targetBox relative to the constraintsBox using the\n                // previously calculated progress\n                var _a = calcPositionFromProgress(_this.visualElement.projection.target[axis], _this.constraintsBox[axis], boxProgress[axis]), min = _a.min, max = _a.max;\n                _this.visualElement.setProjectionTargetAxis(axis, min, max);\n            });\n        });\n        /**\n         * If any other draggable components are queuing the same tasks synchronously\n         * this will wait until they've all been scheduled before flushing.\n         */\n        setTimeout(flushLayout, 1);\n    };\n    VisualElementDragControls.prototype.updateConstraints = function (onReady) {\n        var _this = this;\n        this.cancelLayout = batchLayout(function (read, write) {\n            var ancestors = collectProjectingAncestors(_this.visualElement);\n            write(function () {\n                return ancestors.forEach(function (element) { return element.resetTransform(); });\n            });\n            read(function () { return updateLayoutMeasurement(_this.visualElement); });\n            write(function () {\n                return ancestors.forEach(function (element) { return element.restoreTransform(); });\n            });\n            read(function () {\n                _this.resolveDragConstraints();\n            });\n            if (onReady)\n                write(onReady);\n        });\n    };\n    VisualElementDragControls.prototype.mount = function (visualElement) {\n        var _this = this;\n        var element = visualElement.getInstance();\n        /**\n         * Attach a pointerdown event listener on this DOM element to initiate drag tracking.\n         */\n        var stopPointerListener = addPointerEvent(element, \"pointerdown\", function (event) {\n            var _a = _this.props, drag = _a.drag, _b = _a.dragListener, dragListener = _b === void 0 ? true : _b;\n            drag && dragListener && _this.start(event);\n        });\n        /**\n         * Attach a window resize listener to scale the draggable target within its defined\n         * constraints as the window resizes.\n         */\n        var stopResizeListener = addDomEvent(window, \"resize\", function () {\n            _this.scalePoint();\n        });\n        /**\n         * Ensure drag constraints are resolved correctly relative to the dragging element\n         * whenever its layout changes.\n         */\n        var stopLayoutUpdateListener = visualElement.onLayoutUpdate(function () {\n            if (_this.isDragging) {\n                _this.resolveDragConstraints();\n            }\n        });\n        /**\n         * If the previous component with this same layoutId was dragging at the time\n         * it was unmounted, we want to continue the same gesture on this component.\n         */\n        var prevDragCursor = visualElement.prevDragCursor;\n        if (prevDragCursor) {\n            this.start(lastPointerEvent, { cursorProgress: prevDragCursor });\n        }\n        /**\n         * Return a function that will teardown the drag gesture\n         */\n        return function () {\n            stopPointerListener === null || stopPointerListener === void 0 ? void 0 : stopPointerListener();\n            stopResizeListener === null || stopResizeListener === void 0 ? void 0 : stopResizeListener();\n            stopLayoutUpdateListener === null || stopLayoutUpdateListener === void 0 ? void 0 : stopLayoutUpdateListener();\n            _this.cancelDrag();\n        };\n    };\n    return VisualElementDragControls;\n}());\nfunction shouldDrag(direction, drag, currentDirection) {\n    return ((drag === true || drag === direction) &&\n        (currentDirection === null || currentDirection === direction));\n}\n/**\n * Based on an x/y offset determine the current drag direction. If both axis' offsets are lower\n * than the provided threshold, return `null`.\n *\n * @param offset - The x/y offset from origin.\n * @param lockThreshold - (Optional) - the minimum absolute offset before we can determine a drag direction.\n */\nfunction getCurrentDirection(offset, lockThreshold) {\n    if (lockThreshold === void 0) { lockThreshold = 10; }\n    var direction = null;\n    if (Math.abs(offset.y) > lockThreshold) {\n        direction = \"y\";\n    }\n    else if (Math.abs(offset.x) > lockThreshold) {\n        direction = \"x\";\n    }\n    return direction;\n}\n\nexport { VisualElementDragControls, elementDragControls };\n","import { __assign } from 'tslib';\nimport { useContext, useEffect } from 'react';\nimport { MotionConfigContext } from '../../context/MotionConfigContext.js';\nimport { VisualElementDragControls } from './VisualElementDragControls.js';\nimport { useConstant } from '../../utils/use-constant.js';\n\n/**\n * A hook that allows an element to be dragged.\n *\n * @internal\n */\nfunction useDrag(props) {\n    var groupDragControls = props.dragControls, visualElement = props.visualElement;\n    var transformPagePoint = useContext(MotionConfigContext).transformPagePoint;\n    var dragControls = useConstant(function () {\n        return new VisualElementDragControls({\n            visualElement: visualElement,\n        });\n    });\n    dragControls.setProps(__assign(__assign({}, props), { transformPagePoint: transformPagePoint }));\n    // If we've been provided a DragControls for manual control over the drag gesture,\n    // subscribe this component to it on mount.\n    useEffect(function () { return groupDragControls && groupDragControls.subscribe(dragControls); }, [dragControls]);\n    // Mount the drag controls with the visualElement\n    useEffect(function () { return dragControls.mount(visualElement); }, []);\n}\n\nexport { useDrag };\n","import { useRef, useContext, useEffect } from 'react';\nimport { MotionConfigContext } from '../context/MotionConfigContext.js';\nimport { useUnmountEffect } from '../utils/use-unmount-effect.js';\nimport { usePointerEvent } from '../events/use-pointer-event.js';\nimport { PanSession } from './PanSession.js';\n\n/**\n *\n * @param handlers -\n * @param ref -\n *\n * @internalremarks\n * Currently this sets new pan gesture functions every render. The memo route has been explored\n * in the past but ultimately we're still creating new functions every render. An optimisation\n * to explore is creating the pan gestures and loading them into a `ref`.\n *\n * @internal\n */\nfunction usePanGesture(_a) {\n    var onPan = _a.onPan, onPanStart = _a.onPanStart, onPanEnd = _a.onPanEnd, onPanSessionStart = _a.onPanSessionStart, visualElement = _a.visualElement;\n    var hasPanEvents = onPan || onPanStart || onPanEnd || onPanSessionStart;\n    var panSession = useRef(null);\n    var transformPagePoint = useContext(MotionConfigContext).transformPagePoint;\n    var handlers = {\n        onSessionStart: onPanSessionStart,\n        onStart: onPanStart,\n        onMove: onPan,\n        onEnd: function (event, info) {\n            panSession.current = null;\n            onPanEnd && onPanEnd(event, info);\n        },\n    };\n    useEffect(function () {\n        if (panSession.current !== null) {\n            panSession.current.updateHandlers(handlers);\n        }\n    });\n    function onPointerDown(event) {\n        panSession.current = new PanSession(event, handlers, {\n            transformPagePoint: transformPagePoint,\n        });\n    }\n    usePointerEvent(visualElement, \"pointerdown\", hasPanEvents && onPointerDown);\n    useUnmountEffect(function () { return panSession.current && panSession.current.end(); });\n}\n\nexport { usePanGesture };\n","var makeRenderlessComponent = function (hook) { return function (props) {\n    hook(props);\n    return null;\n}; };\n\nexport { makeRenderlessComponent };\n","import { useDrag } from '../../gestures/drag/use-drag.js';\nimport { usePanGesture } from '../../gestures/use-pan-gesture.js';\nimport { makeRenderlessComponent } from '../utils/make-renderless-component.js';\n\nvar drag = {\n    pan: makeRenderlessComponent(usePanGesture),\n    drag: makeRenderlessComponent(useDrag),\n};\n\nexport { drag };\n","import { __rest, __assign, __read } from 'tslib';\nimport { invariant } from 'hey-listen';\n\nfunction isCSSVariable(value) {\n    return typeof value === \"string\" && value.startsWith(\"var(--\");\n}\n/**\n * Parse Framer's special CSS variable format into a CSS token and a fallback.\n *\n * ```\n * `var(--foo, #fff)` => [`--foo`, '#fff']\n * ```\n *\n * @param current\n */\nvar cssVariableRegex = /var\\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\\)/;\nfunction parseCSSVariable(current) {\n    var match = cssVariableRegex.exec(current);\n    if (!match)\n        return [,];\n    var _a = __read(match, 3), token = _a[1], fallback = _a[2];\n    return [token, fallback];\n}\nvar maxDepth = 4;\nfunction getVariableValue(current, element, depth) {\n    if (depth === void 0) { depth = 1; }\n    invariant(depth <= maxDepth, \"Max CSS variable fallback depth detected in property \\\"\" + current + \"\\\". This may indicate a circular fallback dependency.\");\n    var _a = __read(parseCSSVariable(current), 2), token = _a[0], fallback = _a[1];\n    // No CSS variable detected\n    if (!token)\n        return;\n    // Attempt to read this CSS variable off the element\n    var resolved = window.getComputedStyle(element).getPropertyValue(token);\n    if (resolved) {\n        return resolved.trim();\n    }\n    else if (isCSSVariable(fallback)) {\n        // The fallback might itself be a CSS variable, in which case we attempt to resolve it too.\n        return getVariableValue(fallback, element, depth + 1);\n    }\n    else {\n        return fallback;\n    }\n}\n/**\n * Resolve CSS variables from\n *\n * @internal\n */\nfunction resolveCSSVariables(visualElement, _a, transitionEnd) {\n    var _b;\n    var target = __rest(_a, []);\n    var element = visualElement.getInstance();\n    if (!(element instanceof HTMLElement))\n        return { target: target, transitionEnd: transitionEnd };\n    // If `transitionEnd` isn't `undefined`, clone it. We could clone `target` and `transitionEnd`\n    // only if they change but I think this reads clearer and this isn't a performance-critical path.\n    if (transitionEnd) {\n        transitionEnd = __assign({}, transitionEnd);\n    }\n    // Go through existing `MotionValue`s and ensure any existing CSS variables are resolved\n    visualElement.forEachValue(function (value) {\n        var current = value.get();\n        if (!isCSSVariable(current))\n            return;\n        var resolved = getVariableValue(current, element);\n        if (resolved)\n            value.set(resolved);\n    });\n    // Cycle through every target property and resolve CSS variables. Currently\n    // we only read single-var properties like `var(--foo)`, not `calc(var(--foo) + 20px)`\n    for (var key in target) {\n        var current = target[key];\n        if (!isCSSVariable(current))\n            continue;\n        var resolved = getVariableValue(current, element);\n        if (!resolved)\n            continue;\n        // Clone target if it hasn't already been\n        target[key] = resolved;\n        // If the user hasn't already set this key on `transitionEnd`, set it to the unresolved\n        // CSS variable. This will ensure that after the animation the component will reflect\n        // changes in the value of the CSS variable.\n        if (transitionEnd)\n            (_b = transitionEnd[key]) !== null && _b !== void 0 ? _b : (transitionEnd[key] = current);\n    }\n    return { target: target, transitionEnd: transitionEnd };\n}\n\nexport { cssVariableRegex, parseCSSVariable, resolveCSSVariables };\n","import { __assign } from 'tslib';\nimport { complex, px } from 'style-value-types';\nimport { mix } from 'popmotion';\nimport { cssVariableRegex } from '../utils/css-variables-conversion.js';\n\nfunction pixelsToPercent(pixels, axis) {\n    return (pixels / (axis.max - axis.min)) * 100;\n}\n/**\n * We always correct borderRadius as a percentage rather than pixels to reduce paints.\n * For example, if you are projecting a box that is 100px wide with a 10px borderRadius\n * into a box that is 200px wide with a 20px borderRadius, that is actually a 10%\n * borderRadius in both states. If we animate between the two in pixels that will trigger\n * a paint each time. If we animate between the two in percentage we'll avoid a paint.\n */\nfunction correctBorderRadius(latest, _layoutState, _a) {\n    var target = _a.target;\n    /**\n     * If latest is a string, if it's a percentage we can return immediately as it's\n     * going to be stretched appropriately. Otherwise, if it's a pixel, convert it to a number.\n     */\n    if (typeof latest === \"string\") {\n        if (px.test(latest)) {\n            latest = parseFloat(latest);\n        }\n        else {\n            return latest;\n        }\n    }\n    /**\n     * If latest is a number, it's a pixel value. We use the current viewportBox to calculate that\n     * pixel value as a percentage of each axis\n     */\n    var x = pixelsToPercent(latest, target.x);\n    var y = pixelsToPercent(latest, target.y);\n    return x + \"% \" + y + \"%\";\n}\nvar varToken = \"_$css\";\nfunction correctBoxShadow(latest, _a) {\n    var delta = _a.delta, treeScale = _a.treeScale;\n    var original = latest;\n    /**\n     * We need to first strip and store CSS variables from the string.\n     */\n    var containsCSSVariables = latest.includes(\"var(\");\n    var cssVariables = [];\n    if (containsCSSVariables) {\n        latest = latest.replace(cssVariableRegex, function (match) {\n            cssVariables.push(match);\n            return varToken;\n        });\n    }\n    var shadow = complex.parse(latest);\n    // TODO: Doesn't support multiple shadows\n    if (shadow.length > 5)\n        return original;\n    var template = complex.createTransformer(latest);\n    var offset = typeof shadow[0] !== \"number\" ? 1 : 0;\n    // Calculate the overall context scale\n    var xScale = delta.x.scale * treeScale.x;\n    var yScale = delta.y.scale * treeScale.y;\n    shadow[0 + offset] /= xScale;\n    shadow[1 + offset] /= yScale;\n    /**\n     * Ideally we'd correct x and y scales individually, but because blur and\n     * spread apply to both we have to take a scale average and apply that instead.\n     * We could potentially improve the outcome of this by incorporating the ratio between\n     * the two scales.\n     */\n    var averageScale = mix(xScale, yScale, 0.5);\n    // Blur\n    if (typeof shadow[2 + offset] === \"number\")\n        shadow[2 + offset] /= averageScale;\n    // Spread\n    if (typeof shadow[3 + offset] === \"number\")\n        shadow[3 + offset] /= averageScale;\n    var output = template(shadow);\n    if (containsCSSVariables) {\n        var i_1 = 0;\n        output = output.replace(varToken, function () {\n            var cssVariable = cssVariables[i_1];\n            i_1++;\n            return cssVariable;\n        });\n    }\n    return output;\n}\nvar borderCorrectionDefinition = {\n    process: correctBorderRadius,\n};\nvar defaultScaleCorrectors = {\n    borderRadius: __assign(__assign({}, borderCorrectionDefinition), { applyTo: [\n            \"borderTopLeftRadius\",\n            \"borderTopRightRadius\",\n            \"borderBottomLeftRadius\",\n            \"borderBottomRightRadius\",\n        ] }),\n    borderTopLeftRadius: borderCorrectionDefinition,\n    borderTopRightRadius: borderCorrectionDefinition,\n    borderBottomLeftRadius: borderCorrectionDefinition,\n    borderBottomRightRadius: borderCorrectionDefinition,\n    boxShadow: {\n        process: correctBoxShadow,\n    },\n};\n\nexport { correctBorderRadius, correctBoxShadow, defaultScaleCorrectors, pixelsToPercent };\n","import { __extends, __rest, __assign, __read } from 'tslib';\nimport * as React from 'react';\nimport { eachAxis } from '../../../utils/each-axis.js';\nimport { startAnimation, getValueTransition } from '../../../animation/utils/transitions.js';\nimport { checkIfParentHasChanged, calcRelativeOffset, tweenAxis } from './utils.js';\nimport { VisibilityAction } from '../../../components/AnimateSharedLayout/types.js';\nimport { usePresence } from '../../../components/AnimatePresence/use-presence.js';\nimport { axisBox } from '../../../utils/geometry/index.js';\nimport { addScaleCorrection } from '../../../render/dom/projection/scale-correction.js';\nimport { defaultScaleCorrectors } from '../../../render/dom/projection/default-scale-correctors.js';\n\nvar progressTarget = 1000;\nvar Animate = /** @class */ (function (_super) {\n    __extends(Animate, _super);\n    function Animate() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         * A mutable object that tracks the target viewport box\n         * for the current animation frame.\n         */\n        _this.frameTarget = axisBox();\n        /**\n         * The current animation target, we use this to check whether to start\n         * a new animation or continue the existing one.\n         */\n        _this.currentAnimationTarget = axisBox();\n        /**\n         * Track whether we're animating this axis.\n         */\n        _this.isAnimating = {\n            x: false,\n            y: false,\n        };\n        _this.stopAxisAnimation = {\n            x: undefined,\n            y: undefined,\n        };\n        _this.isAnimatingTree = false;\n        _this.animate = function (target, origin, _a) {\n            if (_a === void 0) { _a = {}; }\n            var originBox = _a.originBox, targetBox = _a.targetBox, visibilityAction = _a.visibilityAction, shouldStackAnimate = _a.shouldStackAnimate, onComplete = _a.onComplete, prevParent = _a.prevParent, config = __rest(_a, [\"originBox\", \"targetBox\", \"visibilityAction\", \"shouldStackAnimate\", \"onComplete\", \"prevParent\"]);\n            var _b = _this.props, visualElement = _b.visualElement, layout = _b.layout;\n            /**\n             * Early return if we've been instructed not to animate this render.\n             */\n            if (shouldStackAnimate === false) {\n                _this.isAnimatingTree = false;\n                return _this.safeToRemove();\n            }\n            /**\n             * Prioritise tree animations\n             */\n            if (_this.isAnimatingTree && shouldStackAnimate !== true) {\n                return;\n            }\n            else if (shouldStackAnimate) {\n                _this.isAnimatingTree = true;\n            }\n            /**\n             * Allow the measured origin (prev bounding box) and target (actual layout) to be\n             * overridden by the provided config.\n             */\n            origin = originBox || origin;\n            target = targetBox || target;\n            /**\n             * If this element has a projecting parent, there's an opportunity to animate\n             * it relatively to that parent rather than relatively to the viewport. This\n             * allows us to add orchestrated animations.\n             */\n            var isRelative = false;\n            var projectionParent = visualElement.getProjectionParent();\n            if (projectionParent) {\n                var prevParentViewportBox = projectionParent.prevViewportBox;\n                var parentLayout = projectionParent.getLayoutState().layout;\n                /**\n                 * If we're being provided a previous parent VisualElement by AnimateSharedLayout\n                 */\n                if (prevParent) {\n                    /**\n                     * If we've been provided an explicit target box it means we're animating back\n                     * to this previous parent. So we can make a relative box by comparing to the previous\n                     * parent's layout\n                     */\n                    if (targetBox) {\n                        parentLayout = prevParent.getLayoutState().layout;\n                    }\n                    /**\n                     * Likewise if we've been provided an explicit origin box it means we're\n                     * animating out from a different element. So we should figure out where that was\n                     * on screen relative to the new parent element.\n                     */\n                    if (originBox &&\n                        !checkIfParentHasChanged(prevParent, projectionParent) &&\n                        prevParent.prevViewportBox) {\n                        prevParentViewportBox = prevParent.prevViewportBox;\n                    }\n                }\n                if (prevParentViewportBox &&\n                    isProvidedCorrectDataForRelativeSharedLayout(prevParent, originBox, targetBox)) {\n                    isRelative = true;\n                    origin = calcRelativeOffset(prevParentViewportBox, origin);\n                    target = calcRelativeOffset(parentLayout, target);\n                }\n            }\n            var boxHasMoved = hasMoved(origin, target);\n            var animations = eachAxis(function (axis) {\n                var _a, _b;\n                /**\n                 * If layout is set to \"position\", we can resize the origin box based on the target\n                 * box and only animate its position.\n                 */\n                if (layout === \"position\") {\n                    var targetLength = target[axis].max - target[axis].min;\n                    origin[axis].max = origin[axis].min + targetLength;\n                }\n                if (visualElement.projection.isTargetLocked) {\n                    return;\n                }\n                else if (visibilityAction !== undefined) {\n                    visualElement.setVisibility(visibilityAction === VisibilityAction.Show);\n                }\n                else if (boxHasMoved) {\n                    // If the box has moved, animate between it's current visual state and its\n                    // final state\n                    return _this.animateAxis(axis, target[axis], origin[axis], __assign(__assign({}, config), { isRelative: isRelative }));\n                }\n                else {\n                    (_b = (_a = _this.stopAxisAnimation)[axis]) === null || _b === void 0 ? void 0 : _b.call(_a);\n                    // If the box has remained in the same place, immediately set the axis target\n                    // to the final desired state\n                    return visualElement.setProjectionTargetAxis(axis, target[axis].min, target[axis].max, isRelative);\n                }\n            });\n            // Force a render to ensure there's no flash of uncorrected bounding box.\n            visualElement.syncRender();\n            /**\n             * If this visualElement isn't present (ie it's been removed from the tree by the user but\n             * kept in by the tree by AnimatePresence) then call safeToRemove when all axis animations\n             * have successfully finished.\n             */\n            return Promise.all(animations).then(function () {\n                _this.isAnimatingTree = false;\n                onComplete && onComplete();\n                visualElement.notifyLayoutAnimationComplete();\n            });\n        };\n        return _this;\n    }\n    Animate.prototype.componentDidMount = function () {\n        var _this = this;\n        var visualElement = this.props.visualElement;\n        visualElement.animateMotionValue = startAnimation;\n        visualElement.enableLayoutProjection();\n        this.unsubLayoutReady = visualElement.onLayoutUpdate(this.animate);\n        visualElement.layoutSafeToRemove = function () { return _this.safeToRemove(); };\n        addScaleCorrection(defaultScaleCorrectors);\n    };\n    Animate.prototype.componentWillUnmount = function () {\n        var _this = this;\n        this.unsubLayoutReady();\n        eachAxis(function (axis) { var _a, _b; return (_b = (_a = _this.stopAxisAnimation)[axis]) === null || _b === void 0 ? void 0 : _b.call(_a); });\n    };\n    /**\n     * TODO: This manually performs animations on the visualElement's layout progress\n     * values. It'd be preferable to amend the startLayoutAxisAnimation\n     * API to accept more custom animations like this.\n     */\n    Animate.prototype.animateAxis = function (axis, target, origin, _a) {\n        var _this = this;\n        var _b, _c;\n        var _d = _a === void 0 ? {} : _a, transition = _d.transition, isRelative = _d.isRelative;\n        /**\n         * If we're not animating to a new target, don't run this animation\n         */\n        if (this.isAnimating[axis] &&\n            axisIsEqual(target, this.currentAnimationTarget[axis])) {\n            return;\n        }\n        (_c = (_b = this.stopAxisAnimation)[axis]) === null || _c === void 0 ? void 0 : _c.call(_b);\n        this.isAnimating[axis] = true;\n        var visualElement = this.props.visualElement;\n        var frameTarget = this.frameTarget[axis];\n        var layoutProgress = visualElement.getProjectionAnimationProgress()[axis];\n        /**\n         * Set layout progress back to 0. We set it twice to hard-reset any velocity that might\n         * be re-incoporated into a subsequent spring animation.\n         */\n        layoutProgress.clearListeners();\n        layoutProgress.set(0);\n        layoutProgress.set(0);\n        /**\n         * Create an animation function to run once per frame. This will tween the visual bounding box from\n         * origin to target using the latest progress value.\n         */\n        var frame = function () {\n            // Convert the latest layoutProgress, which is a value from 0-1000, into a 0-1 progress\n            var p = layoutProgress.get() / progressTarget;\n            // Tween the axis and update the visualElement with the latest values\n            tweenAxis(frameTarget, origin, target, p);\n            visualElement.setProjectionTargetAxis(axis, frameTarget.min, frameTarget.max, isRelative);\n        };\n        // Synchronously run a frame to ensure there's no flash of the uncorrected bounding box.\n        frame();\n        // Create a function to stop animation on this specific axis\n        var unsubscribeProgress = layoutProgress.onChange(frame);\n        this.stopAxisAnimation[axis] = function () {\n            _this.isAnimating[axis] = false;\n            layoutProgress.stop();\n            unsubscribeProgress();\n        };\n        this.currentAnimationTarget[axis] = target;\n        var layoutTransition = transition ||\n            visualElement.getDefaultTransition() ||\n            defaultLayoutTransition;\n        // Start the animation on this axis\n        var animation = startAnimation(axis === \"x\" ? \"layoutX\" : \"layoutY\", layoutProgress, progressTarget, layoutTransition && getValueTransition(layoutTransition, \"layout\")).then(this.stopAxisAnimation[axis]);\n        return animation;\n    };\n    Animate.prototype.safeToRemove = function () {\n        var _a, _b;\n        (_b = (_a = this.props).safeToRemove) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    Animate.prototype.render = function () {\n        return null;\n    };\n    return Animate;\n}(React.Component));\nfunction AnimateLayoutContextProvider(props) {\n    var _a = __read(usePresence(), 2), safeToRemove = _a[1];\n    return React.createElement(Animate, __assign({}, props, { safeToRemove: safeToRemove }));\n}\nfunction hasMoved(a, b) {\n    return (!isZeroBox(a) &&\n        !isZeroBox(b) &&\n        (!axisIsEqual(a.x, b.x) || !axisIsEqual(a.y, b.y)));\n}\nvar zeroAxis = { min: 0, max: 0 };\nfunction isZeroBox(a) {\n    return axisIsEqual(a.x, zeroAxis) && axisIsEqual(a.y, zeroAxis);\n}\nfunction axisIsEqual(a, b) {\n    return a.min === b.min && a.max === b.max;\n}\nvar defaultLayoutTransition = {\n    duration: 0.45,\n    ease: [0.4, 0, 0.1, 1],\n};\nfunction isProvidedCorrectDataForRelativeSharedLayout(prevParent, originBox, targetBox) {\n    return prevParent || (!prevParent && !(originBox || targetBox));\n}\n\nexport { AnimateLayoutContextProvider };\n","import { __extends, __assign } from 'tslib';\nimport React__default, { useContext } from 'react';\nimport { isSharedLayout, SharedLayoutContext, FramerTreeLayoutContext } from '../../../context/SharedLayoutContext.js';\nimport { snapshotViewportBox } from '../../../render/dom/projection/utils.js';\n\n/**\n * This component is responsible for scheduling the measuring of the motion component\n */\nvar Measure = /** @class */ (function (_super) {\n    __extends(Measure, _super);\n    function Measure() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * If this is a child of a SyncContext, register the VisualElement with it on mount.\n     */\n    Measure.prototype.componentDidMount = function () {\n        var _a = this.props, syncLayout = _a.syncLayout, framerSyncLayout = _a.framerSyncLayout, visualElement = _a.visualElement;\n        isSharedLayout(syncLayout) && syncLayout.register(visualElement);\n        isSharedLayout(framerSyncLayout) &&\n            framerSyncLayout.register(visualElement);\n        visualElement.onUnmount(function () {\n            if (isSharedLayout(syncLayout)) {\n                syncLayout.remove(visualElement);\n            }\n            if (isSharedLayout(framerSyncLayout)) {\n                framerSyncLayout.remove(visualElement);\n            }\n        });\n    };\n    /**\n     * If this is a child of a SyncContext, notify it that it needs to re-render. It will then\n     * handle the snapshotting.\n     *\n     * If it is stand-alone component, add it to the batcher.\n     */\n    Measure.prototype.getSnapshotBeforeUpdate = function () {\n        var _a = this.props, syncLayout = _a.syncLayout, visualElement = _a.visualElement;\n        if (isSharedLayout(syncLayout)) {\n            syncLayout.syncUpdate();\n        }\n        else {\n            snapshotViewportBox(visualElement);\n            syncLayout.add(visualElement);\n        }\n        return null;\n    };\n    Measure.prototype.componentDidUpdate = function () {\n        var syncLayout = this.props.syncLayout;\n        if (!isSharedLayout(syncLayout))\n            syncLayout.flush();\n    };\n    Measure.prototype.render = function () {\n        return null;\n    };\n    return Measure;\n}(React__default.Component));\nfunction MeasureContextProvider(props) {\n    var syncLayout = useContext(SharedLayoutContext);\n    var framerSyncLayout = useContext(FramerTreeLayoutContext);\n    return (React__default.createElement(Measure, __assign({}, props, { syncLayout: syncLayout, framerSyncLayout: framerSyncLayout })));\n}\n\nexport { MeasureContextProvider };\n","import { AnimateLayoutContextProvider } from './Animate.js';\nimport { MeasureContextProvider } from './Measure.js';\n\nvar layoutAnimations = {\n    measureLayout: MeasureContextProvider,\n    layoutAnimation: AnimateLayoutContextProvider,\n};\n\nexport { layoutAnimations };\n","function shallowCompare(next, prev) {\n    if (!Array.isArray(prev))\n        return false;\n    var prevLength = prev.length;\n    if (prevLength !== next.length)\n        return false;\n    for (var i = 0; i < prevLength; i++) {\n        if (prev[i] !== next[i])\n            return false;\n    }\n    return true;\n}\n\nexport { shallowCompare };\n","import { __spreadArray, __read, __assign, __rest } from 'tslib';\nimport { isAnimationControls } from '../../animation/utils/is-animation-controls.js';\nimport { isKeyframesTarget } from '../../animation/utils/is-keyframes-target.js';\nimport { shallowCompare } from '../../utils/shallow-compare.js';\nimport { animateVisualElement } from './animation.js';\nimport { AnimationType } from './types.js';\nimport { isVariantLabels, resolveVariant, isVariantLabel } from './variants.js';\n\nvar variantPriorityOrder = [\n    AnimationType.Animate,\n    AnimationType.Hover,\n    AnimationType.Tap,\n    AnimationType.Drag,\n    AnimationType.Focus,\n    AnimationType.Exit,\n];\nvar reversePriorityOrder = __spreadArray([], __read(variantPriorityOrder)).reverse();\nvar numAnimationTypes = variantPriorityOrder.length;\nfunction animateList(visualElement) {\n    return function (animations) {\n        return Promise.all(animations.map(function (_a) {\n            var animation = _a.animation, options = _a.options;\n            return animateVisualElement(visualElement, animation, options);\n        }));\n    };\n}\nfunction createAnimationState(visualElement) {\n    var animate = animateList(visualElement);\n    var state = createState();\n    var allAnimatedKeys = {};\n    var isInitialRender = true;\n    /**\n     * This function will be used to reduce the animation definitions for\n     * each active animation type into an object of resolved values for it.\n     */\n    var buildResolvedTypeValues = function (acc, definition) {\n        var resolved = resolveVariant(visualElement, definition);\n        if (resolved) {\n            resolved.transition; var transitionEnd = resolved.transitionEnd, target = __rest(resolved, [\"transition\", \"transitionEnd\"]);\n            acc = __assign(__assign(__assign({}, acc), target), transitionEnd);\n        }\n        return acc;\n    };\n    function isAnimated(key) {\n        return allAnimatedKeys[key] !== undefined;\n    }\n    /**\n     * This just allows us to inject mocked animation functions\n     * @internal\n     */\n    function setAnimateFunction(makeAnimator) {\n        animate = makeAnimator(visualElement);\n    }\n    /**\n     * When we receive new props, we need to:\n     * 1. Create a list of protected keys for each type. This is a directory of\n     *    value keys that are currently being \"handled\" by types of a higher priority\n     *    so that whenever an animation is played of a given type, these values are\n     *    protected from being animated.\n     * 2. Determine if an animation type needs animating.\n     * 3. Determine if any values have been removed from a type and figure out\n     *    what to animate those to.\n     */\n    function animateChanges(options, changedActiveType) {\n        var _a;\n        var props = visualElement.getProps();\n        var context = visualElement.getVariantContext(true) || {};\n        /**\n         * A list of animations that we'll build into as we iterate through the animation\n         * types. This will get executed at the end of the function.\n         */\n        var animations = [];\n        /**\n         * Keep track of which values have been removed. Then, as we hit lower priority\n         * animation types, we can check if they contain removed values and animate to that.\n         */\n        var removedKeys = new Set();\n        /**\n         * A dictionary of all encountered keys. This is an object to let us build into and\n         * copy it without iteration. Each time we hit an animation type we set its protected\n         * keys - the keys its not allowed to animate - to the latest version of this object.\n         */\n        var encounteredKeys = {};\n        /**\n         * If a variant has been removed at a given index, and this component is controlling\n         * variant animations, we want to ensure lower-priority variants are forced to animate.\n         */\n        var removedVariantIndex = Infinity;\n        var _loop_1 = function (i) {\n            var type = reversePriorityOrder[i];\n            var typeState = state[type];\n            var prop = (_a = props[type]) !== null && _a !== void 0 ? _a : context[type];\n            var propIsVariant = isVariantLabel(prop);\n            /**\n             * If this type has *just* changed isActive status, set activeDelta\n             * to that status. Otherwise set to null.\n             */\n            var activeDelta = type === changedActiveType ? typeState.isActive : null;\n            if (activeDelta === false)\n                removedVariantIndex = i;\n            /**\n             * If this prop is an inherited variant, rather than been set directly on the\n             * component itself, we want to make sure we allow the parent to trigger animations.\n             *\n             * TODO: Can probably change this to a !isControllingVariants check\n             */\n            var isInherited = prop === context[type] && prop !== props[type] && propIsVariant;\n            /**\n             *\n             */\n            if (isInherited &&\n                isInitialRender &&\n                visualElement.manuallyAnimateOnMount) {\n                isInherited = false;\n            }\n            /**\n             * Set all encountered keys so far as the protected keys for this type. This will\n             * be any key that has been animated or otherwise handled by active, higher-priortiy types.\n             */\n            typeState.protectedKeys = __assign({}, encounteredKeys);\n            // Check if we can skip analysing this prop early\n            if (\n            // If it isn't active and hasn't *just* been set as inactive\n            (!typeState.isActive && activeDelta === null) ||\n                // If we didn't and don't have any defined prop for this animation type\n                (!prop && !typeState.prevProp) ||\n                // Or if the prop doesn't define an animation\n                isAnimationControls(prop) ||\n                typeof prop === \"boolean\") {\n                return \"continue\";\n            }\n            /**\n             * As we go look through the values defined on this type, if we detect\n             * a changed value or a value that was removed in a higher priority, we set\n             * this to true and add this prop to the animation list.\n             */\n            var shouldAnimateType = variantsHaveChanged(typeState.prevProp, prop) ||\n                // If we're making this variant active, we want to always make it active\n                (type === changedActiveType &&\n                    typeState.isActive &&\n                    !isInherited &&\n                    propIsVariant) ||\n                // If we removed a higher-priority variant (i is in reverse order)\n                (i > removedVariantIndex && propIsVariant);\n            /**\n             * As animations can be set as variant lists, variants or target objects, we\n             * coerce everything to an array if it isn't one already\n             */\n            var definitionList = Array.isArray(prop) ? prop : [prop];\n            /**\n             * Build an object of all the resolved values. We'll use this in the subsequent\n             * animateChanges calls to determine whether a value has changed.\n             */\n            var resolvedValues = definitionList.reduce(buildResolvedTypeValues, {});\n            if (activeDelta === false)\n                resolvedValues = {};\n            /**\n             * Now we need to loop through all the keys in the prev prop and this prop,\n             * and decide:\n             * 1. If the value has changed, and needs animating\n             * 2. If it has been removed, and needs adding to the removedKeys set\n             * 3. If it has been removed in a higher priority type and needs animating\n             * 4. If it hasn't been removed in a higher priority but hasn't changed, and\n             *    needs adding to the type's protectedKeys list.\n             */\n            var _b = typeState.prevResolvedValues, prevResolvedValues = _b === void 0 ? {} : _b;\n            var allKeys = __assign(__assign({}, prevResolvedValues), resolvedValues);\n            var markToAnimate = function (key) {\n                shouldAnimateType = true;\n                removedKeys.delete(key);\n                typeState.needsAnimating[key] = true;\n            };\n            for (var key in allKeys) {\n                var next = resolvedValues[key];\n                var prev = prevResolvedValues[key];\n                // If we've already handled this we can just skip ahead\n                if (encounteredKeys.hasOwnProperty(key))\n                    continue;\n                /**\n                 * If the value has changed, we probably want to animate it.\n                 */\n                if (next !== prev) {\n                    /**\n                     * If both values are keyframes, we need to shallow compare them to\n                     * detect whether any value has changed. If it has, we animate it.\n                     */\n                    if (isKeyframesTarget(next) && isKeyframesTarget(prev)) {\n                        if (!shallowCompare(next, prev)) {\n                            markToAnimate(key);\n                        }\n                        else {\n                            /**\n                             * If it hasn't changed, we want to ensure it doesn't animate by\n                             * adding it to the list of protected keys.\n                             */\n                            typeState.protectedKeys[key] = true;\n                        }\n                    }\n                    else if (next !== undefined) {\n                        // If next is defined and doesn't equal prev, it needs animating\n                        markToAnimate(key);\n                    }\n                    else {\n                        // If it's undefined, it's been removed.\n                        removedKeys.add(key);\n                    }\n                }\n                else if (next !== undefined && removedKeys.has(key)) {\n                    /**\n                     * If next hasn't changed and it isn't undefined, we want to check if it's\n                     * been removed by a higher priority\n                     */\n                    markToAnimate(key);\n                }\n                else {\n                    /**\n                     * If it hasn't changed, we add it to the list of protected values\n                     * to ensure it doesn't get animated.\n                     */\n                    typeState.protectedKeys[key] = true;\n                }\n            }\n            /**\n             * Update the typeState so next time animateChanges is called we can compare the\n             * latest prop and resolvedValues to these.\n             */\n            typeState.prevProp = prop;\n            typeState.prevResolvedValues = resolvedValues;\n            /**\n             *\n             */\n            if (typeState.isActive) {\n                encounteredKeys = __assign(__assign({}, encounteredKeys), resolvedValues);\n            }\n            if (isInitialRender && visualElement.blockInitialAnimation) {\n                shouldAnimateType = false;\n            }\n            /**\n             * If this is an inherited prop we want to hard-block animations\n             * TODO: Test as this should probably still handle animations triggered\n             * by removed values?\n             */\n            if (shouldAnimateType && !isInherited) {\n                animations.push.apply(animations, __spreadArray([], __read(definitionList.map(function (animation) { return ({\n                    animation: animation,\n                    options: __assign({ type: type }, options),\n                }); }))));\n            }\n        };\n        /**\n         * Iterate through all animation types in reverse priority order. For each, we want to\n         * detect which values it's handling and whether or not they've changed (and therefore\n         * need to be animated). If any values have been removed, we want to detect those in\n         * lower priority props and flag for animation.\n         */\n        for (var i = 0; i < numAnimationTypes; i++) {\n            _loop_1(i);\n        }\n        allAnimatedKeys = __assign({}, encounteredKeys);\n        /**\n         * If there are some removed value that haven't been dealt with,\n         * we need to create a new animation that falls back either to the value\n         * defined in the style prop, or the last read value.\n         */\n        if (removedKeys.size) {\n            var fallbackAnimation_1 = {};\n            removedKeys.forEach(function (key) {\n                var fallbackTarget = visualElement.getBaseTarget(key);\n                if (fallbackTarget !== undefined) {\n                    fallbackAnimation_1[key] = fallbackTarget;\n                }\n            });\n            animations.push({ animation: fallbackAnimation_1 });\n        }\n        var shouldAnimate = Boolean(animations.length);\n        if (isInitialRender &&\n            props.initial === false &&\n            !visualElement.manuallyAnimateOnMount) {\n            shouldAnimate = false;\n        }\n        isInitialRender = false;\n        return shouldAnimate ? animate(animations) : Promise.resolve();\n    }\n    /**\n     * Change whether a certain animation type is active.\n     */\n    function setActive(type, isActive, options) {\n        var _a;\n        // If the active state hasn't changed, we can safely do nothing here\n        if (state[type].isActive === isActive)\n            return Promise.resolve();\n        // Propagate active change to children\n        (_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.forEach(function (child) { var _a; return (_a = child.animationState) === null || _a === void 0 ? void 0 : _a.setActive(type, isActive); });\n        state[type].isActive = isActive;\n        return animateChanges(options, type);\n    }\n    return {\n        isAnimated: isAnimated,\n        animateChanges: animateChanges,\n        setActive: setActive,\n        setAnimateFunction: setAnimateFunction,\n        getState: function () { return state; },\n    };\n}\nfunction variantsHaveChanged(prev, next) {\n    if (typeof next === \"string\") {\n        return next !== prev;\n    }\n    else if (isVariantLabels(next)) {\n        return !shallowCompare(next, prev);\n    }\n    return false;\n}\nfunction createTypeState(isActive) {\n    if (isActive === void 0) { isActive = false; }\n    return {\n        isActive: isActive,\n        protectedKeys: {},\n        needsAnimating: {},\n        prevResolvedValues: {},\n    };\n}\nfunction createState() {\n    var _a;\n    return _a = {},\n        _a[AnimationType.Animate] = createTypeState(true),\n        _a[AnimationType.Hover] = createTypeState(),\n        _a[AnimationType.Tap] = createTypeState(),\n        _a[AnimationType.Drag] = createTypeState(),\n        _a[AnimationType.Focus] = createTypeState(),\n        _a[AnimationType.Exit] = createTypeState(),\n        _a;\n}\n\nexport { createAnimationState, variantPriorityOrder, variantsHaveChanged };\n","import { __read } from 'tslib';\nimport { useEffect, useContext } from 'react';\nimport { isAnimationControls } from '../../animation/utils/is-animation-controls.js';\nimport { usePresence } from '../../components/AnimatePresence/use-presence.js';\nimport { PresenceContext } from '../../context/PresenceContext.js';\nimport { createAnimationState } from '../../render/utils/animation-state.js';\nimport { AnimationType } from '../../render/utils/types.js';\nimport { makeRenderlessComponent } from '../utils/make-renderless-component.js';\n\nvar animations = {\n    animation: makeRenderlessComponent(function (_a) {\n        var visualElement = _a.visualElement, animate = _a.animate;\n        /**\n         * We dynamically generate the AnimationState manager as it contains a reference\n         * to the underlying animation library. We only want to load that if we load this,\n         * so people can optionally code split it out using the `m` component.\n         */\n        visualElement.animationState || (visualElement.animationState = createAnimationState(visualElement));\n        /**\n         * Subscribe any provided AnimationControls to the component's VisualElement\n         */\n        if (isAnimationControls(animate)) {\n            useEffect(function () { return animate.subscribe(visualElement); }, [animate]);\n        }\n    }),\n    exit: makeRenderlessComponent(function (props) {\n        var custom = props.custom, visualElement = props.visualElement;\n        var _a = __read(usePresence(), 2), isPresent = _a[0], onExitComplete = _a[1];\n        var presenceContext = useContext(PresenceContext);\n        useEffect(function () {\n            var _a, _b;\n            var animation = (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Exit, !isPresent, { custom: (_b = presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.custom) !== null && _b !== void 0 ? _b : custom });\n            !isPresent && (animation === null || animation === void 0 ? void 0 : animation.then(onExitComplete));\n        }, [isPresent]);\n    }),\n};\n\nexport { animations };\n","import { AnimationType } from '../render/utils/types.js';\nimport { useDomEvent } from '../events/use-dom-event.js';\n\n/**\n *\n * @param props\n * @param ref\n * @internal\n */\nfunction useFocusGesture(_a) {\n    var whileFocus = _a.whileFocus, visualElement = _a.visualElement;\n    var onFocus = function () {\n        var _a;\n        (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Focus, true);\n    };\n    var onBlur = function () {\n        var _a;\n        (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Focus, false);\n    };\n    useDomEvent(visualElement, \"focus\", whileFocus ? onFocus : undefined);\n    useDomEvent(visualElement, \"blur\", whileFocus ? onBlur : undefined);\n}\n\nexport { useFocusGesture };\n","import { isMouseEvent } from './utils/event-type.js';\nimport { AnimationType } from '../render/utils/types.js';\nimport { usePointerEvent } from '../events/use-pointer-event.js';\nimport { isDragActive } from './drag/utils/lock.js';\n\nfunction createHoverEvent(visualElement, isActive, callback) {\n    return function (event, info) {\n        var _a;\n        if (!isMouseEvent(event) || isDragActive())\n            return;\n        callback === null || callback === void 0 ? void 0 : callback(event, info);\n        (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Hover, isActive);\n    };\n}\nfunction useHoverGesture(_a) {\n    var onHoverStart = _a.onHoverStart, onHoverEnd = _a.onHoverEnd, whileHover = _a.whileHover, visualElement = _a.visualElement;\n    usePointerEvent(visualElement, \"pointerenter\", onHoverStart || whileHover\n        ? createHoverEvent(visualElement, true, onHoverStart)\n        : undefined);\n    usePointerEvent(visualElement, \"pointerleave\", onHoverEnd || whileHover\n        ? createHoverEvent(visualElement, false, onHoverEnd)\n        : undefined);\n}\n\nexport { useHoverGesture };\n","/**\n * Recursively traverse up the tree to check whether the provided child node\n * is the parent or a descendant of it.\n *\n * @param parent - Element to find\n * @param child - Element to test against parent\n */\nvar isNodeOrChild = function (parent, child) {\n    if (!child) {\n        return false;\n    }\n    else if (parent === child) {\n        return true;\n    }\n    else {\n        return isNodeOrChild(parent, child.parentElement);\n    }\n};\n\nexport { isNodeOrChild };\n","import { useRef } from 'react';\nimport { isNodeOrChild } from './utils/is-node-or-child.js';\nimport { usePointerEvent, addPointerEvent } from '../events/use-pointer-event.js';\nimport { useUnmountEffect } from '../utils/use-unmount-effect.js';\nimport { pipe } from 'popmotion';\nimport { AnimationType } from '../render/utils/types.js';\nimport { isDragActive } from './drag/utils/lock.js';\n\n/**\n * @param handlers -\n * @internal\n */\nfunction useTapGesture(_a) {\n    var onTap = _a.onTap, onTapStart = _a.onTapStart, onTapCancel = _a.onTapCancel, whileTap = _a.whileTap, visualElement = _a.visualElement;\n    var hasPressListeners = onTap || onTapStart || onTapCancel || whileTap;\n    var isPressing = useRef(false);\n    var cancelPointerEndListeners = useRef(null);\n    function removePointerEndListener() {\n        var _a;\n        (_a = cancelPointerEndListeners.current) === null || _a === void 0 ? void 0 : _a.call(cancelPointerEndListeners);\n        cancelPointerEndListeners.current = null;\n    }\n    function checkPointerEnd() {\n        var _a;\n        removePointerEndListener();\n        isPressing.current = false;\n        (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Tap, false);\n        return !isDragActive();\n    }\n    function onPointerUp(event, info) {\n        if (!checkPointerEnd())\n            return;\n        /**\n         * We only count this as a tap gesture if the event.target is the same\n         * as, or a child of, this component's element\n         */\n        !isNodeOrChild(visualElement.getInstance(), event.target)\n            ? onTapCancel === null || onTapCancel === void 0 ? void 0 : onTapCancel(event, info)\n            : onTap === null || onTap === void 0 ? void 0 : onTap(event, info);\n    }\n    function onPointerCancel(event, info) {\n        if (!checkPointerEnd())\n            return;\n        onTapCancel === null || onTapCancel === void 0 ? void 0 : onTapCancel(event, info);\n    }\n    function onPointerDown(event, info) {\n        var _a;\n        removePointerEndListener();\n        if (isPressing.current)\n            return;\n        isPressing.current = true;\n        cancelPointerEndListeners.current = pipe(addPointerEvent(window, \"pointerup\", onPointerUp), addPointerEvent(window, \"pointercancel\", onPointerCancel));\n        onTapStart === null || onTapStart === void 0 ? void 0 : onTapStart(event, info);\n        (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Tap, true);\n    }\n    usePointerEvent(visualElement, \"pointerdown\", hasPressListeners ? onPointerDown : undefined);\n    useUnmountEffect(removePointerEndListener);\n}\n\nexport { useTapGesture };\n","import { useFocusGesture } from '../../gestures/use-focus-gesture.js';\nimport { useHoverGesture } from '../../gestures/use-hover-gesture.js';\nimport { useTapGesture } from '../../gestures/use-tap-gesture.js';\nimport { makeRenderlessComponent } from '../utils/make-renderless-component.js';\n\nvar gestureAnimations = {\n    tap: makeRenderlessComponent(useTapGesture),\n    focus: makeRenderlessComponent(useFocusGesture),\n    hover: makeRenderlessComponent(useHoverGesture),\n};\n\nexport { gestureAnimations };\n","import { axisBox, delta } from '../../utils/geometry/index.js';\n\nvar createProjectionState = function () { return ({\n    isEnabled: false,\n    isHydrated: false,\n    isTargetLocked: false,\n    target: axisBox(),\n    targetFinal: axisBox(),\n}); };\nfunction createLayoutState() {\n    return {\n        isHydrated: false,\n        layout: axisBox(),\n        layoutCorrected: axisBox(),\n        treeScale: { x: 1, y: 1 },\n        delta: delta(),\n        deltaFinal: delta(),\n        deltaTransform: \"\",\n    };\n}\nvar zeroLayout = createLayoutState();\n\nexport { createLayoutState, createProjectionState, zeroLayout };\n","import { zeroLayout } from '../../utils/state.js';\n\n/**\n * Build a transform style that takes a calculated delta between the element's current\n * space on screen and projects it into the desired space.\n */\nfunction buildLayoutProjectionTransform(_a, treeScale, latestTransform) {\n    var x = _a.x, y = _a.y;\n    /**\n     * The translations we use to calculate are always relative to the viewport coordinate space.\n     * But when we apply scales, we also scale the coordinate space of an element and its children.\n     * For instance if we have a treeScale (the culmination of all parent scales) of 0.5 and we need\n     * to move an element 100 pixels, we actually need to move it 200 in within that scaled space.\n     */\n    var xTranslate = x.translate / treeScale.x;\n    var yTranslate = y.translate / treeScale.y;\n    var transform = \"translate3d(\" + xTranslate + \"px, \" + yTranslate + \"px, 0) \";\n    if (latestTransform) {\n        var rotate = latestTransform.rotate, rotateX = latestTransform.rotateX, rotateY = latestTransform.rotateY;\n        if (rotate)\n            transform += \"rotate(\" + rotate + \") \";\n        if (rotateX)\n            transform += \"rotateX(\" + rotateX + \") \";\n        if (rotateY)\n            transform += \"rotateY(\" + rotateY + \") \";\n    }\n    transform += \"scale(\" + x.scale + \", \" + y.scale + \")\";\n    return !latestTransform && transform === identityProjection ? \"\" : transform;\n}\n/**\n * Take the calculated delta origin and apply it as a transform string.\n */\nfunction buildLayoutProjectionTransformOrigin(_a) {\n    var deltaFinal = _a.deltaFinal;\n    return deltaFinal.x.origin * 100 + \"% \" + deltaFinal.y.origin * 100 + \"% 0\";\n}\nvar identityProjection = buildLayoutProjectionTransform(zeroLayout.delta, zeroLayout.treeScale, { x: 1, y: 1 });\n\nexport { buildLayoutProjectionTransform, buildLayoutProjectionTransformOrigin, identityProjection };\n","import { __spreadArray, __read } from 'tslib';\nimport { SubscriptionManager } from '../../utils/subscription-manager.js';\n\nvar names = [\n    \"LayoutMeasure\",\n    \"BeforeLayoutMeasure\",\n    \"LayoutUpdate\",\n    \"ViewportBoxUpdate\",\n    \"Update\",\n    \"Render\",\n    \"AnimationComplete\",\n    \"LayoutAnimationComplete\",\n    \"AnimationStart\",\n    \"SetAxisTarget\",\n    \"Unmount\",\n];\nfunction createLifecycles() {\n    var managers = names.map(function () { return new SubscriptionManager(); });\n    var propSubscriptions = {};\n    var lifecycles = {\n        clearAllListeners: function () { return managers.forEach(function (manager) { return manager.clear(); }); },\n        updatePropListeners: function (props) {\n            return names.forEach(function (name) {\n                var _a;\n                (_a = propSubscriptions[name]) === null || _a === void 0 ? void 0 : _a.call(propSubscriptions);\n                var on = \"on\" + name;\n                var propListener = props[on];\n                if (propListener) {\n                    propSubscriptions[name] = lifecycles[on](propListener);\n                }\n            });\n        },\n    };\n    managers.forEach(function (manager, i) {\n        lifecycles[\"on\" + names[i]] = function (handler) { return manager.add(handler); };\n        lifecycles[\"notify\" + names[i]] = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return manager.notify.apply(manager, __spreadArray([], __read(args)));\n        };\n    });\n    return lifecycles;\n}\n\nexport { createLifecycles };\n","import { motionValue } from '../../value/index.js';\nimport { isMotionValue } from '../../value/utils/is-motion-value.js';\n\nfunction updateMotionValuesFromProps(element, next, prev) {\n    var _a;\n    for (var key in next) {\n        var nextValue = next[key];\n        var prevValue = prev[key];\n        if (isMotionValue(nextValue)) {\n            /**\n             * If this is a motion value found in props or style, we want to add it\n             * to our visual element's motion value map.\n             */\n            element.addValue(key, nextValue);\n        }\n        else if (isMotionValue(prevValue)) {\n            /**\n             * If we're swapping to a new motion value, create a new motion value\n             * from that\n             */\n            element.addValue(key, motionValue(nextValue));\n        }\n        else if (prevValue !== nextValue) {\n            /**\n             * If this is a flat value that has changed, update the motion value\n             * or create one if it doesn't exist. We only want to do this if we're\n             * not handling the value with our animation state.\n             */\n            if (element.hasValue(key)) {\n                var existingValue = element.getValue(key);\n                // TODO: Only update values that aren't being animated or even looked at\n                !existingValue.hasAnimated && existingValue.set(nextValue);\n            }\n            else {\n                element.addValue(key, motionValue((_a = element.getStaticValue(key)) !== null && _a !== void 0 ? _a : nextValue));\n            }\n        }\n    }\n    // Handle removed values\n    for (var key in prev) {\n        if (next[key] === undefined)\n            element.removeValue(key);\n    }\n    return next;\n}\n\nexport { updateMotionValuesFromProps };\n","import { resetBox, applyTreeDeltas } from '../../utils/geometry/delta-apply.js';\nimport { updateBoxDelta } from '../../utils/geometry/delta-calc.js';\n\nfunction updateLayoutDeltas(_a, _b, treePath, transformOrigin) {\n    var delta = _a.delta, layout = _a.layout, layoutCorrected = _a.layoutCorrected, treeScale = _a.treeScale;\n    var target = _b.target;\n    /**\n     * Reset the corrected box with the latest values from box, as we're then going\n     * to perform mutative operations on it.\n     */\n    resetBox(layoutCorrected, layout);\n    /**\n     * Apply all the parent deltas to this box to produce the corrected box. This\n     * is the layout box, as it will appear on screen as a result of the transforms of its parents.\n     */\n    applyTreeDeltas(layoutCorrected, treeScale, treePath);\n    /**\n     * Update the delta between the corrected box and the target box before user-set transforms were applied.\n     * This will allow us to calculate the corrected borderRadius and boxShadow to compensate\n     * for our layout reprojection, but still allow them to be scaled correctly by the user.\n     * It might be that to simplify this we may want to accept that user-set scale is also corrected\n     * and we wouldn't have to keep and calc both deltas, OR we could support a user setting\n     * to allow people to choose whether these styles are corrected based on just the\n     * layout reprojection or the final bounding box.\n     */\n    updateBoxDelta(delta, layoutCorrected, target, transformOrigin);\n}\n\nexport { updateLayoutDeltas };\n","import { addUniqueItem, removeItem } from '../../utils/array.js';\nimport { compareByDepth } from './compare-by-depth.js';\n\nvar FlatTree = /** @class */ (function () {\n    function FlatTree() {\n        this.children = [];\n        this.isDirty = false;\n    }\n    FlatTree.prototype.add = function (child) {\n        addUniqueItem(this.children, child);\n        this.isDirty = true;\n    };\n    FlatTree.prototype.remove = function (child) {\n        removeItem(this.children, child);\n        this.isDirty = true;\n    };\n    FlatTree.prototype.forEach = function (callback) {\n        this.isDirty && this.children.sort(compareByDepth);\n        this.isDirty = false;\n        this.children.forEach(callback);\n    };\n    return FlatTree;\n}());\n\nexport { FlatTree };\n","import { calcRelativeOffset } from '../../../motion/features/layout/utils.js';\nimport { eachAxis } from '../../../utils/each-axis.js';\n\nfunction setCurrentViewportBox(visualElement) {\n    var projectionParent = visualElement.getProjectionParent();\n    if (!projectionParent) {\n        visualElement.rebaseProjectionTarget();\n        return;\n    }\n    var relativeOffset = calcRelativeOffset(projectionParent.getLayoutState().layout, visualElement.getLayoutState().layout);\n    eachAxis(function (axis) {\n        visualElement.setProjectionTargetAxis(axis, relativeOffset[axis].min, relativeOffset[axis].max, true);\n    });\n}\n\nexport { setCurrentViewportBox };\n","import { __assign, __spreadArray, __read } from 'tslib';\nimport sync, { cancelSync } from 'framesync';\nimport { pipe } from 'popmotion';\nimport { Presence } from '../components/AnimateSharedLayout/types.js';\nimport { eachAxis } from '../utils/each-axis.js';\nimport { axisBox } from '../utils/geometry/index.js';\nimport { removeBoxTransforms, applyBoxTransforms } from '../utils/geometry/delta-apply.js';\nimport { calcRelativeBox, updateBoxDelta } from '../utils/geometry/delta-calc.js';\nimport { motionValue } from '../value/index.js';\nimport { isMotionValue } from '../value/utils/is-motion-value.js';\nimport { buildLayoutProjectionTransform } from './html/utils/build-projection-transform.js';\nimport { variantPriorityOrder } from './utils/animation-state.js';\nimport { createLifecycles } from './utils/lifecycles.js';\nimport { updateMotionValuesFromProps } from './utils/motion-values.js';\nimport { updateLayoutDeltas } from './utils/projection.js';\nimport { createLayoutState, createProjectionState } from './utils/state.js';\nimport { FlatTree } from './utils/flat-tree.js';\nimport { checkIfControllingVariants, checkIfVariantNode, isVariantLabel } from './utils/variants.js';\nimport { setCurrentViewportBox } from './dom/projection/relative-set.js';\nimport { isDraggable } from './utils/is-draggable.js';\n\nvar visualElement = function (_a) {\n    var _b = _a.treeType, treeType = _b === void 0 ? \"\" : _b, build = _a.build, getBaseTarget = _a.getBaseTarget, makeTargetAnimatable = _a.makeTargetAnimatable, measureViewportBox = _a.measureViewportBox, renderInstance = _a.render, readValueFromInstance = _a.readValueFromInstance, resetTransform = _a.resetTransform, restoreTransform = _a.restoreTransform, removeValueFromRenderState = _a.removeValueFromRenderState, sortNodePosition = _a.sortNodePosition, scrapeMotionValuesFromProps = _a.scrapeMotionValuesFromProps;\n    return function (_a, options) {\n        var parent = _a.parent, props = _a.props, presenceId = _a.presenceId, blockInitialAnimation = _a.blockInitialAnimation, visualState = _a.visualState;\n        if (options === void 0) { options = {}; }\n        var latestValues = visualState.latestValues, renderState = visualState.renderState;\n        /**\n         * The instance of the render-specific node that will be hydrated by the\n         * exposed React ref. So for example, this visual element can host a\n         * HTMLElement, plain object, or Three.js object. The functions provided\n         * in VisualElementConfig allow us to interface with this instance.\n         */\n        var instance;\n        /**\n         * Manages the subscriptions for a visual element's lifecycle, for instance\n         * onRender and onViewportBoxUpdate.\n         */\n        var lifecycles = createLifecycles();\n        /**\n         *\n         */\n        var projection = createProjectionState();\n        /**\n         * A reference to the nearest projecting parent. This is either\n         * undefined if we haven't looked for the nearest projecting parent,\n         * false if there is no parent performing layout projection, or a reference\n         * to the projecting parent.\n         */\n        var projectionParent;\n        /**\n         * This is a reference to the visual state of the \"lead\" visual element.\n         * Usually, this will be this visual element. But if it shares a layoutId\n         * with other visual elements, only one of them will be designated lead by\n         * AnimateSharedLayout. All the other visual elements will take on the visual\n         * appearance of the lead while they crossfade to it.\n         */\n        var leadProjection = projection;\n        var leadLatestValues = latestValues;\n        var unsubscribeFromLeadVisualElement;\n        /**\n         * The latest layout measurements and calculated projections. This\n         * is seperate from the target projection data in visualState as\n         * many visual elements might point to the same piece of visualState as\n         * a target, whereas they might each have different layouts and thus\n         * projection calculations needed to project into the same viewport box.\n         */\n        var layoutState = createLayoutState();\n        /**\n         *\n         */\n        var crossfader;\n        /**\n         * Keep track of whether the viewport box has been updated since the\n         * last time the layout projection was re-calculated.\n         */\n        var hasViewportBoxUpdated = false;\n        /**\n         * A map of all motion values attached to this visual element. Motion\n         * values are source of truth for any given animated value. A motion\n         * value might be provided externally by the component via props.\n         */\n        var values = new Map();\n        /**\n         * A map of every subscription that binds the provided or generated\n         * motion values onChange listeners to this visual element.\n         */\n        var valueSubscriptions = new Map();\n        /**\n         * A reference to the previously-provided motion values as returned\n         * from scrapeMotionValuesFromProps. We use the keys in here to determine\n         * if any motion values need to be removed after props are updated.\n         */\n        var prevMotionValues = {};\n        /**\n         * x/y motion values that track the progress of initiated layout\n         * animations.\n         *\n         * TODO: Target for removal\n         */\n        var projectionTargetProgress;\n        /**\n         * When values are removed from all animation props we need to search\n         * for a fallback value to animate to. These values are tracked in baseTarget.\n         */\n        var baseTarget = __assign({}, latestValues);\n        // Internal methods ========================\n        /**\n         * On mount, this will be hydrated with a callback to disconnect\n         * this visual element from its parent on unmount.\n         */\n        var removeFromVariantTree;\n        /**\n         *\n         */\n        function render() {\n            if (!instance)\n                return;\n            if (element.isProjectionReady()) {\n                /**\n                 * Apply the latest user-set transforms to the targetBox to produce the targetBoxFinal.\n                 * This is the final box that we will then project into by calculating a transform delta and\n                 * applying it to the corrected box.\n                 */\n                applyBoxTransforms(leadProjection.targetFinal, leadProjection.target, leadLatestValues);\n                /**\n                 * Update the delta between the corrected box and the final target box, after\n                 * user-set transforms are applied to it. This will be used by the renderer to\n                 * create a transform style that will reproject the element from its actual layout\n                 * into the desired bounding box.\n                 */\n                updateBoxDelta(layoutState.deltaFinal, layoutState.layoutCorrected, leadProjection.targetFinal, latestValues);\n            }\n            triggerBuild();\n            renderInstance(instance, renderState);\n        }\n        function triggerBuild() {\n            var valuesToRender = latestValues;\n            if (crossfader && crossfader.isActive()) {\n                var crossfadedValues = crossfader.getCrossfadeState(element);\n                if (crossfadedValues)\n                    valuesToRender = crossfadedValues;\n            }\n            build(element, renderState, valuesToRender, leadProjection, layoutState, options, props);\n        }\n        function update() {\n            lifecycles.notifyUpdate(latestValues);\n        }\n        function updateLayoutProjection() {\n            if (!element.isProjectionReady())\n                return;\n            var delta = layoutState.delta, treeScale = layoutState.treeScale;\n            var prevTreeScaleX = treeScale.x;\n            var prevTreeScaleY = treeScale.y;\n            var prevDeltaTransform = layoutState.deltaTransform;\n            updateLayoutDeltas(layoutState, leadProjection, element.path, latestValues);\n            hasViewportBoxUpdated &&\n                element.notifyViewportBoxUpdate(leadProjection.target, delta);\n            hasViewportBoxUpdated = false;\n            var deltaTransform = buildLayoutProjectionTransform(delta, treeScale);\n            if (deltaTransform !== prevDeltaTransform ||\n                // Also compare calculated treeScale, for values that rely on this only for scale correction\n                prevTreeScaleX !== treeScale.x ||\n                prevTreeScaleY !== treeScale.y) {\n                element.scheduleRender();\n            }\n            layoutState.deltaTransform = deltaTransform;\n        }\n        function updateTreeLayoutProjection() {\n            element.layoutTree.forEach(fireUpdateLayoutProjection);\n        }\n        /**\n         *\n         */\n        function bindToMotionValue(key, value) {\n            var removeOnChange = value.onChange(function (latestValue) {\n                latestValues[key] = latestValue;\n                props.onUpdate && sync.update(update, false, true);\n            });\n            var removeOnRenderRequest = value.onRenderRequest(element.scheduleRender);\n            valueSubscriptions.set(key, function () {\n                removeOnChange();\n                removeOnRenderRequest();\n            });\n        }\n        /**\n         * Any motion values that are provided to the element when created\n         * aren't yet bound to the element, as this would technically be impure.\n         * However, we iterate through the motion values and set them to the\n         * initial values for this component.\n         *\n         * TODO: This is impure and we should look at changing this to run on mount.\n         * Doing so will break some tests but this isn't neccessarily a breaking change,\n         * more a reflection of the test.\n         */\n        var initialMotionValues = scrapeMotionValuesFromProps(props);\n        for (var key in initialMotionValues) {\n            var value = initialMotionValues[key];\n            if (latestValues[key] !== undefined && isMotionValue(value)) {\n                value.set(latestValues[key], false);\n            }\n        }\n        /**\n         * Determine what role this visual element should take in the variant tree.\n         */\n        var isControllingVariants = checkIfControllingVariants(props);\n        var isVariantNode = checkIfVariantNode(props);\n        var element = __assign(__assign({ treeType: treeType, \n            /**\n             * This is a mirror of the internal instance prop, which keeps\n             * VisualElement type-compatible with React's RefObject.\n             */\n            current: null, \n            /**\n             * The depth of this visual element within the visual element tree.\n             */\n            depth: parent ? parent.depth + 1 : 0, parent: parent, children: new Set(), \n            /**\n             * An ancestor path back to the root visual element. This is used\n             * by layout projection to quickly recurse back up the tree.\n             */\n            path: parent ? __spreadArray(__spreadArray([], __read(parent.path)), [parent]) : [], layoutTree: parent ? parent.layoutTree : new FlatTree(), \n            /**\n             *\n             */\n            presenceId: presenceId,\n            projection: projection, \n            /**\n             * If this component is part of the variant tree, it should track\n             * any children that are also part of the tree. This is essentially\n             * a shadow tree to simplify logic around how to stagger over children.\n             */\n            variantChildren: isVariantNode ? new Set() : undefined, \n            /**\n             * Whether this instance is visible. This can be changed imperatively\n             * by AnimateSharedLayout, is analogous to CSS's visibility in that\n             * hidden elements should take up layout, and needs enacting by the configured\n             * render function.\n             */\n            isVisible: undefined, \n            /**\n             * Normally, if a component is controlled by a parent's variants, it can\n             * rely on that ancestor to trigger animations further down the tree.\n             * However, if a component is created after its parent is mounted, the parent\n             * won't trigger that mount animation so the child needs to.\n             *\n             * TODO: This might be better replaced with a method isParentMounted\n             */\n            manuallyAnimateOnMount: Boolean(parent === null || parent === void 0 ? void 0 : parent.isMounted()), \n            /**\n             * This can be set by AnimatePresence to force components that mount\n             * at the same time as it to mount as if they have initial={false} set.\n             */\n            blockInitialAnimation: blockInitialAnimation, \n            /**\n             * Determine whether this component has mounted yet. This is mostly used\n             * by variant children to determine whether they need to trigger their\n             * own animations on mount.\n             */\n            isMounted: function () { return Boolean(instance); }, mount: function (newInstance) {\n                instance = element.current = newInstance;\n                element.pointTo(element);\n                if (isVariantNode && parent && !isControllingVariants) {\n                    removeFromVariantTree = parent === null || parent === void 0 ? void 0 : parent.addVariantChild(element);\n                }\n                parent === null || parent === void 0 ? void 0 : parent.children.add(element);\n            },\n            /**\n             *\n             */\n            unmount: function () {\n                cancelSync.update(update);\n                cancelSync.render(render);\n                cancelSync.preRender(element.updateLayoutProjection);\n                valueSubscriptions.forEach(function (remove) { return remove(); });\n                element.stopLayoutAnimation();\n                element.layoutTree.remove(element);\n                removeFromVariantTree === null || removeFromVariantTree === void 0 ? void 0 : removeFromVariantTree();\n                parent === null || parent === void 0 ? void 0 : parent.children.delete(element);\n                unsubscribeFromLeadVisualElement === null || unsubscribeFromLeadVisualElement === void 0 ? void 0 : unsubscribeFromLeadVisualElement();\n                lifecycles.clearAllListeners();\n            },\n            /**\n             * Add a child visual element to our set of children.\n             */\n            addVariantChild: function (child) {\n                var _a;\n                var closestVariantNode = element.getClosestVariantNode();\n                if (closestVariantNode) {\n                    (_a = closestVariantNode.variantChildren) === null || _a === void 0 ? void 0 : _a.add(child);\n                    return function () { return closestVariantNode.variantChildren.delete(child); };\n                }\n            },\n            sortNodePosition: function (other) {\n                /**\n                 * If these nodes aren't even of the same type we can't compare their depth.\n                 */\n                if (!sortNodePosition || treeType !== other.treeType)\n                    return 0;\n                return sortNodePosition(element.getInstance(), other.getInstance());\n            }, \n            /**\n             * Returns the closest variant node in the tree starting from\n             * this visual element.\n             */\n            getClosestVariantNode: function () {\n                return isVariantNode ? element : parent === null || parent === void 0 ? void 0 : parent.getClosestVariantNode();\n            }, \n            /**\n             * A method that schedules an update to layout projections throughout\n             * the tree. We inherit from the parent so there's only ever one\n             * job scheduled on the next frame - that of the root visual element.\n             */\n            scheduleUpdateLayoutProjection: parent\n                ? parent.scheduleUpdateLayoutProjection\n                : function () {\n                    return sync.preRender(element.updateTreeLayoutProjection, false, true);\n                }, \n            /**\n             * Expose the latest layoutId prop.\n             */\n            getLayoutId: function () { return props.layoutId; }, \n            /**\n             * Returns the current instance.\n             */\n            getInstance: function () { return instance; }, \n            /**\n             * Get/set the latest static values.\n             */\n            getStaticValue: function (key) { return latestValues[key]; }, setStaticValue: function (key, value) { return (latestValues[key] = value); }, \n            /**\n             * Returns the latest motion value state. Currently only used to take\n             * a snapshot of the visual element - perhaps this can return the whole\n             * visual state\n             */\n            getLatestValues: function () { return latestValues; }, \n            /**\n             * Set the visiblity of the visual element. If it's changed, schedule\n             * a render to reflect these changes.\n             */\n            setVisibility: function (visibility) {\n                if (element.isVisible === visibility)\n                    return;\n                element.isVisible = visibility;\n                element.scheduleRender();\n            },\n            /**\n             * Make a target animatable by Popmotion. For instance, if we're\n             * trying to animate width from 100px to 100vw we need to measure 100vw\n             * in pixels to determine what we really need to animate to. This is also\n             * pluggable to support Framer's custom value types like Color,\n             * and CSS variables.\n             */\n            makeTargetAnimatable: function (target, canMutate) {\n                if (canMutate === void 0) { canMutate = true; }\n                return makeTargetAnimatable(element, target, props, canMutate);\n            },\n            // Motion values ========================\n            /**\n             * Add a motion value and bind it to this visual element.\n             */\n            addValue: function (key, value) {\n                // Remove existing value if it exists\n                if (element.hasValue(key))\n                    element.removeValue(key);\n                values.set(key, value);\n                latestValues[key] = value.get();\n                bindToMotionValue(key, value);\n            },\n            /**\n             * Remove a motion value and unbind any active subscriptions.\n             */\n            removeValue: function (key) {\n                var _a;\n                values.delete(key);\n                (_a = valueSubscriptions.get(key)) === null || _a === void 0 ? void 0 : _a();\n                valueSubscriptions.delete(key);\n                delete latestValues[key];\n                removeValueFromRenderState(key, renderState);\n            }, \n            /**\n             * Check whether we have a motion value for this key\n             */\n            hasValue: function (key) { return values.has(key); }, \n            /**\n             * Get a motion value for this key. If called with a default\n             * value, we'll create one if none exists.\n             */\n            getValue: function (key, defaultValue) {\n                var value = values.get(key);\n                if (value === undefined && defaultValue !== undefined) {\n                    value = motionValue(defaultValue);\n                    element.addValue(key, value);\n                }\n                return value;\n            }, \n            /**\n             * Iterate over our motion values.\n             */\n            forEachValue: function (callback) { return values.forEach(callback); }, \n            /**\n             * If we're trying to animate to a previously unencountered value,\n             * we need to check for it in our state and as a last resort read it\n             * directly from the instance (which might have performance implications).\n             */\n            readValue: function (key) { var _a; return (_a = latestValues[key]) !== null && _a !== void 0 ? _a : readValueFromInstance(instance, key, options); }, \n            /**\n             * Set the base target to later animate back to. This is currently\n             * only hydrated on creation and when we first read a value.\n             */\n            setBaseTarget: function (key, value) {\n                baseTarget[key] = value;\n            },\n            /**\n             * Find the base target for a value thats been removed from all animation\n             * props.\n             */\n            getBaseTarget: function (key) {\n                if (getBaseTarget) {\n                    var target = getBaseTarget(props, key);\n                    if (target !== undefined && !isMotionValue(target))\n                        return target;\n                }\n                return baseTarget[key];\n            } }, lifecycles), { \n            /**\n             * Build the renderer state based on the latest visual state.\n             */\n            build: function () {\n                triggerBuild();\n                return renderState;\n            },\n            /**\n             * Schedule a render on the next animation frame.\n             */\n            scheduleRender: function () {\n                sync.render(render, false, true);\n            }, \n            /**\n             * Synchronously fire render. It's prefered that we batch renders but\n             * in many circumstances, like layout measurement, we need to run this\n             * synchronously. However in those instances other measures should be taken\n             * to batch reads/writes.\n             */\n            syncRender: render, \n            /**\n             * Update the provided props. Ensure any newly-added motion values are\n             * added to our map, old ones removed, and listeners updated.\n             */\n            setProps: function (newProps) {\n                props = newProps;\n                lifecycles.updatePropListeners(newProps);\n                prevMotionValues = updateMotionValuesFromProps(element, scrapeMotionValuesFromProps(props), prevMotionValues);\n            }, getProps: function () { return props; }, \n            // Variants ==============================\n            /**\n             * Returns the variant definition with a given name.\n             */\n            getVariant: function (name) { var _a; return (_a = props.variants) === null || _a === void 0 ? void 0 : _a[name]; }, \n            /**\n             * Returns the defined default transition on this component.\n             */\n            getDefaultTransition: function () { return props.transition; }, \n            /**\n             * Used by child variant nodes to get the closest ancestor variant props.\n             */\n            getVariantContext: function (startAtParent) {\n                if (startAtParent === void 0) { startAtParent = false; }\n                if (startAtParent)\n                    return parent === null || parent === void 0 ? void 0 : parent.getVariantContext();\n                if (!isControllingVariants) {\n                    var context_1 = (parent === null || parent === void 0 ? void 0 : parent.getVariantContext()) || {};\n                    if (props.initial !== undefined) {\n                        context_1.initial = props.initial;\n                    }\n                    return context_1;\n                }\n                var context = {};\n                for (var i = 0; i < numVariantProps; i++) {\n                    var name_1 = variantProps[i];\n                    var prop = props[name_1];\n                    if (isVariantLabel(prop) || prop === false) {\n                        context[name_1] = prop;\n                    }\n                }\n                return context;\n            },\n            // Layout projection ==============================\n            /**\n             * Enable layout projection for this visual element. Won't actually\n             * occur until we also have hydrated layout measurements.\n             */\n            enableLayoutProjection: function () {\n                projection.isEnabled = true;\n                element.layoutTree.add(element);\n            },\n            /**\n             * Lock the projection target, for instance when dragging, so\n             * nothing else can try and animate it.\n             */\n            lockProjectionTarget: function () {\n                projection.isTargetLocked = true;\n            },\n            unlockProjectionTarget: function () {\n                element.stopLayoutAnimation();\n                projection.isTargetLocked = false;\n            }, getLayoutState: function () { return layoutState; }, setCrossfader: function (newCrossfader) {\n                crossfader = newCrossfader;\n            }, isProjectionReady: function () {\n                return projection.isEnabled &&\n                    projection.isHydrated &&\n                    layoutState.isHydrated;\n            }, \n            /**\n             * Start a layout animation on a given axis.\n             */\n            startLayoutAnimation: function (axis, transition, isRelative) {\n                if (isRelative === void 0) { isRelative = false; }\n                var progress = element.getProjectionAnimationProgress()[axis];\n                var _a = isRelative\n                    ? projection.relativeTarget[axis]\n                    : projection.target[axis], min = _a.min, max = _a.max;\n                var length = max - min;\n                progress.clearListeners();\n                progress.set(min);\n                progress.set(min); // Set twice to hard-reset velocity\n                progress.onChange(function (v) {\n                    element.setProjectionTargetAxis(axis, v, v + length, isRelative);\n                });\n                return element.animateMotionValue(axis, progress, 0, transition);\n            },\n            /**\n             * Stop layout animations.\n             */\n            stopLayoutAnimation: function () {\n                eachAxis(function (axis) {\n                    return element.getProjectionAnimationProgress()[axis].stop();\n                });\n            },\n            /**\n             * Measure the current viewport box with or without transforms.\n             * Only measures axis-aligned boxes, rotate and skew must be manually\n             * removed with a re-render to work.\n             */\n            measureViewportBox: function (withTransform) {\n                if (withTransform === void 0) { withTransform = true; }\n                var viewportBox = measureViewportBox(instance, options);\n                if (!withTransform)\n                    removeBoxTransforms(viewportBox, latestValues);\n                return viewportBox;\n            },\n            /**\n             * Get the motion values tracking the layout animations on each\n             * axis. Lazy init if not already created.\n             */\n            getProjectionAnimationProgress: function () {\n                projectionTargetProgress || (projectionTargetProgress = {\n                    x: motionValue(0),\n                    y: motionValue(0),\n                });\n                return projectionTargetProgress;\n            },\n            /**\n             * Update the projection of a single axis. Schedule an update to\n             * the tree layout projection.\n             */\n            setProjectionTargetAxis: function (axis, min, max, isRelative) {\n                if (isRelative === void 0) { isRelative = false; }\n                var target;\n                if (isRelative) {\n                    if (!projection.relativeTarget) {\n                        projection.relativeTarget = axisBox();\n                    }\n                    target = projection.relativeTarget[axis];\n                }\n                else {\n                    projection.relativeTarget = undefined;\n                    target = projection.target[axis];\n                }\n                projection.isHydrated = true;\n                target.min = min;\n                target.max = max;\n                // Flag that we want to fire the onViewportBoxUpdate event handler\n                hasViewportBoxUpdated = true;\n                lifecycles.notifySetAxisTarget();\n            },\n            /**\n             * Rebase the projection target on top of the provided viewport box\n             * or the measured layout. This ensures that non-animating elements\n             * don't fall out of sync differences in measurements vs projections\n             * after a page scroll or other relayout.\n             */\n            rebaseProjectionTarget: function (force, box) {\n                if (box === void 0) { box = layoutState.layout; }\n                var _a = element.getProjectionAnimationProgress(), x = _a.x, y = _a.y;\n                var shouldRebase = !projection.relativeTarget &&\n                    !projection.isTargetLocked &&\n                    !x.isAnimating() &&\n                    !y.isAnimating();\n                if (force || shouldRebase) {\n                    eachAxis(function (axis) {\n                        var _a = box[axis], min = _a.min, max = _a.max;\n                        element.setProjectionTargetAxis(axis, min, max);\n                    });\n                }\n            },\n            /**\n             * Notify the visual element that its layout is up-to-date.\n             * Currently Animate.tsx uses this to check whether a layout animation\n             * needs to be performed.\n             */\n            notifyLayoutReady: function (config) {\n                setCurrentViewportBox(element);\n                element.notifyLayoutUpdate(layoutState.layout, element.prevViewportBox || layoutState.layout, config);\n            }, \n            /**\n             * Temporarily reset the transform of the instance.\n             */\n            resetTransform: function () { return resetTransform(element, instance, props); }, restoreTransform: function () { return restoreTransform(instance, renderState); }, updateLayoutProjection: updateLayoutProjection,\n            updateTreeLayoutProjection: function () {\n                element.layoutTree.forEach(fireResolveRelativeTargetBox);\n                /**\n                 * Schedule the projection updates at the end of the current preRender\n                 * step. This will ensure that all layout trees will first resolve\n                 * relative projection boxes into viewport boxes, and *then*\n                 * update projections.\n                 */\n                sync.preRender(updateTreeLayoutProjection, false, true);\n                // sync.postRender(() => element.scheduleUpdateLayoutProjection())\n            },\n            getProjectionParent: function () {\n                if (projectionParent === undefined) {\n                    var foundParent = false;\n                    // Search backwards through the tree path\n                    for (var i = element.path.length - 1; i >= 0; i--) {\n                        var ancestor = element.path[i];\n                        if (ancestor.projection.isEnabled) {\n                            foundParent = ancestor;\n                            break;\n                        }\n                    }\n                    projectionParent = foundParent;\n                }\n                return projectionParent;\n            },\n            resolveRelativeTargetBox: function () {\n                var relativeParent = element.getProjectionParent();\n                if (!projection.relativeTarget || !relativeParent)\n                    return;\n                calcRelativeBox(projection, relativeParent.projection);\n                if (isDraggable(relativeParent)) {\n                    var target = projection.target;\n                    applyBoxTransforms(target, target, relativeParent.getLatestValues());\n                }\n            },\n            shouldResetTransform: function () {\n                return Boolean(props._layoutResetTransform);\n            },\n            /**\n             *\n             */\n            pointTo: function (newLead) {\n                leadProjection = newLead.projection;\n                leadLatestValues = newLead.getLatestValues();\n                /**\n                 * Subscribe to lead component's layout animations\n                 */\n                unsubscribeFromLeadVisualElement === null || unsubscribeFromLeadVisualElement === void 0 ? void 0 : unsubscribeFromLeadVisualElement();\n                unsubscribeFromLeadVisualElement = pipe(newLead.onSetAxisTarget(element.scheduleUpdateLayoutProjection), newLead.onLayoutAnimationComplete(function () {\n                    var _a;\n                    if (element.isPresent) {\n                        element.presence = Presence.Present;\n                    }\n                    else {\n                        (_a = element.layoutSafeToRemove) === null || _a === void 0 ? void 0 : _a.call(element);\n                    }\n                }));\n            }, \n            // TODO: Clean this up\n            isPresent: true, presence: Presence.Entering });\n        return element;\n    };\n};\nfunction fireResolveRelativeTargetBox(child) {\n    child.resolveRelativeTargetBox();\n}\nfunction fireUpdateLayoutProjection(child) {\n    child.updateLayoutProjection();\n}\nvar variantProps = __spreadArray([\"initial\"], __read(variantPriorityOrder));\nvar numVariantProps = variantProps.length;\n\nexport { visualElement };\n","import { __assign, __read } from 'tslib';\nimport { number, px } from 'style-value-types';\nimport { isKeyframesTarget } from '../../../animation/utils/is-keyframes-target.js';\nimport { invariant } from 'hey-listen';\nimport { transformProps } from '../../html/utils/transform.js';\nimport { findDimensionValueType } from '../value-types/dimensions.js';\n\nvar positionalKeys = new Set([\n    \"width\",\n    \"height\",\n    \"top\",\n    \"left\",\n    \"right\",\n    \"bottom\",\n    \"x\",\n    \"y\",\n]);\nvar isPositionalKey = function (key) { return positionalKeys.has(key); };\nvar hasPositionalKey = function (target) {\n    return Object.keys(target).some(isPositionalKey);\n};\nvar setAndResetVelocity = function (value, to) {\n    // Looks odd but setting it twice doesn't render, it'll just\n    // set both prev and current to the latest value\n    value.set(to, false);\n    value.set(to);\n};\nvar isNumOrPxType = function (v) {\n    return v === number || v === px;\n};\nvar BoundingBoxDimension;\n(function (BoundingBoxDimension) {\n    BoundingBoxDimension[\"width\"] = \"width\";\n    BoundingBoxDimension[\"height\"] = \"height\";\n    BoundingBoxDimension[\"left\"] = \"left\";\n    BoundingBoxDimension[\"right\"] = \"right\";\n    BoundingBoxDimension[\"top\"] = \"top\";\n    BoundingBoxDimension[\"bottom\"] = \"bottom\";\n})(BoundingBoxDimension || (BoundingBoxDimension = {}));\nvar getPosFromMatrix = function (matrix, pos) {\n    return parseFloat(matrix.split(\", \")[pos]);\n};\nvar getTranslateFromMatrix = function (pos2, pos3) { return function (_bbox, _a) {\n    var transform = _a.transform;\n    if (transform === \"none\" || !transform)\n        return 0;\n    var matrix3d = transform.match(/^matrix3d\\((.+)\\)$/);\n    if (matrix3d) {\n        return getPosFromMatrix(matrix3d[1], pos3);\n    }\n    else {\n        var matrix = transform.match(/^matrix\\((.+)\\)$/);\n        if (matrix) {\n            return getPosFromMatrix(matrix[1], pos2);\n        }\n        else {\n            return 0;\n        }\n    }\n}; };\nvar transformKeys = new Set([\"x\", \"y\", \"z\"]);\nvar nonTranslationalTransformKeys = transformProps.filter(function (key) { return !transformKeys.has(key); });\nfunction removeNonTranslationalTransform(visualElement) {\n    var removedTransforms = [];\n    nonTranslationalTransformKeys.forEach(function (key) {\n        var value = visualElement.getValue(key);\n        if (value !== undefined) {\n            removedTransforms.push([key, value.get()]);\n            value.set(key.startsWith(\"scale\") ? 1 : 0);\n        }\n    });\n    // Apply changes to element before measurement\n    if (removedTransforms.length)\n        visualElement.syncRender();\n    return removedTransforms;\n}\nvar positionalValues = {\n    // Dimensions\n    width: function (_a) {\n        var x = _a.x;\n        return x.max - x.min;\n    },\n    height: function (_a) {\n        var y = _a.y;\n        return y.max - y.min;\n    },\n    top: function (_bbox, _a) {\n        var top = _a.top;\n        return parseFloat(top);\n    },\n    left: function (_bbox, _a) {\n        var left = _a.left;\n        return parseFloat(left);\n    },\n    bottom: function (_a, _b) {\n        var y = _a.y;\n        var top = _b.top;\n        return parseFloat(top) + (y.max - y.min);\n    },\n    right: function (_a, _b) {\n        var x = _a.x;\n        var left = _b.left;\n        return parseFloat(left) + (x.max - x.min);\n    },\n    // Transform\n    x: getTranslateFromMatrix(4, 13),\n    y: getTranslateFromMatrix(5, 14),\n};\nvar convertChangedValueTypes = function (target, visualElement, changedKeys) {\n    var originBbox = visualElement.measureViewportBox();\n    var element = visualElement.getInstance();\n    var elementComputedStyle = getComputedStyle(element);\n    var display = elementComputedStyle.display, top = elementComputedStyle.top, left = elementComputedStyle.left, bottom = elementComputedStyle.bottom, right = elementComputedStyle.right, transform = elementComputedStyle.transform;\n    var originComputedStyle = { top: top, left: left, bottom: bottom, right: right, transform: transform };\n    // If the element is currently set to display: \"none\", make it visible before\n    // measuring the target bounding box\n    if (display === \"none\") {\n        visualElement.setStaticValue(\"display\", target.display || \"block\");\n    }\n    // Apply the latest values (as set in checkAndConvertChangedValueTypes)\n    visualElement.syncRender();\n    var targetBbox = visualElement.measureViewportBox();\n    changedKeys.forEach(function (key) {\n        // Restore styles to their **calculated computed style**, not their actual\n        // originally set style. This allows us to animate between equivalent pixel units.\n        var value = visualElement.getValue(key);\n        setAndResetVelocity(value, positionalValues[key](originBbox, originComputedStyle));\n        target[key] = positionalValues[key](targetBbox, elementComputedStyle);\n    });\n    return target;\n};\nvar checkAndConvertChangedValueTypes = function (visualElement, target, origin, transitionEnd) {\n    if (origin === void 0) { origin = {}; }\n    if (transitionEnd === void 0) { transitionEnd = {}; }\n    target = __assign({}, target);\n    transitionEnd = __assign({}, transitionEnd);\n    var targetPositionalKeys = Object.keys(target).filter(isPositionalKey);\n    // We want to remove any transform values that could affect the element's bounding box before\n    // it's measured. We'll reapply these later.\n    var removedTransformValues = [];\n    var hasAttemptedToRemoveTransformValues = false;\n    var changedValueTypeKeys = [];\n    targetPositionalKeys.forEach(function (key) {\n        var value = visualElement.getValue(key);\n        if (!visualElement.hasValue(key))\n            return;\n        var from = origin[key];\n        var to = target[key];\n        var fromType = findDimensionValueType(from);\n        var toType;\n        // TODO: The current implementation of this basically throws an error\n        // if you try and do value conversion via keyframes. There's probably\n        // a way of doing this but the performance implications would need greater scrutiny,\n        // as it'd be doing multiple resize-remeasure operations.\n        if (isKeyframesTarget(to)) {\n            var numKeyframes = to.length;\n            for (var i = to[0] === null ? 1 : 0; i < numKeyframes; i++) {\n                if (!toType) {\n                    toType = findDimensionValueType(to[i]);\n                    invariant(toType === fromType ||\n                        (isNumOrPxType(fromType) && isNumOrPxType(toType)), \"Keyframes must be of the same dimension as the current value\");\n                }\n                else {\n                    invariant(findDimensionValueType(to[i]) === toType, \"All keyframes must be of the same type\");\n                }\n            }\n        }\n        else {\n            toType = findDimensionValueType(to);\n        }\n        if (fromType !== toType) {\n            // If they're both just number or px, convert them both to numbers rather than\n            // relying on resize/remeasure to convert (which is wasteful in this situation)\n            if (isNumOrPxType(fromType) && isNumOrPxType(toType)) {\n                var current = value.get();\n                if (typeof current === \"string\") {\n                    value.set(parseFloat(current));\n                }\n                if (typeof to === \"string\") {\n                    target[key] = parseFloat(to);\n                }\n                else if (Array.isArray(to) && toType === px) {\n                    target[key] = to.map(parseFloat);\n                }\n            }\n            else if ((fromType === null || fromType === void 0 ? void 0 : fromType.transform) &&\n                (toType === null || toType === void 0 ? void 0 : toType.transform) &&\n                (from === 0 || to === 0)) {\n                // If one or the other value is 0, it's safe to coerce it to the\n                // type of the other without measurement\n                if (from === 0) {\n                    value.set(toType.transform(from));\n                }\n                else {\n                    target[key] = fromType.transform(to);\n                }\n            }\n            else {\n                // If we're going to do value conversion via DOM measurements, we first\n                // need to remove non-positional transform values that could affect the bbox measurements.\n                if (!hasAttemptedToRemoveTransformValues) {\n                    removedTransformValues = removeNonTranslationalTransform(visualElement);\n                    hasAttemptedToRemoveTransformValues = true;\n                }\n                changedValueTypeKeys.push(key);\n                transitionEnd[key] =\n                    transitionEnd[key] !== undefined\n                        ? transitionEnd[key]\n                        : target[key];\n                setAndResetVelocity(value, to);\n            }\n        }\n    });\n    if (changedValueTypeKeys.length) {\n        var convertedTarget = convertChangedValueTypes(target, visualElement, changedValueTypeKeys);\n        // If we removed transform values, reapply them before the next render\n        if (removedTransformValues.length) {\n            removedTransformValues.forEach(function (_a) {\n                var _b = __read(_a, 2), key = _b[0], value = _b[1];\n                visualElement.getValue(key).set(value);\n            });\n        }\n        // Reapply original values\n        visualElement.syncRender();\n        return { target: convertedTarget, transitionEnd: transitionEnd };\n    }\n    else {\n        return { target: target, transitionEnd: transitionEnd };\n    }\n};\n/**\n * Convert value types for x/y/width/height/top/left/bottom/right\n *\n * Allows animation between `'auto'` -> `'100%'` or `0` -> `'calc(50% - 10vw)'`\n *\n * @internal\n */\nfunction unitConversion(visualElement, target, origin, transitionEnd) {\n    return hasPositionalKey(target)\n        ? checkAndConvertChangedValueTypes(visualElement, target, origin, transitionEnd)\n        : { target: target, transitionEnd: transitionEnd };\n}\n\nexport { BoundingBoxDimension, unitConversion };\n","import { resolveCSSVariables } from './css-variables-conversion.js';\nimport { unitConversion } from './unit-conversion.js';\n\n/**\n * Parse a DOM variant to make it animatable. This involves resolving CSS variables\n * and ensuring animations like \"20%\" => \"calc(50vw)\" are performed in pixels.\n */\nvar parseDomVariant = function (visualElement, target, origin, transitionEnd) {\n    var resolved = resolveCSSVariables(visualElement, target, transitionEnd);\n    target = resolved.target;\n    transitionEnd = resolved.transitionEnd;\n    return unitConversion(visualElement, target, origin, transitionEnd);\n};\n\nexport { parseDomVariant };\n","import { __rest, __assign } from 'tslib';\nimport { visualElement } from '../index.js';\nimport { getOrigin, checkTargetForNewValues } from '../utils/setters.js';\nimport { getBoundingBox } from '../dom/projection/measure.js';\nimport { buildHTMLStyles } from './utils/build-styles.js';\nimport { isCSSVariable } from '../dom/utils/is-css-variable.js';\nimport { parseDomVariant } from '../dom/utils/parse-dom-variant.js';\nimport { isTransformProp } from './utils/transform.js';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.js';\nimport { renderHTML } from './utils/render.js';\nimport { getDefaultValueType } from '../dom/value-types/defaults.js';\nimport { buildLayoutProjectionTransformOrigin, buildLayoutProjectionTransform } from './utils/build-projection-transform.js';\n\nfunction getComputedStyle(element) {\n    return window.getComputedStyle(element);\n}\nvar htmlConfig = {\n    treeType: \"dom\",\n    readValueFromInstance: function (domElement, key) {\n        if (isTransformProp(key)) {\n            var defaultType = getDefaultValueType(key);\n            return defaultType ? defaultType.default || 0 : 0;\n        }\n        else {\n            var computedStyle = getComputedStyle(domElement);\n            return ((isCSSVariable(key)\n                ? computedStyle.getPropertyValue(key)\n                : computedStyle[key]) || 0);\n        }\n    },\n    sortNodePosition: function (a, b) {\n        /**\n         * compareDocumentPosition returns a bitmask, by using the bitwise &\n         * we're returning true if 2 in that bitmask is set to true. 2 is set\n         * to true if b preceeds a.\n         */\n        return a.compareDocumentPosition(b) & 2 ? 1 : -1;\n    },\n    getBaseTarget: function (props, key) {\n        var _a;\n        return (_a = props.style) === null || _a === void 0 ? void 0 : _a[key];\n    },\n    measureViewportBox: function (element, _a) {\n        var transformPagePoint = _a.transformPagePoint;\n        return getBoundingBox(element, transformPagePoint);\n    },\n    /**\n     * Reset the transform on the current Element. This is called as part\n     * of a batched process across the entire layout tree. To remove this write\n     * cycle it'd be interesting to see if it's possible to \"undo\" all the current\n     * layout transforms up the tree in the same way this.getBoundingBoxWithoutTransforms\n     * works\n     */\n    resetTransform: function (element, domElement, props) {\n        var transformTemplate = props.transformTemplate;\n        domElement.style.transform = transformTemplate\n            ? transformTemplate({}, \"\")\n            : \"none\";\n        // Ensure that whatever happens next, we restore our transform on the next frame\n        element.scheduleRender();\n    },\n    restoreTransform: function (instance, mutableState) {\n        instance.style.transform = mutableState.style.transform;\n    },\n    removeValueFromRenderState: function (key, _a) {\n        var vars = _a.vars, style = _a.style;\n        delete vars[key];\n        delete style[key];\n    },\n    /**\n     * Ensure that HTML and Framer-specific value types like `px`->`%` and `Color`\n     * can be animated by Motion.\n     */\n    makeTargetAnimatable: function (element, _a, _b, isMounted) {\n        var transformValues = _b.transformValues;\n        if (isMounted === void 0) { isMounted = true; }\n        var transition = _a.transition, transitionEnd = _a.transitionEnd, target = __rest(_a, [\"transition\", \"transitionEnd\"]);\n        var origin = getOrigin(target, transition || {}, element);\n        /**\n         * If Framer has provided a function to convert `Color` etc value types, convert them\n         */\n        if (transformValues) {\n            if (transitionEnd)\n                transitionEnd = transformValues(transitionEnd);\n            if (target)\n                target = transformValues(target);\n            if (origin)\n                origin = transformValues(origin);\n        }\n        if (isMounted) {\n            checkTargetForNewValues(element, target, origin);\n            var parsed = parseDomVariant(element, target, origin, transitionEnd);\n            transitionEnd = parsed.transitionEnd;\n            target = parsed.target;\n        }\n        return __assign({ transition: transition,\n            transitionEnd: transitionEnd }, target);\n    },\n    scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n    build: function (element, renderState, latestValues, projection, layoutState, options, props) {\n        if (element.isVisible !== undefined) {\n            renderState.style.visibility = element.isVisible\n                ? \"visible\"\n                : \"hidden\";\n        }\n        var isProjectionTranform = projection.isEnabled && layoutState.isHydrated;\n        buildHTMLStyles(renderState, latestValues, projection, layoutState, options, props.transformTemplate, isProjectionTranform ? buildLayoutProjectionTransform : undefined, isProjectionTranform\n            ? buildLayoutProjectionTransformOrigin\n            : undefined);\n    },\n    render: renderHTML,\n};\nvar htmlVisualElement = visualElement(htmlConfig);\n\nexport { getComputedStyle, htmlConfig, htmlVisualElement };\n","import { __assign } from 'tslib';\nimport { visualElement } from '../index.js';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.js';\nimport { htmlConfig } from '../html/visual-element.js';\nimport { buildSVGAttrs } from './utils/build-attrs.js';\nimport { camelToDash } from '../dom/utils/camel-to-dash.js';\nimport { camelCaseAttributes } from './utils/camel-case-attrs.js';\nimport { isTransformProp } from '../html/utils/transform.js';\nimport { renderSVG } from './utils/render.js';\nimport { getDefaultValueType } from '../dom/value-types/defaults.js';\nimport { buildLayoutProjectionTransformOrigin, buildLayoutProjectionTransform } from '../html/utils/build-projection-transform.js';\n\nvar svgVisualElement = visualElement(__assign(__assign({}, htmlConfig), { getBaseTarget: function (props, key) {\n        return props[key];\n    },\n    readValueFromInstance: function (domElement, key) {\n        var _a;\n        if (isTransformProp(key)) {\n            return ((_a = getDefaultValueType(key)) === null || _a === void 0 ? void 0 : _a.default) || 0;\n        }\n        key = !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n        return domElement.getAttribute(key);\n    },\n    scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n    build: function (_element, renderState, latestValues, projection, layoutState, options, props) {\n        var isProjectionTranform = projection.isEnabled && layoutState.isHydrated;\n        buildSVGAttrs(renderState, latestValues, projection, layoutState, options, props.transformTemplate, isProjectionTranform ? buildLayoutProjectionTransform : undefined, isProjectionTranform\n            ? buildLayoutProjectionTransformOrigin\n            : undefined);\n    }, render: renderSVG }));\n\nexport { svgVisualElement };\n","import { htmlVisualElement } from '../html/visual-element.js';\nimport { svgVisualElement } from '../svg/visual-element.js';\nimport { isSVGComponent } from './utils/is-svg-component.js';\n\nvar createDomVisualElement = function (Component, options) {\n    return isSVGComponent(Component)\n        ? svgVisualElement(options, { enableHardwareAcceleration: false })\n        : htmlVisualElement(options, { enableHardwareAcceleration: true });\n};\n\nexport { createDomVisualElement };\n","import { __assign } from 'tslib';\nimport { animations } from '../../motion/features/animations.js';\nimport { gestureAnimations } from '../../motion/features/gestures.js';\nimport { createDomVisualElement } from './create-visual-element.js';\n\n/**\n * @public\n */\nvar domAnimation = __assign(__assign({ renderer: createDomVisualElement }, animations), gestureAnimations);\n\nexport { domAnimation };\n","import { __assign } from 'tslib';\nimport { drag } from '../../motion/features/drag.js';\nimport { layoutAnimations } from '../../motion/features/layout/index.js';\nimport { domAnimation } from './features-animation.js';\n\n/**\n * @public\n */\nvar domMax = __assign(__assign(__assign({}, domAnimation), drag), layoutAnimations);\n\nexport { domMax };\n"]}}